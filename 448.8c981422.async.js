(self.webpackChunkrapex_studio=self.webpackChunkrapex_studio||[]).push([[448],{71938:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return b}});var L=R(28991),z=R(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"},I=F,k=R(27029),D=function(p,y){return z.createElement(k.Z,(0,L.Z)((0,L.Z)({},p),{},{ref:y,icon:I}))};D.displayName="BranchesOutlined";var b=z.forwardRef(D)},25782:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return b}});var L=R(28991),z=R(67294),F={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},I=F,k=R(27029),D=function(p,y){return z.createElement(k.Z,(0,L.Z)((0,L.Z)({},p),{},{ref:y,icon:I}))};D.displayName="CaretRightOutlined";var b=z.forwardRef(D)},19671:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return b}});var L=R(28991),z=R(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},I=F,k=R(27029),D=function(p,y){return z.createElement(k.Z,(0,L.Z)((0,L.Z)({},p),{},{ref:y,icon:I}))};D.displayName="CloudDownloadOutlined";var b=z.forwardRef(D)},75768:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return b}});var L=R(28991),z=R(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 128c-212.1 0-384 171.9-384 384v360c0 13.3 10.7 24 24 24h184c35.3 0 64-28.7 64-64V624c0-35.3-28.7-64-64-64H200v-48c0-172.3 139.7-312 312-312s312 139.7 312 312v48H688c-35.3 0-64 28.7-64 64v208c0 35.3 28.7 64 64 64h184c13.3 0 24-10.7 24-24V512c0-212.1-171.9-384-384-384z"}}]},name:"customer-service",theme:"filled"},I=F,k=R(27029),D=function(p,y){return z.createElement(k.Z,(0,L.Z)((0,L.Z)({},p),{},{ref:y,icon:I}))};D.displayName="CustomerServiceFilled";var b=z.forwardRef(D)},93695:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return b}});var L=R(28991),z=R(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},I=F,k=R(27029),D=function(p,y){return z.createElement(k.Z,(0,L.Z)((0,L.Z)({},p),{},{ref:y,icon:I}))};D.displayName="DeleteFilled";var b=z.forwardRef(D)},48965:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return b}});var L=R(28991),z=R(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"},I=F,k=R(27029),D=function(p,y){return z.createElement(k.Z,(0,L.Z)((0,L.Z)({},p),{},{ref:y,icon:I}))};D.displayName="DeploymentUnitOutlined";var b=z.forwardRef(D)},62876:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return b}});var L=R(28991),z=R(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M855 160.1l-189.2 23.5c-6.6.8-9.3 8.8-4.7 13.5l54.7 54.7-153.5 153.5a8.03 8.03 0 000 11.3l45.1 45.1c3.1 3.1 8.2 3.1 11.3 0l153.6-153.6 54.7 54.7a7.94 7.94 0 0013.5-4.7L863.9 169a7.9 7.9 0 00-8.9-8.9zM416.6 562.3a8.03 8.03 0 00-11.3 0L251.8 715.9l-54.7-54.7a7.94 7.94 0 00-13.5 4.7L160.1 855c-.6 5.2 3.7 9.5 8.9 8.9l189.2-23.5c6.6-.8 9.3-8.8 4.7-13.5l-54.7-54.7 153.6-153.6c3.1-3.1 3.1-8.2 0-11.3l-45.2-45z"}}]},name:"expand-alt",theme:"outlined"},I=F,k=R(27029),D=function(p,y){return z.createElement(k.Z,(0,L.Z)((0,L.Z)({},p),{},{ref:y,icon:I}))};D.displayName="ExpandAltOutlined";var b=z.forwardRef(D)},82738:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return b}});var L=R(28991),z=R(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 100c-61.8 0-112 50.2-112 112 0 47.7 29.9 88.5 72 104.6v27.6L512 601.4 312 344.2v-27.6c42.1-16.1 72-56.9 72-104.6 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 50.6 33.8 93.5 80 107.3v34.4c0 9.7 3.3 19.3 9.3 27L476 672.3v33.6c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-33.6l226.7-291.6c6-7.7 9.3-17.3 9.3-27v-34.4c46.2-13.8 80-56.7 80-107.3 0-61.8-50.2-112-112-112zM224 212a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm336 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm192-552a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"fork",theme:"outlined"},I=F,k=R(27029),D=function(p,y){return z.createElement(k.Z,(0,L.Z)((0,L.Z)({},p),{},{ref:y,icon:I}))};D.displayName="ForkOutlined";var b=z.forwardRef(D)},24557:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return b}});var L=R(28991),z=R(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.4 800.9c.2-.3.5-.6.7-.9C920.6 722.1 960 621.7 960 512s-39.4-210.1-104.8-288c-.2-.3-.5-.5-.7-.8-1.1-1.3-2.1-2.5-3.2-3.7-.4-.5-.8-.9-1.2-1.4l-4.1-4.7-.1-.1c-1.5-1.7-3.1-3.4-4.6-5.1l-.1-.1c-3.2-3.4-6.4-6.8-9.7-10.1l-.1-.1-4.8-4.8-.3-.3c-1.5-1.5-3-2.9-4.5-4.3-.5-.5-1-1-1.6-1.5-1-1-2-1.9-3-2.8-.3-.3-.7-.6-1-1C736.4 109.2 629.5 64 512 64s-224.4 45.2-304.3 119.2c-.3.3-.7.6-1 1-1 .9-2 1.9-3 2.9-.5.5-1 1-1.6 1.5-1.5 1.4-3 2.9-4.5 4.3l-.3.3-4.8 4.8-.1.1c-3.3 3.3-6.5 6.7-9.7 10.1l-.1.1c-1.6 1.7-3.1 3.4-4.6 5.1l-.1.1c-1.4 1.5-2.8 3.1-4.1 4.7-.4.5-.8.9-1.2 1.4-1.1 1.2-2.1 2.5-3.2 3.7-.2.3-.5.5-.7.8C103.4 301.9 64 402.3 64 512s39.4 210.1 104.8 288c.2.3.5.6.7.9l3.1 3.7c.4.5.8.9 1.2 1.4l4.1 4.7c0 .1.1.1.1.2 1.5 1.7 3 3.4 4.6 5l.1.1c3.2 3.4 6.4 6.8 9.6 10.1l.1.1c1.6 1.6 3.1 3.2 4.7 4.7l.3.3c3.3 3.3 6.7 6.5 10.1 9.6 80.1 74 187 119.2 304.5 119.2s224.4-45.2 304.3-119.2a300 300 0 0010-9.6l.3-.3c1.6-1.6 3.2-3.1 4.7-4.7l.1-.1c3.3-3.3 6.5-6.7 9.6-10.1l.1-.1c1.5-1.7 3.1-3.3 4.6-5 0-.1.1-.1.1-.2 1.4-1.5 2.8-3.1 4.1-4.7.4-.5.8-.9 1.2-1.4a99 99 0 003.3-3.7zm4.1-142.6c-13.8 32.6-32 62.8-54.2 90.2a444.07 444.07 0 00-81.5-55.9c11.6-46.9 18.8-98.4 20.7-152.6H887c-3 40.9-12.6 80.6-28.5 118.3zM887 484H743.5c-1.9-54.2-9.1-105.7-20.7-152.6 29.3-15.6 56.6-34.4 81.5-55.9A373.86 373.86 0 01887 484zM658.3 165.5c39.7 16.8 75.8 40 107.6 69.2a394.72 394.72 0 01-59.4 41.8c-15.7-45-35.8-84.1-59.2-115.4 3.7 1.4 7.4 2.9 11 4.4zm-90.6 700.6c-9.2 7.2-18.4 12.7-27.7 16.4V697a389.1 389.1 0 01115.7 26.2c-8.3 24.6-17.9 47.3-29 67.8-17.4 32.4-37.8 58.3-59 75.1zm59-633.1c11 20.6 20.7 43.3 29 67.8A389.1 389.1 0 01540 327V141.6c9.2 3.7 18.5 9.1 27.7 16.4 21.2 16.7 41.6 42.6 59 75zM540 640.9V540h147.5c-1.6 44.2-7.1 87.1-16.3 127.8l-.3 1.2A445.02 445.02 0 00540 640.9zm0-156.9V383.1c45.8-2.8 89.8-12.5 130.9-28.1l.3 1.2c9.2 40.7 14.7 83.5 16.3 127.8H540zm-56 56v100.9c-45.8 2.8-89.8 12.5-130.9 28.1l-.3-1.2c-9.2-40.7-14.7-83.5-16.3-127.8H484zm-147.5-56c1.6-44.2 7.1-87.1 16.3-127.8l.3-1.2c41.1 15.6 85 25.3 130.9 28.1V484H336.5zM484 697v185.4c-9.2-3.7-18.5-9.1-27.7-16.4-21.2-16.7-41.7-42.7-59.1-75.1-11-20.6-20.7-43.3-29-67.8 37.2-14.6 75.9-23.3 115.8-26.1zm0-370a389.1 389.1 0 01-115.7-26.2c8.3-24.6 17.9-47.3 29-67.8 17.4-32.4 37.8-58.4 59.1-75.1 9.2-7.2 18.4-12.7 27.7-16.4V327zM365.7 165.5c3.7-1.5 7.3-3 11-4.4-23.4 31.3-43.5 70.4-59.2 115.4-21-12-40.9-26-59.4-41.8 31.8-29.2 67.9-52.4 107.6-69.2zM165.5 365.7c13.8-32.6 32-62.8 54.2-90.2 24.9 21.5 52.2 40.3 81.5 55.9-11.6 46.9-18.8 98.4-20.7 152.6H137c3-40.9 12.6-80.6 28.5-118.3zM137 540h143.5c1.9 54.2 9.1 105.7 20.7 152.6a444.07 444.07 0 00-81.5 55.9A373.86 373.86 0 01137 540zm228.7 318.5c-39.7-16.8-75.8-40-107.6-69.2 18.5-15.8 38.4-29.7 59.4-41.8 15.7 45 35.8 84.1 59.2 115.4-3.7-1.4-7.4-2.9-11-4.4zm292.6 0c-3.7 1.5-7.3 3-11 4.4 23.4-31.3 43.5-70.4 59.2-115.4 21 12 40.9 26 59.4 41.8a373.81 373.81 0 01-107.6 69.2z"}}]},name:"global",theme:"outlined"},I=F,k=R(27029),D=function(p,y){return z.createElement(k.Z,(0,L.Z)((0,L.Z)({},p),{},{ref:y,icon:I}))};D.displayName="GlobalOutlined";var b=z.forwardRef(D)},16360:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return b}});var L=R(28991),z=R(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M843.5 737.4c-12.4-75.2-79.2-129.1-155.3-125.4S550.9 676 546 752c-153.5-4.8-208-40.7-199.1-113.7 3.3-27.3 19.8-41.9 50.1-49 18.4-4.3 38.8-4.9 57.3-3.2 1.7.2 3.5.3 5.2.5 11.3 2.7 22.8 5 34.3 6.8 34.1 5.6 68.8 8.4 101.8 6.6 92.8-5 156-45.9 159.2-132.7 3.1-84.1-54.7-143.7-147.9-183.6-29.9-12.8-61.6-22.7-93.3-30.2-14.3-3.4-26.3-5.7-35.2-7.2-7.9-75.9-71.5-133.8-147.8-134.4-76.3-.6-140.9 56.1-150.1 131.9s40 146.3 114.2 163.9c74.2 17.6 149.9-23.3 175.7-95.1 9.4 1.7 18.7 3.6 28 5.8 28.2 6.6 56.4 15.4 82.4 26.6 70.7 30.2 109.3 70.1 107.5 119.9-1.6 44.6-33.6 65.2-96.2 68.6-27.5 1.5-57.6-.9-87.3-5.8-8.3-1.4-15.9-2.8-22.6-4.3-3.9-.8-6.6-1.5-7.8-1.8l-3.1-.6c-2.2-.3-5.9-.8-10.7-1.3-25-2.3-52.1-1.5-78.5 4.6-55.2 12.9-93.9 47.2-101.1 105.8-15.7 126.2 78.6 184.7 276 188.9 29.1 70.4 106.4 107.9 179.6 87 73.3-20.9 119.3-93.4 106.9-168.6zM329.1 345.2a83.3 83.3 0 11.01-166.61 83.3 83.3 0 01-.01 166.61zM695.6 845a83.3 83.3 0 11.01-166.61A83.3 83.3 0 01695.6 845z"}}]},name:"node-index",theme:"outlined"},I=F,k=R(27029),D=function(p,y){return z.createElement(k.Z,(0,L.Z)((0,L.Z)({},p),{},{ref:y,icon:I}))};D.displayName="NodeIndexOutlined";var b=z.forwardRef(D)},39588:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return b}});var L=R(28991),z=R(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M926.8 397.1l-396-288a31.81 31.81 0 00-37.6 0l-396 288a31.99 31.99 0 00-11.6 35.8l151.3 466a32 32 0 0030.4 22.1h489.5c13.9 0 26.1-8.9 30.4-22.1l151.3-466c4.2-13.2-.5-27.6-11.7-35.8zM838.6 417l-98.5 32-200-144.7V199.9L838.6 417zM466 567.2l-89.1 122.3-55.2-169.2L466 567.2zm-116.3-96.8L484 373.3v140.8l-134.3-43.7zM512 599.2l93.9 128.9H418.1L512 599.2zm28.1-225.9l134.2 97.1L540.1 514V373.3zM558 567.2l144.3-46.9-55.2 169.2L558 567.2zm-74-367.3v104.4L283.9 449l-98.5-32L484 199.9zM169.3 470.8l86.5 28.1 80.4 246.4-53.8 73.9-113.1-348.4zM327.1 853l50.3-69h269.3l50.3 69H327.1zm414.5-33.8l-53.8-73.9 80.4-246.4 86.5-28.1-113.1 348.4z"}}]},name:"radar-chart",theme:"outlined"},I=F,k=R(27029),D=function(p,y){return z.createElement(k.Z,(0,L.Z)((0,L.Z)({},p),{},{ref:y,icon:I}))};D.displayName="RadarChartOutlined";var b=z.forwardRef(D)},28052:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return b}});var L=R(28991),z=R(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M688 240c-138 0-252 102.8-269.6 236H249a95.92 95.92 0 00-89-60c-53 0-96 43-96 96s43 96 96 96c40.3 0 74.8-24.8 89-60h169.3C436 681.2 550 784 688 784c150.2 0 272-121.8 272-272S838.2 240 688 240zm128 298c0 4.4-3.6 8-8 8h-86v86c0 4.4-3.6 8-8 8h-52c-4.4 0-8-3.6-8-8v-86h-86c-4.4 0-8-3.6-8-8v-52c0-4.4 3.6-8 8-8h86v-86c0-4.4 3.6-8 8-8h52c4.4 0 8 3.6 8 8v86h86c4.4 0 8 3.6 8 8v52z"}}]},name:"subnode",theme:"outlined"},I=F,k=R(27029),D=function(p,y){return z.createElement(k.Z,(0,L.Z)((0,L.Z)({},p),{},{ref:y,icon:I}))};D.displayName="SubnodeOutlined";var b=z.forwardRef(D)},62238:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var R=function(F,I){var k=F.nodes,D=F.edges,b=[],E={};if(!k)throw new Error("invalid nodes data!");return k&&k.forEach(function(p,y){E[p.id]=y;var g=[];b.push(g)}),D&&D.forEach(function(p){var y=p.source,g=p.target,T=E[y],x=E[g];!T&&T!==0||!x&&x!==0||(b[T][x]=1,I||(b[x][T]=1))}),b},L=R;G.default=L},10369:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"GADDIAsync",{enumerable:!0,get:function(){return L.GADDIAsync}}),Object.defineProperty(G,"connectedComponentAsync",{enumerable:!0,get:function(){return L.connectedComponentAsync}}),G.default=void 0,Object.defineProperty(G,"detectAllCyclesAsync",{enumerable:!0,get:function(){return L.detectAllCyclesAsync}}),Object.defineProperty(G,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return L.detectAllDirectedCycleAsync}}),Object.defineProperty(G,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return L.detectAllUndirectedCycleAsync}}),Object.defineProperty(G,"detectCycleAsync",{enumerable:!0,get:function(){return L.detectCycleAsync}}),G.detectDirectedCycleAsync=void 0,Object.defineProperty(G,"dijkstraAsync",{enumerable:!0,get:function(){return L.dijkstraAsync}}),Object.defineProperty(G,"findAllPathAsync",{enumerable:!0,get:function(){return L.findAllPathAsync}}),Object.defineProperty(G,"findShortestPathAsync",{enumerable:!0,get:function(){return L.findShortestPathAsync}}),Object.defineProperty(G,"floydWarshallAsync",{enumerable:!0,get:function(){return L.floydWarshallAsync}}),Object.defineProperty(G,"getAdjMatrixAsync",{enumerable:!0,get:function(){return L.getAdjMatrixAsync}}),Object.defineProperty(G,"getDegreeAsync",{enumerable:!0,get:function(){return L.getDegreeAsync}}),Object.defineProperty(G,"getInDegreeAsync",{enumerable:!0,get:function(){return L.getInDegreeAsync}}),Object.defineProperty(G,"getNeighborsAsync",{enumerable:!0,get:function(){return L.getNeighborsAsync}}),Object.defineProperty(G,"getOutDegreeAsync",{enumerable:!0,get:function(){return L.getOutDegreeAsync}}),Object.defineProperty(G,"labelPropagationAsync",{enumerable:!0,get:function(){return L.labelPropagationAsync}}),Object.defineProperty(G,"louvainAsync",{enumerable:!0,get:function(){return L.louvainAsync}}),Object.defineProperty(G,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return L.minimumSpanningTreeAsync}}),Object.defineProperty(G,"pageRankAsync",{enumerable:!0,get:function(){return L.pageRankAsync}});var L=R(30485),z=L.detectCycleAsync;G.detectDirectedCycleAsync=z;var F={getAdjMatrixAsync:L.getAdjMatrixAsync,connectedComponentAsync:L.connectedComponentAsync,getDegreeAsync:L.getDegreeAsync,getInDegreeAsync:L.getInDegreeAsync,getOutDegreeAsync:L.getOutDegreeAsync,detectCycleAsync:L.detectCycleAsync,detectDirectedCycleAsync:z,detectAllCyclesAsync:L.detectAllCyclesAsync,detectAllDirectedCycleAsync:L.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:L.detectAllUndirectedCycleAsync,dijkstraAsync:L.dijkstraAsync,findAllPathAsync:L.findAllPathAsync,findShortestPathAsync:L.findShortestPathAsync,floydWarshallAsync:L.floydWarshallAsync,labelPropagationAsync:L.labelPropagationAsync,louvainAsync:L.louvainAsync,minimumSpanningTreeAsync:L.minimumSpanningTreeAsync,pageRankAsync:L.pageRankAsync,getNeighborsAsync:L.getNeighborsAsync,GADDIAsync:L.GADDIAsync};G.default=F},83764:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=F(R(93026)),z=R(70643);function F(b){return b&&b.__esModule?b:{default:b}}function I(b){b===void 0&&(b={});var E=b,p=function(){},y=function(){var g={};return function(T){var x=T.next,S=x;return g[S]?!1:(g[S]=!0,!0)}}();return E.allowTraversal=b.allowTraversal||y,E.enter=b.enter||p,E.leave=b.leave||p,E}var k=function(E,p,y,g){g===void 0&&(g=!0);var T=I(y),x=new L.default,S=E.edges,N=S===void 0?[]:S;x.enqueue(p);for(var m="",d=function(){var Q=x.dequeue();T.enter({current:Q,previous:m}),(0,z.getNeighbors)(Q,N,g?"target":void 0).forEach(function(j){T.allowTraversal({previous:m,current:Q,next:j})&&x.enqueue(j)}),T.leave({current:Q,previous:m}),m=Q};!x.isEmpty();)d()},D=k;G.default=D},59527:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=I,G.detectStrongConnectComponents=G.detectConnectedComponents=void 0;var L=R(70643),z=function(D){for(var b=D.nodes,E=b===void 0?[]:b,p=D.edges,y=p===void 0?[]:p,g=[],T={},x=[],S=function V(Q){x.push(Q),T[Q.id]=!0;for(var j=(0,L.getNeighbors)(Q.id,y),X=function(rt){var tt=j[rt];if(!T[tt]){var nt=E.filter(function(lt){return lt.id===tt});nt.length>0&&V(nt[0])}},K=0;K<j.length;++K)X(K)},N=0;N<E.length;N++){var m=E[N];if(!T[m.id]){S(m);for(var d=[];x.length>0;)d.push(x.pop());g.push(d)}}return g};G.detectConnectedComponents=z;var F=function(D){for(var b=D.nodes,E=b===void 0?[]:b,p=D.edges,y=p===void 0?[]:p,g=[],T={},x={},S={},N=[],m=0,d=function X(K){x[K.id]=m,S[K.id]=m,m+=1,g.push(K),T[K.id]=!0;for(var J=(0,L.getNeighbors)(K.id,y,"target").filter(function(xt){return E.map(function(jt){return jt.id}).indexOf(xt)>-1}),rt=function(jt){var Dt=J[jt];if(!x[Dt]&&x[Dt]!==0){var Zt=E.filter(function(Vt){return Vt.id===Dt});Zt.length>0&&X(Zt[0]),S[K.id]=Math.min(S[K.id],S[Dt])}else T[Dt]&&(S[K.id]=Math.min(S[K.id],x[Dt]))},tt=0;tt<J.length;tt++)rt(tt);if(S[K.id]===x[K.id]){for(var nt=[];g.length>0;){var lt=g.pop();if(T[lt.id]=!1,nt.push(lt),lt===K)break}nt.length>0&&N.push(nt)}},V=0,Q=E;V<Q.length;V++){var j=Q[V];!x[j.id]&&x[j.id]!==0&&d(j)}return N};G.detectStrongConnectComponents=F;function I(k,D){return D?F(k):z(k)}},92935:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.secondReg=G.dateReg=void 0;var R=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;G.secondReg=R;var L=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;G.dateReg=L},82556:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getOutDegree=G.getInDegree=G.default=void 0;var R=function(k){var D={},b=k.nodes,E=b===void 0?[]:b,p=k.edges,y=p===void 0?[]:p;return E.forEach(function(g){D[g.id]={degree:0,inDegree:0,outDegree:0}}),y.forEach(function(g){D[g.source].degree++,D[g.source].outDegree++,D[g.target].degree++,D[g.target].inDegree++}),D},L=R;G.default=L;var z=function(k,D){var b=R(k);return b[D]?R(k)[D].inDegree:0};G.getInDegree=z;var F=function(k,D){var b=R(k);return b[D]?R(k)[D].outDegree:0};G.getOutDegree=F},94282:function(Mr,G,R){"use strict";function L(x){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},L(x)}Object.defineProperty(G,"__esModule",{value:!0}),G.detectAllUndirectedCycle=G.detectAllDirectedCycle=G.detectAllCycles=G.default=void 0;var z=b(R(45891)),F=D(R(59527)),I=R(70643);function k(x){if(typeof WeakMap!="function")return null;var S=new WeakMap,N=new WeakMap;return(k=function(d){return d?N:S})(x)}function D(x,S){if(!S&&x&&x.__esModule)return x;if(x===null||L(x)!=="object"&&typeof x!="function")return{default:x};var N=k(S);if(N&&N.has(x))return N.get(x);var m={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in x)if(V!=="default"&&Object.prototype.hasOwnProperty.call(x,V)){var Q=d?Object.getOwnPropertyDescriptor(x,V):null;Q&&(Q.get||Q.set)?Object.defineProperty(m,V,Q):m[V]=x[V]}return m.default=x,N&&N.set(x,m),m}function b(x){return x&&x.__esModule?x:{default:x}}var E=function(S){var N=null,m=S.nodes,d=m===void 0?[]:m,V={},Q={},j={},X={};d.forEach(function(rt){Q[rt.id]=rt});for(var K={enter:function(tt){var nt=tt.current,lt=tt.previous;if(j[nt]){N={};for(var xt=nt,jt=lt;jt!==nt;)N[xt]=jt,xt=jt,jt=V[jt];N[xt]=jt}else j[nt]=nt,delete Q[nt],V[nt]=lt},leave:function(tt){var nt=tt.current;X[nt]=nt,delete j[nt]},allowTraversal:function(tt){var nt=tt.next;return N?!1:!X[nt]}};Object.keys(Q).length;){var J=Object.keys(Q)[0];(0,z.default)(S,J,K)}return N},p=function(S,N,m){var d,V;m===void 0&&(m=!0);for(var Q=[],j=(0,F.default)(S,!1),X=0,K=j;X<K.length;X++){var J=K[X];if(!!J.length)for(var rt=J[0],tt=rt.id,nt=[rt],lt=(d={},d[tt]=rt,d),xt=(V={},V[tt]=new Set,V);nt.length>0;)for(var jt=nt.pop(),Dt=jt.id,Zt=(0,I.getNeighbors)(Dt,S.edges),Vt=function(Ot){var ee,Re=Zt[Ot],me=S.nodes.find(function(we){return we.id===Re});if(Re===Dt)Q.push((ee={},ee[Re]=jt,ee));else if(!(Re in xt))lt[Re]=jt,nt.push(me),xt[Re]=new Set([jt]);else if(!xt[Dt].has(me)){for(var Ae=!0,Be=[me,jt],Ke=lt[Dt];xt[Re].size&&!xt[Re].has(Ke)&&(Be.push(Ke),Ke!==lt[Ke.id]);)Ke=lt[Ke.id];if(Be.push(Ke),N&&m?(Ae=!1,Be.findIndex(function(we){return N.indexOf(we.id)>-1})>-1&&(Ae=!0)):N&&!m&&Be.findIndex(function(we){return N.indexOf(we.id)>-1})>-1&&(Ae=!1),Ae){for(var $t={},ce=1;ce<Be.length;ce+=1)$t[Be[ce-1].id]=Be[ce];Be.length&&($t[Be[Be.length-1].id]=Be[0]),Q.push($t)}xt[Re].add(jt)}},ue=0;ue<Zt.length;ue+=1)Vt(ue)}return Q};G.detectAllUndirectedCycle=p;var y=function(S,N,m){m===void 0&&(m=!0);for(var d=[],V=new Set,Q=[],j=[],X={},K={},J=function(Ke){for(var $t=[Ke];$t.length>0;){var ce=$t.pop();V.has(ce)&&(V.delete(ce),Q[ce.id].forEach(function(we){$t.push(we)}),Q[ce.id].clear())}},rt=function Be(Ke,$t,ce){var we=!1;if(N&&m===!1&&N.indexOf(Ke.id)>-1)return we;d.push(Ke),V.add(Ke);for(var Pe=ce[Ke.id],ye=0;ye<Pe.length;ye+=1){var Bt=X[Pe[ye]];if(Bt===$t){for(var re={},Ee=1;Ee<d.length;Ee+=1)re[d[Ee-1].id]=d[Ee];d.length&&(re[d[d.length-1].id]=d[0]),j.push(re),we=!0}else V.has(Bt)||Be(Bt,$t,ce)&&(we=!0)}if(we)J(Ke);else for(var ye=0;ye<Pe.length;ye+=1){var Bt=X[Pe[ye]];Q[Bt.id].has(Ke)||Q[Bt.id].add(Ke)}return d.pop(),we},tt=S.nodes,nt=tt===void 0?[]:tt,lt=0;lt<nt.length;lt+=1){var xt=nt[lt],jt=xt.id;K[jt]=lt,X[lt]=xt}if(N&&m)for(var Dt=function(Ke){var $t=N[Ke];K[nt[Ke].id]=K[$t],K[$t]=0,X[0]=nt.find(function(ce){return ce.id===$t}),X[K[nt[Ke].id]]=nt[Ke]},lt=0;lt<N.length;lt++)Dt(lt);for(var Zt=function(Ke){for(var $t,ce,we=Infinity,Pe=0;Pe<Ke.length;Pe+=1)for(var ye=Ke[Pe],Bt=0;Bt<ye.length;Bt++){var re=K[ye[Bt].id];re<we&&(we=re,ce=Pe)}for(var Ee=Ke[ce],It=[],Pe=0;Pe<Ee.length;Pe+=1){var Et=Ee[Pe];It[Et.id]=[];for(var Wt=0,fe=(0,I.getNeighbors)(Et.id,S.edges,"target").filter(function(Lt){return Ee.map(function(Ne){return Ne.id}).indexOf(Lt)>-1});Wt<fe.length;Wt++){var Fe=fe[Wt];Fe===Et.id&&!(m===!1&&N.indexOf(Et.id)>-1)?j.push(($t={},$t[Et.id]=Et,$t)):It[Et.id].push(K[Fe])}}return{component:Ee,adjList:It,minIdx:we}},Vt=0;Vt<nt.length;){var ue=nt.filter(function(Be){return K[Be.id]>=Vt}),dt=(0,F.detectStrongConnectComponents)({nodes:ue,edges:S.edges}).filter(function(Be){return Be.length>1});if(dt.length===0)break;var Ot=Zt(dt),ee=Ot.minIdx,Re=Ot.adjList,me=Ot.component;if(me.length>1){me.forEach(function(Be){Q[Be.id]=new Set});var Ae=X[ee];if(N&&m&&N.indexOf(Ae.id)===-1)return j;rt(Ae,Ae,Re),Vt=ee+1}else break}return j};G.detectAllDirectedCycle=y;var g=function(S,N,m,d){return d===void 0&&(d=!0),N?y(S,m,d):p(S,m,d)};G.detectAllCycles=g;var T=E;G.default=T},45891:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=I;var L=R(70643);function z(k){k===void 0&&(k={});var D=k,b=function(){},E=function(){var p={};return function(y){var g=y.next;return p[g]?!1:(p[g]=!0,!0)}}();return D.allowTraversal=k.allowTraversal||E,D.enter=k.enter||b,D.leave=k.leave||b,D}function F(k,D,b,E){E.enter({current:D,previous:b});var p=k.edges,y=p===void 0?[]:p;(0,L.getNeighbors)(D,y,"target").forEach(function(g){E.allowTraversal({previous:b,current:D,next:g})&&F(k,g,D,E)}),E.leave({current:D,previous:b})}function I(k,D,b){F(k,D,"",z(b))}},78089:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=R(70655),z=R(49242),F=R(70643),I=function(p,y,g){for(var T=Infinity,x,S=0;S<y.length;S++){var N=y[S].id;!g[N]&&p[N]<=T&&(T=p[N],x=y[S])}return x},k=function(p,y,g,T){var x=p.nodes,S=x===void 0?[]:x,N=p.edges,m=N===void 0?[]:N,d=[],V={},Q={},j={};S.forEach(function(lt,xt){var jt=lt.id;d.push(jt),Q[jt]=Infinity,jt===y&&(Q[jt]=0)});for(var X=S.length,K=function(xt){var jt=I(Q,S,V),Dt=jt.id;if(V[Dt]=!0,Q[Dt]===Infinity)return"continue";var Zt=[];g?Zt=(0,F.getOutEdgesNodeId)(Dt,m):Zt=(0,F.getEdgesByNodeId)(Dt,m),Zt.forEach(function(Vt){var ue=Vt.target,dt=Vt.source,Ot=ue===Dt?dt:ue,ee=T&&Vt[T]?Vt[T]:1;Q[Ot]>Q[jt.id]+ee?(Q[Ot]=Q[jt.id]+ee,j[Ot]=[jt.id]):Q[Ot]===Q[jt.id]+ee&&j[Ot].push(jt.id)})},J=0;J<X;J++)K(J);j[y]=[y];var rt={};for(var tt in Q)Q[tt]!==Infinity&&b(y,tt,j,rt);var nt={};for(var tt in rt)nt[tt]=rt[tt][0];return{length:Q,path:nt,allPath:rt}},D=k;G.default=D;function b(E,p,y,g){if(E===p)return[E];if(g[p])return g[p];for(var T=[],x=0,S=y[p];x<S.length;x++){var N=S[x],m=b(E,N,y,g);if(!m)return;for(var d=0,V=m;d<V.length;d++){var Q=V[d];(0,z.isArray)(Q)?T.push((0,L.__spreadArray)((0,L.__spreadArray)([],Q,!0),[p],!1)):T.push([Q,p])}}return g[p]=T,g[p]}},41727:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.findShortestPath=G.findAllPath=void 0;var L=F(R(78089)),z=R(70643);function F(D){return D&&D.__esModule?D:{default:D}}var I=function(b,E,p,y,g){var T=(0,L.default)(b,E,y,g),x=T.length,S=T.path,N=T.allPath;return{length:x[p],path:S[p],allPath:N[p]}};G.findShortestPath=I;var k=function(b,E,p,y){var g;if(E===p)return[[E]];var T=b.edges,x=T===void 0?[]:T,S=[E],N=(g={},g[E]=!0,g),m=[],d=[],V=y?(0,z.getNeighbors)(E,x,"target"):(0,z.getNeighbors)(E,x);for(m.push(V);S.length>0&&m.length>0;){var Q=m[m.length-1];if(Q.length){var j=Q.shift();j&&(S.push(j),N[j]=!0,V=y?(0,z.getNeighbors)(j,x,"target"):(0,z.getNeighbors)(j,x),m.push(V.filter(function(J){return!N[J]})))}else{var X=S.pop();N[X]=!1,m.pop();continue}if(S[S.length-1]===p){var K=S.map(function(rt){return rt});d.push(K);var X=S.pop();N[X]=!1,m.pop()}}return d};G.findAllPath=k},75033:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=z(R(62238));function z(k){return k&&k.__esModule?k:{default:k}}var F=function(D,b){for(var E=(0,L.default)(D,b),p=[],y=E.length,g=0;g<y;g+=1){p[g]=[];for(var T=0;T<y;T+=1)g===T?p[g][T]=0:E[g][T]===0||!E[g][T]?p[g][T]=Infinity:p[g][T]=E[g][T]}for(var x=0;x<y;x+=1)for(var g=0;g<y;g+=1)for(var T=0;T<y;T+=1)p[g][T]>p[g][x]+p[x][T]&&(p[g][T]=p[g][x]+p[x][T]);return p},I=F;G.default=I},21146:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=R(49242),z=R(68575),F=function(){function T(x,S,N,m,d){this.fromNode=x,this.toNode=S,this.nodeEdgeNodeLabel={nodeLabel1:N||z.VACANT_NODE_LABEL,edgeLabel:m||z.VACANT_EDGE_LABEL,nodeLabel2:d||z.VACANT_NODE_LABEL}}return T.prototype.equalTo=function(x){return this.fromNode===x.formNode&&this.toNode===x.toNode&&this.nodeEdgeNodeLabel===x.nodeEdgeNodeLabel},T.prototype.notEqualTo=function(x){return!this.equalTo(x)},T}(),I=function(){function T(){this.rmpath=[],this.dfsEdgeList=[]}return T.prototype.equalTo=function(x){var S=this.dfsEdgeList.length,N=x.length;if(S!==N)return!1;for(var m=0;m<S;m++)if(this.dfsEdgeList[m]!==x[m])return!1;return!0},T.prototype.notEqualTo=function(x){return!this.equalTo(x)},T.prototype.pushBack=function(x,S,N,m,d){return this.dfsEdgeList.push(new F(x,S,N,m,d)),this.dfsEdgeList},T.prototype.toGraph=function(x,S){x===void 0&&(x=z.VACANT_GRAPH_ID),S===void 0&&(S=!1);var N=new z.Graph(x,!0,S);return this.dfsEdgeList.forEach(function(m){var d=m.fromNode,V=m.toNode,Q=m.nodeEdgeNodeLabel,j=Q.nodeLabel1,X=Q.edgeLabel,K=Q.nodeLabel2;j!==z.VACANT_NODE_LABEL&&N.addNode(d,j),K!==z.VACANT_NODE_LABEL&&N.addNode(V,K),j!==z.VACANT_NODE_LABEL&&K!==j&&N.addEdge(void 0,d,V,X)}),N},T.prototype.buildRmpath=function(){this.rmpath=[];for(var x=void 0,S=this.dfsEdgeList.length,N=S-1;N>=0;N--){var m=this.dfsEdgeList[N],d=m.fromNode,V=m.toNode;d<V&&(x===void 0||V===x)&&(this.rmpath.push(N),x=d)}return this.rmpath},T.prototype.getNodeNum=function(){var x={};return this.dfsEdgeList.forEach(function(S){x[S.fromNode]||(x[S.fromNode]=!0),x[S.toNode]||(x[S.toNode]=!0)}),Object.keys(x).length},T}(),k=function(){function T(x){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!x){for(;x;){var S=x.edge;this.edges.push(S),this.nodesUsed[S.from]=1,this.nodesUsed[S.to]=1,this.edgesUsed[S.id]=1,x=x.preNode}this.edges=this.edges.reverse()}}return T.prototype.hasNode=function(x){return this.nodesUsed[x.id]===1},T.prototype.hasEdge=function(x){return this.edgesUsed[x.id]===1},T}(),D=function(){function T(x){var S=x.graphs,N=x.minSupport,m=N===void 0?2:N,d=x.minNodeNum,V=d===void 0?1:d,Q=x.maxNodeNum,j=Q===void 0?4:Q,X=x.top,K=X===void 0?10:X,J=x.directed,rt=J===void 0?!1:J,tt=x.verbose,nt=tt===void 0?!1:tt;this.graphs=S,this.dfsCode=new I,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=m,this.top=K,this.directed=rt,this.counter=0,this.maxNodeNum=j,this.minNodeNum=V,this.verbose=nt,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return T.prototype.findForwardRootEdges=function(x,S){var N=this,m=[],d=x.nodeMap;return S.edges.forEach(function(V){(N.directed||S.label<=d[V.to].label)&&m.push(V)}),m},T.prototype.findBackwardEdge=function(x,S,N,m){if(!this.directed&&S===N)return null;for(var d=x.nodeMap,V=d[N.to],Q=V.edges,j=Q.length,X=0;X<j;X++){var K=Q[X];if(!(m.hasEdge(K)||K.to!==S.from)){if(this.directed){if(d[S.from].label<d[N.to].label||d[S.from].label===d[N.to].label&&S.label<=K.label)return K}else if(S.label<K.label||S.label===K.label&&d[S.to].label<=d[N.to].label)return K}}return null},T.prototype.findForwardPureEdges=function(x,S,N,m){for(var d=[],V=S.to,Q=x.nodeMap[V].edges,j=Q.length,X=0;X<j;X++){var K=Q[X],J=x.nodeMap[K.to];N<=J.label&&!m.hasNode(J)&&d.push(K)}return d},T.prototype.findForwardRmpathEdges=function(x,S,N,m){for(var d=[],V=x.nodeMap,Q=V[S.to].label,j=V[S.from],X=j.edges,K=X.length,J=0;J<K;J++){var rt=X[J],tt=V[rt.to].label;S.to===rt.to||N>tt||m.hasNode(V[rt.to])||(S.label<rt.label||S.label===rt.label&&Q<=tt)&&d.push(rt)}return d},T.prototype.getSupport=function(x){var S={};return x.forEach(function(N){S[N.graphId]||(S[N.graphId]=!0)}),Object.keys(S).length},T.prototype.findMinLabel=function(x){var S=void 0;return Object.keys(x).forEach(function(N){var m=x[N],d=m.nodeLabel1,V=m.edgeLabel,Q=m.nodeLabel2;if(!S){S={nodeLabel1:d,edgeLabel:V,nodeLabel2:Q};return}(d<S.nodeLabel1||d===S.nodeLabel1&&V<S.edgeLabel||d===S.nodeLabel1&&V===S.edgeLabel&&Q<S.nodeLabel2)&&(S={nodeLabel1:d,edgeLabel:V,nodeLabel2:Q})}),S},T.prototype.isMin=function(){var x=this,S=this.dfsCode;if(this.verbose&&console.log("isMin checking",S),S.dfsEdgeList.length===1)return!0;var N=this.directed,m=S.toGraph(z.VACANT_GRAPH_ID,N),d=m.nodeMap,V=new I,Q={};m.nodes.forEach(function(J){var rt=x.findForwardRootEdges(m,J);rt.forEach(function(tt){var nt=d[tt.to],lt="".concat(J.label,"-").concat(tt.label,"-").concat(nt.label);Q[lt]||(Q[lt]={projected:[],nodeLabel1:J.label,edgeLabel:tt.label,nodeLabel2:nt.label});var xt={graphId:m.id,edge:tt,preNode:null};Q[lt].projected.push(xt)})});var j=this.findMinLabel(Q);if(!!j){V.dfsEdgeList.push(new F(0,1,j.nodeLabel1,j.edgeLabel,j.nodeLabel2));var X=function J(rt){for(var tt=V.buildRmpath(),nt=V.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,lt=V.dfsEdgeList[tt[0]].toNode,xt={},jt=!1,Dt=0,Zt=N?-1:0,Vt=function(Pe){if(jt)return"break";rt.forEach(function(ye){var Bt=new k(ye),re=x.findBackwardEdge(m,Bt.edges[tt[Pe]],Bt.edges[tt[0]],Bt);re&&(xt[re.label]||(xt[re.label]={projected:[],edgeLabel:re.label}),xt[re.label].projected.push({graphId:m.id,edge:xt,preNode:ye}),Dt=V.dfsEdgeList[tt[Pe]].fromNode,jt=!0)})},ue=tt.length-1;ue>Zt;ue--){var dt=Vt(ue);if(dt==="break")break}if(jt){var Ot=x.findMinLabel(xt);V.dfsEdgeList.push(new F(lt,Dt,z.VACANT_NODE_LABEL,Ot.edgeLabel,z.VACANT_NODE_LABEL));var ee=V.dfsEdgeList.length-1;return x.dfsCode.dfsEdgeList[ee]!==V.dfsEdgeList[ee]?!1:J(xt[Ot.edgeLabel].projected)}var Re={};jt=!1;var me=0;rt.forEach(function(we){var Pe=new k(we),ye=x.findForwardPureEdges(m,Pe.edges[tt[0]],nt,Pe);ye.length>0&&(jt=!0,me=lt,ye.forEach(function(Bt){var re="".concat(Bt.label,"-").concat(d[Bt.to].label);Re[re]||(Re[re]={projected:[],edgeLabel:Bt.label,nodeLabel2:d[Bt.to].label}),Re[re].projected.push({graphId:m.id,edge:Bt,preNode:we})}))});for(var Ae=tt.length,Be=function(Pe){if(jt)return"break";var ye=tt[Pe];rt.forEach(function(Bt){var re=new k(Bt),Ee=x.findForwardRmpathEdges(m,re.edges[ye],nt,re);Ee.length>0&&(jt=!0,me=V.dfsEdgeList[ye].fromNode,Ee.forEach(function(It){var Et="".concat(It.label,"-").concat(d[It.to].label);Re[Et]||(Re[Et]={projected:[],edgeLabel:It.label,nodeLabel2:d[It.to].label}),Re[Et].projected.push({graphId:m.id,edge:It,preNode:Bt})}))})},ue=0;ue<Ae;ue++){var Ke=Be(ue);if(Ke==="break")break}if(!jt)return!0;var $t=x.findMinLabel(Re);V.dfsEdgeList.push(new F(me,lt+1,z.VACANT_NODE_LABEL,$t.edgeLabel,$t.nodeLabel2));var ce=V.dfsEdgeList.length-1;return S.dfsEdgeList[ce]!==V.dfsEdgeList[ce]?!1:J(Re["".concat($t.edgeLabel,"-").concat($t.nodeLabel2)].projected)},K="".concat(j.nodeLabel1,"-").concat(j.edgeLabel,"-").concat(j.nodeLabel2);return X(Q[K].projected)}},T.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var x=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,L.clone)(x))}},T.prototype.subGraphMining=function(x){var S=this,N=this.getSupport(x);if(!(N<this.minSupport)&&!!this.isMin()){this.report();var m=this.dfsCode.getNodeNum(),d=this.dfsCode.buildRmpath(),V=this.dfsCode.dfsEdgeList[d[0]].toNode,Q=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,j={},X={};x.forEach(function(K){for(var J=S.graphs[K.graphId],rt=J.nodeMap,tt=new k(K),nt=d.length-1;nt>=0;nt--){var lt=S.findBackwardEdge(J,tt.edges[d[nt]],tt.edges[d[0]],tt);if(lt){var xt="".concat(S.dfsCode.dfsEdgeList[d[nt]].fromNode,"-").concat(lt.label);X[xt]||(X[xt]={projected:[],toNodeId:S.dfsCode.dfsEdgeList[d[nt]].fromNode,edgeLabel:lt.label}),X[xt].projected.push({graphId:K.graphId,edge:lt,preNode:K})}}if(!(m>=S.maxNodeNum)){var jt=S.findForwardPureEdges(J,tt.edges[d[0]],Q,tt);jt.forEach(function(Zt){var Vt="".concat(V,"-").concat(Zt.label,"-").concat(rt[Zt.to].label);j[Vt]||(j[Vt]={projected:[],fromNodeId:V,edgeLabel:Zt.label,nodeLabel2:rt[Zt.to].label}),j[Vt].projected.push({graphId:K.graphId,edge:Zt,preNode:K})});for(var Dt=function(Vt){var ue=S.findForwardRmpathEdges(J,tt.edges[d[Vt]],Q,tt);ue.forEach(function(dt){var Ot="".concat(S.dfsCode.dfsEdgeList[d[Vt]].fromNode,"-").concat(dt.label,"-").concat(rt[dt.to].label);j[Ot]||(j[Ot]={projected:[],fromNodeId:S.dfsCode.dfsEdgeList[d[Vt]].fromNode,edgeLabel:dt.label,nodeLabel2:rt[dt.to].label}),j[Ot].projected.push({graphId:K.graphId,edge:dt,preNode:K})})},nt=0;nt<d.length;nt++)Dt(nt)}}),Object.keys(X).forEach(function(K){var J=X[K],rt=J.toNodeId,tt=J.edgeLabel;S.dfsCode.dfsEdgeList.push(new F(V,rt,"-1",tt,"-1")),S.subGraphMining(X[K].projected),S.dfsCode.dfsEdgeList.pop()}),Object.keys(j).forEach(function(K){var J=j[K],rt=J.fromNodeId,tt=J.edgeLabel,nt=J.nodeLabel2;S.dfsCode.dfsEdgeList.push(new F(rt,V+1,z.VACANT_NODE_LABEL,tt,nt)),S.subGraphMining(j[K].projected),S.dfsCode.dfsEdgeList.pop()})}},T.prototype.generate1EdgeFrequentSubGraphs=function(){var x=this.graphs,S=this.directed,N=this.minSupport,m=this.frequentSize1Subgraphs,d={},V={},Q={},j={};return Object.keys(x).forEach(function(X){var K=x[X],J=K.nodeMap;K.nodes.forEach(function(rt,tt){var nt=rt.label,lt="".concat(X,"-").concat(nt);if(!Q[lt]){var xt=d[nt]||0;xt++,d[nt]=xt}Q[lt]={graphKey:X,label:nt},rt.edges.forEach(function(jt){var Dt=nt,Zt=J[jt.to].label;if(!S&&Dt>Zt){var Vt=Zt;Zt=Dt,Dt=Vt}var ue=jt.label,dt="".concat(X,"-").concat(Dt,"-").concat(ue,"-").concat(Zt),Ot="".concat(Dt,"-").concat(ue,"-").concat(Zt);if(!V[Ot]){var ee=V[Ot]||0;ee++,V[Ot]=ee}j[dt]={graphId:X,nodeLabel1:Dt,edgeLabel:ue,nodeLabel2:Zt}})})}),Object.keys(d).forEach(function(X){var K=d[X];if(!(K<N)){var J={nodes:[],edges:[]};J.nodes.push({id:"0",label:X}),m.push(J)}}),m},T.prototype.run=function(){var x=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var S=this.graphs,N=this.directed,m={};Object.keys(S).forEach(function(d){var V=S[d],Q=V.nodeMap;V.nodes.forEach(function(j){var X=x.findForwardRootEdges(V,j);X.forEach(function(K){var J=Q[K.to],rt="".concat(j.label,"-").concat(K.label,"-").concat(J.label);m[rt]||(m[rt]={projected:[],nodeLabel1:j.label,edgeLabel:K.label,nodeLabel2:J.label});var tt={graphId:d,edge:K,preNode:null};m[rt].projected.push(tt)})})}),Object.keys(m).forEach(function(d){var V=m[d],Q=V.projected,j=V.nodeLabel1,X=V.edgeLabel,K=V.nodeLabel2;x.dfsCode.dfsEdgeList.push(new F(0,1,j,X,K)),x.subGraphMining(Q),x.dfsCode.dfsEdgeList.pop()})}},T}(),b=function(x,S,N,m){var d={};return Object.keys(x).forEach(function(V,Q){var j=x[V],X=new z.Graph(Q,!0,S),K={};j.nodes.forEach(function(J,rt){X.addNode(rt,J[N]),K[J.id]=rt}),j.edges.forEach(function(J,rt){var tt=K[J.source],nt=K[J.target];X.addEdge(-1,tt,nt,J[m])}),X&&X.getNodeNum()&&(d[X.id]=X)}),d},E=function(x,S,N){var m=[];return x.forEach(function(d){var V={nodes:[],edges:[]};d.nodes.forEach(function(Q){var j;V.nodes.push((j={id:"".concat(Q.id)},j[S]=Q.label,j))}),d.edges.forEach(function(Q){var j;V.edges.push((j={source:"".concat(Q.from),target:"".concat(Q.to)},j[N]=Q.label,j))}),m.push(V)}),m},p="cluster",y=function(x){var S=x.graphs,N=x.directed,m=N===void 0?!1:N,d=x.nodeLabelProp,V=d===void 0?p:d,Q=x.edgeLabelProp,j=Q===void 0?p:Q,X=b(S,m,V,j),K=x.minSupport,J=x.maxNodeNum,rt=x.minNodeNum,tt=x.verbose,nt=x.top,lt={graphs:X,minSupport:K,maxNodeNum:J,minNodeNum:rt,top:nt,verbose:tt,directed:m},xt=new D(lt);xt.run();var jt=E(xt.frequentSubgraphs,V,j);return jt},g=y;G.default=g},68575:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.VACANT_NODE_LABEL=G.VACANT_NODE_ID=G.VACANT_GRAPH_ID=G.VACANT_EDGE_LABEL=G.VACANT_EDGE_ID=G.Node=G.Graph=G.Edge=G.AUTO_EDGE_ID=void 0;var R=-1;G.VACANT_EDGE_ID=R;var L=-1;G.VACANT_NODE_ID=L;var z="-1";G.VACANT_EDGE_LABEL=z;var F="-1";G.VACANT_NODE_LABEL=F;var I=-1;G.VACANT_GRAPH_ID=I;var k="-1";G.AUTO_EDGE_ID=k;var D=function(){function p(y,g,T,x){y===void 0&&(y=R),g===void 0&&(g=L),T===void 0&&(T=L),x===void 0&&(x=z),this.id=y,this.from=g,this.to=T,this.label=x}return p}();G.Edge=D;var b=function(){function p(y,g){y===void 0&&(y=L),g===void 0&&(g=F),this.id=y,this.label=g,this.edges=[],this.edgeMap={}}return p.prototype.addEdge=function(y){this.edges.push(y),this.edgeMap[y.id]=y},p}();G.Node=b;var E=function(){function p(y,g,T){y===void 0&&(y=L),g===void 0&&(g=!0),T===void 0&&(T=!1),this.id=y,this.edgeIdAutoIncrease=g,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=T}return p.prototype.getNodeNum=function(){return this.nodes.length},p.prototype.addNode=function(y,g){if(!this.nodeMap[y]){var T=new b(y,g);this.nodes.push(T),this.nodeMap[y]=T,this.nodeLabelMap[g]||(this.nodeLabelMap[g]=[]),this.nodeLabelMap[g].push(y)}},p.prototype.addEdge=function(y,g,T,x){if((this.edgeIdAutoIncrease||y===void 0)&&(y=this.counter++),!(this.nodeMap[g]&&this.nodeMap[T]&&this.nodeMap[T].edgeMap[y])){var S=new D(y,g,T,x);if(this.edges.push(S),this.edgeMap[y]=S,this.nodeMap[g].addEdge(S),this.edgeLabelMap[x]||(this.edgeLabelMap[x]=[]),this.edgeLabelMap[x].push(S),!this.directed){var N=new D(y,T,g,x);this.nodeMap[T].addEdge(N),this.edgeLabelMap[x].push(N)}}},p}();G.Graph=E},82812:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=R(70655),z=D(R(75033)),F=D(R(21146)),I=D(R(78089)),k=R(70643);function D(j){return j&&j.__esModule?j:{default:j}}var b=function(X,K,J,rt){J===void 0&&(J="cluster"),rt===void 0&&(rt=2);var tt=[],nt=X.nodes;return K.forEach(function(lt,xt){tt.push(E(nt,lt,xt,J,rt))}),tt},E=function(X,K,J,rt,tt){var nt=[J],lt=[],xt={};return K.forEach(function(jt,Dt){if(jt<=tt&&J!==Dt){nt.push(Dt),lt.push(X[Dt]);var Zt=X[Dt][rt];xt[Zt]?(xt[Zt].count++,xt[Zt].dists.push(jt)):xt[Zt]={count:1,dists:[jt]}}}),Object.keys(xt).forEach(function(jt){xt[jt].dists=xt[jt].dists.sort(function(Dt,Zt){return Dt-Zt})}),{nodeIdx:J,nodeId:X[J].id,nodeIdxs:nt,neighbors:lt,neighborNum:nt.length-1,nodeLabelCountMap:xt}},p=function(X,K,J,rt,tt){var nt=Math.ceil(J/K),lt={},xt=0;return rt.forEach(function(jt,Dt){for(var Zt=0,Vt=0,ue=jt.nodeIdxs,dt=jt.neighborNum-1;Zt<nt;){for(var Ot=ue[1+Math.floor(Math.random()*dt)],ee=0;(lt["".concat(Dt,"-").concat(Ot)]||lt["".concat(Ot,"-").concat(Dt)])&&(Ot=Math.floor(Math.random()*K),ee++,!(ee>2*K)););if(ee<2*K&&(lt["".concat(Dt,"-").concat(Ot)]={start:Dt,end:Ot,distance:tt[Dt][Ot]},Zt++,xt++,xt>=J))return lt;if(Vt++,Vt>2*K)break}if(Zt<nt){var Re=nt-Zt;nt=(nt+Re)/(K-Dt-1)}}),lt},y=function(X,K,J,rt){var tt=J.nodes;return rt||(rt={}),Object.keys(X).forEach(function(nt){var lt,xt;if(!(rt&&rt[nt])){rt[nt]={nodes:[],edges:[]};var jt=X[nt],Dt=(lt=K[jt.start])===null||lt===void 0?void 0:lt.nodeIdxs,Zt=(xt=K[jt.end])===null||xt===void 0?void 0:xt.nodeIdxs;if(!(!Dt||!Zt)){var Vt=new Set(Zt),ue=Dt.filter(function(me){return Vt.has(me)});if(!(!ue||!ue.length)){for(var dt={},Ot=ue.length,ee=0;ee<Ot;ee++){var Re=tt[ue[ee]];rt[nt].nodes.push(Re),dt[Re.id]=!0}J.edges.forEach(function(me){dt[me.source]&&dt[me.target]&&rt[nt].edges.push(me)})}}}}),rt},g=function(X,K,J,rt){var tt,nt,lt={};X.nodes.forEach(function(jt){lt[jt.id]=jt});var xt=0;return!((tt=K==null?void 0:K.edges)===null||tt===void 0?void 0:tt.length)||((nt=K==null?void 0:K.nodes)===null||nt===void 0?void 0:nt.length)<2?0:(X.edges.forEach(function(jt){var Dt=lt[jt.source][J],Zt=lt[jt.target][J],Vt=K==null?void 0:K.nodes[0][J],ue=K==null?void 0:K.nodes[1][J],dt=K==null?void 0:K.edges[0][rt];jt[rt]===dt&&(Dt===Vt&&Zt===ue||Dt===ue&&Zt===Vt)&&xt++}),xt)},T=function(X,K,J){for(var rt=Infinity,tt=0,nt=function(jt){var Dt=X[jt],Zt=Object.keys(Dt).sort(function(me,Ae){return Dt[me]-Dt[Ae]}),Vt=10,ue=[];Zt.forEach(function(me,Ae){ue[Ae%Vt]||(ue[Ae%Vt]={graphs:[],totalCount:0,aveCount:0}),ue[Ae%Vt].graphs.push(me),ue[Ae%Vt].totalCount+=Dt[me]});var dt=0,Ot=[];ue.forEach(function(me){var Ae=me.totalCount/me.graphs.length;me.aveCount=Ae,Ot.push(Ae);var Be=0,Ke=me.length;me.graphs.forEach(function($t,ce){var we=Dt[$t];me.graphs.forEach(function(Pe,ye){ce!==ye&&(Be+=Math.abs(we-Dt[Pe]))})}),Be/=Ke*(Ke-1)/2,dt+=Be}),dt/=ue.length;var ee=0;Ot.forEach(function(me,Ae){Ot.forEach(function(Be,Ke){Ae!==Ke&&(ee+=Math.abs(me-Be))}),ee/=Ot.length*(Ot.length-1)/2});var Re=ee-dt;rt<Re&&(rt=Re,tt=jt)},lt=0;lt<K;lt++)nt(lt);return{structure:J[tt],structureCountMap:X[tt]}},x=function(X,K){var J={},rt={};return X.forEach(function(tt,nt){J[tt.id]={idx:nt,node:tt,degree:0,inDegree:0,outDegree:0};var lt=tt[K];rt[lt]||(rt[lt]=[]),rt[lt].push(tt)}),{nodeMap:J,nodeLabelMap:rt}},S=function(X,K,J){var rt={},tt={};return X.forEach(function(nt,lt){rt["".concat(k.uniqueId)]={idx:lt,edge:nt};var xt=nt[K];tt[xt]||(tt[xt]=[]),tt[xt].push(nt);var jt=J[nt.source];jt&&(jt.degree++,jt.outDegree++);var Dt=J[nt.target];Dt&&(Dt.degree++,Dt.inDegree++)}),{edgeMap:rt,edgeLabelMap:tt}},N=function(X,K,J){var rt=K.length,tt={};return K.forEach(function(nt,lt){for(var xt=J?0:lt+1,jt=X[lt].id,Dt=xt;Dt<rt;Dt++)if(lt!==Dt){var Zt=X[Dt].id,Vt=nt[Dt];tt["".concat(jt,"-").concat(Zt)]=Vt,J||(tt["".concat(Zt,"-").concat(jt)]=Vt)}}),tt},m=function(X,K,J,rt,tt,nt,lt,xt,jt,Dt,Zt){var Vt,ue="".concat(K.id,"-").concat(J.id);if(Dt&&Dt[ue])return Dt[ue];var dt=Zt?Zt[ue]:void 0;if(!dt){var Ot=(Vt={},Vt[ue]={start:rt[K.id].idx,end:rt[J.id].idx,distance:tt},Vt);Zt=y(Ot,nt,X,Zt),dt=Zt[ue]}return g(dt,lt,xt,jt)},d=function(X,K,J,rt){var tt,nt,lt,xt=(tt=X[K])===null||tt===void 0?void 0:tt.degree,jt=(nt=X[K])===null||nt===void 0?void 0:nt.inDegree,Dt=(lt=X[K])===null||lt===void 0?void 0:lt.outDegree;return X[K]===void 0&&(xt=Infinity,jt=Infinity,Dt=Infinity,rt[K].forEach(function(Zt){var Vt=J[Zt.id].degree;xt>Vt&&(xt=Vt);var ue=J[Zt.id].inDegree;jt>ue&&(jt=ue);var dt=J[Zt.id].outDegree;Dt>dt&&(Dt=dt)}),X[K]={degree:xt,inDegree:jt,outDegree:Dt}),{minPatternNodeLabelDegree:xt,minPatternNodeLabelInDegree:jt,minPatternNodeLabelOutDegree:Dt}},V=function(X,K,J,rt,tt,nt,lt){var xt;if(J===void 0&&(J=!1),nt===void 0&&(nt="cluster"),lt===void 0&&(lt="cluster"),!(!X||!X.nodes)){var jt=X.nodes.length;if(!!jt){var Dt=(0,z.default)(X,J),Zt=(0,z.default)(K,J),Vt=N(X.nodes,Dt,J),ue=N(K.nodes,Zt,J),dt=x(X.nodes,nt),Ot=dt.nodeMap,ee=dt.nodeLabelMap,Re=x(K.nodes,nt),me=Re.nodeMap,Ae=Re.nodeLabelMap;S(X.edges,lt,Ot);var Be=S(K.edges,lt,me).edgeLabelMap,Ke=[];Zt==null||Zt.forEach(function(ar){Ke=Ke.concat(ar)}),tt||(tt=Math.max.apply(Math,(0,L.__spreadArray)((0,L.__spreadArray)([],Ke,!1),[2],!1))),rt||(rt=tt);var $t=b(X,Dt,nt,rt),ce=b(K,Zt,nt,rt),we=Math.min(100,jt*(jt-1)/2),Pe=p(rt,jt,we,$t,Dt),ye=y(Pe,$t,X),Bt=10,re=1,Ee=1,It=4,Et={graphs:ye,nodeLabelProp:nt,edgeLabelProp:lt,minSupport:re,minNodeNum:Ee,maxNodeNum:It,directed:J},Wt=(0,F.default)(Et).slice(0,Bt),fe=Wt.length,Fe=[];Wt.forEach(function(ar,vr){Fe[vr]={},Object.keys(ye).forEach(function(Br){var Fr=ye[Br],kr=g(Fr,ar,nt,lt);Fe[vr][Br]=kr})});var $e=T(Fe,fe,Wt),Lt=$e.structure,Ne=$e.structureCountMap,Xe=K.nodes[0],Dr=[],ur=(xt=K.nodes[0])===null||xt===void 0?void 0:xt[nt],Or=-Infinity;K.nodes.forEach(function(ar){var vr=ar[nt],Br=ee[vr];(Br==null?void 0:Br.length)>Or&&(Or=Br.length,Dr=Br,ur=vr,Xe=ar)});var ln={},fn={},Xr={},Cn={},Qr={},Gr={};Object.keys(Ae).forEach(function(ar,vr){Qr[ar]=[],J&&(Gr[ar]=[]);var Br=-Infinity,Fr=Ae[ar],kr={};Fr.forEach(function(ot){var B=ue["".concat(Xe.id,"-").concat(ot.id)];if(B&&Qr[ar].push(B),Br<B&&(Br=B),kr["".concat(Xe.id,"-").concat(ot.id)]={start:0,end:me[ot.id].idx,distance:B},J){var _=ue["".concat(ot.id,"-").concat(Xe.id)];_&&Gr[ar].push(_)}}),Qr[ar]=Qr[ar].sort(function(ot,B){return ot-B}),J&&(Gr[ar]=Gr[ar].sort(function(ot,B){return ot-B})),fn=y(kr,ce,K,fn);var Z=[];if(Object.keys(kr).forEach(function(ot){if(Xr[ot]){Z.push(Xr[ot]);return}var B=fn[ot];Xr[ot]=g(B,Lt,nt,lt),Z.push(Xr[ot])}),Z=Z.sort(function(ot,B){return B-ot}),Cn["".concat(Xe.id,"-").concat(ar)]=Z,ar!==ur)for(var Te=(Dr==null?void 0:Dr.length)||0,ne=function(B){var _=Dr[B],C=$t[Ot[_.id].idx],Y=C.nodeLabelCountMap[ar],pt=Ae[ar].length;if(!Y||Y.count<pt)return Dr.splice(B,1),"continue";for(var _t=!1,Mt=0;Mt<pt;Mt++)if(Y.dists[Mt]>Qr[ar][Mt]){_t=!0;break}if(_t)return Dr.splice(B,1),"continue";var zt={};C.neighbors.forEach(function(qe){var br=Vt["".concat(_.id,"-").concat(qe.id)];zt["".concat(_.id,"-").concat(qe.id)]={start:Ot[_.id].idx,end:Ot[qe.id].idx,distance:br}}),ye=y(zt,$t,X,ye);var Le=[];Object.keys(zt).forEach(function(qe){if(Ne[qe]){Le.push(Ne[qe]);return}var br=ye[qe];Ne[qe]=g(br,Lt,nt,lt),Le.push(Ne[qe])}),Le=Le.sort(function(qe,br){return br-qe});for(var Me=!1,Mt=0;Mt<pt;Mt++)if(Le[Mt]<Z[Mt]){Me=!0;break}if(Me)return Dr.splice(B,1),"continue"},it=Te-1;it>=0;it--)ne(it)});var on=[];Dr==null||Dr.forEach(function(ar){for(var vr=Ot[ar.id].idx,Br=E(X.nodes,Dt[vr],vr,nt,tt),Fr=Br.neighbors,kr=Fr.length,Z=!1,Te=kr-1;Te>=0;Te--){if(Fr.length+1<K.nodes.length){Z=!0;return}var ne=Fr[Te],it=ne[nt];if(!Ae[it]||!Ae[it].length){Fr.splice(Te,1);continue}if(!Qr[it]||!Qr[it].length){Fr.splice(Te,1);continue}var ot="".concat(ar.id,"-").concat(ne.id),B=Vt[ot],_=Qr[it].length-1,C=Qr[it][_];if(B>C){Fr.splice(Te,1);continue}if(J){var Y="".concat(ne.id,"-").concat(ar.id),pt=Vt[Y];_=Gr[it].length-1;var _t=Gr[it][_];if(pt>_t){Fr.splice(Te,1);continue}}var Mt=Ne[ot]?Ne[ot]:m(X,ar,ne,Ot,B,$t,Lt,nt,lt,Ne,ye),zt="".concat(Xe.id,"-").concat(it),Le=Cn[zt][Cn[zt].length-1];if(Mt<Le){Fr.splice(Te,1);continue}var Me=d(ln,it,me,Ae),qe=Me.minPatternNodeLabelDegree,br=Me.minPatternNodeLabelInDegree,xr=Me.minPatternNodeLabelOutDegree;if(Ot[ne.id].degree<qe){Fr.splice(Te,1);continue}}Z||on.push({nodes:[ar].concat(Fr)})});var sr=(0,I.default)(K,Xe.id,!1).length,lr={};J?(Object.keys(sr).forEach(function(ar){var vr=me[ar].node[nt];lr[vr]?lr[vr].push(sr[ar]):lr[vr]=[sr[ar]]}),Object.keys(lr).forEach(function(ar){lr[ar].sort(function(vr,Br){return vr-Br})})):lr=Qr;for(var Qe=on.length,$r=function(vr){var Br=on[vr],Fr=Br.nodes[0],kr={},Z={};Br.nodes.forEach(function(Vn,se){Z[Vn.id]={idx:se,node:Vn,degree:0,inDegree:0,outDegree:0};var Ut=Vn[nt];kr[Ut]?kr[Ut]++:kr[Ut]=1});var Te=[],ne={};X.edges.forEach(function(Vn){Z[Vn.source]&&Z[Vn.target]&&(Te.push(Vn),ne[Vn[lt]]?ne[Vn[lt]]++:ne[Vn[lt]]=1,Z[Vn.source].degree++,Z[Vn.target].degree++,Z[Vn.source].outDegree++,Z[Vn.target].inDegree++)});for(var it=Object.keys(Be).length,ot=!1,B=0;B<it;B++){var _=Object.keys(Be)[B];if(!ne[_]||ne[_]<Be[_].length){ot=!0;break}}if(ot)return on.splice(vr,1),"continue";var C=Te.length;if(C<K.edges.length)return on.splice(vr,1),"break";for(var Y=!1,pt=function(se){var Ut=Te[se],le=Ut[lt],ze=Be[le];if(!ze||!ze.length)return ne[le]--,ze&&ne[le]<ze.length?(Y=!0,"break"):(Te.splice(se,1),Z[Ut.source].degree--,Z[Ut.target].degree--,Z[Ut.source].outDegree--,Z[Ut.target].inDegree--,"continue");var Ie=Z[Ut.source].node[nt],We=Z[Ut.target].node[nt],_r=!1;if(ze.forEach(function(nn){var pn=me[nn.source].node,Gn=me[nn.target].node;pn[nt]===Ie&&Gn[nt]===We&&(_r=!0),!J&&pn[nt]===We&&Gn[nt]===Ie&&(_r=!0)}),!_r)return ne[le]--,ze&&ne[le]<ze.length?(Y=!0,"break"):(Te.splice(se,1),Z[Ut.source].degree--,Z[Ut.target].degree--,Z[Ut.source].outDegree--,Z[Ut.target].inDegree--,"continue")},B=C-1;B>=0;B--){var _t=pt(B);if(_t==="break")break}if(Y)return on.splice(vr,1),"continue";Br.edges=Te;var Mt=(0,I.default)(Br,Br.nodes[0].id,!1).length;if(Object.keys(Mt).reverse().forEach(function(Vn){if(!(Vn===Br.nodes[0].id||Y)){if(Mt[Vn]===Infinity){var se=Z[Vn].node[nt];if(kr[se]--,kr[se]<Ae[se].length){Y=!0;return}var Ut=Br.nodes.indexOf(Z[Vn].node);Br.nodes.splice(Ut,1),Z[Vn]=void 0;return}var le=Ot[Vn].node[nt];if(!lr[le]||!lr[le].length||Mt[Vn]>lr[le][lr[le].length-1]){var se=Z[Vn].node[nt];if(kr[se]--,kr[se]<Ae[se].length){Y=!0;return}var Ut=Br.nodes.indexOf(Z[Vn].node);Br.nodes.splice(Ut,1),Z[Vn]=void 0}}}),Y)return on.splice(vr,1),"continue";for(var zt=!0,Le=0;zt&&!Y;){zt=!1;var Me=J?Z[Fr.id].degree<me[Xe.id].degree||Z[Fr.id].inDegree<me[Xe.id].inDegree||Z[Fr.id].outDegree<me[Xe.id].outDegree:Z[Fr.id].degree<me[Xe.id].degree;if(Me){Y=!0;break}if(kr[Fr[nt]]<Ae[Fr[nt]].length){Y=!0;break}for(var qe=Br.nodes.length,br=qe-1;br>=0;br--){var xr=Br.nodes[br],sn=Z[xr.id].degree,Rn=Z[xr.id].inDegree,tr=Z[xr.id].outDegree,Sr=xr[nt],jr=d(ln,Sr,me,Ae),Nn=jr.minPatternNodeLabelDegree,gn=jr.minPatternNodeLabelInDegree,ea=jr.minPatternNodeLabelOutDegree,ha=J?sn<Nn||Rn<gn||tr<ea:sn<Nn;if(ha){if(kr[xr[nt]]--,kr[xr[nt]]<Ae[xr[nt]].length){Y=!0;break}Br.nodes.splice(br,1),Z[xr.id]=void 0,zt=!0}}if(Y||!zt&&Le!==0)break;C=Te.length;for(var Zn=C-1;Zn>=0;Zn--){var na=Te[Zn];if(!Z[na.source]||!Z[na.target]){Te.splice(Zn,1);var da=na[lt];if(ne[da]--,Z[na.source]&&(Z[na.source].degree--,Z[na.source].outDegree--),Z[na.target]&&(Z[na.target].degree--,Z[na.target].inDegree--),Be[da]&&ne[da]<Be[da].length){Y=!0;break}zt=!0}}Le++}if(Y||Y||Br.nodes.length<K.nodes.length||Te.length<K.edges.length)return on.splice(vr,1),"continue"},an=Qe-1;an>=0;an--){var bn=$r(an);if(bn==="break")break}for(var nr=on.length,Tr=function(vr){var Br=on[vr],Fr={};Br.edges.forEach(function(Te){var ne="".concat(Te.source,"-").concat(Te.target,"-").concat(Te.label);Fr[ne]?Fr[ne]++:Fr[ne]=1});for(var kr=function(ne){var it=on[ne],ot={};it.edges.forEach(function(_){var C="".concat(_.source,"-").concat(_.target,"-").concat(_.label);ot[C]?ot[C]++:ot[C]=1});var B=!0;Object.keys(ot).length!==Object.keys(Fr).length?B=!1:Object.keys(Fr).forEach(function(_){ot[_]!==Fr[_]&&(B=!1)}),B&&on.splice(ne,1)},Z=nr-1;Z>vr;Z--)kr(Z);nr=on.length},an=0;an<=nr-1;an++)Tr(an);return on}}},Q=V;G.default=Q},5170:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=F(R(62238)),z=R(70643);function F(D){return D&&D.__esModule?D:{default:D}}var I=function(b,E,p,y){E===void 0&&(E=!1),p===void 0&&(p="weight"),y===void 0&&(y=1e3);var g=b.nodes,T=g===void 0?[]:g,x=b.edges,S=x===void 0?[]:x,N={},m={};T.forEach(function(nt,lt){var xt=(0,z.uniqueId)();nt.clusterId=xt,N[xt]={id:xt,nodes:[nt]},m[nt.id]={node:nt,idx:lt}});var d=(0,L.default)(b,E),V=[],Q={};d.forEach(function(nt,lt){var xt=0,jt=T[lt].id;Q[jt]={},nt.forEach(function(Dt,Zt){if(!!Dt){xt+=Dt;var Vt=T[Zt].id;Q[jt][Vt]=Dt}}),V.push(xt)});for(var j=0,X=function(){var lt=!1;if(T.forEach(function(xt){var jt={};Object.keys(Q[xt.id]).forEach(function(Re){var me=Q[xt.id][Re],Ae=m[Re].node,Be=Ae.clusterId;jt[Be]||(jt[Be]=0),jt[Be]+=me});var Dt=-Infinity,Zt=[];if(Object.keys(jt).forEach(function(Re){Dt<jt[Re]?(Dt=jt[Re],Zt=[Re]):Dt===jt[Re]&&Zt.push(Re)}),!(Zt.length===1&&Zt[0]===xt.clusterId)){var Vt=Zt.indexOf(xt.clusterId);if(Vt>=0&&Zt.splice(Vt,1),Zt&&Zt.length){lt=!0;var ue=N[xt.clusterId],dt=ue.nodes.indexOf(xt);ue.nodes.splice(dt,1);var Ot=Math.floor(Math.random()*Zt.length),ee=N[Zt[Ot]];ee.nodes.push(xt),xt.clusterId=ee.id}}}),!lt)return"break";j++};j<y;){var K=X();if(K==="break")break}Object.keys(N).forEach(function(nt){var lt=N[nt];(!lt.nodes||!lt.nodes.length)&&delete N[nt]});var J=[],rt={};S.forEach(function(nt){var lt=nt.source,xt=nt.target,jt=nt[p]||1,Dt=m[lt].node.clusterId,Zt=m[xt].node.clusterId,Vt="".concat(Dt,"---").concat(Zt);if(rt[Vt])rt[Vt].weight+=jt,rt[Vt].count++;else{var ue={source:Dt,target:Zt,weight:jt,count:1};rt[Vt]=ue,J.push(ue)}});var tt=[];return Object.keys(N).forEach(function(nt){tt.push(N[nt])}),{clusters:tt,clusterEdges:J}},k=I;G.default=k},57363:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=R(49242),z=D(R(62238)),F=D(R(29741)),I=R(3665),k=R(26838);function D(g){return g&&g.__esModule?g:{default:g}}var b=function(T,x,S,N){for(var m=x.length,d=2*N,V=0,Q=0;Q<m;Q++)for(var j=T[Q].clusterId,X=0;X<m;X++){var K=T[X].clusterId;if(j===K){var J=x[Q][X]||0,rt=S[Q]||0,tt=S[X]||0;V+=J-rt*tt/d}}return V*=1/d,V},E=function(T,x){T===void 0&&(T=[]);for(var S=T.length,N=new F.default([]),m=0;m<S;m++)N=N.add(new F.default(x[m]));var d=N.avg(S);d.normalize();for(var V=0,m=0;m<S;m++){var Q=new F.default(x[m]),j=Q.squareEuclideanDistance(d);V+=j}var X=[];T.forEach(function(){X.push([])});for(var m=0;m<S;m++){var Q=new F.default(x[m]);T[m].clusterInertial=0;for(var K=0;K<S;K++){if(m===K){X[m][K]=0;continue}var J=new F.default(x[K]);X[m][K]=Q.squareEuclideanDistance(J),T[m].clusterInertial+=X[m][K]}}for(var rt=0,tt=2*S*V,m=0;m<S;m++)for(var nt=T[m].clusterId,K=0;K<S;K++){var lt=T[K].clusterId;if(!(m===K||nt!==lt)){var xt=T[m].clusterInertial*T[K].clusterInertial/Math.pow(tt,2)-X[m][K]/tt;rt+=xt}}return Number(rt.toFixed(4))},p=function(T,x,S,N,m,d,V,Q,j){x===void 0&&(x=!1),S===void 0&&(S="weight"),N===void 0&&(N=1e-4),m===void 0&&(m=!1),d===void 0&&(d=void 0),V===void 0&&(V=[]),Q===void 0&&(Q=["id"]),j===void 0&&(j=1);var X=T.nodes,K=X===void 0?[]:X,J=T.edges,rt=J===void 0?[]:J,tt=[];if(m){K.forEach(function(ye,Bt){ye.properties=ye.properties||{},ye.originIndex=Bt});var nt=[];K.every(function(ye){return ye.hasOwnProperty("nodeType")})&&(nt=Array.from(new Set(K.map(function(ye){return ye.nodeType}))),K.forEach(function(ye){ye.properties.nodeType=nt.findIndex(function(Bt){return Bt===ye.nodeType})}));var lt=(0,I.getAllProperties)(K,d);tt=(0,k.oneHot)(lt,V,Q)}var xt=1,jt={},Dt={};K.forEach(function(ye,Bt){var re=String(xt++);ye.clusterId=re,jt[re]={id:re,nodes:[ye]},Dt[ye.id]={node:ye,idx:Bt}});var Zt=(0,z.default)(T,x),Vt=[],ue={},dt=0;Zt.forEach(function(ye,Bt){var re=0,Ee=K[Bt].id;ue[Ee]={},ye.forEach(function(It,Et){if(!!It){re+=It;var Wt=K[Et].id;ue[Ee][Wt]=It,dt+=It}}),Vt.push(re)}),dt/=2;for(var Ot=Infinity,ee=Infinity,Re=0,me=[],Ae={};;){m&&K.every(function(ye){return ye.hasOwnProperty("properties")})?Ot=b(K,Zt,Vt,dt)+E(K,tt)*j:Ot=b(K,Zt,Vt,dt),Re===0&&(ee=Ot,me=K,Ae=jt);var Be=Ot>0&&Ot>ee&&Ot-ee<N;if(Ot>ee&&(me=K.map(function(ye){return{node:ye,clusterId:ye.clusterId}}),Ae=(0,L.clone)(jt),ee=Ot),Be||Re>100)break;Re++,Object.keys(jt).forEach(function(ye){var Bt=0;rt.forEach(function(re){var Ee=re.source,It=re.target,Et=Dt[Ee].node.clusterId,Wt=Dt[It].node.clusterId;(Et===ye&&Wt!==ye||Wt===ye&&Et!==ye)&&(Bt=Bt+(re[S]||1))}),jt[ye].sumTot=Bt}),K.forEach(function(ye,Bt){var re=jt[ye.clusterId],Ee=0,It,Et=Vt[Bt]/(2*dt),Wt=0,fe=re.nodes;fe.forEach(function(fn){var Xr=Dt[fn.id].idx;Wt+=Zt[Bt][Xr]||0});var Fe=Wt-re.sumTot*Et,$e=fe.filter(function(fn){return fn.id!==ye.id}),Lt=[];$e.forEach(function(fn,Xr){Lt[Xr]=tt[fn.originIndex]});var Ne=E($e,tt)*j,Xe=ue[ye.id];if(Object.keys(Xe).forEach(function(fn){var Xr=Dt[fn].node,Cn=Xr.clusterId;if(Cn!==ye.clusterId){var Qr=jt[Cn],Gr=Qr.nodes;if(!(!Gr||!Gr.length)){var on=0;Gr.forEach(function(bn){var nr=Dt[bn.id].idx;on+=Zt[Bt][nr]||0});var sr=on-Qr.sumTot*Et,lr=Gr.concat([ye]),Qe=[];lr.forEach(function(bn,nr){Qe[nr]=tt[bn.originIndex]});var $r=E(lr,tt)*j,an=sr-Fe;m&&(an=sr+$r-(Fe+Ne)),an>Ee&&(Ee=an,It=Qr)}}}),Ee>0){It.nodes.push(ye);var Dr=ye.clusterId;ye.clusterId=It.id;var ur=re.nodes.indexOf(ye);re.nodes.splice(ur,1);var Or=0,ln=0;rt.forEach(function(fn){var Xr=fn.source,Cn=fn.target,Qr=Dt[Xr].node.clusterId,Gr=Dt[Cn].node.clusterId;(Qr===It.id&&Gr!==It.id||Gr===It.id&&Qr!==It.id)&&(Or=Or+(fn[S]||1)),(Qr===Dr&&Gr!==Dr||Gr===Dr&&Qr!==Dr)&&(ln=ln+(fn[S]||1))}),It.sumTot=Or,re.sumTot=ln}})}var Ke={},$t=0;Object.keys(Ae).forEach(function(ye){var Bt=Ae[ye];if(!Bt.nodes||!Bt.nodes.length){delete Ae[ye];return}var re=String($t+1);re!==ye&&(Bt.id=re,Bt.nodes=Bt.nodes.map(function(Ee){return{id:Ee.id,clusterId:re}}),Ae[re]=Bt,Ke[ye]=re,delete Ae[ye],$t++)}),me.forEach(function(ye){var Bt=ye.node,re=ye.clusterId;!Bt||(Bt.clusterId=re,Bt.clusterId&&Ke[Bt.clusterId]&&(Bt.clusterId=Ke[Bt.clusterId]))});var ce=[],we={};rt.forEach(function(ye){var Bt=ye.source,re=ye.target,Ee=ye[S]||1,It=Dt[Bt].node.clusterId,Et=Dt[re].node.clusterId;if(!(!It||!Et)){var Wt="".concat(It,"---").concat(Et);if(we[Wt])we[Wt].weight+=Ee,we[Wt].count++;else{var fe={source:It,target:Et,weight:Ee,count:1};we[Wt]=fe,ce.push(fe)}}});var Pe=[];return Object.keys(Ae).forEach(function(ye){Pe.push(Ae[ye])}),{clusters:Pe,clusterEdges:ce}},y=p;G.default=y},89454:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=I(R(38823)),z=I(R(57085)),F=R(70643);function I(p){return p&&p.__esModule?p:{default:p}}var k=function(y,g){var T=[],x=y.nodes,S=x===void 0?[]:x,N=y.edges,m=N===void 0?[]:N;if(S.length===0)return T;var d=S[0],V=new Set;V.add(d);var Q=function(tt,nt){return g?tt.weight-nt.weight:0},j=new z.default(Q);for((0,F.getEdgesByNodeId)(d.id,m).forEach(function(rt){j.insert(rt)});!j.isEmpty();){var X=j.delMin(),K=X.source,J=X.target;V.has(K)&&V.has(J)||(T.push(X),V.has(K)||(V.add(K),(0,F.getEdgesByNodeId)(K,m).forEach(function(rt){j.insert(rt)})),V.has(J)||(V.add(J),(0,F.getEdgesByNodeId)(J,m).forEach(function(rt){j.insert(rt)})))}return T},D=function(y,g){var T=[],x=y.nodes,S=x===void 0?[]:x,N=y.edges,m=N===void 0?[]:N;if(S.length===0)return T;var d=m.map(function(K){return K});g&&d.sort(function(K,J){return K.weight-J.weight});for(var V=new L.default(S.map(function(K){return K.id}));d.length>0;){var Q=d.shift(),j=Q.source,X=Q.target;V.connected(j,X)||(T.push(Q),V.union(j,X))}return T},b=function(y,g,T){var x={prim:k,kruskal:D};return T?x[T](y,g):D(y,g)},E=b;G.default=E},74926:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=F(R(82556)),z=R(70643);function F(D){return D&&D.__esModule?D:{default:D}}var I=function(b,E,p){typeof E!="number"&&(E=1e-6),typeof p!="number"&&(p=.85);for(var y=1,g=0,T=1e3,x=b.nodes,S=x===void 0?[]:x,N=b.edges,m=N===void 0?[]:N,d=S.length,V,Q={},j={},X=0;X<d;++X){var K=S[X],J=K.id;Q[J]=1/d,j[J]=1/d}for(var rt=(0,L.default)(b);T>0&&y>E;){g=0;for(var X=0;X<d;++X){var K=S[X],J=K.id;if(V=0,rt[K.id].inDegree===0)Q[J]=0;else{for(var tt=(0,z.getNeighbors)(J,m,"source"),nt=0;nt<tt.length;++nt){var lt=tt[nt],xt=rt[lt].outDegree;xt>0&&(V+=j[lt]/xt)}Q[J]=p*V,g+=Q[J]}}g=(1-g)/d,y=0;for(var X=0;X<d;++X){var K=S[X],J=K.id;V=Q[J]+g,y+=Math.abs(V-j[J]),j[J]=V}T-=1}return j},k=I;G.default=k},57085:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var R=function(I,k){return I-k},L=function(){function F(I){I===void 0&&(I=R),this.compareFn=I,this.list=[]}return F.prototype.getLeft=function(I){return 2*I+1},F.prototype.getRight=function(I){return 2*I+2},F.prototype.getParent=function(I){return I===0?null:Math.floor((I-1)/2)},F.prototype.isEmpty=function(){return this.list.length<=0},F.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},F.prototype.delMin=function(){var I=this.top(),k=this.list.pop();return this.list.length>0&&(this.list[0]=k,this.moveDown(0)),I},F.prototype.insert=function(I){if(I!==null){this.list.push(I);var k=this.list.length-1;return this.moveUp(k),!0}return!1},F.prototype.moveUp=function(I){for(var k=this.getParent(I);I&&I>0&&this.compareFn(this.list[k],this.list[I])>0;){var D=this.list[k];this.list[k]=this.list[I],this.list[I]=D,I=k,k=this.getParent(I)}},F.prototype.moveDown=function(I){var k,D=I,b=this.getLeft(I),E=this.getRight(I),p=this.list.length;b!==null&&b<p&&this.compareFn(this.list[D],this.list[b])>0?D=b:E!==null&&E<p&&this.compareFn(this.list[D],this.list[E])>0&&(D=E),I!==D&&(k=[this.list[D],this.list[I]],this.list[I]=k[0],this.list[D]=k[1],this.moveDown(D))},F}(),z=L;G.default=z},88481:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.LinkedListNode=void 0;var R=function(k,D){return k===D},L=function(){function I(k,D){D===void 0&&(D=null),this.value=k,this.next=D}return I.prototype.toString=function(k){return k?k(this.value):"".concat(this.value)},I}();G.LinkedListNode=L;var z=function(){function I(k){k===void 0&&(k=R),this.head=null,this.tail=null,this.compare=k}return I.prototype.prepend=function(k){var D=new L(k,this.head);return this.head=D,this.tail||(this.tail=D),this},I.prototype.append=function(k){var D=new L(k);return this.head?(this.tail.next=D,this.tail=D,this):(this.head=D,this.tail=D,this)},I.prototype.delete=function(k){if(!this.head)return null;for(var D=null;this.head&&this.compare(this.head.value,k);)D=this.head,this.head=this.head.next;var b=this.head;if(b!==null)for(;b.next;)this.compare(b.next.value,k)?(D=b.next,b.next=b.next.next):b=b.next;return this.compare(this.tail.value,k)&&(this.tail=b),D},I.prototype.find=function(k){var D=k.value,b=D===void 0?void 0:D,E=k.callback,p=E===void 0?void 0:E;if(!this.head)return null;for(var y=this.head;y;){if(p&&p(y.value)||b!==void 0&&this.compare(y.value,b))return y;y=y.next}return null},I.prototype.deleteTail=function(){var k=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,k;for(var D=this.head;D.next;)D.next.next?D=D.next:D.next=null;return this.tail=D,k},I.prototype.deleteHead=function(){if(!this.head)return null;var k=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),k},I.prototype.fromArray=function(k){var D=this;return k.forEach(function(b){return D.append(b)}),this},I.prototype.toArray=function(){for(var k=[],D=this.head;D;)k.push(D),D=D.next;return k},I.prototype.reverse=function(){for(var k=this.head,D=null,b=null;k;)b=k.next,k.next=D,D=k,k=b;this.tail=this.head,this.head=D},I.prototype.toString=function(k){return k===void 0&&(k=void 0),this.toArray().map(function(D){return D.toString(k)}).toString()},I}(),F=z;G.default=F},93026:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=z(R(88481));function z(k){return k&&k.__esModule?k:{default:k}}var F=function(){function k(){this.linkedList=new L.default}return k.prototype.isEmpty=function(){return!this.linkedList.head},k.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},k.prototype.enqueue=function(D){this.linkedList.append(D)},k.prototype.dequeue=function(){var D=this.linkedList.deleteHead();return D?D.value:null},k.prototype.toString=function(D){return this.linkedList.toString(D)},k}(),I=F;G.default=I},38823:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var R=function(){function z(F){this.count=F.length,this.parent={};for(var I=0,k=F;I<k.length;I++){var D=k[I];this.parent[D]=D}}return z.prototype.find=function(F){for(;this.parent[F]!==F;)F=this.parent[F];return F},z.prototype.union=function(F,I){var k=this.find(F),D=this.find(I);k!==D&&(k<D?(this.parent[I]!==I&&this.union(this.parent[I],F),this.parent[I]=this.parent[F]):(this.parent[F]!==F&&this.union(this.parent[F],I),this.parent[F]=this.parent[I]))},z.prototype.connected=function(F,I){return this.find(F)===this.find(I)},z}(),L=R;G.default=L},17892:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.DistanceType=void 0;var R;G.DistanceType=R,function(L){L.EuclideanDistance="euclideanDistance"}(R||(G.DistanceType=R={}))},70643:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.uniqueId=G.getOutEdgesNodeId=G.getNeighbors=G.getEdgesByNodeId=void 0;var R=function(k,D,b){D===void 0&&(D=[]);var E=D.filter(function(T){return T.source===k||T.target===k});if(b==="target"){var p=function(x){return x.source===k};return E.filter(p).map(function(T){return T.target})}if(b==="source"){var y=function(x){return x.target===k};return E.filter(y).map(function(T){return T.source})}var g=function(x){return x.source===k?x.target:x.source};return E.map(g)};G.getNeighbors=R;var L=function(k,D){return D.filter(function(b){return b.source===k})};G.getOutEdgesNodeId=L;var z=function(k,D){return D.filter(function(b){return b.source===k||b.target===k})};G.getEdgesByNodeId=z;var F=function(k){k===void 0&&(k=0);var D="".concat(Math.random()).split(".")[1].substr(0,5),b="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(k,"-").concat(D).concat(b)};G.uniqueId=F},26838:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.oneHot=G.getDistance=G.getAllKeyValueMap=G.default=void 0;var L=R(49242),z=R(17892),F=I(R(29741));function I(p){return p&&p.__esModule?p:{default:p}}var k=function(y,g,T){var x=[];(g==null?void 0:g.length)?x=g:(y.forEach(function(N){x=x.concat(Object.keys(N))}),x=(0,L.uniq)(x));var S={};return x.forEach(function(N){var m=[];y.forEach(function(d){d[N]!==void 0&&d[N]!==""&&m.push(d[N])}),m.length&&!(T==null?void 0:T.includes(N))&&(S[N]=(0,L.uniq)(m))}),S};G.getAllKeyValueMap=k;var D=function(y,g,T){var x=k(y,g,T),S=[];if(!Object.keys(x).length)return S;var N=Object.values(x),m=N.every(function(d){return d.every(function(V){return typeof V=="number"})});return y.forEach(function(d,V){var Q=[];Object.keys(x).forEach(function(j){var X=d[j],K=x[j],J=K.findIndex(function(nt){return X===nt}),rt=[];if(m)rt.push(X);else for(var tt=0;tt<K.length;tt++)tt===J?rt.push(1):rt.push(0);Q=Q.concat(rt)}),S[V]=Q}),S};G.oneHot=D;var b=function(y,g,T,x){T===void 0&&(T=z.DistanceType.EuclideanDistance);var S=0;switch(T){case z.DistanceType.EuclideanDistance:S=new F.default(y).euclideanDistance(new F.default(g));break;default:break}return S};G.getDistance=b;var E={getAllKeyValueMap:k,oneHot:D,getDistance:b};G.default=E},3665:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getPropertyWeight=G.getAllSortProperties=G.getAllProperties=G.default=void 0;var L=R(92935),z=function(E,p){E===void 0&&(E=[]),p===void 0&&(p=100);var y={};E.forEach(function(T){!T.properties||Object.keys(T.properties).forEach(function(x){if(x==="id"||!"".concat(T.properties[x]).match(L.secondReg)&&!"".concat(T.properties[x]).match(L.dateReg)&&isNaN(Number(T.properties[x]))){y.hasOwnProperty(x)&&delete y[x];return}y.hasOwnProperty(x)?y[x]+=1:y[x]=1})});var g=Object.keys(y).sort(function(T,x){return y[x]-y[T]});return g.length<p?g:g.slice(0,p)};G.getAllSortProperties=z;var F=function(E,p){return p.map(function(y){return E.hasOwnProperty(y)?E[y]:0})},I=function(E){for(var p=z(E),y=[],g=0;g<E.length;g++)y[g]=F(E[g].properties,p);return y};G.getPropertyWeight=I;var k=function(E,p){p===void 0&&(p=void 0);var y=[];return E.forEach(function(g){p===void 0&&y.push(g),g[p]!==void 0&&y.push(g[p])}),y};G.getAllProperties=k;var D={getAllSortProperties:z,getPropertyWeight:I,getAllProperties:k};G.default=D},29741:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=R(49242),z=function(){function I(k){this.arr=k}return I.prototype.getArr=function(){return this.arr||[]},I.prototype.add=function(k){var D,b=k.arr;if(!((D=this.arr)===null||D===void 0?void 0:D.length))return new I(b);if(!(b==null?void 0:b.length))return new I(this.arr);if(this.arr.length===b.length){var E=[];for(var p in this.arr)E[p]=this.arr[p]+b[p];return new I(E)}},I.prototype.subtract=function(k){var D,b=k.arr;if(!((D=this.arr)===null||D===void 0?void 0:D.length))return new I(b);if(!(b==null?void 0:b.length))return new I(this.arr);if(this.arr.length===b.length){var E=[];for(var p in this.arr)E[p]=this.arr[p]-b[p];return new I(E)}},I.prototype.avg=function(k){var D=[];if(k!==0)for(var b in this.arr)D[b]=this.arr[b]/k;return new I(D)},I.prototype.negate=function(){var k=[];for(var D in this.arr)k[D]=-this.arr[D];return new I(k)},I.prototype.squareEuclideanDistance=function(k){var D,b=k.arr;if(!((D=this.arr)===null||D===void 0?void 0:D.length)||!(b==null?void 0:b.length))return 0;if(this.arr.length===b.length){var E=0;for(var p in this.arr)E+=Math.pow(this.arr[p]-k.arr[p],2);return E}},I.prototype.euclideanDistance=function(k){var D,b=k.arr;if(!((D=this.arr)===null||D===void 0?void 0:D.length)||!(b==null?void 0:b.length))return 0;if(this.arr.length===b.length){var E=0;for(var p in this.arr)E+=Math.pow(this.arr[p]-k.arr[p],2);return Math.sqrt(E)}else console.error("The two vectors are unequal in length.")},I.prototype.normalize=function(){var k=[],D=(0,L.clone)(this.arr);D.sort(function(y,g){return y-g});var b=D[D.length-1],E=D[0];for(var p in this.arr)k[p]=(this.arr[p]-E)/(b-E);return new I(k)},I.prototype.norm2=function(){var k;if(!((k=this.arr)===null||k===void 0?void 0:k.length))return 0;var D=0;for(var b in this.arr)D+=Math.pow(this.arr[b],2);return Math.sqrt(D)},I.prototype.dot=function(k){var D,b=k.arr;if(!((D=this.arr)===null||D===void 0?void 0:D.length)||!(b==null?void 0:b.length))return 0;if(this.arr.length===b.length){var E=0;for(var p in this.arr)E+=this.arr[p]*k.arr[p];return E}else console.error("The two vectors are unequal in length.")},I.prototype.equal=function(k){var D,b=k.arr;if(((D=this.arr)===null||D===void 0?void 0:D.length)!==(b==null?void 0:b.length))return!1;for(var E in this.arr)if(this.arr[E]!==b[E])return!1;return!0},I}(),F=z;G.default=F},31656:function(Mr,G,R){"use strict";function L(j){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},L(j)}Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"GADDI",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(G,"breadthFirstSearch",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(G,"connectedComponent",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(G,"depthFirstSearch",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(G,"detectCycle",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(G,"dijkstra",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(G,"findAllPath",{enumerable:!0,get:function(){return p.findAllPath}}),Object.defineProperty(G,"findShortestPath",{enumerable:!0,get:function(){return p.findShortestPath}}),Object.defineProperty(G,"floydWarshall",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(G,"getAdjMatrix",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(G,"getDegree",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(G,"getInDegree",{enumerable:!0,get:function(){return k.getInDegree}}),Object.defineProperty(G,"getNeighbors",{enumerable:!0,get:function(){return m.getNeighbors}}),Object.defineProperty(G,"getOutDegree",{enumerable:!0,get:function(){return k.getOutDegree}}),Object.defineProperty(G,"labelPropagation",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(G,"louvain",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(G,"minimumSpanningTree",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(G,"pageRank",{enumerable:!0,get:function(){return S.default}});var z=Q(R(62238)),F=Q(R(83764)),I=Q(R(59527)),k=V(R(82556)),D=Q(R(94282)),b=Q(R(45891)),E=Q(R(78089)),p=R(41727),y=Q(R(75033)),g=Q(R(5170)),T=Q(R(57363)),x=Q(R(89454)),S=Q(R(74926)),N=Q(R(82812)),m=R(70643);function d(j){if(typeof WeakMap!="function")return null;var X=new WeakMap,K=new WeakMap;return(d=function(rt){return rt?K:X})(j)}function V(j,X){if(!X&&j&&j.__esModule)return j;if(j===null||L(j)!=="object"&&typeof j!="function")return{default:j};var K=d(X);if(K&&K.has(j))return K.get(j);var J={},rt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in j)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(j,tt)){var nt=rt?Object.getOwnPropertyDescriptor(j,tt):null;nt&&(nt.get||nt.set)?Object.defineProperty(J,tt,nt):J[tt]=j[tt]}return J.default=j,K&&K.set(j,J),J}function Q(j){return j&&j.__esModule?j:{default:j}}},66044:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.MESSAGE=G.ALGORITHM=void 0;var R={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};G.ALGORITHM=R;var L={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};G.MESSAGE=L},70585:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var L=R(66044),z=F(R(12067));function F(D){return D&&D.__esModule?D:{default:D}}var I=function(b){return function(){for(var E=[],p=0;p<arguments.length;p++)E[p]=arguments[p];return new Promise(function(y,g){var T=new z.default;T.postMessage({_algorithmType:b,data:E}),T.onmessage=function(x){var S=x.data,N=S.data,m=S._algorithmType;L.MESSAGE.SUCCESS===m?y(N):g(),T.terminate()}})}},k=I;G.default=k},30485:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.pageRankAsync=G.minimumSpanningTreeAsync=G.louvainAsync=G.labelPropagationAsync=G.getOutDegreeAsync=G.getNeighborsAsync=G.getInDegreeAsync=G.getDegreeAsync=G.getAdjMatrixAsync=G.floydWarshallAsync=G.findShortestPathAsync=G.findAllPathAsync=G.dijkstraAsync=G.detectCycleAsync=G.detectAllUndirectedCycleAsync=G.detectAllDirectedCycleAsync=G.detectAllCyclesAsync=G.connectedComponentAsync=G.GADDIAsync=void 0;var L=F(R(70585)),z=R(66044);function F(J){return J&&J.__esModule?J:{default:J}}var I=function(rt,tt){return(0,L.default)(z.ALGORITHM.getAdjMatrix).apply(void 0,[rt,tt])};G.getAdjMatrixAsync=I;var k=function(rt,tt){return(0,L.default)(z.ALGORITHM.connectedComponent).apply(void 0,[rt,tt])};G.connectedComponentAsync=k;var D=function(rt){return(0,L.default)(z.ALGORITHM.getDegree)(rt)};G.getDegreeAsync=D;var b=function(rt,tt){return(0,L.default)(z.ALGORITHM.getInDegree)(rt,tt)};G.getInDegreeAsync=b;var E=function(rt,tt){return(0,L.default)(z.ALGORITHM.getOutDegree)(rt,tt)};G.getOutDegreeAsync=E;var p=function(rt){return(0,L.default)(z.ALGORITHM.detectCycle)(rt)};G.detectCycleAsync=p;var y=function(rt){return(0,L.default)(z.ALGORITHM.detectAllCycles)(rt)};G.detectAllCyclesAsync=y;var g=function(rt){return(0,L.default)(z.ALGORITHM.detectAllDirectedCycle)(rt)};G.detectAllDirectedCycleAsync=g;var T=function(rt){return(0,L.default)(z.ALGORITHM.detectAllUndirectedCycle)(rt)};G.detectAllUndirectedCycleAsync=T;var x=function(rt,tt,nt,lt){return(0,L.default)(z.ALGORITHM.dijkstra).apply(void 0,[rt,tt,nt,lt])};G.dijkstraAsync=x;var S=function(rt,tt,nt,lt){return(0,L.default)(z.ALGORITHM.findAllPath).apply(void 0,[rt,tt,nt,lt])};G.findAllPathAsync=S;var N=function(rt,tt,nt,lt,xt){return(0,L.default)(z.ALGORITHM.findShortestPath).apply(void 0,[rt,tt,nt,lt,xt])};G.findShortestPathAsync=N;var m=function(rt,tt){return(0,L.default)(z.ALGORITHM.floydWarshall).apply(void 0,[rt,tt])};G.floydWarshallAsync=m;var d=function(rt,tt,nt,lt){return lt===void 0&&(lt=1e3),(0,L.default)(z.ALGORITHM.labelPropagation)(rt,tt,nt,lt)};G.labelPropagationAsync=d;var V=function(rt,tt,nt,lt){return(0,L.default)(z.ALGORITHM.louvain)(rt,tt,nt,lt)};G.louvainAsync=V;var Q=function(rt,tt,nt){return(0,L.default)(z.ALGORITHM.minimumSpanningTree).apply(void 0,[rt,tt,nt])};G.minimumSpanningTreeAsync=Q;var j=function(rt,tt,nt){return(0,L.default)(z.ALGORITHM.pageRank).apply(void 0,[rt,tt,nt])};G.pageRankAsync=j;var X=function(rt,tt,nt){return(0,L.default)(z.ALGORITHM.getNeighbors).apply(void 0,[rt,tt,nt])};G.getNeighborsAsync=X;var K=function(rt,tt,nt,lt,xt,jt,Dt){return nt===void 0&&(nt=!1),jt===void 0&&(jt="cluster"),Dt===void 0&&(Dt="cluster"),(0,L.default)(z.ALGORITHM.GADDI).apply(void 0,[rt,tt,nt,lt,xt,jt,Dt])};G.GADDIAsync=K},12067:function(Mr,G,R){"use strict";function L(E){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},L(E)}Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var z=k(R(31656)),F=R(66044);function I(E){if(typeof WeakMap!="function")return null;var p=new WeakMap,y=new WeakMap;return(I=function(T){return T?y:p})(E)}function k(E,p){if(!p&&E&&E.__esModule)return E;if(E===null||L(E)!=="object"&&typeof E!="function")return{default:E};var y=I(p);if(y&&y.has(E))return y.get(E);var g={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in E)if(x!=="default"&&Object.prototype.hasOwnProperty.call(E,x)){var S=T?Object.getOwnPropertyDescriptor(E,x):null;S&&(S.get||S.set)?Object.defineProperty(g,x,S):g[x]=E[x]}return g.default=E,y&&y.set(E,g),g}var D=typeof self!="undefined"?self:{};D.onmessage=function(E){var p=E.data,y=p._algorithmType,g=p.data;if(!!y){if(typeof z[y]=="function"){var T=z[y].apply(z,g);D.postMessage({_algorithmType:F.MESSAGE.SUCCESS,data:T});return}D.postMessage({_algorithmType:F.MESSAGE.FAILURE})}};var b=null;G.default=b},79984:function(Mr,G,R){"use strict";R.r(G),R.d(G,{Kernel:function(){return jt},World:function(){return kr}});var L=R(92137),z=R(96156),F=R(6610),I=R(5991),k=R(36719),D=R.n(k),b=R(81763),E=R.n(b),p=R(1469),y=R.n(p),g=R(87757),T=R.n(g),x=null,S=1;function N(){return S++}var m=null,d=null,V;(function(Z){Z[Z.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",Z[Z.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",Z[Z.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",Z[Z.POINTS=0]="POINTS",Z[Z.LINES=1]="LINES",Z[Z.LINE_LOOP=2]="LINE_LOOP",Z[Z.LINE_STRIP=3]="LINE_STRIP",Z[Z.TRIANGLES=4]="TRIANGLES",Z[Z.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Z[Z.TRIANGLE_FAN=6]="TRIANGLE_FAN",Z[Z.ZERO=0]="ZERO",Z[Z.ONE=1]="ONE",Z[Z.SRC_COLOR=768]="SRC_COLOR",Z[Z.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",Z[Z.SRC_ALPHA=770]="SRC_ALPHA",Z[Z.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",Z[Z.DST_ALPHA=772]="DST_ALPHA",Z[Z.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",Z[Z.DST_COLOR=774]="DST_COLOR",Z[Z.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",Z[Z.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",Z[Z.FUNC_ADD=32774]="FUNC_ADD",Z[Z.BLEND_EQUATION=32777]="BLEND_EQUATION",Z[Z.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",Z[Z.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",Z[Z.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",Z[Z.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",Z[Z.MAX_EXT=32776]="MAX_EXT",Z[Z.MIN_EXT=32775]="MIN_EXT",Z[Z.BLEND_DST_RGB=32968]="BLEND_DST_RGB",Z[Z.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",Z[Z.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",Z[Z.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",Z[Z.CONSTANT_COLOR=32769]="CONSTANT_COLOR",Z[Z.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",Z[Z.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",Z[Z.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",Z[Z.BLEND_COLOR=32773]="BLEND_COLOR",Z[Z.ARRAY_BUFFER=34962]="ARRAY_BUFFER",Z[Z.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",Z[Z.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",Z[Z.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",Z[Z.STREAM_DRAW=35040]="STREAM_DRAW",Z[Z.STATIC_DRAW=35044]="STATIC_DRAW",Z[Z.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",Z[Z.BUFFER_SIZE=34660]="BUFFER_SIZE",Z[Z.BUFFER_USAGE=34661]="BUFFER_USAGE",Z[Z.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",Z[Z.FRONT=1028]="FRONT",Z[Z.BACK=1029]="BACK",Z[Z.FRONT_AND_BACK=1032]="FRONT_AND_BACK",Z[Z.CULL_FACE=2884]="CULL_FACE",Z[Z.BLEND=3042]="BLEND",Z[Z.DITHER=3024]="DITHER",Z[Z.STENCIL_TEST=2960]="STENCIL_TEST",Z[Z.DEPTH_TEST=2929]="DEPTH_TEST",Z[Z.SCISSOR_TEST=3089]="SCISSOR_TEST",Z[Z.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",Z[Z.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",Z[Z.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",Z[Z.NO_ERROR=0]="NO_ERROR",Z[Z.INVALID_ENUM=1280]="INVALID_ENUM",Z[Z.INVALID_VALUE=1281]="INVALID_VALUE",Z[Z.INVALID_OPERATION=1282]="INVALID_OPERATION",Z[Z.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",Z[Z.CW=2304]="CW",Z[Z.CCW=2305]="CCW",Z[Z.LINE_WIDTH=2849]="LINE_WIDTH",Z[Z.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",Z[Z.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",Z[Z.CULL_FACE_MODE=2885]="CULL_FACE_MODE",Z[Z.FRONT_FACE=2886]="FRONT_FACE",Z[Z.DEPTH_RANGE=2928]="DEPTH_RANGE",Z[Z.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",Z[Z.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",Z[Z.DEPTH_FUNC=2932]="DEPTH_FUNC",Z[Z.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",Z[Z.STENCIL_FUNC=2962]="STENCIL_FUNC",Z[Z.STENCIL_FAIL=2964]="STENCIL_FAIL",Z[Z.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",Z[Z.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",Z[Z.STENCIL_REF=2967]="STENCIL_REF",Z[Z.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",Z[Z.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",Z[Z.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",Z[Z.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",Z[Z.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",Z[Z.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",Z[Z.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",Z[Z.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",Z[Z.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",Z[Z.VIEWPORT=2978]="VIEWPORT",Z[Z.SCISSOR_BOX=3088]="SCISSOR_BOX",Z[Z.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",Z[Z.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",Z[Z.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",Z[Z.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",Z[Z.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",Z[Z.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",Z[Z.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",Z[Z.RED_BITS=3410]="RED_BITS",Z[Z.GREEN_BITS=3411]="GREEN_BITS",Z[Z.BLUE_BITS=3412]="BLUE_BITS",Z[Z.ALPHA_BITS=3413]="ALPHA_BITS",Z[Z.DEPTH_BITS=3414]="DEPTH_BITS",Z[Z.STENCIL_BITS=3415]="STENCIL_BITS",Z[Z.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",Z[Z.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",Z[Z.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",Z[Z.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",Z[Z.SAMPLES=32937]="SAMPLES",Z[Z.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",Z[Z.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",Z[Z.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",Z[Z.DONT_CARE=4352]="DONT_CARE",Z[Z.FASTEST=4353]="FASTEST",Z[Z.NICEST=4354]="NICEST",Z[Z.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",Z[Z.BYTE=5120]="BYTE",Z[Z.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Z[Z.SHORT=5122]="SHORT",Z[Z.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Z[Z.INT=5124]="INT",Z[Z.UNSIGNED_INT=5125]="UNSIGNED_INT",Z[Z.FLOAT=5126]="FLOAT",Z[Z.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Z[Z.ALPHA=6406]="ALPHA",Z[Z.RGB=6407]="RGB",Z[Z.RGBA=6408]="RGBA",Z[Z.LUMINANCE=6409]="LUMINANCE",Z[Z.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Z[Z.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Z[Z.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Z[Z.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Z[Z.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",Z[Z.VERTEX_SHADER=35633]="VERTEX_SHADER",Z[Z.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",Z[Z.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",Z[Z.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",Z[Z.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",Z[Z.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",Z[Z.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",Z[Z.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",Z[Z.SHADER_TYPE=35663]="SHADER_TYPE",Z[Z.DELETE_STATUS=35712]="DELETE_STATUS",Z[Z.LINK_STATUS=35714]="LINK_STATUS",Z[Z.VALIDATE_STATUS=35715]="VALIDATE_STATUS",Z[Z.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",Z[Z.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",Z[Z.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",Z[Z.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",Z[Z.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",Z[Z.NEVER=512]="NEVER",Z[Z.LESS=513]="LESS",Z[Z.EQUAL=514]="EQUAL",Z[Z.LEQUAL=515]="LEQUAL",Z[Z.GREATER=516]="GREATER",Z[Z.NOTEQUAL=517]="NOTEQUAL",Z[Z.GEQUAL=518]="GEQUAL",Z[Z.ALWAYS=519]="ALWAYS",Z[Z.KEEP=7680]="KEEP",Z[Z.REPLACE=7681]="REPLACE",Z[Z.INCR=7682]="INCR",Z[Z.DECR=7683]="DECR",Z[Z.INVERT=5386]="INVERT",Z[Z.INCR_WRAP=34055]="INCR_WRAP",Z[Z.DECR_WRAP=34056]="DECR_WRAP",Z[Z.VENDOR=7936]="VENDOR",Z[Z.RENDERER=7937]="RENDERER",Z[Z.VERSION=7938]="VERSION",Z[Z.NEAREST=9728]="NEAREST",Z[Z.LINEAR=9729]="LINEAR",Z[Z.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",Z[Z.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",Z[Z.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",Z[Z.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",Z[Z.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",Z[Z.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",Z[Z.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",Z[Z.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",Z[Z.TEXTURE_2D=3553]="TEXTURE_2D",Z[Z.TEXTURE=5890]="TEXTURE",Z[Z.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Z[Z.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",Z[Z.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Z[Z.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Z[Z.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Z[Z.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Z[Z.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Z[Z.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",Z[Z.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",Z[Z.TEXTURE0=33984]="TEXTURE0",Z[Z.TEXTURE1=33985]="TEXTURE1",Z[Z.TEXTURE2=33986]="TEXTURE2",Z[Z.TEXTURE3=33987]="TEXTURE3",Z[Z.TEXTURE4=33988]="TEXTURE4",Z[Z.TEXTURE5=33989]="TEXTURE5",Z[Z.TEXTURE6=33990]="TEXTURE6",Z[Z.TEXTURE7=33991]="TEXTURE7",Z[Z.TEXTURE8=33992]="TEXTURE8",Z[Z.TEXTURE9=33993]="TEXTURE9",Z[Z.TEXTURE10=33994]="TEXTURE10",Z[Z.TEXTURE11=33995]="TEXTURE11",Z[Z.TEXTURE12=33996]="TEXTURE12",Z[Z.TEXTURE13=33997]="TEXTURE13",Z[Z.TEXTURE14=33998]="TEXTURE14",Z[Z.TEXTURE15=33999]="TEXTURE15",Z[Z.TEXTURE16=34e3]="TEXTURE16",Z[Z.TEXTURE17=34001]="TEXTURE17",Z[Z.TEXTURE18=34002]="TEXTURE18",Z[Z.TEXTURE19=34003]="TEXTURE19",Z[Z.TEXTURE20=34004]="TEXTURE20",Z[Z.TEXTURE21=34005]="TEXTURE21",Z[Z.TEXTURE22=34006]="TEXTURE22",Z[Z.TEXTURE23=34007]="TEXTURE23",Z[Z.TEXTURE24=34008]="TEXTURE24",Z[Z.TEXTURE25=34009]="TEXTURE25",Z[Z.TEXTURE26=34010]="TEXTURE26",Z[Z.TEXTURE27=34011]="TEXTURE27",Z[Z.TEXTURE28=34012]="TEXTURE28",Z[Z.TEXTURE29=34013]="TEXTURE29",Z[Z.TEXTURE30=34014]="TEXTURE30",Z[Z.TEXTURE31=34015]="TEXTURE31",Z[Z.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",Z[Z.REPEAT=10497]="REPEAT",Z[Z.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",Z[Z.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Z[Z.FLOAT_VEC2=35664]="FLOAT_VEC2",Z[Z.FLOAT_VEC3=35665]="FLOAT_VEC3",Z[Z.FLOAT_VEC4=35666]="FLOAT_VEC4",Z[Z.INT_VEC2=35667]="INT_VEC2",Z[Z.INT_VEC3=35668]="INT_VEC3",Z[Z.INT_VEC4=35669]="INT_VEC4",Z[Z.BOOL=35670]="BOOL",Z[Z.BOOL_VEC2=35671]="BOOL_VEC2",Z[Z.BOOL_VEC3=35672]="BOOL_VEC3",Z[Z.BOOL_VEC4=35673]="BOOL_VEC4",Z[Z.FLOAT_MAT2=35674]="FLOAT_MAT2",Z[Z.FLOAT_MAT3=35675]="FLOAT_MAT3",Z[Z.FLOAT_MAT4=35676]="FLOAT_MAT4",Z[Z.SAMPLER_2D=35678]="SAMPLER_2D",Z[Z.SAMPLER_CUBE=35680]="SAMPLER_CUBE",Z[Z.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",Z[Z.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",Z[Z.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",Z[Z.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",Z[Z.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",Z[Z.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",Z[Z.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",Z[Z.COMPILE_STATUS=35713]="COMPILE_STATUS",Z[Z.LOW_FLOAT=36336]="LOW_FLOAT",Z[Z.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",Z[Z.HIGH_FLOAT=36338]="HIGH_FLOAT",Z[Z.LOW_INT=36339]="LOW_INT",Z[Z.MEDIUM_INT=36340]="MEDIUM_INT",Z[Z.HIGH_INT=36341]="HIGH_INT",Z[Z.FRAMEBUFFER=36160]="FRAMEBUFFER",Z[Z.RENDERBUFFER=36161]="RENDERBUFFER",Z[Z.RGBA4=32854]="RGBA4",Z[Z.RGB5_A1=32855]="RGB5_A1",Z[Z.RGB565=36194]="RGB565",Z[Z.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",Z[Z.STENCIL_INDEX=6401]="STENCIL_INDEX",Z[Z.STENCIL_INDEX8=36168]="STENCIL_INDEX8",Z[Z.DEPTH_STENCIL=34041]="DEPTH_STENCIL",Z[Z.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",Z[Z.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",Z[Z.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",Z[Z.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",Z[Z.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",Z[Z.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",Z[Z.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",Z[Z.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",Z[Z.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",Z[Z.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",Z[Z.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",Z[Z.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",Z[Z.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",Z[Z.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",Z[Z.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",Z[Z.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",Z[Z.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",Z[Z.NONE=0]="NONE",Z[Z.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",Z[Z.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",Z[Z.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",Z[Z.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",Z[Z.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",Z[Z.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",Z[Z.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",Z[Z.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",Z[Z.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",Z[Z.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",Z[Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",Z[Z.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",Z[Z.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",Z[Z.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",Z[Z.COPY_SRC=1]="COPY_SRC",Z[Z.COPY_DST=2]="COPY_DST",Z[Z.SAMPLED=4]="SAMPLED",Z[Z.STORAGE=8]="STORAGE",Z[Z.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(V||(V={}));var Q=function(){function Z(){(0,F.Z)(this,Z),this.config=void 0}return(0,I.Z)(Z,[{key:"get",value:function(){return this.config}},{key:"set",value:function(ne){this.config=ne}}]),Z}(),j=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),X;(function(Z){Z.Void="Void",Z.Boolean="Boolean",Z.Float="Float",Z.Uint32="Uint32",Z.Int32="Int32",Z.Vector="Vector",Z.Vector2Float="vec2<f32>",Z.Vector3Float="vec3<f32>",Z.Vector4Float="vec4<f32>",Z.Vector2Boolean="vec2<bool>",Z.Vector3Boolean="vec3<bool>",Z.Vector4Boolean="vec4<bool>",Z.Vector2Uint="vec2<u32>",Z.Vector3Uint="vec3<u32>",Z.Vector4Uint="vec4<u32>",Z.Vector2Int="vec2<i32>",Z.Vector3Int="vec3<i32>",Z.Vector4Int="vec4<i32>",Z.Matrix="Matrix",Z.Matrix3x3Float="mat3x3<f32>",Z.Matrix4x4Float="mat4x4<i32>",Z.Struct="Struct",Z.FloatArray="Float[]",Z.Vector4FloatArray="vec4<f32>[]"})(X||(X={}));var K;(function(Z){Z.Program="Program",Z.Identifier="Identifier",Z.VariableDeclaration="VariableDeclaration",Z.BlockStatement="BlockStatement",Z.ReturnStatement="ReturnStatement",Z.FunctionDeclaration="FunctionDeclaration",Z.VariableDeclarator="VariableDeclarator",Z.AssignmentExpression="AssignmentExpression",Z.LogicalExpression="LogicalExpression",Z.BinaryExpression="BinaryExpression",Z.ArrayExpression="ArrayExpression",Z.UnaryExpression="UnaryExpression",Z.UpdateExpression="UpdateExpression",Z.FunctionExpression="FunctionExpression",Z.MemberExpression="MemberExpression",Z.ConditionalExpression="ConditionalExpression",Z.ExpressionStatement="ExpressionStatement",Z.CallExpression="CallExpression",Z.NumThreadStatement="NumThreadStatement",Z.StorageStatement="StorageStatement",Z.DoWhileStatement="DoWhileStatement",Z.WhileStatement="WhileStatement",Z.ForStatement="ForStatement",Z.BreakStatement="BreakStatement",Z.ContinueStatement="ContinueStatement",Z.IfStatement="IfStatement",Z.ImportedFunctionStatement="ImportedFunctionStatement"})(K||(K={}));var J;(function(Z){Z.Input="Input",Z.Output="Output",Z.Uniform="Uniform",Z.Workgroup="Workgroup",Z.UniformConstant="UniformConstant",Z.Image="Image",Z.StorageBuffer="StorageBuffer",Z.Private="Private",Z.Function="Function"})(J||(J={}));var rt;(function(Z){Z.GLSL100="GLSL100",Z.GLSL450="GLSL450",Z.WGSL="WGSL"})(rt||(rt={}));var tt="__DefineValuePlaceholder__";function nt(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function lt(Z,Te){var ne=Object.keys(Z);if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(Z);Te&&(it=it.filter(function(ot){return Object.getOwnPropertyDescriptor(Z,ot).enumerable})),ne.push.apply(ne,it)}return ne}function xt(Z){for(var Te=1;Te<arguments.length;Te++){var ne=arguments[Te]!=null?arguments[Te]:{};Te%2?lt(Object(ne),!0).forEach(function(it){(0,z.Z)(Z,it,ne[it])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(ne)):lt(Object(ne)).forEach(function(it){Object.defineProperty(Z,it,Object.getOwnPropertyDescriptor(ne,it))})}return Z}var jt=function(){function Z(Te,ne){(0,F.Z)(this,Z),this.engine=Te,this.configService=ne,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,I.Z)(Z,[{key:"init",value:function(){var ne=this.configService.get(),it=ne.canvas,ot=ne.engineOptions;this.initPromise=this.engine.init(xt({canvas:it||nt(),antialiasing:!1},ot))}},{key:"setBundle",value:function(ne){this.compiledBundle=JSON.parse(JSON.stringify(ne))}},{key:"setDispatch",value:function(ne){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=ne),this}},{key:"setMaxIteration",value:function(ne){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=ne),this}},{key:"setBinding",value:function(ne,it){var ot=this;if(typeof ne=="string"){var B=E()(it)||D()(it)||y()(it);if(this.compiledBundle&&this.compiledBundle.context){var _=this.compiledBundle.context.defines.find(function(Y){return Y.name===ne});if(_)return _.value=it,this;var C=this.compiledBundle.context.uniforms.find(function(Y){return Y.name===ne});C&&(B?(C.data=it,C.isReferer=!1,C.storageClass===J.Uniform?this.model&&this.model.updateUniform(ne,it):this.model&&this.model.updateBuffer(ne,it)):(C.isReferer=!0,C.data=it))}}else Object.keys(ne).forEach(function(Y){ot.setBinding(Y,ne[Y])});return this}},{key:"execute",value:function(){var Te=(0,L.Z)(T().mark(function it(){var ot=this,B,_,C=arguments;return T().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:if(B=C.length>0&&C[0]!==void 0?C[0]:1,!this.dirty){pt.next=6;break}return this.compiledBundle.context&&(B>1?this.compiledBundle.context.maxIteration=B:this.compiledBundle.context.maxIteration++),pt.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(_t){var Mt=_t.isReferer;return Mt}).forEach(function(_t){var Mt=_t.data,zt=_t.name;ot.model.confirmInput(Mt.model,zt)}),_=0;_<B;_++)this.model.run();return this.engine.endFrame(),pt.abrupt("return",this);case 12:case"end":return pt.stop()}},it,this)}));function ne(){return Te.apply(this,arguments)}return ne}()},{key:"getOutput",value:function(){var Te=(0,L.Z)(T().mark(function it(){return T().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",this.model.readData());case 1:case"end":return B.stop()}},it,this)}));function ne(){return Te.apply(this,arguments)}return ne}()},{key:"compile",value:function(){var Te=(0,L.Z)(T().mark(function it(){var ot,B,_;return T().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,this.initPromise;case 2:return ot=xt({},this.compiledBundle.context),B=this.engine.supportWebGPU?this.engine.useWGSL?rt.WGSL:rt.GLSL450:rt.GLSL100,_=this.compiledBundle.shaders[B],ot.defines.filter(function(pt){return pt.runtime}).forEach(function(pt){var _t="".concat(tt).concat(pt.name);_=_.replace(_t,"".concat(pt.value))}),ot.shader=_,ot.uniforms.forEach(function(pt){if(!pt.data&&pt.storageClass===J.StorageBuffer){var _t=1;pt.type===X.FloatArray?_t=1:pt.type===X.Vector4FloatArray&&(_t=4),pt.data=new Float32Array(ot.output.length*_t).fill(0)}}),this.compiledBundle.context=ot,Y.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=Y.sent;case 12:case"end":return Y.stop()}},it,this)}));function ne(){return Te.apply(this,arguments)}return ne}()}]),Z}(),Dt=R(81550),Zt=R.n(Dt),Vt=function(){function Z(Te,ne){(0,F.Z)(this,Z),this.attribute=void 0,this.buffer=void 0;var it=ne.buffer,ot=ne.offset,B=ne.stride,_=ne.normalized,C=ne.size,Y=ne.divisor;this.buffer=it,this.attribute={buffer:it.get(),offset:ot||0,stride:B||0,normalized:_||!1,divisor:Y||0},C&&(this.attribute.size=C)}return(0,I.Z)(Z,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(ne){this.buffer.subData(ne)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Z}(),ue,dt,Ot,ee,Re,me,Ae,Be,Ke,$t,ce,we,Pe,ye,Bt=(ue={},(0,z.Z)(ue,V.POINTS,"points"),(0,z.Z)(ue,V.LINES,"lines"),(0,z.Z)(ue,V.LINE_LOOP,"line loop"),(0,z.Z)(ue,V.LINE_STRIP,"line strip"),(0,z.Z)(ue,V.TRIANGLES,"triangles"),(0,z.Z)(ue,V.TRIANGLE_FAN,"triangle fan"),(0,z.Z)(ue,V.TRIANGLE_STRIP,"triangle strip"),ue),re=(dt={},(0,z.Z)(dt,V.STATIC_DRAW,"static"),(0,z.Z)(dt,V.DYNAMIC_DRAW,"dynamic"),(0,z.Z)(dt,V.STREAM_DRAW,"stream"),dt),Ee=(Ot={},(0,z.Z)(Ot,V.BYTE,"int8"),(0,z.Z)(Ot,V.UNSIGNED_INT,"int16"),(0,z.Z)(Ot,V.INT,"int32"),(0,z.Z)(Ot,V.UNSIGNED_BYTE,"uint8"),(0,z.Z)(Ot,V.UNSIGNED_SHORT,"uint16"),(0,z.Z)(Ot,V.UNSIGNED_INT,"uint32"),(0,z.Z)(Ot,V.FLOAT,"float"),Ot),It=(ee={},(0,z.Z)(ee,V.ALPHA,"alpha"),(0,z.Z)(ee,V.LUMINANCE,"luminance"),(0,z.Z)(ee,V.LUMINANCE_ALPHA,"luminance alpha"),(0,z.Z)(ee,V.RGB,"rgb"),(0,z.Z)(ee,V.RGBA,"rgba"),(0,z.Z)(ee,V.RGBA4,"rgba4"),(0,z.Z)(ee,V.RGB5_A1,"rgb5 a1"),(0,z.Z)(ee,V.RGB565,"rgb565"),(0,z.Z)(ee,V.DEPTH_COMPONENT,"depth"),(0,z.Z)(ee,V.DEPTH_STENCIL,"depth stencil"),ee),Et=(Re={},(0,z.Z)(Re,V.DONT_CARE,"dont care"),(0,z.Z)(Re,V.NICEST,"nice"),(0,z.Z)(Re,V.FASTEST,"fast"),Re),Wt=(me={},(0,z.Z)(me,V.NEAREST,"nearest"),(0,z.Z)(me,V.LINEAR,"linear"),(0,z.Z)(me,V.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,z.Z)(me,V.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,z.Z)(me,V.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,z.Z)(me,V.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),me),fe=(Ae={},(0,z.Z)(Ae,V.REPEAT,"repeat"),(0,z.Z)(Ae,V.CLAMP_TO_EDGE,"clamp"),(0,z.Z)(Ae,V.MIRRORED_REPEAT,"mirror"),Ae),Fe=(Be={},(0,z.Z)(Be,V.NONE,"none"),(0,z.Z)(Be,V.BROWSER_DEFAULT_WEBGL,"browser"),Be),$e=(Ke={},(0,z.Z)(Ke,V.NEVER,"never"),(0,z.Z)(Ke,V.ALWAYS,"always"),(0,z.Z)(Ke,V.LESS,"less"),(0,z.Z)(Ke,V.LEQUAL,"lequal"),(0,z.Z)(Ke,V.GREATER,"greater"),(0,z.Z)(Ke,V.GEQUAL,"gequal"),(0,z.Z)(Ke,V.EQUAL,"equal"),(0,z.Z)(Ke,V.NOTEQUAL,"notequal"),Ke),Lt=($t={},(0,z.Z)($t,V.FUNC_ADD,"add"),(0,z.Z)($t,V.MIN_EXT,"min"),(0,z.Z)($t,V.MAX_EXT,"max"),(0,z.Z)($t,V.FUNC_SUBTRACT,"subtract"),(0,z.Z)($t,V.FUNC_REVERSE_SUBTRACT,"reverse subtract"),$t),Ne=(ce={},(0,z.Z)(ce,V.ZERO,"zero"),(0,z.Z)(ce,V.ONE,"one"),(0,z.Z)(ce,V.SRC_COLOR,"src color"),(0,z.Z)(ce,V.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,z.Z)(ce,V.SRC_ALPHA,"src alpha"),(0,z.Z)(ce,V.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,z.Z)(ce,V.DST_COLOR,"dst color"),(0,z.Z)(ce,V.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,z.Z)(ce,V.DST_ALPHA,"dst alpha"),(0,z.Z)(ce,V.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,z.Z)(ce,V.CONSTANT_COLOR,"constant color"),(0,z.Z)(ce,V.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,z.Z)(ce,V.CONSTANT_ALPHA,"constant alpha"),(0,z.Z)(ce,V.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,z.Z)(ce,V.SRC_ALPHA_SATURATE,"src alpha saturate"),ce),Xe=(we={},(0,z.Z)(we,V.NEVER,"never"),(0,z.Z)(we,V.ALWAYS,"always"),(0,z.Z)(we,V.LESS,"less"),(0,z.Z)(we,V.LEQUAL,"lequal"),(0,z.Z)(we,V.GREATER,"greater"),(0,z.Z)(we,V.GEQUAL,"gequal"),(0,z.Z)(we,V.EQUAL,"equal"),(0,z.Z)(we,V.NOTEQUAL,"notequal"),we),Dr=(Pe={},(0,z.Z)(Pe,V.ZERO,"zero"),(0,z.Z)(Pe,V.KEEP,"keep"),(0,z.Z)(Pe,V.REPLACE,"replace"),(0,z.Z)(Pe,V.INVERT,"invert"),(0,z.Z)(Pe,V.INCR,"increment"),(0,z.Z)(Pe,V.DECR,"decrement"),(0,z.Z)(Pe,V.INCR_WRAP,"increment wrap"),(0,z.Z)(Pe,V.DECR_WRAP,"decrement wrap"),Pe),ur=(ye={},(0,z.Z)(ye,V.FRONT,"front"),(0,z.Z)(ye,V.BACK,"back"),ye),Or=function(){function Z(Te,ne){(0,F.Z)(this,Z),this.buffer=void 0;var it=ne.data,ot=ne.usage,B=ne.type;this.buffer=Te.buffer({data:it,usage:re[ot||V.STATIC_DRAW],type:Ee[B||V.UNSIGNED_BYTE]})}return(0,I.Z)(Z,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(ne){var it=ne.data,ot=ne.offset;this.buffer.subdata(it,ot)}}]),Z}(),ln=R(85061);function fn(Z,Te){var ne=Object.keys(Z);if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(Z);Te&&(it=it.filter(function(ot){return Object.getOwnPropertyDescriptor(Z,ot).enumerable})),ne.push.apply(ne,it)}return ne}function Xr(Z){for(var Te=1;Te<arguments.length;Te++){var ne=arguments[Te]!=null?arguments[Te]:{};Te%2?fn(Object(ne),!0).forEach(function(it){(0,z.Z)(Z,it,ne[it])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(ne)):fn(Object(ne)).forEach(function(it){Object.defineProperty(Z,it,Object.getOwnPropertyDescriptor(ne,it))})}return Z}var Cn=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Qr=0,Gr=!1,on=function(){function Z(Te,ne){var it=this;(0,F.Z)(this,Z),this.reGl=Te,this.context=ne,this.entity=N(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var ot={};this.context.uniforms.forEach(function(pt){var _t=pt.name,Mt=pt.type,zt=pt.data,Le=pt.isReferer,Me=pt.storageClass;if(Me===J.StorageBuffer){if(Le)it.textureCache[_t]={data:void 0},ot["".concat(_t,"Size")]=function(){return zt.compiledBundle.context.output.textureSize};else{it.textureCache[_t]=it.calcDataTexture(_t,Mt,zt);var qe=it.textureCache[_t],br=qe.textureWidth,xr=qe.isOutput;ot["".concat(_t,"Size")]=[br,br],xr&&(it.outputTextureName=_t,it.context.needPingpong&&(it.outputTextureName="".concat(_t,"Output"),it.textureCache[it.outputTextureName]=it.calcDataTexture(_t,Mt,zt)))}ot[_t]=function(){return Gr&&console.log("[".concat(it.entity,"]: ").concat(_t," ").concat(it.textureCache[_t].id)),it.textureCache[_t].texture}}else if(Me===J.Uniform){if(zt&&(Array.isArray(zt)||D()(zt))&&zt.length>16)throw new Error("invalid data type ".concat(Mt));ot[_t]=function(){return pt.data}}});var B=this.getOuputDataTexture(),_=B.textureWidth,C=B.texelCount;ot.u_OutputTextureSize=[_,_],ot.u_OutputTexelCount=C,this.context.output.textureSize=[_,_];var Y={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:ot,vert:Cn,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(Y)}return(0,I.Z)(Z,[{key:"run",value:function(){var ne=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){ne.computeCommand()}),Gr&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var Te=(0,L.Z)(T().mark(function it(){var ot=this,B,_,C,Y,pt,_t,Mt,zt;return T().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){B=ot.reGl.read()}),!B){Me.next=6;break}if(_=this.getOuputDataTexture(),C=_.originalDataLength,Y=_.elementsPerTexel,pt=_.typedArrayConstructor,_t=pt===void 0?Float32Array:pt,Mt=[],Y!==4)for(zt=0;zt<B.length;zt+=4)Y===1?Mt.push(B[zt]):Y===2?Mt.push(B[zt],B[zt+1]):Mt.push(B[zt],B[zt+1],B[zt+2]);else Mt=B;return Me.abrupt("return",new _t(Mt.slice(0,C)));case 6:return Me.abrupt("return",new Float32Array);case 7:case"end":return Me.stop()}},it,this)}));function ne(){return Te.apply(this,arguments)}return ne}()},{key:"confirmInput",value:function(ne,it){var ot;this.entity===ne.entity?(this.dynamicPingpong=!0,ot=this):ot=ne,this.textureCache[it].id=ot.getOuputDataTexture().id,this.textureCache[it].texture=ot.getOuputDataTexture().texture,Gr&&console.log("[".concat(this.entity,"]: confirm input ").concat(it," from model ").concat(ot.entity,", ").concat(ot.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(ne,it){var ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,B=this.context.uniforms.find(function(pt){var _t=pt.name;return _t===ne});if(B){var _=this.calcDataTexture(ne,B.type,it),C=_.texture,Y=_.data;this.textureCache[ne].data=Y,this.textureCache[ne].texture=C}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var ne=this.context.output.name;this.textureCache[ne].id=this.getOuputDataTexture().id,this.textureCache[ne].texture=this.getOuputDataTexture().texture}var it=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=it,Gr&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var ne=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=ne}},{key:"cloneDataTexture",value:function(ne){var it=ne.data,ot=ne.textureWidth;return Xr(Xr({},ne),{},{id:Qr++,texture:this.reGl.texture({width:ot,height:ot,data:it,type:"float"})})}},{key:"calcDataTexture",value:function(ne,it,ot){var B=1;it===X.Vector4FloatArray&&(B=4);for(var _=[],C=0;C<ot.length;C+=B)B===1?_.push(ot[C],0,0,0):B===2?_.push(ot[C],ot[C+1],0,0):B===3?_.push(ot[C],ot[C+1],ot[C+2],0):B===4&&_.push(ot[C],ot[C+1],ot[C+2],ot[C+3]);var Y=ot.length,pt=Math.ceil(Y/B),_t=Math.ceil(Math.sqrt(pt)),Mt=_t*_t;pt<Mt&&_.push.apply(_,(0,ln.Z)(new Array((Mt-pt)*4).fill(0)));var zt=this.reGl.texture({width:_t,height:_t,data:_,type:"float"});return{id:Qr++,data:_,originalDataLength:Y,typedArrayConstructor:D()(ot)?ot.constructor:void 0,textureWidth:_t,texture:zt,texelCount:pt,elementsPerTexel:B,isOutput:ne===this.context.output.name}}}]),Z}(),sr=function(){function Z(Te,ne){(0,F.Z)(this,Z),this.elements=void 0;var it=ne.data,ot=ne.usage,B=ne.type,_=ne.count;this.elements=Te.elements({data:it,usage:re[ot||V.STATIC_DRAW],type:Ee[B||V.UNSIGNED_BYTE],count:_})}return(0,I.Z)(Z,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(ne){var it=ne.data;this.elements.subdata(it)}},{key:"destroy",value:function(){this.elements.destroy()}}]),Z}(),lr=function(){function Z(Te,ne){(0,F.Z)(this,Z),this.framebuffer=void 0;var it=ne.width,ot=ne.height,B=ne.color,_=ne.colors,C=ne.depth,Y=ne.stencil,pt={width:it,height:ot};Array.isArray(_)&&(pt.colors=_.map(function(_t){return _t.get()})),B&&typeof B!="boolean"&&(pt.color=B.get()),this.framebuffer=Te.framebuffer(pt)}return(0,I.Z)(Z,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(ne){var it=ne.width,ot=ne.height;this.framebuffer.resize(it,ot)}}]),Z}(),Qe=R(90484),$r=R(68630),an=R.n($r);function bn(Z){var Te={};return Object.keys(Z).forEach(function(ne){nr(ne,Z[ne],Te,"")}),Te}function nr(Z,Te,ne,it){if(Te===null||typeof Te=="number"||typeof Te=="boolean"||Array.isArray(Te)&&typeof Te[0]=="number"||D()(Te)||Te===""||Te.resize!==void 0){ne["".concat(it&&it+".").concat(Z)]=Te;return}an()(Te)&&Object.keys(Te).forEach(function(ot){nr(ot,Te[ot],ne,"".concat(it&&it+".").concat(Z))}),Array.isArray(Te)&&Te.forEach(function(ot,B){Object.keys(ot).forEach(function(_){nr(_,ot[_],ne,"".concat(it&&it+".").concat(Z,"[").concat(B,"]"))})})}function Tr(Z,Te){var ne=Object.keys(Z);if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(Z);Te&&(it=it.filter(function(ot){return Object.getOwnPropertyDescriptor(Z,ot).enumerable})),ne.push.apply(ne,it)}return ne}function ar(Z){for(var Te=1;Te<arguments.length;Te++){var ne=arguments[Te]!=null?arguments[Te]:{};Te%2?Tr(Object(ne),!0).forEach(function(it){(0,z.Z)(Z,it,ne[it])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(ne)):Tr(Object(ne)).forEach(function(it){Object.defineProperty(Z,it,Object.getOwnPropertyDescriptor(ne,it))})}return Z}var vr=function(){function Z(Te,ne){(0,F.Z)(this,Z),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=Te;var it=ne.vs,ot=ne.fs,B=ne.defines,_=ne.attributes,C=ne.uniforms,Y=ne.primitive,pt=ne.count,_t=ne.elements,Mt=ne.depth,zt=ne.blend,Le=ne.stencil,Me=ne.cull,qe=ne.instances,br=ne.scissor,xr=ne.viewport,sn={};C&&(this.uniforms=bn(C),Object.keys(C).forEach(function(jr){sn[jr]=Te.prop(jr)}));var Rn={};Object.keys(_).forEach(function(jr){Rn[jr]=_[jr].get()});var tr=B&&this.generateDefines(B)||"",Sr={attributes:Rn,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(tr,`
`).concat(ot),uniforms:sn,vert:`
`.concat(tr,`
`).concat(it),primitive:Bt[Y===void 0?V.TRIANGLES:Y]};qe&&(Sr.instances=qe),pt&&(Sr.count=pt),_t&&(Sr.elements=_t.get()),br&&(Sr.scissor=br),xr&&(Sr.viewport=xr),this.initDepthDrawParams({depth:Mt},Sr),this.initBlendDrawParams({blend:zt},Sr),this.initStencilDrawParams({stencil:Le},Sr),this.initCullDrawParams({cull:Me},Sr),this.drawCommand=Te(Sr)}return(0,I.Z)(Z,[{key:"addUniforms",value:function(ne){this.uniforms=ar(ar({},this.uniforms),bn(ne))}},{key:"draw",value:function(ne){var it=ar(ar({},this.uniforms),bn(ne.uniforms||{})),ot={};Object.keys(it).forEach(function(B){var _=(0,Qe.Z)(it[B]);_==="boolean"||_==="number"||Array.isArray(it[B])||it[B].BYTES_PER_ELEMENT?ot[B]=it[B]:_==="string"||(ot[B]=it[B].get())}),this.drawCommand(ot)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(ne,it){var ot=ne.depth;ot&&(it.depth={enable:ot.enable===void 0?!0:!!ot.enable,mask:ot.mask===void 0?!0:!!ot.mask,func:$e[ot.func||V.LESS],range:ot.range||[0,1]})}},{key:"initBlendDrawParams",value:function(ne,it){var ot=ne.blend;if(ot){var B=ot.enable,_=ot.func,C=ot.equation,Y=ot.color,pt=Y===void 0?[0,0,0,0]:Y;it.blend={enable:!!B,func:{srcRGB:Ne[_&&_.srcRGB||V.SRC_ALPHA],srcAlpha:Ne[_&&_.srcAlpha||V.SRC_ALPHA],dstRGB:Ne[_&&_.dstRGB||V.ONE_MINUS_SRC_ALPHA],dstAlpha:Ne[_&&_.dstAlpha||V.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Lt[C&&C.rgb||V.FUNC_ADD],alpha:Lt[C&&C.alpha||V.FUNC_ADD]},color:pt}}}},{key:"initStencilDrawParams",value:function(ne,it){var ot=ne.stencil;if(ot){var B=ot.enable,_=ot.mask,C=_===void 0?-1:_,Y=ot.func,pt=Y===void 0?{cmp:V.ALWAYS,ref:0,mask:-1}:Y,_t=ot.opFront,Mt=_t===void 0?{fail:V.KEEP,zfail:V.KEEP,zpass:V.KEEP}:_t,zt=ot.opBack,Le=zt===void 0?{fail:V.KEEP,zfail:V.KEEP,zpass:V.KEEP}:zt;it.stencil={enable:!!B,mask:C,func:ar(ar({},pt),{},{cmp:Xe[pt.cmp]}),opFront:{fail:Dr[Mt.fail],zfail:Dr[Mt.zfail],zpass:Dr[Mt.zpass]},opBack:{fail:Dr[Le.fail],zfail:Dr[Le.zfail],zpass:Dr[Le.zpass]}}}}},{key:"initCullDrawParams",value:function(ne,it){var ot=ne.cull;if(ot){var B=ot.enable,_=ot.face,C=_===void 0?V.BACK:_;it.cull={enable:!!B,face:ur[C]}}}},{key:"generateDefines",value:function(ne){return Object.keys(ne).map(function(it){return"#define ".concat(it," ").concat(Number(ne[it]))}).join(`
`)}}]),Z}(),Br=function(){function Z(Te,ne){(0,F.Z)(this,Z),this.texture=void 0,this.width=void 0,this.height=void 0;var it=ne.data,ot=ne.type,B=ot===void 0?V.UNSIGNED_BYTE:ot,_=ne.width,C=ne.height,Y=ne.flipY,pt=Y===void 0?!1:Y,_t=ne.format,Mt=_t===void 0?V.RGBA:_t,zt=ne.mipmap,Le=zt===void 0?!1:zt,Me=ne.wrapS,qe=Me===void 0?V.CLAMP_TO_EDGE:Me,br=ne.wrapT,xr=br===void 0?V.CLAMP_TO_EDGE:br,sn=ne.aniso,Rn=sn===void 0?0:sn,tr=ne.alignment,Sr=tr===void 0?1:tr,jr=ne.premultiplyAlpha,Nn=jr===void 0?!1:jr,gn=ne.mag,ea=gn===void 0?V.NEAREST:gn,ha=ne.min,Zn=ha===void 0?V.NEAREST:ha,na=ne.colorSpace,da=na===void 0?V.BROWSER_DEFAULT_WEBGL:na;this.width=_,this.height=C;var Vn={width:_,height:C,type:Ee[B],format:It[Mt],wrapS:fe[qe],wrapT:fe[xr],mag:Wt[ea],min:Wt[Zn],alignment:Sr,flipY:pt,colorSpace:Fe[da],premultiplyAlpha:Nn,aniso:Rn};it&&(Vn.data=it),typeof Le=="number"?Vn.mipmap=Et[Le]:typeof Le=="boolean"&&(Vn.mipmap=Le),this.texture=Te.texture(Vn)}return(0,I.Z)(Z,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(ne){var it=ne.width,ot=ne.height;this.texture.resize(it,ot),this.width=it,this.height=ot}},{key:"destroy",value:function(){this.texture.destroy()}}]),Z}(),Fr=function(){function Z(){var Te=this;(0,F.Z)(this,Z),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var ne=(0,L.Z)(T().mark(function it(ot){return T().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!ot.uniforms){_.next=3;break}return _.next=3,Promise.all(Object.keys(ot.uniforms).map(function(){var C=(0,L.Z)(T().mark(function Y(pt){var _t;return T().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:if(!(ot.uniforms[pt]&&ot.uniforms[pt].load!==void 0)){zt.next=5;break}return zt.next=3,ot.uniforms[pt].load();case 3:_t=zt.sent,ot.uniforms[pt]=_t;case 5:case"end":return zt.stop()}},Y)}));return function(Y){return C.apply(this,arguments)}}()));case 3:return _.abrupt("return",new vr(Te.gl,ot));case 4:case"end":return _.stop()}},it)}));return function(it){return ne.apply(this,arguments)}}(),this.createAttribute=function(ne){return new Vt(Te.gl,ne)},this.createBuffer=function(ne){return new Or(Te.gl,ne)},this.createElements=function(ne){return new sr(Te.gl,ne)},this.createTexture2D=function(ne){return new Br(Te.gl,ne)},this.createFramebuffer=function(ne){return new lr(Te.gl,ne)},this.useFramebuffer=function(ne,it){Te.gl({framebuffer:ne?ne.get():null})(it)},this.createComputeModel=function(){var ne=(0,L.Z)(T().mark(function it(ot){return T().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",new on(Te.gl,ot));case 1:case"end":return _.stop()}},it)}));return function(it){return ne.apply(this,arguments)}}(),this.clear=function(ne){var it=ne.color,ot=ne.depth,B=ne.stencil,_=ne.framebuffer,C=_===void 0?null:_,Y={color:it,depth:ot,stencil:B};Y.framebuffer=C===null?C:C.get(),Te.gl.clear(Y)},this.setScissor=function(ne){Te.gl&&Te.gl._gl&&(ne.enable&&ne.box?(Te.gl._gl.enable(V.SCISSOR_TEST),Te.gl._gl.scissor(ne.box.x,ne.box.y,ne.box.width,ne.box.height)):Te.gl._gl.disable(V.SCISSOR_TEST),Te.gl._refresh())},this.viewport=function(ne){var it=ne.x,ot=ne.y,B=ne.width,_=ne.height;Te.gl&&Te.gl._gl&&(Te.gl._gl.viewport(it,ot,B,_),Te.gl._refresh())},this.readPixels=function(ne){var it=ne.framebuffer,ot=ne.x,B=ne.y,_=ne.width,C=ne.height,Y={x:ot,y:B,width:_,height:C};return it&&(Y.framebuffer=it.get()),Te.gl.read(Y)},this.getCanvas=function(){return Te.$canvas},this.getGLContext=function(){return Te.gl._gl},this.destroy=function(){Te.gl&&(Te.gl.destroy(),Te.inited=!1)}}return(0,I.Z)(Z,[{key:"init",value:function(){var Te=(0,L.Z)(T().mark(function it(ot){return T().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!this.inited){_.next=2;break}return _.abrupt("return");case 2:return this.$canvas=ot.canvas,_.next=5,new Promise(function(C,Y){Zt()({canvas:ot.canvas,attributes:{alpha:!0,antialias:ot.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(_t,Mt){(_t||!Mt)&&Y(_t),C(Mt)}})});case 5:this.gl=_.sent,this.inited=!0;case 7:case"end":return _.stop()}},it,this)}));function ne(it){return Te.apply(this,arguments)}return ne}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),Z}(),kr=function(){function Z(){(0,F.Z)(this,Z),this.engine=void 0,this.configService=new Q}return(0,I.Z)(Z,[{key:"setConfig",value:function(ne){this.configService.set(ne)}},{key:"setEngine",value:function(ne){this.engine=ne}},{key:"createEntity",value:function(){return N()}},{key:"createKernel",value:function(ne){var it=new jt(this.engine,this.configService);return typeof ne=="string"?it.setBundle(JSON.parse(ne)):it.setBundle(ne),it.init(),it}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},it=new Z;return it.setConfig(ne),it.setEngine(new Fr),it}}]),Z}()},53982:function(Mr,G,R){"use strict";R.d(G,{ZP:function(){return mw}});var L={};R.r(L),R.d(L,{GADDI:function(){return Xi},Stack:function(){return Oi},breadthFirstSearch:function(){return re},connectedComponent:function(){return Et},cosineSimilarity:function(){return sn},default:function(){return to},depthFirstSearch:function(){return Xe},detectAllCycles:function(){return ln},detectAllDirectedCycle:function(){return Or},detectAllUndirectedCycle:function(){return ur},detectCycle:function(){return fn},detectDirectedCycle:function(){return Io},dijkstra:function(){return Qr},findAllPath:function(){return sr},findShortestPath:function(){return on},floydWarshall:function(){return Qe},getAdjMatrix:function(){return Ot},getDegree:function(){return fe},getInDegree:function(){return Fe},getNeighbors:function(){return $t},getOutDegree:function(){return $e},iLouvain:function(){return Mt},kCore:function(){return Le},kMeans:function(){return br},labelPropagation:function(){return an},louvain:function(){return pt},minimumSpanningTree:function(){return da},nodesCosineSimilarity:function(){return tr},pageRank:function(){return se}});var z={};R.r(z),R.d(z,{Line:function(){return Ei},applyMatrix:function(){return de},compare:function(){return Fo},distance:function(){return Bn},floydWarshall:function(){return ci},fractionToLine:function(){return qa},getAdjMatrix:function(){return _i},getBBoxBoundLine:function(){return yo},getCircleCenterByPoints:function(){return qr},getCircleIntersectByPoint:function(){return Li},getDegree:function(){return Yo},getEllipseIntersectByPoint:function(){return eo},getLineIntersect:function(){return ko},getPointsCenter:function(){return Mi},getRectIntersectByPoint:function(){return go},intersectBBox:function(){return Oo},invertMatrix:function(){return Ar},isPointInPolygon:function(){return no},isPointsOverlap:function(){return Zi},isPolygonsIntersect:function(){return po},itemIntersectByLine:function(){return ma},lerp:function(){return uo},lerpArray:function(){return bo},move:function(){return Ai},pointLineDistance:function(){return mo},pointLineSquareDist:function(){return so},pointRectSquareDist:function(){return Fi},rotate:function(){return ro},scale:function(){return Ea},scaleMatrix:function(){return Sa},squareDist:function(){return pi},translate:function(){return li}});var F={};R.r(F),R.d(F,{cloneBesidesImg:function(){return Bo},getAnimateCfgWithCallback:function(){return es},getBBox:function(){return yn},getComboBBox:function(){return Ro},getLabelPosition:function(){return hn},getLetterWidth:function(){return ja},getLoopCfgs:function(){return en},getTextSize:function(){return Va},plainCombosToTrees:function(){return ai},reconstructTree:function(){return wi},shouldRefreshEdge:function(){return ss},traverseTree:function(){return Hn},traverseTreeUp:function(){return Jn},truncateLabelByLength:function(){return ni}});var I={};R.r(I),R.d(I,{catmullRomToBezier:function(){return P},fillPath:function(){return $i},fillPathByDiff:function(){return Fa},formatPath:function(){return gs},intersection:function(){return pa},parsePathArray:function(){return je},parsePathString:function(){return h},pathToAbsolute:function(){return St},pathToCurve:function(){return pe},rectPath:function(){return On}});var k={};R.r(k),R.d(k,{easeBack:function(){return pf},easeBackIn:function(){return bu},easeBackInOut:function(){return pf},easeBackOut:function(){return Wl},easeBounce:function(){return _s},easeBounceIn:function(){return gf},easeBounceInOut:function(){return Ul},easeBounceOut:function(){return _s},easeCircle:function(){return Zf},easeCircleIn:function(){return Vf},easeCircleInOut:function(){return Zf},easeCircleOut:function(){return Hf},easeCubic:function(){return Rl},easeCubicIn:function(){return Pl},easeCubicInOut:function(){return Rl},easeCubicOut:function(){return kl},easeElastic:function(){return Zc},easeElasticIn:function(){return Zs},easeElasticInOut:function(){return jl},easeElasticOut:function(){return Zc},easeExp:function(){return lf},easeExpIn:function(){return Xc},easeExpInOut:function(){return lf},easeExpOut:function(){return cf},easeLinear:function(){return Gc},easePoly:function(){return Uc},easePolyIn:function(){return Bl},easePolyInOut:function(){return Uc},easePolyOut:function(){return lh},easeQuad:function(){return Hs},easeQuadIn:function(){return zc},easeQuadInOut:function(){return Hs},easeQuadOut:function(){return Nl},easeSin:function(){return jc},easeSinIn:function(){return Gl},easeSinInOut:function(){return jc},easeSinOut:function(){return zl}});var D={};R.r(D),R.d(D,{calculationItemsBBox:function(){return Lv},cloneEvent:function(){return Bp},formatPadding:function(){return Cd},isNaN:function(){return Fu},isViewportChanged:function(){return Fp},processParallelEdges:function(){return Gp},uniqueId:function(){return Md}});var b={};R.r(b),R.d(b,{getClosedSpline:function(){return Rd},getControlPoint:function(){return Yh},getSpline:function(){return Hv},paddedHull:function(){return Qv},pathToPoints:function(){return kd},pointsToPolygon:function(){return ay},roundedHull:function(){return Bd}});var E={};R.r(E),R.d(E,{defaultSubjectColors:function(){return My}});var p={};R.r(p),R.d(p,{isForce:function(){return u0}});var y={};R.r(y),R.d(y,{Base:function(){return xu},Circle:function(){return $y},Ellipse:function(){return qy},Image:function(){return tm},Line:function(){return rm},Marker:function(){return im},Path:function(){return $d},Polygon:function(){return vm},Polyline:function(){return pm},Rect:function(){return xm},Text:function(){return wm}});var g={};R.r(g),R.d(g,{Base:function(){return qs},Circle:function(){return Om},Dom:function(){return Dm},Ellipse:function(){return Pm},Image:function(){return Rm},Line:function(){return Fm},Marker:function(){return zm},Path:function(){return Wm},Polygon:function(){return Xm},Polyline:function(){return Vm},Rect:function(){return Qm},Text:function(){return r1}});var T={};R.r(T),R.d(T,{getColorSetsBySubjectColors:function(){return L1},getColorsWithSubjectColor:function(){return tv},mixColor:function(){return Jo}});var x={};R.r(x),R.d(x,{arrayToTextureData:function(){return X1},attributesToTextureData:function(){return j1},buildTextureData:function(){return z1},buildTextureDataWithOneEdgeAttr:function(){return U1},buildTextureDataWithTwoEdgeAttr:function(){return W1},proccessToFunc:function(){return G1},radialLayout:function(){return Y1}});var S={};R.r(S),R.d(S,{gpuDetector:function(){return Q0}});var N={};R.r(N),R.d(N,{assign:function(){return oc},default:function(){return Cg},defaultI18n:function(){return uv},format:function(){return _g},parse:function(){return Mg},setGlobalDateI18n:function(){return pg},setGlobalDateMasks:function(){return Sg}});var m=R(70655),d=R(49242),V={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,d.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,d.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},Q=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,d.clone)(V);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,d.each)(u,function(c,l){f[l]=(0,d.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),j=Q,X=j,K="*",J=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[K]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(!!u[c]){var l=u[c],w=l.callback,M=l.once;M&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),w.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),rt=J,tt=R(35600);function nt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return tt.fromTranslation(r,t),tt.multiply(i,r,e)}function lt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return tt.fromRotation(r,t),tt.multiply(i,r,e)}function xt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return tt.fromScaling(r,t),tt.multiply(i,r,e)}function jt(i,e,t){return tt.multiply(i,t,e)}function Dt(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":nt(t,t,[a[1],a[2]]);break;case"s":xt(t,t,[a[1],a[2]]);break;case"r":lt(t,t,a[1]);break;case"m":jt(t,t,a[1]);break;default:break}}return t}function Zt(i,e){return i[0]*e[1]-e[0]*i[1]}function Vt(i,e,t){var r=vec2.angle(i,e),n=Zt(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function ue(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var dt=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];!c&&c!==0||!l&&l!==0||(a[c][l]=1,t||(a[l][c]=1))}),a},Ot=dt,ee=function(e,t){return e===t},Re=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),me=function(){function i(e){e===void 0&&(e=ee),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new Re(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new Re(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),Ae=me,Be=function(){function i(){this.linkedList=new Ae}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),Ke=Be,$t=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(f){return f.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},ce=function(e,t){return t.filter(function(r){return r.source===e})},we=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},Pe=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function ye(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var Bt=function(e,t,r,n){n===void 0&&(n=!0);var a=ye(r),o=new Ke,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var w=o.dequeue();a.enter({current:w,previous:f}),$t(w,u,n?"target":void 0).forEach(function(M){a.allowTraversal({previous:f,current:w,next:M})&&o.enqueue(M)}),a.leave({current:w,previous:f}),f=w};!o.isEmpty();)c()},re=Bt,Ee=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],f=function M(O){u.push(O),s[O.id]=!0;for(var W=$t(O.id,a),$=function(ft){var vt=W[ft];if(!s[vt]){var Ft=r.filter(function(Xt){return Xt.id===vt});Ft.length>0&&M(Ft[0])}},et=0;et<W.length;++et)$(et)},c=0;c<r.length;c++){var l=r[c];if(!s[l.id]){f(l);for(var w=[];u.length>0;)w.push(u.pop());o.push(w)}}return o},It=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},f={},c=[],l=0,w=function $(et){u[et.id]=l,f[et.id]=l,l+=1,o.push(et),s[et.id]=!0;for(var at=$t(et.id,a,"target").filter(function(Yt){return r.map(function(he){return he.id}).indexOf(Yt)>-1}),ft=function(he){var _e=at[he];if(!u[_e]&&u[_e]!==0){var oe=r.filter(function(Ue){return Ue.id===_e});oe.length>0&&$(oe[0]),f[et.id]=Math.min(f[et.id],f[_e])}else s[_e]&&(f[et.id]=Math.min(f[et.id],u[_e]))},vt=0;vt<at.length;vt++)ft(vt);if(f[et.id]===u[et.id]){for(var Ft=[];o.length>0;){var Xt=o.pop();if(s[Xt.id]=!1,Ft.push(Xt),Xt===et)break}Ft.length>0&&c.push(Ft)}},M=0,O=r;M<O.length;M++){var W=O[M];!u[W.id]&&u[W.id]!==0&&w(W)}return c};function Et(i,e){return e?It(i):Ee(i)}var Wt=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},fe=Wt,Fe=function(e,t){var r=Wt(e);return r[t]?Wt(e)[t].inDegree:0},$e=function(e,t){var r=Wt(e);return r[t]?Wt(e)[t].outDegree:0};function Lt(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function Ne(i,e,t,r){r.enter({current:e,previous:t});var n=i.edges,a=n===void 0?[]:n;$t(e,a,"target").forEach(function(o){r.allowTraversal({previous:t,current:e,next:o})&&Ne(i,o,e,r)}),r.leave({current:e,previous:t})}function Xe(i,e,t){Ne(i,e,"",Lt(t))}var Dr=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(l){o[l.id]=l});for(var f={enter:function(w){var M=w.current,O=w.previous;if(s[M]){t={};for(var W=M,$=O;$!==M;)t[W]=$,W=$,$=a[$];t[W]=$}else s[M]=M,delete o[M],a[M]=O},leave:function(w){var M=w.current;u[M]=M,delete s[M]},allowTraversal:function(w){var M=w.next;return t?!1:!u[M]}};Object.keys(o).length;){var c=Object.keys(o)[0];Xe(e,c,f)}return t},ur=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=Et(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(!!c.length)for(var l=c[0],w=l.id,M=[l],O=(n={},n[w]=l,n),W=(a={},a[w]=new Set,a);M.length>0;)for(var $=M.pop(),et=$.id,at=$t(et,e.edges),ft=function(Xt){var Yt,he=at[Xt],_e=e.nodes.find(function(Sn){return Sn.id===he});if(he===et)o.push((Yt={},Yt[he]=$,Yt));else if(!(he in W))O[he]=$,M.push(_e),W[he]=new Set([$]);else if(!W[et].has(_e)){for(var oe=!0,Ue=[_e,$],or=O[et];W[he].size&&!W[he].has(or)&&(Ue.push(or),or!==O[or.id]);)or=O[or.id];if(Ue.push(or),t&&r?(oe=!1,Ue.findIndex(function(Sn){return t.indexOf(Sn.id)>-1})>-1&&(oe=!0)):t&&!r&&Ue.findIndex(function(Sn){return t.indexOf(Sn.id)>-1})>-1&&(oe=!1),oe){for(var Kr={},An=1;An<Ue.length;An+=1)Kr[Ue[An-1].id]=Ue[An];Ue.length&&(Kr[Ue[Ue.length-1].id]=Ue[0]),o.push(Kr)}W[he].add($)}},vt=0;vt<at.length;vt+=1)ft(vt)}return o},Or=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},f={},c=function(or){for(var Kr=[or];Kr.length>0;){var An=Kr.pop();a.has(An)&&(a.delete(An),o[An.id].forEach(function(Sn){Kr.push(Sn)}),o[An.id].clear())}},l=function Ue(or,Kr,An){var Sn=!1;if(t&&r===!1&&t.indexOf(or.id)>-1)return Sn;n.push(or),a.add(or);for(var cn=An[or.id],Fn=0;Fn<cn.length;Fn+=1){var Pn=u[cn[Fn]];if(Pn===Kr){for(var tn={},Mn=1;Mn<n.length;Mn+=1)tn[n[Mn-1].id]=n[Mn];n.length&&(tn[n[n.length-1].id]=n[0]),s.push(tn),Sn=!0}else a.has(Pn)||Ue(Pn,Kr,An)&&(Sn=!0)}if(Sn)c(or);else for(var Fn=0;Fn<cn.length;Fn+=1){var Pn=u[cn[Fn]];o[Pn.id].has(or)||o[Pn.id].add(or)}return n.pop(),Sn},w=e.nodes,M=w===void 0?[]:w,O=0;O<M.length;O+=1){var W=M[O],$=W.id;f[$]=O,u[O]=W}if(t&&r)for(var et=function(or){var Kr=t[or];f[M[or].id]=f[Kr],f[Kr]=0,u[0]=M.find(function(An){return An.id===Kr}),u[f[M[or].id]]=M[or]},O=0;O<t.length;O++)et(O);for(var at=function(or){for(var Kr,An,Sn=Infinity,cn=0;cn<or.length;cn+=1)for(var Fn=or[cn],Pn=0;Pn<Fn.length;Pn++){var tn=f[Fn[Pn].id];tn<Sn&&(Sn=tn,An=cn)}for(var Mn=or[An],Ln=[],cn=0;cn<Mn.length;cn+=1){var Dn=Mn[cn];Ln[Dn.id]=[];for(var Yn=0,aa=$t(Dn.id,e.edges,"target").filter(function(Wi){return Mn.map(function(si){return si.id}).indexOf(Wi)>-1});Yn<aa.length;Yn++){var Da=aa[Yn];Da===Dn.id&&!(r===!1&&t.indexOf(Dn.id)>-1)?s.push((Kr={},Kr[Dn.id]=Dn,Kr)):Ln[Dn.id].push(f[Da])}}return{component:Mn,adjList:Ln,minIdx:Sn}},ft=0;ft<M.length;){var vt=M.filter(function(Ue){return f[Ue.id]>=ft}),Ft=It({nodes:vt,edges:e.edges}).filter(function(Ue){return Ue.length>1});if(Ft.length===0)break;var Xt=at(Ft),Yt=Xt.minIdx,he=Xt.adjList,_e=Xt.component;if(_e.length>1){_e.forEach(function(Ue){o[Ue.id]=new Set});var oe=u[Yt];if(t&&r&&t.indexOf(oe.id)===-1)return s;l(oe,oe,he),ft=Yt+1}else break}return s},ln=function(e,t,r,n){return n===void 0&&(n=!0),t?Or(e,r,n):ur(e,r,n)},fn=Dr,Xr=function(e,t,r){for(var n=Infinity,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},Cn=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f=[],c={},l={},w={};o.forEach(function(ft,vt){var Ft=ft.id;f.push(Ft),l[Ft]=Infinity,Ft===t&&(l[Ft]=0)});for(var M=o.length,O=function(vt){var Ft=Xr(l,o,c),Xt=Ft.id;if(c[Xt]=!0,l[Xt]===Infinity)return"continue";var Yt=[];r?Yt=ce(Xt,u):Yt=we(Xt,u),Yt.forEach(function(he){var _e=he.target,oe=he.source,Ue=_e===Xt?oe:_e,or=n&&he[n]?he[n]:1;l[Ue]>l[Ft.id]+or?(l[Ue]=l[Ft.id]+or,w[Ue]=[Ft.id]):l[Ue]===l[Ft.id]+or&&w[Ue].push(Ft.id)})},W=0;W<M;W++)O(W);w[t]=[t];var $={};for(var et in l)l[et]!==Infinity&&Gr(t,et,w,$);var at={};for(var et in $)at[et]=$[et][0];return{length:l,path:at,allPath:$}},Qr=Cn;function Gr(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=Gr(i,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var l=c[f];(0,d.isArray)(l)?n.push((0,m.__spreadArray)((0,m.__spreadArray)([],l,!0),[e],!1)):n.push([l,e])}}return r[e]=n,r[e]}var on=function(e,t,r,n,a){var o=Qr(e,t,n,a),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},sr=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(a={},a[t]=!0,a),c=[],l=[],w=n?$t(t,s,"target"):$t(t,s);for(c.push(w);u.length>0&&c.length>0;){var M=c[c.length-1];if(M.length){var O=M.shift();O&&(u.push(O),f[O]=!0,w=n?$t(O,s,"target"):$t(O,s),c.push(w.filter(function(et){return!f[et]})))}else{var W=u.pop();f[W]=!1,c.pop();continue}if(u[u.length-1]===r){var $=u.map(function(at){return at});l.push($);var W=u.pop();f[W]=!1,c.pop()}}return l},lr=function(e,t){for(var r=Ot(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=Infinity:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},Qe=lr,$r=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(vt,Ft){var Xt=Pe();vt.clusterId=Xt,f[Xt]={id:Xt,nodes:[vt]},c[vt.id]={node:vt,idx:Ft}});var l=Ot(e,t),w=[],M={};l.forEach(function(vt,Ft){var Xt=0,Yt=o[Ft].id;M[Yt]={},vt.forEach(function(he,_e){if(!!he){Xt+=he;var oe=o[_e].id;M[Yt][oe]=he}}),w.push(Xt)});for(var O=0,W=function(){var Ft=!1;if(o.forEach(function(Xt){var Yt={};Object.keys(M[Xt.id]).forEach(function(Sn){var cn=M[Xt.id][Sn],Fn=c[Sn].node,Pn=Fn.clusterId;Yt[Pn]||(Yt[Pn]=0),Yt[Pn]+=cn});var he=-Infinity,_e=[];if(Object.keys(Yt).forEach(function(Sn){he<Yt[Sn]?(he=Yt[Sn],_e=[Sn]):he===Yt[Sn]&&_e.push(Sn)}),!(_e.length===1&&_e[0]===Xt.clusterId)){var oe=_e.indexOf(Xt.clusterId);if(oe>=0&&_e.splice(oe,1),_e&&_e.length){Ft=!0;var Ue=f[Xt.clusterId],or=Ue.nodes.indexOf(Xt);Ue.nodes.splice(or,1);var Kr=Math.floor(Math.random()*_e.length),An=f[_e[Kr]];An.nodes.push(Xt),Xt.clusterId=An.id}}}),!Ft)return"break";O++};O<n;){var $=W();if($==="break")break}Object.keys(f).forEach(function(vt){var Ft=f[vt];(!Ft.nodes||!Ft.nodes.length)&&delete f[vt]});var et=[],at={};u.forEach(function(vt){var Ft=vt.source,Xt=vt.target,Yt=vt[r]||1,he=c[Ft].node.clusterId,_e=c[Xt].node.clusterId,oe="".concat(he,"---").concat(_e);if(at[oe])at[oe].weight+=Yt,at[oe].count++;else{var Ue={source:he,target:_e,weight:Yt,count:1};at[oe]=Ue,et.push(Ue)}});var ft=[];return Object.keys(f).forEach(function(vt){ft.push(f[vt])}),{clusters:ft,clusterEdges:et}},an=$r,bn=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!((t=this.arr)===null||t===void 0?void 0:t.length))return new i(r);if(!(r==null?void 0:r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!((t=this.arr)===null||t===void 0?void 0:t.length))return new i(r);if(!(r==null?void 0:r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!((t=this.arr)===null||t===void 0?void 0:t.length)||!(r==null?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!((t=this.arr)===null||t===void 0?void 0:t.length)||!(r==null?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,d.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!((e=this.arr)===null||e===void 0?void 0:e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!((t=this.arr)===null||t===void 0?void 0:t.length)||!(r==null?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),nr=bn,Tr=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,ar=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,vr=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){!a.properties||Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(Tr)&&!"".concat(a.properties[o]).match(ar)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},Br=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},Fr=function(e){for(var t=vr(e),r=[],n=0;n<e.length;n++)r[n]=Br(e[n].properties,t);return r},kr=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},Z={getAllSortProperties:vr,getPropertyWeight:Fr,getAllProperties:kr},Te;(function(i){i.EuclideanDistance="euclideanDistance"})(Te||(Te={}));var ne=function(e,t,r){var n=[];(t==null?void 0:t.length)?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,d.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r==null?void 0:r.includes(o))&&(a[o]=(0,d.uniq)(s))}),a},it=function(e,t,r){var n=ne(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(f){return typeof f=="number"})});return e.forEach(function(u,f){var c=[];Object.keys(n).forEach(function(l){var w=u[l],M=n[l],O=M.findIndex(function(et){return w===et}),W=[];if(s)W.push(w);else for(var $=0;$<M.length;$++)$===O?W.push(1):W.push(0);c=c.concat(W)}),a[f]=c}),a},ot=function(e,t,r,n){r===void 0&&(r=Te.EuclideanDistance);var a=0;switch(r){case Te.EuclideanDistance:a=new nr(e).euclideanDistance(new nr(t));break;default:break}return a},B={getAllKeyValueMap:ne,oneHot:it,getDistance:ot},_=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var f=e[u].clusterId,c=0;c<a;c++){var l=e[c].clusterId;if(f===l){var w=t[u][c]||0,M=r[u]||0,O=r[c]||0;s+=w-M*O/o}}return s*=1/o,s},C=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new nr([]),a=0;a<r;a++)n=n.add(new nr(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new nr(t[a]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<r;a++){var u=new nr(t[a]);e[a].clusterInertial=0;for(var l=0;l<r;l++){if(a===l){c[a][l]=0;continue}var w=new nr(t[l]);c[a][l]=u.squareEuclideanDistance(w),e[a].clusterInertial+=c[a][l]}}for(var M=0,O=2*r*s,a=0;a<r;a++)for(var W=e[a].clusterId,l=0;l<r;l++){var $=e[l].clusterId;if(!(a===l||W!==$)){var et=e[a].clusterInertial*e[l].clusterInertial/Math.pow(O,2)-c[a][l]/O;M+=et}}return Number(M.toFixed(4))},Y=function(e,t,r,n,a,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,l=c===void 0?[]:c,w=e.edges,M=w===void 0?[]:w,O=[];if(a){l.forEach(function(tn,Mn){tn.properties=tn.properties||{},tn.originIndex=Mn});var W=[];l.every(function(tn){return tn.hasOwnProperty("nodeType")})&&(W=Array.from(new Set(l.map(function(tn){return tn.nodeType}))),l.forEach(function(tn){tn.properties.nodeType=W.findIndex(function(Mn){return Mn===tn.nodeType})}));var $=kr(l,o);O=it($,s,u)}var et=1,at={},ft={};l.forEach(function(tn,Mn){var Ln=String(et++);tn.clusterId=Ln,at[Ln]={id:Ln,nodes:[tn]},ft[tn.id]={node:tn,idx:Mn}});var vt=Ot(e,t),Ft=[],Xt={},Yt=0;vt.forEach(function(tn,Mn){var Ln=0,Dn=l[Mn].id;Xt[Dn]={},tn.forEach(function(Yn,aa){if(!!Yn){Ln+=Yn;var Da=l[aa].id;Xt[Dn][Da]=Yn,Yt+=Yn}}),Ft.push(Ln)}),Yt/=2;for(var he=Infinity,_e=Infinity,oe=0,Ue=[],or={};;){a&&l.every(function(tn){return tn.hasOwnProperty("properties")})?he=_(l,vt,Ft,Yt)+C(l,O)*f:he=_(l,vt,Ft,Yt),oe===0&&(_e=he,Ue=l,or=at);var Kr=he>0&&he>_e&&he-_e<n;if(he>_e&&(Ue=l.map(function(tn){return{node:tn,clusterId:tn.clusterId}}),or=(0,d.clone)(at),_e=he),Kr||oe>100)break;oe++,Object.keys(at).forEach(function(tn){var Mn=0;M.forEach(function(Ln){var Dn=Ln.source,Yn=Ln.target,aa=ft[Dn].node.clusterId,Da=ft[Yn].node.clusterId;(aa===tn&&Da!==tn||Da===tn&&aa!==tn)&&(Mn=Mn+(Ln[r]||1))}),at[tn].sumTot=Mn}),l.forEach(function(tn,Mn){var Ln=at[tn.clusterId],Dn=0,Yn,aa=Ft[Mn]/(2*Yt),Da=0,Pa=Ln.nodes;Pa.forEach(function(Ko){var $o=ft[Ko.id].idx;Da+=vt[Mn][$o]||0});var Wi=Da-Ln.sumTot*aa,si=Pa.filter(function(Ko){return Ko.id!==tn.id}),mi=[];si.forEach(function(Ko,$o){mi[$o]=O[Ko.originIndex]});var di=C(si,O)*f,Ci=Xt[tn.id];if(Object.keys(Ci).forEach(function(Ko){var $o=ft[Ko].node,Bs=$o.clusterId;if(Bs!==tn.clusterId){var is=at[Bs],xs=is.nodes;if(!(!xs||!xs.length)){var Ua=0;xs.forEach(function(Ya){var Za=ft[Ya.id].idx;Ua+=vt[Mn][Za]||0});var bi=Ua-is.sumTot*aa,Ra=xs.concat([tn]),xi=[];Ra.forEach(function(Ya,Za){xi[Za]=O[Ya.originIndex]});var Pi=C(Ra,O)*f,la=bi-Wi;a&&(la=bi+Pi-(Wi+di)),la>Dn&&(Dn=la,Yn=is)}}}),Dn>0){Yn.nodes.push(tn);var Si=tn.clusterId;tn.clusterId=Yn.id;var bs=Ln.nodes.indexOf(tn);Ln.nodes.splice(bs,1);var Zo=0,eu=0;M.forEach(function(Ko){var $o=Ko.source,Bs=Ko.target,is=ft[$o].node.clusterId,xs=ft[Bs].node.clusterId;(is===Yn.id&&xs!==Yn.id||xs===Yn.id&&is!==Yn.id)&&(Zo=Zo+(Ko[r]||1)),(is===Si&&xs!==Si||xs===Si&&is!==Si)&&(eu=eu+(Ko[r]||1))}),Yn.sumTot=Zo,Ln.sumTot=eu}})}var An={},Sn=0;Object.keys(or).forEach(function(tn){var Mn=or[tn];if(!Mn.nodes||!Mn.nodes.length){delete or[tn];return}var Ln=String(Sn+1);Ln!==tn&&(Mn.id=Ln,Mn.nodes=Mn.nodes.map(function(Dn){return{id:Dn.id,clusterId:Ln}}),or[Ln]=Mn,An[tn]=Ln,delete or[tn],Sn++)}),Ue.forEach(function(tn){var Mn=tn.node,Ln=tn.clusterId;!Mn||(Mn.clusterId=Ln,Mn.clusterId&&An[Mn.clusterId]&&(Mn.clusterId=An[Mn.clusterId]))});var cn=[],Fn={};M.forEach(function(tn){var Mn=tn.source,Ln=tn.target,Dn=tn[r]||1,Yn=ft[Mn].node.clusterId,aa=ft[Ln].node.clusterId;if(!(!Yn||!aa)){var Da="".concat(Yn,"---").concat(aa);if(Fn[Da])Fn[Da].weight+=Dn,Fn[Da].count++;else{var Pa={source:Yn,target:aa,weight:Dn,count:1};Fn[Da]=Pa,cn.push(Pa)}}});var Pn=[];return Object.keys(or).forEach(function(tn){Pn.push(or[tn])}),{clusters:Pn,clusterEdges:cn}},pt=Y,_t=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),pt(e,t,r,n,!0,a,o,s,u)},Mt=_t,zt=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,d.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,f=function(){var w=fe({nodes:o,edges:u}),M=Object.keys(w);M.sort(function($,et){var at,ft;return((at=w[$])===null||at===void 0?void 0:at.degree)-((ft=w[et])===null||ft===void 0?void 0:ft.degree)});var O=M[0];if(!o.length||((r=w[O])===null||r===void 0?void 0:r.degree)>=t)return"break";var W=o.findIndex(function($){return $.id===O});o.splice(W,1),u=u.filter(function($){return!($.source===O||$.target===O)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},Le=zt,Me=function(e,t,r){var n=[];switch(e){case Te.EuclideanDistance:n=t[r];break;default:n=[];break}return n},qe=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=Te.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===Te.EuclideanDistance&&!u.every(function(Ln){return Ln.hasOwnProperty(r)}))return l;var w=[],M=[];if(o===Te.EuclideanDistance&&(w=kr(u,r),M=it(w,n,a)),!M.length)return l;for(var O=(0,d.uniq)(M.map(function(Ln){return Ln.join("")})),W=Math.min(t,u.length,O.length),$=0;$<u.length;$++)u[$].originIndex=$;for(var et=[],at=[],ft=[],$=0;$<W;$++)if($===0){var vt=Math.floor(Math.random()*u.length);switch(o){case Te.EuclideanDistance:et[$]=M[vt];break;default:et[$]=[];break}at.push(vt),ft[$]=[u[vt]],u[vt].clusterId=String($)}else{for(var Ft=-Infinity,Xt=0,Yt=function(Yn){if(!at.includes(Yn)){for(var aa=0,Da=0;Da<et.length;Da++){var Pa=0;switch(o){case Te.EuclideanDistance:Pa=ot(M[u[Yn].originIndex],et[Da],o);break;default:break}aa+=Pa}var Wi=aa/et.length;Wi>Ft&&!et.find(function(si){return(0,d.isEqual)(si,Me(o,M,u[Yn].originIndex))})&&(Ft=Wi,Xt=Yn)}},he=0;he<u.length;he++)Yt(he);et[$]=Me(o,M,Xt),at.push(Xt),ft[$]=[u[Xt]],u[Xt].clusterId=String($)}for(var _e=0;;){for(var $=0;$<u.length;$++){var oe=0,Ue=Infinity;if(!(_e===0&&at.includes($))){for(var or=0;or<et.length;or++){var Kr=0;switch(o){case Te.EuclideanDistance:Kr=ot(M[$],et[or],o);break;default:break}Kr<Ue&&(Ue=Kr,oe=or)}if(u[$].clusterId!==void 0)for(var An=ft[Number(u[$].clusterId)].length-1;An>=0;An--)ft[Number(u[$].clusterId)][An].id===u[$].id&&ft[Number(u[$].clusterId)].splice(An,1);u[$].clusterId=String(oe),ft[oe].push(u[$])}}for(var Sn=!1,$=0;$<ft.length;$++){for(var cn=ft[$],Fn=new nr([]),or=0;or<cn.length;or++)Fn=Fn.add(new nr(M[cn[or].originIndex]));var Pn=Fn.avg(cn.length);Pn.equal(new nr(et[$]))||(Sn=!0,et[$]=Pn.getArr())}if(_e++,u.every(function(Ln){return Ln.clusterId!==void 0})&&Sn||_e>=1e3)break}var tn=[],Mn={};return c.forEach(function(Ln){var Dn,Yn,aa=Ln.source,Da=Ln.target,Pa=(Dn=u.find(function(di){return di.id===aa}))===null||Dn===void 0?void 0:Dn.clusterId,Wi=(Yn=u.find(function(di){return di.id===Da}))===null||Yn===void 0?void 0:Yn.clusterId,si="".concat(Pa,"---").concat(Wi);if(Mn[si])Mn[si].count++;else{var mi={source:Pa,target:Wi,count:1};Mn[si]=mi,tn.push(mi)}}),{clusters:ft,clusterEdges:tn}},br=qe,xr=function(e,t){var r=new nr(t),n=r.norm2(),a=new nr(e),o=a.norm2(),s=r.dot(a),u=n*o,f=u?s/u:0;return f},sn=xr,Rn=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,d.clone)(e.filter(function(w){return w.id!==t.id})),s=e.findIndex(function(w){return w.id===t.id}),u=kr(e,r),f=it(u,n,a),c=f[s],l=[];return o.forEach(function(w,M){if(w.id!==t.id){var O=f[M],W=sn(O,c);l.push(W),w.cosineSimilarity=W}}),o.sort(function(w,M){return M.cosineSimilarity-w.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},tr=Rn,Sr=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),jr=Sr,Nn=function(e,t){return e-t},gn=function(){function i(e){e===void 0&&(e=Nn),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),ea=gn,ha=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],f=new Set;f.add(u);var c=function($,et){return t?$.weight-et.weight:0},l=new ea(c);for(we(u.id,s).forEach(function(W){l.insert(W)});!l.isEmpty();){var w=l.delMin(),M=w.source,O=w.target;f.has(M)&&f.has(O)||(r.push(w),f.has(M)||(f.add(M),we(M,s).forEach(function(W){l.insert(W)})),f.has(O)||(f.add(O),we(O,s).forEach(function(W){l.insert(W)})))}return r},Zn=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(M){return M});t&&u.sort(function(M,O){return M.weight-O.weight});for(var f=new jr(a.map(function(M){return M.id}));u.length>0;){var c=u.shift(),l=c.source,w=c.target;f.connected(l,w)||(r.push(c),f.union(l,w))}return r},na=function(e,t,r){var n={prim:ha,kruskal:Zn};return r?n[r](e,t):Zn(e,t)},da=na,Vn=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l=u.length,w,M={},O={},W=0;W<l;++W){var $=u[W],et=$.id;M[et]=1/l,O[et]=1/l}for(var at=fe(e);o>0&&n>t;){a=0;for(var W=0;W<l;++W){var $=u[W],et=$.id;if(w=0,at[$.id].inDegree===0)M[et]=0;else{for(var ft=$t(et,c,"source"),vt=0;vt<ft.length;++vt){var Ft=ft[vt],Xt=at[Ft].outDegree;Xt>0&&(w+=O[Ft]/Xt)}M[et]=r*w,a+=M[et]}}a=(1-a)/l,n=0;for(var W=0;W<l;++W){var $=u[W],et=$.id;w=M[et]+a,n+=Math.abs(w-O[et]),O[et]=w}o-=1}return O},se=Vn,Ut=-1,le=-1,ze="-1",Ie="-1",We=-1,_r="-1",nn=function(){function i(e,t,r,n){e===void 0&&(e=Ut),t===void 0&&(t=le),r===void 0&&(r=le),n===void 0&&(n=ze),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),pn=function(){function i(e,t){e===void 0&&(e=le),t===void 0&&(t=Ie),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),Gn=function(){function i(e,t,r){e===void 0&&(e=le),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new pn(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new nn(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new nn(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),jn=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||Ie,edgeLabel:n||ze,nodeLabel2:a||Ie}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),oa=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new jn(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=We),t===void 0&&(t=!1);var r=new Gn(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==Ie&&r.addNode(a,u),c!==Ie&&r.addNode(o,c),u!==Ie&&c!==u&&r.addEdge(void 0,a,o,f)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),va=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),_a=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,l=e.directed,w=l===void 0?!1:l,M=e.verbose,O=M===void 0?!1:M;this.graphs=t,this.dfsCode=new oa,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=w,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=O,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],l=e.nodeMap[c.to];r<=l.label&&!n.hasNode(l)&&a.push(c)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,l=0;l<c;l++){var w=f[l],M=o[w.to].label;t.to===w.to||r>M||n.hasNode(o[w.to])||(t.label<w.label||t.label===w.label&&s<=M)&&a.push(w)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(We,r),a=n.nodeMap,o=new oa,s={};n.nodes.forEach(function(l){var w=e.findForwardRootEdges(n,l);w.forEach(function(M){var O=a[M.to],W="".concat(l.label,"-").concat(M.label,"-").concat(O.label);s[W]||(s[W]={projected:[],nodeLabel1:l.label,edgeLabel:M.label,nodeLabel2:O.label});var $={graphId:n.id,edge:M,preNode:null};s[W].projected.push($)})});var u=this.findMinLabel(s);if(!!u){o.dfsEdgeList.push(new jn(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function l(w){for(var M=o.buildRmpath(),O=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,W=o.dfsEdgeList[M[0]].toNode,$={},et=!1,at=0,ft=r?-1:0,vt=function(Fn){if(et)return"break";w.forEach(function(Pn){var tn=new va(Pn),Mn=e.findBackwardEdge(n,tn.edges[M[Fn]],tn.edges[M[0]],tn);Mn&&($[Mn.label]||($[Mn.label]={projected:[],edgeLabel:Mn.label}),$[Mn.label].projected.push({graphId:n.id,edge:$,preNode:Pn}),at=o.dfsEdgeList[M[Fn]].fromNode,et=!0)})},Ft=M.length-1;Ft>ft;Ft--){var Xt=vt(Ft);if(Xt==="break")break}if(et){var Yt=e.findMinLabel($);o.dfsEdgeList.push(new jn(W,at,Ie,Yt.edgeLabel,Ie));var he=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[he]!==o.dfsEdgeList[he]?!1:l($[Yt.edgeLabel].projected)}var _e={};et=!1;var oe=0;w.forEach(function(cn){var Fn=new va(cn),Pn=e.findForwardPureEdges(n,Fn.edges[M[0]],O,Fn);Pn.length>0&&(et=!0,oe=W,Pn.forEach(function(tn){var Mn="".concat(tn.label,"-").concat(a[tn.to].label);_e[Mn]||(_e[Mn]={projected:[],edgeLabel:tn.label,nodeLabel2:a[tn.to].label}),_e[Mn].projected.push({graphId:n.id,edge:tn,preNode:cn})}))});for(var Ue=M.length,or=function(Fn){if(et)return"break";var Pn=M[Fn];w.forEach(function(tn){var Mn=new va(tn),Ln=e.findForwardRmpathEdges(n,Mn.edges[Pn],O,Mn);Ln.length>0&&(et=!0,oe=o.dfsEdgeList[Pn].fromNode,Ln.forEach(function(Dn){var Yn="".concat(Dn.label,"-").concat(a[Dn.to].label);_e[Yn]||(_e[Yn]={projected:[],edgeLabel:Dn.label,nodeLabel2:a[Dn.to].label}),_e[Yn].projected.push({graphId:n.id,edge:Dn,preNode:tn})}))})},Ft=0;Ft<Ue;Ft++){var Kr=or(Ft);if(Kr==="break")break}if(!et)return!0;var An=e.findMinLabel(_e);o.dfsEdgeList.push(new jn(oe,W+1,Ie,An.edgeLabel,An.nodeLabel2));var Sn=o.dfsEdgeList.length-1;return t.dfsEdgeList[Sn]!==o.dfsEdgeList[Sn]?!1:l(_e["".concat(An.edgeLabel,"-").concat(An.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,d.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&!!this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var l=t.graphs[c.graphId],w=l.nodeMap,M=new va(c),O=a.length-1;O>=0;O--){var W=t.findBackwardEdge(l,M.edges[a[O]],M.edges[a[0]],M);if(W){var $="".concat(t.dfsCode.dfsEdgeList[a[O]].fromNode,"-").concat(W.label);f[$]||(f[$]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[O]].fromNode,edgeLabel:W.label}),f[$].projected.push({graphId:c.graphId,edge:W,preNode:c})}}if(!(n>=t.maxNodeNum)){var et=t.findForwardPureEdges(l,M.edges[a[0]],s,M);et.forEach(function(ft){var vt="".concat(o,"-").concat(ft.label,"-").concat(w[ft.to].label);u[vt]||(u[vt]={projected:[],fromNodeId:o,edgeLabel:ft.label,nodeLabel2:w[ft.to].label}),u[vt].projected.push({graphId:c.graphId,edge:ft,preNode:c})});for(var at=function(vt){var Ft=t.findForwardRmpathEdges(l,M.edges[a[vt]],s,M);Ft.forEach(function(Xt){var Yt="".concat(t.dfsCode.dfsEdgeList[a[vt]].fromNode,"-").concat(Xt.label,"-").concat(w[Xt.to].label);u[Yt]||(u[Yt]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[vt]].fromNode,edgeLabel:Xt.label,nodeLabel2:w[Xt.to].label}),u[Yt].projected.push({graphId:c.graphId,edge:Xt,preNode:c})})},O=0;O<a.length;O++)at(O)}}),Object.keys(f).forEach(function(c){var l=f[c],w=l.toNodeId,M=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new jn(o,w,"-1",M,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var l=u[c],w=l.fromNodeId,M=l.edgeLabel,O=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new jn(w,o+1,Ie,M,O)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],l=c.nodeMap;c.nodes.forEach(function(w,M){var O=w.label,W="".concat(f,"-").concat(O);if(!s[W]){var $=a[O]||0;$++,a[O]=$}s[W]={graphKey:f,label:O},w.edges.forEach(function(et){var at=O,ft=l[et.to].label;if(!t&&at>ft){var vt=ft;ft=at,at=vt}var Ft=et.label,Xt="".concat(f,"-").concat(at,"-").concat(Ft,"-").concat(ft),Yt="".concat(at,"-").concat(Ft,"-").concat(ft);if(!o[Yt]){var he=o[Yt]||0;he++,o[Yt]=he}u[Xt]={graphId:f,nodeLabel1:at,edgeLabel:Ft,nodeLabel2:ft}})})}),Object.keys(a).forEach(function(f){var c=a[f];if(!(c<r)){var l={nodes:[],edges:[]};l.nodes.push({id:"0",label:f}),n.push(l)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var l=s[c.to],w="".concat(u.label,"-").concat(c.label,"-").concat(l.label);n[w]||(n[w]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:l.label});var M={graphId:a,edge:c,preNode:null};n[w].projected.push(M)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new jn(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),fi=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new Gn(s,!0,t),c={};u.nodes.forEach(function(l,w){f.addNode(w,l[r]),c[l.id]=w}),u.edges.forEach(function(l,w){var M=c[l.source],O=c[l.target];f.addEdge(-1,M,O,l[n])}),f&&f.getNodeNum()&&(a[f.id]=f)}),a},Ba=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},Wa="cluster",wa=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?Wa:a,s=e.edgeLabelProp,u=s===void 0?Wa:s,f=fi(t,n,o,u),c=e.minSupport,l=e.maxNodeNum,w=e.minNodeNum,M=e.verbose,O=e.top,W={graphs:f,minSupport:c,maxNodeNum:l,minNodeNum:w,top:O,verbose:M,directed:n},$=new _a(W);$.run();var et=Ba($.frequentSubgraphs,o,u);return et},vi=wa,ti=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(Ia(o,s,u,r,n))}),a},Ia=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=a&&r!==c){o.push(c),s.push(e[c]);var l=e[c][n];u[l]?(u[l].count++,u[l].dists.push(f)):u[l]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,l){return c-l})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},qi=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var l=0,w=0,M=f.nodeIdxs,O=f.neighborNum-1;l<o;){for(var W=M[1+Math.floor(Math.random()*O)],$=0;(s["".concat(c,"-").concat(W)]||s["".concat(W,"-").concat(c)])&&(W=Math.floor(Math.random()*t),$++,!($>2*t)););if($<2*t&&(s["".concat(c,"-").concat(W)]={start:c,end:W,distance:a[c][W]},l++,u++,u>=r))return s;if(w++,w>2*t)break}if(l<o){var et=o-l;o=(o+et)/(t-c-1)}}),s},gi=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,l=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!l)){var w=new Set(l),M=c.filter(function(at){return w.has(at)});if(!(!M||!M.length)){for(var O={},W=M.length,$=0;$<W;$++){var et=a[M[$]];n[o].nodes.push(et),O[et.id]=!0}r.edges.forEach(function(at){O[at.source]&&O[at.target]&&n[o].edges.push(at)})}}}}),n},ji=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!((a=t==null?void 0:t.edges)===null||a===void 0?void 0:a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],l=s[f.target][r],w=t==null?void 0:t.nodes[0][r],M=t==null?void 0:t.nodes[1][r],O=t==null?void 0:t.edges[0][n];f[n]===O&&(c===w&&l===M||c===M&&l===w)&&u++}),u)},Ti=function(e,t,r){for(var n=Infinity,a=0,o=function(f){var c=e[f],l=Object.keys(c).sort(function(at,ft){return c[at]-c[ft]}),w=10,M=[];l.forEach(function(at,ft){M[ft%w]||(M[ft%w]={graphs:[],totalCount:0,aveCount:0}),M[ft%w].graphs.push(at),M[ft%w].totalCount+=c[at]});var O=0,W=[];M.forEach(function(at){var ft=at.totalCount/at.graphs.length;at.aveCount=ft,W.push(ft);var vt=0,Ft=at.length;at.graphs.forEach(function(Xt,Yt){var he=c[Xt];at.graphs.forEach(function(_e,oe){Yt!==oe&&(vt+=Math.abs(he-c[_e]))})}),vt/=Ft*(Ft-1)/2,O+=vt}),O/=M.length;var $=0;W.forEach(function(at,ft){W.forEach(function(vt,Ft){ft!==Ft&&($+=Math.abs(at-vt))}),$/=W.length*(W.length-1)/2});var et=$-O;n<et&&(n=et,a=f)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},ri=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},No=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(Pe)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},Po=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var l=e[c].id,w=o[c];a["".concat(f,"-").concat(l)]=w,r||(a["".concat(l,"-").concat(f)]=w)}}),a},Ii=function(e,t,r,n,a,o,s,u,f,c,l){var w,M="".concat(t.id,"-").concat(r.id);if(c&&c[M])return c[M];var O=l?l[M]:void 0;if(!O){var W=(w={},w[M]={start:n[t.id].idx,end:n[r.id].idx,distance:a},w);l=gi(W,o,e,l),O=l[M]}return ji(O,s,u,f)},ho=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=Infinity,f=Infinity,c=Infinity,n[t].forEach(function(l){var w=r[l.id].degree;u>w&&(u=w);var M=r[l.id].inDegree;f>M&&(f=M);var O=r[l.id].outDegree;c>O&&(c=O)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},Ji=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(!!f){var c=Qe(e,r),l=Qe(t,r),w=Po(e.nodes,c,r),M=Po(t.nodes,l,r),O=ri(e.nodes,o),W=O.nodeMap,$=O.nodeLabelMap,et=ri(t.nodes,o),at=et.nodeMap,ft=et.nodeLabelMap;No(e.edges,s,W);var vt=No(t.edges,s,at).edgeLabelMap,Ft=[];l==null||l.forEach(function(Ua){Ft=Ft.concat(Ua)}),a||(a=Math.max.apply(Math,(0,m.__spreadArray)((0,m.__spreadArray)([],Ft,!1),[2],!1))),n||(n=a);var Xt=ti(e,c,o,n),Yt=ti(t,l,o,n),he=Math.min(100,f*(f-1)/2),_e=qi(n,f,he,Xt,c),oe=gi(_e,Xt,e),Ue=10,or=1,Kr=1,An=4,Sn={graphs:oe,nodeLabelProp:o,edgeLabelProp:s,minSupport:or,minNodeNum:Kr,maxNodeNum:An,directed:r},cn=vi(Sn).slice(0,Ue),Fn=cn.length,Pn=[];cn.forEach(function(Ua,bi){Pn[bi]={},Object.keys(oe).forEach(function(Ra){var xi=oe[Ra],Pi=ji(xi,Ua,o,s);Pn[bi][Ra]=Pi})});var tn=Ti(Pn,Fn,cn),Mn=tn.structure,Ln=tn.structureCountMap,Dn=t.nodes[0],Yn=[],aa=(u=t.nodes[0])===null||u===void 0?void 0:u[o],Da=-Infinity;t.nodes.forEach(function(Ua){var bi=Ua[o],Ra=$[bi];(Ra==null?void 0:Ra.length)>Da&&(Da=Ra.length,Yn=Ra,aa=bi,Dn=Ua)});var Pa={},Wi={},si={},mi={},di={},Ci={};Object.keys(ft).forEach(function(Ua,bi){di[Ua]=[],r&&(Ci[Ua]=[]);var Ra=-Infinity,xi=ft[Ua],Pi={};xi.forEach(function($a){var ui=M["".concat(Dn.id,"-").concat($a.id)];if(ui&&di[Ua].push(ui),Ra<ui&&(Ra=ui),Pi["".concat(Dn.id,"-").concat($a.id)]={start:0,end:at[$a.id].idx,distance:ui},r){var Co=M["".concat($a.id,"-").concat(Dn.id)];Co&&Ci[Ua].push(Co)}}),di[Ua]=di[Ua].sort(function($a,ui){return $a-ui}),r&&(Ci[Ua]=Ci[Ua].sort(function($a,ui){return $a-ui})),Wi=gi(Pi,Yt,t,Wi);var la=[];if(Object.keys(Pi).forEach(function($a){if(si[$a]){la.push(si[$a]);return}var ui=Wi[$a];si[$a]=ji(ui,Mn,o,s),la.push(si[$a])}),la=la.sort(function($a,ui){return ui-$a}),mi["".concat(Dn.id,"-").concat(Ua)]=la,Ua!==aa)for(var Ya=(Yn==null?void 0:Yn.length)||0,Za=function(ui){var Co=Yn[ui],Fs=Xt[W[Co.id].idx],Xo=Fs.nodeLabelCountMap[Ua],fl=ft[Ua].length;if(!Xo||Xo.count<fl)return Yn.splice(ui,1),"continue";for(var ih=!1,Es=0;Es<fl;Es++)if(Xo.dists[Es]>di[Ua][Es]){ih=!0;break}if(ih)return Yn.splice(ui,1),"continue";var ru={};Fs.neighbors.forEach(function(ws){var wu=w["".concat(Co.id,"-").concat(ws.id)];ru["".concat(Co.id,"-").concat(ws.id)]={start:W[Co.id].idx,end:W[ws.id].idx,distance:wu}}),oe=gi(ru,Xt,e,oe);var Yu=[];Object.keys(ru).forEach(function(ws){if(Ln[ws]){Yu.push(Ln[ws]);return}var wu=oe[ws];Ln[ws]=ji(wu,Mn,o,s),Yu.push(Ln[ws])}),Yu=Yu.sort(function(ws,wu){return wu-ws});for(var cc=!1,Es=0;Es<fl;Es++)if(Yu[Es]<la[Es]){cc=!0;break}if(cc)return Yn.splice(ui,1),"continue"},ki=Ya-1;ki>=0;ki--)Za(ki)});var Si=[];Yn==null||Yn.forEach(function(Ua){for(var bi=W[Ua.id].idx,Ra=Ia(e.nodes,c[bi],bi,o,a),xi=Ra.neighbors,Pi=xi.length,la=!1,Ya=Pi-1;Ya>=0;Ya--){if(xi.length+1<t.nodes.length){la=!0;return}var Za=xi[Ya],ki=Za[o];if(!ft[ki]||!ft[ki].length){xi.splice(Ya,1);continue}if(!di[ki]||!di[ki].length){xi.splice(Ya,1);continue}var $a="".concat(Ua.id,"-").concat(Za.id),ui=w[$a],Co=di[ki].length-1,Fs=di[ki][Co];if(ui>Fs){xi.splice(Ya,1);continue}if(r){var Xo="".concat(Za.id,"-").concat(Ua.id),fl=w[Xo];Co=Ci[ki].length-1;var ih=Ci[ki][Co];if(fl>ih){xi.splice(Ya,1);continue}}var Es=Ln[$a]?Ln[$a]:Ii(e,Ua,Za,W,ui,Xt,Mn,o,s,Ln,oe),ru="".concat(Dn.id,"-").concat(ki),Yu=mi[ru][mi[ru].length-1];if(Es<Yu){xi.splice(Ya,1);continue}var cc=ho(Pa,ki,at,ft),ws=cc.minPatternNodeLabelDegree,wu=cc.minPatternNodeLabelInDegree,Cf=cc.minPatternNodeLabelOutDegree;if(W[Za.id].degree<ws){xi.splice(Ya,1);continue}}la||Si.push({nodes:[Ua].concat(xi)})});var bs=Qr(t,Dn.id,!1).length,Zo={};r?(Object.keys(bs).forEach(function(Ua){var bi=at[Ua].node[o];Zo[bi]?Zo[bi].push(bs[Ua]):Zo[bi]=[bs[Ua]]}),Object.keys(Zo).forEach(function(Ua){Zo[Ua].sort(function(bi,Ra){return bi-Ra})})):Zo=di;for(var eu=Si.length,Ko=function(bi){var Ra=Si[bi],xi=Ra.nodes[0],Pi={},la={};Ra.nodes.forEach(function(lo,Gs){la[lo.id]={idx:Gs,node:lo,degree:0,inDegree:0,outDegree:0};var ts=lo[o];Pi[ts]?Pi[ts]++:Pi[ts]=1});var Ya=[],Za={};e.edges.forEach(function(lo){la[lo.source]&&la[lo.target]&&(Ya.push(lo),Za[lo[s]]?Za[lo[s]]++:Za[lo[s]]=1,la[lo.source].degree++,la[lo.target].degree++,la[lo.source].outDegree++,la[lo.target].inDegree++)});for(var ki=Object.keys(vt).length,$a=!1,ui=0;ui<ki;ui++){var Co=Object.keys(vt)[ui];if(!Za[Co]||Za[Co]<vt[Co].length){$a=!0;break}}if($a)return Si.splice(bi,1),"continue";var Fs=Ya.length;if(Fs<t.edges.length)return Si.splice(bi,1),"break";for(var Xo=!1,fl=function(Gs){var ts=Ya[Gs],Vu=ts[s],cl=vt[Vu];if(!cl||!cl.length)return Za[Vu]--,cl&&Za[Vu]<cl.length?(Xo=!0,"break"):(Ya.splice(Gs,1),la[ts.source].degree--,la[ts.target].degree--,la[ts.source].outDegree--,la[ts.target].inDegree--,"continue");var _p=la[ts.source].node[o],Mp=la[ts.target].node[o],Mv=!1;if(cl.forEach(function(Cp){var Ap=at[Cp.source].node,Tp=at[Cp.target].node;Ap[o]===_p&&Tp[o]===Mp&&(Mv=!0),!r&&Ap[o]===Mp&&Tp[o]===_p&&(Mv=!0)}),!Mv)return Za[Vu]--,cl&&Za[Vu]<cl.length?(Xo=!0,"break"):(Ya.splice(Gs,1),la[ts.source].degree--,la[ts.target].degree--,la[ts.source].outDegree--,la[ts.target].inDegree--,"continue")},ui=Fs-1;ui>=0;ui--){var ih=fl(ui);if(ih==="break")break}if(Xo)return Si.splice(bi,1),"continue";Ra.edges=Ya;var Es=Qr(Ra,Ra.nodes[0].id,!1).length;if(Object.keys(Es).reverse().forEach(function(lo){if(!(lo===Ra.nodes[0].id||Xo)){if(Es[lo]===Infinity){var Gs=la[lo].node[o];if(Pi[Gs]--,Pi[Gs]<ft[Gs].length){Xo=!0;return}var ts=Ra.nodes.indexOf(la[lo].node);Ra.nodes.splice(ts,1),la[lo]=void 0;return}var Vu=W[lo].node[o];if(!Zo[Vu]||!Zo[Vu].length||Es[lo]>Zo[Vu][Zo[Vu].length-1]){var Gs=la[lo].node[o];if(Pi[Gs]--,Pi[Gs]<ft[Gs].length){Xo=!0;return}var ts=Ra.nodes.indexOf(la[lo].node);Ra.nodes.splice(ts,1),la[lo]=void 0}}}),Xo)return Si.splice(bi,1),"continue";for(var ru=!0,Yu=0;ru&&!Xo;){ru=!1;var cc=r?la[xi.id].degree<at[Dn.id].degree||la[xi.id].inDegree<at[Dn.id].inDegree||la[xi.id].outDegree<at[Dn.id].outDegree:la[xi.id].degree<at[Dn.id].degree;if(cc){Xo=!0;break}if(Pi[xi[o]]<ft[xi[o]].length){Xo=!0;break}for(var ws=Ra.nodes.length,wu=ws-1;wu>=0;wu--){var Cf=Ra.nodes[wu],wp=la[Cf.id].degree,bw=la[Cf.id].inDegree,xw=la[Cf.id].outDegree,Ew=Cf[o],_v=ho(Pa,Ew,at,ft),Sp=_v.minPatternNodeLabelDegree,ww=_v.minPatternNodeLabelInDegree,Sw=_v.minPatternNodeLabelOutDegree,_w=r?wp<Sp||bw<ww||xw<Sw:wp<Sp;if(_w){if(Pi[Cf[o]]--,Pi[Cf[o]]<ft[Cf[o]].length){Xo=!0;break}Ra.nodes.splice(wu,1),la[Cf.id]=void 0,ru=!0}}if(Xo||!ru&&Yu!==0)break;Fs=Ya.length;for(var Ed=Fs-1;Ed>=0;Ed--){var Af=Ya[Ed];if(!la[Af.source]||!la[Af.target]){Ya.splice(Ed,1);var wd=Af[s];if(Za[wd]--,la[Af.source]&&(la[Af.source].degree--,la[Af.source].outDegree--),la[Af.target]&&(la[Af.target].degree--,la[Af.target].inDegree--),vt[wd]&&Za[wd]<vt[wd].length){Xo=!0;break}ru=!0}}Yu++}if(Xo||Xo||Ra.nodes.length<t.nodes.length||Ya.length<t.edges.length)return Si.splice(bi,1),"continue"},$o=eu-1;$o>=0;$o--){var Bs=Ko($o);if(Bs==="break")break}for(var is=Si.length,xs=function(bi){var Ra=Si[bi],xi={};Ra.edges.forEach(function(Ya){var Za="".concat(Ya.source,"-").concat(Ya.target,"-").concat(Ya.label);xi[Za]?xi[Za]++:xi[Za]=1});for(var Pi=function(Za){var ki=Si[Za],$a={};ki.edges.forEach(function(Co){var Fs="".concat(Co.source,"-").concat(Co.target,"-").concat(Co.label);$a[Fs]?$a[Fs]++:$a[Fs]=1});var ui=!0;Object.keys($a).length!==Object.keys(xi).length?ui=!1:Object.keys(xi).forEach(function(Co){$a[Co]!==xi[Co]&&(ui=!1)}),ui&&Si.splice(Za,1)},la=is-1;la>bi;la--)Pi(la);is=Si.length},$o=0;$o<=is-1;$o++)xs($o);return Si}}},Xi=Ji,Ri=function(){function i(e){e===void 0&&(e=10),this.linkedList=new Ae,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),Oi=Ri,Io=fn,to={getAdjMatrix:Ot,breadthFirstSearch:re,connectedComponent:Et,getDegree:fe,getInDegree:Fe,getOutDegree:$e,detectCycle:fn,detectDirectedCycle:Io,detectAllCycles:ln,detectAllDirectedCycle:Or,detectAllUndirectedCycle:ur,depthFirstSearch:Xe,dijkstra:Qr,findAllPath:sr,findShortestPath:on,floydWarshall:Qe,labelPropagation:an,louvain:pt,iLouvain:Mt,kCore:Le,kMeans:br,cosineSimilarity:sn,nodesCosineSimilarity:tr,minimumSpanningTree:da,pageRank:se,getNeighbors:$t,Stack:Oi,GADDI:Xi},Yi=R(77160),un=R(31437),vo=Dt,Fo=function(e){return function(t,r){return t[e]-r[e]}},Qa=function(e,t,r){return e>=t&&e<=r},ko=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,l=1/f,w=s.x*s.x+s.y*s.y,M=u.x*u.x+u.y*u.y;if(c>a*w*M){var O=(o.x*u.y-o.y*u.x)*l,W=(o.x*s.y-o.y*s.x)*l;return!Qa(O,0,1)||!Qa(W,0,1)?null:{x:e.x+O*s.x,y:e.y+O*s.y}}return null},go=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+a,y:n}),f.push({x:r+a,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var l=null,w=1;w<f.length&&(l=ko(f[w-1],f[w],c,t),!l);w++);return l},Li=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<a*a)return null;var c=Math.atan(f/u);return{x:r+Math.abs(a*Math.cos(c))*Math.sign(u),y:n+Math.abs(a*Math.sin(c))*Math.sign(f)}},eo=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:a+r*Math.cos(f),y:o+n*Math.sin(f)}},de=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),Yi.transformMat3(n,n,t),{x:n[0],y:n[1]}},Ar=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=tt.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return Yi.transformMat3(a,a,n),{x:a[0],y:a[1]}},qr=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-n*s;return{x:-(s*u-a*f)/c,y:-(n*f-o*u)/c}},Bn=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},Sa=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},ci=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=Infinity:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},_i=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];a[c][l]=1,t||(a[l][c]=1)}),a},li=function(e,t){e.translate(t.x,t.y)},Ai=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*a[0],c=u*a[4],l=0,w=0,M=0,O=0;e.animate(function($){return M=f*$,O=c*$,a=vo(a,[["t",M-l,O-w]]),l=M,w=O,{matrix:a}},n)}else{var W=vo(a,[["t",s,u]]);e.setMatrix(W)}},Ea=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,d.isArray)(t)||(n=[t,t]),(0,d.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=vo(r,[["s",n[0],n[1]]]),e.setMatrix(r)},ro=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=vo(r,[["r",t]]),e.setMatrix(r)},Yo=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function Bi(i,e,t){return(t[0]-i[0])*(e[1]-i[1])==(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var no=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(l){return Math.abs(l)<o?0:l<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var f=e[u],c=e[(u+1)%a];if(Bi(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},Oo=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},Vi=function(e,t){var r=!1;return(0,d.each)(e,function(n){if(ko(n.from,n.to,t.from,t.to))return r=!0,!1}),r},po=function(e,t){var r=function(w){var M=w.map(function(W){return W[0]}),O=w.map(function(W){return W[1]});return{minX:Math.min.apply(null,M),maxX:Math.max.apply(null,M),minY:Math.min.apply(null,O),maxY:Math.max.apply(null,O)}},n=function(w){for(var M=[],O=w.length,W=0;W<O-1;W++){var $=w[W],et=w[W+1];M.push({from:{x:$[0],y:$[1]},to:{x:et[0],y:et[1]}})}if(M.length>1){var at=w[0],ft=w[O-1];M.push({from:{x:ft[0],y:ft[1]},to:{x:at[0],y:at[1]}})}return M};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!Oo(a,o))return!1;var s=!1;if((0,d.each)(t,function(l){if(no(e,l[0],l[1]))return s=!0,!1}),s||((0,d.each)(e,function(l){if(no(t,l[0],l[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,d.each)(f,function(l){if(Vi(u,l))return c=!0,!1}),c},Ei=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),yo=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},Hi=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},ma=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=yo(n,r[s]),f=u[0],c=u[1],l=u[2],w=u[3];o[s]=ko({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:l,y:w}),o[s]&&(a+=1)}return[o,a]},qa=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=yo(n,r[s]),f=u[0],c=u[1],l=u[2],w=u[3],M=Hi(t,new Ei(f,c,l,w));M=Math.abs(M-.5),M>=0&&M<=1&&(o+=1,a=M<a?M:a)}return o===0?-1:a},Mi=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},pi=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},so=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*a+u*o,c;f<=0?c=0:(s=a-s,u=o-u,f=s*a+u*o,f<=0?c=0:c=f*f/(a*a+o*o));var l=s*s+u*u-c;return l<0&&(l=0),l},Zi=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},Fi=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},mo=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,f=[a-r,o-n];if(un.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];un.normalize(c,c);var l=[s-r,u-n];return Math.abs(un.dot(l,c))},uo=function(e,t,r){return e+(t-e)*r},bo=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=uo(e[o],t[o],r);return a},La="rgb(95, 149, 255)",ds="rgb(255, 255, 255)",os="rgb(0, 0, 0)",Nt="rgb(247, 250, 255)",At="rgb(239, 244, 255)",ut="rgb(253, 253, 253)",yt="rgb(250, 250, 250)",Ct="rgb(224, 224, 224)",ve="rgb(234, 234, 234)",ke="rgb(245, 245, 245)",er="rgb(191, 213, 255)",yr="#4572d9",Pt="rgb(223, 234, 255)",Tt={mainStroke:La,mainFill:At,activeStroke:La,activeFill:Nt,inactiveStroke:er,inactiveFill:Nt,selectedStroke:La,selectedFill:ds,highlightStroke:yr,highlightFill:Pt,disableStroke:Ct,disableFill:yt,edgeMainStroke:Ct,edgeActiveStroke:La,edgeInactiveStroke:ve,edgeSelectedStroke:La,edgeHighlightStroke:La,edgeDisableStroke:ke,comboMainStroke:Ct,comboMainFill:ut,comboActiveStroke:La,comboActiveFill:Nt,comboInactiveStroke:Ct,comboInactiveFill:ut,comboSelectedStroke:La,comboSelectedFill:ut,comboHighlightStroke:yr,comboHighlightFill:ut,comboDisableStroke:ve,comboDisableFill:yt},H={version:"0.8.0",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Tt.mainStroke,fill:At},size:20,color:Tt.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Tt.activeFill,stroke:Tt.activeStroke}},nodeStateStyles:{active:{fill:Tt.activeFill,stroke:Tt.activeStroke,lineWidth:2,shadowColor:Tt.mainStroke,shadowBlur:10},selected:{fill:Tt.selectedFill,stroke:Tt.selectedStroke,lineWidth:4,shadowColor:Tt.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Tt.highlightFill,stroke:Tt.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Tt.inactiveFill,stroke:Tt.inactiveStroke,lineWidth:1},disable:{fill:Tt.disableFill,stroke:Tt.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:os,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Tt.edgeMainStroke,lineAppendWidth:2},color:Tt.edgeMainStroke},edgeStateStyles:{active:{stroke:Tt.edgeActiveStroke,lineWidth:1},selected:{stroke:Tt.edgeSelectedStroke,lineWidth:2,shadowColor:Tt.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Tt.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Tt.edgeInactiveStroke,lineWidth:1},disable:{stroke:Tt.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:os,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Tt.comboMainFill,lineWidth:1,stroke:Tt.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Tt.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Tt.comboActiveStroke,lineWidth:1,fill:Tt.comboActiveFill},selected:{stroke:Tt.comboSelectedStroke,lineWidth:2,fill:Tt.comboSelectedFill,shadowColor:Tt.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Tt.comboHighlightStroke,lineWidth:2,fill:Tt.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Tt.comboInactiveStroke,fill:Tt.comboInactiveFill,lineWidth:1},disable:{stroke:Tt.comboDisableStroke,fill:Tt.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},gt={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,"0":.6,"1":.40099945068359377,"2":.6,"3":.6,"4":.6,"5":.6,"6":.6,"7":.5469985961914062,"8":.6,"9":.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Rt=Math.PI,te=Math.sin,De=Math.cos,rr=te(Rt/8),Er=De(Rt/8),yn=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=de(n,o),a=de(a,o)}var s=n.x,u=n.y,f=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},en=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||H.defaultLoopPosition,c=[n[6],n[7]],l=[e.startPoint.x,e.startPoint.y],w=[e.endPoint.x,e.endPoint.y],M=o.height/2,O=o.width/2,W=M,$=M,et=W*rr,at=W*Er,ft=$*rr,vt=$*Er,Ft=a.get("type"),Xt=Math.min(M/2,O/2),Yt=Math.min(M,O),he=(s==null?void 0:s.pointPadding)?Math.min(Yt,s==null?void 0:s.pointPadding):Xt;if(l[0]===w[0]&&l[1]===w[1]){switch(f){case"top":Ft==="circle"?(l=[c[0]-et,c[1]-at],w=[c[0]+ft,c[1]-vt]):(l=[c[0]-he,c[1]-M],w=[c[0]+he,c[1]-M]);break;case"top-right":W=M,$=O,Ft==="circle"?(et=W*rr,at=W*Er,ft=$*rr,vt=$*Er,l=[c[0]+et,c[1]-at],w=[c[0]+vt,c[1]-ft]):(l=[c[0]+O-he,c[1]-M],w=[c[0]+O,c[1]-M+he]);break;case"right":W=O,$=O,Ft==="circle"?(et=W*rr,at=W*Er,ft=$*rr,vt=$*Er,l=[c[0]+at,c[1]-et],w=[c[0]+vt,c[1]+ft]):(l=[c[0]+O,c[1]-he],w=[c[0]+O,c[1]+he]);break;case"bottom-right":W=O,$=M,Ft==="circle"?(et=W*rr,at=W*Er,ft=$*rr,vt=$*Er,l=[c[0]+at,c[1]+et],w=[c[0]+ft,c[1]+vt]):(l=[c[0]+O,c[1]+M-he],w=[c[0]+O-he,c[1]+M]);break;case"bottom":W=M,$=M,Ft==="circle"?(et=W*rr,at=W*Er,ft=$*rr,vt=$*Er,l=[c[0]+et,c[1]+at],w=[c[0]-ft,c[1]+vt]):(l=[c[0]-he,c[1]+M],w=[c[0]+he,c[1]+M]);break;case"bottom-left":W=M,$=O,Ft==="circle"?(et=W*rr,at=W*Er,ft=$*rr,vt=$*Er,l=[c[0]-et,c[1]+at],w=[c[0]-vt,c[1]+ft]):(l=[c[0]-O,c[1]+M-he],w=[c[0]-O+he,c[1]+M]);break;case"left":W=O,$=O,Ft==="circle"?(et=W*rr,at=W*Er,ft=$*rr,vt=$*Er,l=[c[0]-at,c[1]+et],w=[c[0]-vt,c[1]-ft]):(l=[c[0]-O,c[1]-he],w=[c[0]-O,c[1]+he]);break;case"top-left":W=O,$=M,Ft==="circle"?(et=W*rr,at=W*Er,ft=$*rr,vt=$*Er,l=[c[0]-at,c[1]-et],w=[c[0]-ft,c[1]-vt]):(l=[c[0]-O+he,c[1]-M],w=[c[0]-O,c[1]-M+he]);break;default:W=O,$=O,et=W*rr,at=W*Er,ft=$*rr,vt=$*Er,l=[c[0]-et,c[1]-at],w=[c[0]+ft,c[1]-vt]}if(s.clockwise===!1){var _e=[l[0],l[1]];l=[w[0],w[1]],w=[_e[0],_e[1]]}}var oe=[l[0]-c[0],l[1]-c[1]],Ue=(W+u)/W,or=($+u)/$;s.clockwise===!1&&(Ue=($+u)/$,or=(W+u)/W);var Kr=un.scale([0,0],oe,Ue),An=[c[0]+Kr[0],c[1]+Kr[1]],Sn=[w[0]-c[0],w[1]-c[1]],cn=un.scale([0,0],Sn,or),Fn=[c[0]+cn[0],c[1]+cn[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:w[0],y:w[1]},e.controlPoints=[{x:An[0],y:An[1]},{x:Fn[0],y:Fn[1]}],e},hn=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=Rt*2),r&&(u.x+=De(c)*r,u.y+=te(c)*r),n){var l=c-Rt/2;c>1/2*Rt&&c<3*1/2*Rt&&(l-=Rt),u.x+=De(l)*n,u.y+=te(l)*n}var w={x:u.x,y:u.y,angle:c};return a?(c>.5*Rt&&c<1.5*Rt&&(c-=Rt),(0,m.__assign)({rotate:c},w)):w},Qn=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},fa=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},Hn=function(e,t){typeof t=="function"&&Qn(e,null,-1,t)},Jn=function(e,t){typeof t=="function"&&fa(e,null,-1,t)},ja=function(e,t){return t*(gt[e]||1)},Va=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=ja(a,t)}),[r,t]},ni=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},ai=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,f){var c=(0,d.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var l=n[c.id];if(l){if(c.children=l.children,n[c.id]=c,l=c,!l.parentId){r.push(l);return}var w=n[l.parentId];if(w)w.children?w.children.push(c):w.children=[c];else{var M={id:l.parentId,children:[l]};n[l.parentId]=M,n[c.id]=c}return}if((0,d.isString)(u.parentId)){var O=n[u.parentId];if(O)O.children?O.children.push(c):O.children=[c],n[c.id]=c;else{var W={id:u.parentId,children:[c]};n[W.id]=W,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,Hn(u,function(f){var c,l=n[f.id].itemType;l==="node"?c=n[f.comboId]:c=n[f.parentId],c&&l==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var w=o[f.id];return w&&(w.depth=f.depth),!0})}),r},wi=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(O){if(!u){if(O.id===t){o=O,O.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}Hn(O,function(W){var $;return s[W.id]={children:(W==null?void 0:W.children)||[]},a=($=s[W.parentId||W.comboId||"root"])===null||$===void 0?void 0:$.children,W&&(W.removed||t===W.id)&&a?(f=W.parentId||W.comboId||"root",o=W,W.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[f])===null||n===void 0?void 0:n.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var l=!1;if(r){var w=0;(e||[]).forEach(function(O){l||Hn(O,function(W){return r===W.id?(l=!0,W.children?W.children.push(o):W.children=[o],w=W.depth,o.itemType==="node"?o.depth=w+2:o.depth=w+1,!1):!0})})}else(!r||!l)&&o.itemType!=="node"&&e.push(o);var M=o.depth;Hn(o,function(O){return O.itemType==="node"?M+=2:M+=1,O.depth=M,!0})}return e},Ro=function(e,t,r){var n={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y;return{minX:s,minY:u,maxX:s,maxY:u,x:s,y:u,width:void 0,height:void 0}}return e.forEach(function(f){var c=t.findById(f.id);if(!(!c||!c.isVisible())){c.set("bboxCanvasCache",void 0);var l=c.getCanvasBBox();l.x&&n.minX>l.minX&&(n.minX=l.minX),l.y&&n.minY>l.minY&&(n.minY=l.minY),l.x&&n.maxX<l.maxX&&(n.maxX=l.maxX),l.y&&n.maxY<l.maxY&&(n.maxY=l.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,Object.keys(n).forEach(function(f){(n[f]===Infinity||n[f]===-Infinity)&&(n[f]=void 0)}),n},ss=function(e){var t=(0,d.isNumber)(e.x)||(0,d.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,d.isNumber)(e.style.r)||(0,d.isNumber)(e.style.width)||(0,d.isNumber)(e.style.height)||(0,d.isNumber)(e.style.rx)||(0,d.isNumber)(e.style.ry)),t},Bo=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if((0,d.isObject)(n)&&!(0,d.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,d.isString)(s)||(a[o]=(0,d.clone)(s))}),t[r]=a}else t[r]=(0,d.clone)(n)}),t},es=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,d.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},Di=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return Hn(e,function(w){return(0,d.isString)(w.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(w){return!(0,d.isString)(w.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(w){return w.id}),f=a==null?void 0:a.map(function(w){return w.id}),c=(0,m.__spreadArray)((0,m.__spreadArray)([],u,!0),f,!0),l=(r||[]).find(function(w){return!c.includes(w.source)||!c.includes(w.target)});return l?(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},Lo=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,d.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},nu=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,d.each)(e,function(t){(0,d.each)(t,function(r,n){(0,d.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,d.each)(r||[],function(o){var s=j.getBehavior(o.type||o);!s||(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,d.each)(t,function(r){e.indexOf(r)<0&&((0,d.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,d.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];!o||(n.emit("beforemodechange",{mode:e}),(0,d.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,d.isArray)(e)?a=e:a=[e],(0,d.isArray)(t))return(0,d.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,d.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),au=nu,Ss=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,vs=new RegExp("([a-z])["+Ss+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ss+"]*,?["+Ss+"]*)+)","ig"),iu=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ss+"]*,?["+Ss+"]*","ig"),h=function(i){if(!i)return null;if((0,d.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(vs,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(iu,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},P=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},ht=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);a=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},St=function(i){if(i=h(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var f=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",c=void 0,l=void 0,w=o,M=i.length;w<M;w++){if(e.push(c=[]),l=i[w],s=l[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+l[6]+t,c[7]=+l[7]+r;break;case"V":c[1]=+l[1]+r;break;case"H":c[1]=+l[1]+t;break;case"R":u=[t,r].concat(l.slice(1));for(var O=2,W=u.length;O<W;O++)u[O]=+u[O]+t,u[++O]=+u[O]+r;e.pop(),e=e.concat(P(u,f));break;case"O":e.pop(),u=ht(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(ht(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+l[1]+t,a=+l[2]+r;break;default:for(var O=1,W=l.length;O<W;O++)c[O]=+l[O]+(O%2?t:r)}else if(s==="R")u=[t,r].concat(l.slice(1)),e.pop(),e=e.concat(P(u,f)),c=["R"].concat(l.slice(-2));else if(s==="O")e.pop(),u=ht(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(ht(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var $=0,et=l.length;$<et;$++)c[$]=l[$];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},Gt=function(i,e,t,r){return[i,e,t,r,t,r]},Kt=function(i,e,t,r,n,a){var o=1/3,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},Qt=function(i,e,t,r,n,a,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,l=Math.PI/180*(+n||0),w=[],M,O,W,$,et,at=function(Wi,si,mi){var di=Wi*Math.cos(mi)-si*Math.sin(mi),Ci=Wi*Math.sin(mi)+si*Math.cos(mi);return{x:di,y:Ci}};if(f)O=f[0],W=f[1],$=f[2],et=f[3];else{M=at(i,e,-l),i=M.x,e=M.y,M=at(s,u,-l),s=M.x,u=M.y,i===s&&e===u&&(s+=1,u+=1);var ft=(i-s)/2,vt=(e-u)/2,Ft=ft*ft/(t*t)+vt*vt/(r*r);Ft>1&&(Ft=Math.sqrt(Ft),t=Ft*t,r=Ft*r);var Xt=t*t,Yt=r*r,he=(a===o?-1:1)*Math.sqrt(Math.abs((Xt*Yt-Xt*vt*vt-Yt*ft*ft)/(Xt*vt*vt+Yt*ft*ft)));$=he*t*vt/r+(i+s)/2,et=he*-r*ft/t+(e+u)/2,O=Math.asin(((e-et)/r).toFixed(9)),W=Math.asin(((u-et)/r).toFixed(9)),O=i<$?Math.PI-O:O,W=s<$?Math.PI-W:W,O<0&&(O=Math.PI*2+O),W<0&&(W=Math.PI*2+W),o&&O>W&&(O=O-Math.PI*2),!o&&W>O&&(W=W-Math.PI*2)}var _e=W-O;if(Math.abs(_e)>c){var oe=W,Ue=s,or=u;W=O+c*(o&&W>O?1:-1),s=$+t*Math.cos(W),u=et+r*Math.sin(W),w=Qt(s,u,t,r,n,0,o,Ue,or,[W,oe,$,et])}_e=W-O;var Kr=Math.cos(O),An=Math.sin(O),Sn=Math.cos(W),cn=Math.sin(W),Fn=Math.tan(_e/4),Pn=4/3*t*Fn,tn=4/3*r*Fn,Mn=[i,e],Ln=[i+Pn*An,e-tn*Kr],Dn=[s+Pn*cn,u-tn*Sn],Yn=[s,u];if(Ln[0]=2*Mn[0]-Ln[0],Ln[1]=2*Mn[1]-Ln[1],f)return[Ln,Dn,Yn].concat(w);w=[Ln,Dn,Yn].concat(w).join().split(",");for(var aa=[],Da=0,Pa=w.length;Da<Pa;Da++)aa[Da]=Da%2?at(w[Da-1],w[Da],l).y:at(w[Da],w[Da+1],l).x;return aa},pe=function(i,e){var t=St(i),r=e&&St(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,l=function(ft,vt,Ft){var Xt,Yt;if(!ft)return["C",vt.x,vt.y,vt.x,vt.y,vt.x,vt.y];switch(!(ft[0]in{T:1,Q:1})&&(vt.qx=vt.qy=null),ft[0]){case"M":vt.X=ft[1],vt.Y=ft[2];break;case"A":ft=["C"].concat(Qt.apply(0,[vt.x,vt.y].concat(ft.slice(1))));break;case"S":Ft==="C"||Ft==="S"?(Xt=vt.x*2-vt.bx,Yt=vt.y*2-vt.by):(Xt=vt.x,Yt=vt.y),ft=["C",Xt,Yt].concat(ft.slice(1));break;case"T":Ft==="Q"||Ft==="T"?(vt.qx=vt.x*2-vt.qx,vt.qy=vt.y*2-vt.qy):(vt.qx=vt.x,vt.qy=vt.y),ft=["C"].concat(Kt(vt.x,vt.y,vt.qx,vt.qy,ft[1],ft[2]));break;case"Q":vt.qx=ft[1],vt.qy=ft[2],ft=["C"].concat(Kt(vt.x,vt.y,ft[1],ft[2],ft[3],ft[4]));break;case"L":ft=["C"].concat(Gt(vt.x,vt.y,ft[1],ft[2]));break;case"H":ft=["C"].concat(Gt(vt.x,vt.y,ft[1],vt.y));break;case"V":ft=["C"].concat(Gt(vt.x,vt.y,vt.x,ft[1]));break;case"Z":ft=["C"].concat(Gt(vt.x,vt.y,vt.X,vt.Y));break;default:break}return ft},w=function(ft,vt){if(ft[vt].length>7){ft[vt].shift();for(var Ft=ft[vt];Ft.length;)o[vt]="A",r&&(s[vt]="A"),ft.splice(vt++,0,["C"].concat(Ft.splice(0,6)));ft.splice(vt,1),c=Math.max(t.length,r&&r.length||0)}},M=function(ft,vt,Ft,Xt,Yt){ft&&vt&&ft[Yt][0]==="M"&&vt[Yt][0]!=="M"&&(vt.splice(Yt,0,["M",Xt.x,Xt.y]),Ft.bx=0,Ft.by=0,Ft.x=ft[Yt][1],Ft.y=ft[Yt][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var O=0;O<c;O++){t[O]&&(u=t[O][0]),u!=="C"&&(o[O]=u,O&&(f=o[O-1])),t[O]=l(t[O],n,f),o[O]!=="A"&&u==="C"&&(o[O]="C"),w(t,O),r&&(r[O]&&(u=r[O][0]),u!=="C"&&(s[O]=u,O&&(f=s[O-1])),r[O]=l(r[O],a,f),s[O]!=="A"&&u==="C"&&(s[O]="C"),w(r,O)),M(t,r,n,a,O),M(r,t,a,n,O);var W=t[O],$=r&&r[O],et=W.length,at=r&&$.length;n.x=W[et-2],n.y=W[et-1],n.bx=parseFloat(W[et-4])||n.x,n.by=parseFloat(W[et-3])||n.y,a.bx=r&&(parseFloat($[at-4])||a.x),a.by=r&&(parseFloat($[at-3])||a.y),a.x=r&&$[at-2],a.y=r&&$[at-1]}return r?[t,r]:t},Se=/,?([a-z]),?/gi,je=function(i){return i.join(",").replace(Se,"$1")},fr=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},Rr=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],w=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],M=0,O=0;O<c;O++){var W=f*l[O]+f,$=fr(W,i,t,n,o),et=fr(W,e,r,a,s),at=$*$+et*et;M+=w[O]*Math.sqrt(at)}return f*M},Vr=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,w,M,O=0;O<2;++O){if(O===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,w=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,w=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;M=-w/l,M>0&&M<1&&u.push(M);continue}var W=l*l-4*w*c,$=Math.sqrt(W);if(!(W<0)){var et=(-l+$)/(2*c);et>0&&et<1&&u.push(et);var at=(-l-$)/(2*c);at>0&&at<1&&u.push(at)}}for(var ft=u.length,vt=ft,Ft;ft--;)M=u[ft],Ft=1-M,f[0][ft]=Ft*Ft*Ft*i+3*Ft*Ft*M*t+3*Ft*M*M*n+M*M*M*o,f[1][ft]=Ft*Ft*Ft*e+3*Ft*Ft*M*r+3*Ft*M*M*a+M*M*M*s;return f[0][vt]=i,f[1][vt]=e,f[0][vt+1]=o,f[1][vt+1]=s,f[0].length=f[1].length=vt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Ur=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(!!c){var l=u/c,w=f/c,M=+l.toFixed(2),O=+w.toFixed(2);if(!(M<+Math.min(i,t).toFixed(2)||M>+Math.max(i,t).toFixed(2)||M<+Math.min(n,o).toFixed(2)||M>+Math.max(n,o).toFixed(2)||O<+Math.min(e,r).toFixed(2)||O>+Math.max(e,r).toFixed(2)||O<+Math.min(a,s).toFixed(2)||O>+Math.max(a,s).toFixed(2)))return{x:l,y:w}}}},vn=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},On=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=je,a},Zr=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:On(i,e,t,r),vb:[i,e,t,r].join(" ")}},Wn=function(i,e){return i=Zr(i),e=Zr(e),vn(e,i.x,i.y)||vn(e,i.x2,i.y)||vn(e,i.x,i.y2)||vn(e,i.x2,i.y2)||vn(i,e.x,e.y)||vn(i,e.x2,e.y)||vn(i,e.x,e.y2)||vn(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},Ma=function(i,e,t,r,n,a,o,s){(0,d.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=Vr.apply(null,i);return Zr(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Oa=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),w=u*u,M=w*u,O=c*i+l*3*u*t+f*3*u*u*n+M*o,W=c*e+l*3*u*r+f*3*u*u*a+M*s,$=i+2*u*(t-i)+w*(n-2*t+i),et=e+2*u*(r-e)+w*(a-2*r+e),at=t+2*u*(n-t)+w*(o-2*n+t),ft=r+2*u*(a-r)+w*(s-2*a+r),vt=f*i+u*t,Ft=f*e+u*r,Xt=f*n+u*o,Yt=f*a+u*s,he=90-Math.atan2($-at,et-ft)*180/Math.PI;return{x:O,y:W,m:{x:$,y:et},n:{x:at,y:ft},start:{x:vt,y:Ft},end:{x:Xt,y:Yt},alpha:he}},ba=function(i,e,t){var r=Ma(i),n=Ma(e);if(!Wn(r,n))return t?0:[];for(var a=Rr.apply(0,i),o=Rr.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},w=t?0:[],M=0;M<s+1;M++){var O=Oa.apply(0,i.concat(M/s));f.push({x:O.x,y:O.y,t:M/s})}for(var M=0;M<u+1;M++){var O=Oa.apply(0,e.concat(M/u));c.push({x:O.x,y:O.y,t:M/u})}for(var M=0;M<s;M++)for(var W=0;W<u;W++){var $=f[M],et=f[M+1],at=c[W],ft=c[W+1],vt=Math.abs(et.x-$.x)<.001?"y":"x",Ft=Math.abs(ft.x-at.x)<.001?"y":"x",Xt=Ur($.x,$.y,et.x,et.y,at.x,at.y,ft.x,ft.y);if(Xt){if(l[Xt.x.toFixed(4)]===Xt.y.toFixed(4))continue;l[Xt.x.toFixed(4)]=Xt.y.toFixed(4);var Yt=$.t+Math.abs((Xt[vt]-$[vt])/(et[vt]-$[vt]))*(et.t-$.t),he=at.t+Math.abs((Xt[Ft]-at[Ft])/(ft[Ft]-at[Ft]))*(ft.t-at.t);Yt>=0&&Yt<=1&&he>=0&&he<=1&&(t?w+=1:w.push({x:Xt.x,y:Xt.y,t1:Yt,t2:he}))}}return w},ca=function(i,e,t){i=pe(i),e=pe(e);for(var r,n,a,o,s,u,f,c,l,w,M=t?0:[],O=0,W=i.length;O<W;O++){var $=i[O];if($[0]==="M")r=s=$[1],n=u=$[2];else{$[0]==="C"?(l=[r,n].concat($.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var et=0,at=e.length;et<at;et++){var ft=e[et];if(ft[0]==="M")a=f=ft[1],o=c=ft[2];else{ft[0]==="C"?(w=[a,o].concat(ft.slice(1)),a=w[6],o=w[7]):(w=[a,o,a,o,f,c,f,c],a=f,o=c);var vt=ba(l,w,t);if(t)M+=vt;else{for(var Ft=0,Xt=vt.length;Ft<Xt;Ft++)vt[Ft].segment1=O,vt[Ft].segment2=et,vt[Ft].bez1=l,vt[Ft].bez2=w;M=M.concat(vt)}}}}}return M},pa=function(i,e){return ca(i,e)};function ao(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function Ki(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=ao(a,u);n.push(f.left),a=f.right}n.push(a);var c=n.map(function(l){var w=[];return l.length===4&&(w.push("C"),w=w.concat(l[2])),l.length>=3&&(l.length===3&&w.push("Q"),w=w.concat(l[1])),l.length===2&&w.push("L"),w=w.concat(l[l.length-1]),w});return c}var Gi=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(Ki(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},$i=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(f,c,l){return l===t?f.concat(i[t]):f.concat(Gi(i[l],i[l+1],c))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},Qi=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,d.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function fo(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Ao=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],Qi(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,w=s[u-1][f-1].min+o;s[u][f]=fo(c,l,w)}}return s},Fa=function(i,e){var t=Ao(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var l=n-r;if(r<n)for(var u=0;u<l;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function hi(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=Is(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function Is(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var gs=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=Is(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=hi(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=hi(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=hi(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},as=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),ou=as;function lc(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var ll=typeof window!="undefined"&&typeof window.document!="undefined";function hl(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function hc(i){return i.cfg.visible&&i.cfg.capture}var oh=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,d.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(rt),dc=oh,Hu=R(34155),dl=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},vc=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),vl=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=Hu.platform}return i}(),sh=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),su=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),gl=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Un=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Su=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ga=3,gc=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Un]],Tf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function uu(i){return i?If(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new gl:typeof navigator!="undefined"?If(navigator.userAgent):yl()}function pc(i){return i!==""&&gc.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function yc(i){var e=pc(i);return e?e[0]:null}function If(i){var e=pc(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new su;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<Ga&&(n=dl(dl([],n,!0),ps(Ga-n.length),!0)):n=[];var a=n.join("."),o=pl(i),s=Su.exec(i);return s&&s[1]?new sh(t,a,o,s[1]):new vc(t,a,o)}function pl(i){for(var e=0,t=Tf.length;e<t;e++){var r=Tf[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function yl(){var i=typeof Hu!="undefined"&&Hu.version;return i?new vl(Hu.version.slice(1)):null}function ps(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function mc(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],f=i[6],c=i[7],l=i[8],w=e[0],M=e[1],O=e[2],W=e[3],$=e[4],et=e[5],at=e[6],ft=e[7],vt=e[8];return t[0]=w*r+M*o+O*f,t[1]=w*n+M*s+O*c,t[2]=w*a+M*u+O*l,t[3]=W*r+$*o+et*f,t[4]=W*n+$*s+et*c,t[5]=W*a+$*u+et*l,t[6]=at*r+ft*o+vt*f,t[7]=at*n+ft*s+vt*c,t[8]=at*a+ft*u+vt*l,t}function zs(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function xo(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],f=i[7],c=i[8],l=c*o-s*f,w=-c*a+s*u,M=f*a-o*u,O=t*l+r*w+n*M;return O?(O=1/O,e[0]=l*O,e[1]=(-c*r+n*f)*O,e[2]=(s*r-n*o)*O,e[3]=w*O,e[4]=(c*t-n*u)*O,e[5]=(-s*t+n*a)*O,e[6]=M*O,e[7]=(-f*t+r*u)*O,e[8]=(o*t-r*a)*O,e):null}var Us=Dt,Os="matrix",Of=["zIndex","capture","visible","type"],bc=["repeat"],ml=":",bl="*";function xl(i){for(var e=[],t=0;t<i.length;t++)(0,d.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function Lf(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function El(i,e){var t={},r=e.attr();return(0,d.each)(i,function(n,a){bc.indexOf(a)===-1&&!(0,d.isEqual)(r[a],n)&&(t[a]=n)}),t}function Df(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,d.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,d.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var wl=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,d.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,d.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(!!t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(!!t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(lc(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Os,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Os)},e.prototype.setMatrix=function(t){this.attr(Os,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=mc(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=mc(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?zs(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=xo(r);if(n)return zs(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,d.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,d.each)(r,function(s,u){(0,d.isArray)(r[u])?n[u]=xl(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,d.each)(Of,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],l=c===void 0?d.noop:c,w=t[4],M=w===void 0?0:w,O,W,$,et,at;(0,d.isFunction)(o)?(O=o,o={}):(0,d.isObject)(o)&&o.onFrame&&(O=o.onFrame,W=o.repeat),(0,d.isObject)(s)?(at=s,s=at.duration,f=at.easing||"easeLinear",M=at.delay||0,W=at.repeat||W||!1,l=at.callback||d.noop,$=at.pauseCallback||d.noop,et=at.resumeCallback||d.noop):((0,d.isNumber)(l)&&(M=l,l=null),(0,d.isFunction)(f)?(l=f,f="easeLinear"):f=f||"easeLinear");var ft=El(o,this),vt={fromAttrs:Lf(ft,this),toAttrs:ft,duration:s,easing:f,repeat:W,callback:l,pauseCallback:$,resumeCallback:et,delay:M,startTime:n.getTime(),id:(0,d.uniqueId)(),onFrame:O,pathFormatted:!1};a.length>0?a=Df(a,vt):n.addAnimator(this),a.push(vt),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,d.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,d.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,d.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(w){var M=a[w],O=M.get("name");if(O){if((M.isGroup()||M.isCanvas&&M.isCanvas())&&s&&hl(M,s))return"break";(0,d.isArray)(O)?(0,d.each)(O,function(W){n.emitDelegateEvent(M,W,r)}):f.emitDelegateEvent(M,O,r)}},f=this,c=0;c<a.length;c++){var l=u(c);if(l==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+ml+n.type;(a[o]||a[bl])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=Us(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=Us(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=Us(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=Us(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=Us(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(dc),xc=wl,Zu={},Ec="_INDEX";function us(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){us(r,e)})}}function wc(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){wc(r,e)})}}function Ku(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function Sl(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),lc(i.getChildren(),e)}function uh(i){return function(e,t){var r=i(e,t);return r===0?e[Ec]-t[Ec]:r}}var Sc=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=Infinity,r=-Infinity,n=Infinity,a=-Infinity,o=[],s=[],u=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});u.length>0?((0,d.each)(u,function(c){var l=c.getBBox();o.push(l.minX,l.maxX),s.push(l.minY,l.maxY)}),t=(0,d.min)(o),r=(0,d.max)(o),n=(0,d.min)(s),a=(0,d.max)(s)):(t=0,r=0,n=0,a=0);var f={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return f},e.prototype.getCanvasBBox=function(){var t=Infinity,r=-Infinity,n=Infinity,a=-Infinity,o=[],s=[],u=this.getChildren().filter(function(c){return c.get("visible")&&(!c.isGroup()||c.isGroup()&&c.getChildren().length>0)});u.length>0?((0,d.each)(u,function(c){var l=c.getCanvasBBox();o.push(l.minX,l.maxX),s.push(l.minY,l.maxY)}),t=(0,d.min)(o),r=(0,d.max)(o),n=(0,d.min)(s),a=(0,d.max)(s)):(t=0,r=0,n=0,a=0);var f={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return f},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,d.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,d.isObject)(n)?a=n:a.type=n;var o=Zu[a.type];o||(o=(0,d.upperFirst)(a.type),Zu[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,d.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!hc(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(hc(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&Sl(o,t,!1),t.set("parent",this),r&&us(t,r),a&&wc(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,d.each)(t,function(r,n){return r[Ec]=n,r}),t.sort(uh(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,d.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,d.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(xc),$u=Sc,_u=0,Qu=0,qu=0,_l=1e3,Nf,Mu,fu=0,cu=0,Pf=0,Ju=typeof performance=="object"&&performance.now?performance:Date,_c=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function lu(){return cu||(_c(fh),cu=Ju.now()+Pf)}function fh(){cu=0}function Mc(){this._call=this._time=this._next=null}Mc.prototype=tf.prototype={constructor:Mc,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?lu():+t)+(e==null?0:+e),!this._next&&Mu!==this&&(Mu?Mu._next=this:Nf=this,Mu=this),this._call=i,this._time=t,Ac()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Ac())}};function tf(i,e,t){var r=new Mc;return r.restart(i,e,t),r}function Cc(){lu(),++_u;for(var i=Nf,e;i;)(e=cu-i._time)>=0&&i._call.call(null,e),i=i._next;--_u}function Ml(){cu=(fu=Ju.now())+Pf,_u=Qu=0;try{Cc()}finally{_u=0,ch(),cu=0}}function kf(){var i=Ju.now(),e=i-fu;e>_l&&(Pf-=e,fu=i)}function ch(){for(var i,e=Nf,t,r=Infinity;e;)e._call?(r>e._time&&(r=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:Nf=t);Mu=i,Ac(r)}function Ac(i){if(!_u){Qu&&(Qu=clearTimeout(Qu));var e=i-cu;e>24?(i<Infinity&&(Qu=setTimeout(Ml,i-Ju.now()-Pf)),qu&&(qu=clearInterval(qu))):(qu||(fu=Ju.now(),qu=setInterval(kf,_l)),_u=1,_c(Ml))}}function Rf(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function Cl(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function ef(){}var Ls=.7,Cu=1/Ls,Ds="\\s*([+-]?\\d+)\\s*",rf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Au=/^#([0-9a-f]{3,8})$/,Al=new RegExp("^rgb\\(".concat(Ds,",").concat(Ds,",").concat(Ds,"\\)$")),Tu=new RegExp("^rgb\\(".concat(Qo,",").concat(Qo,",").concat(Qo,"\\)$")),Tl=new RegExp("^rgba\\(".concat(Ds,",").concat(Ds,",").concat(Ds,",").concat(rf,"\\)$")),Iu=new RegExp("^rgba\\(".concat(Qo,",").concat(Qo,",").concat(Qo,",").concat(rf,"\\)$")),Tc=new RegExp("^hsl\\(".concat(rf,",").concat(Qo,",").concat(Qo,"\\)$")),Ic=new RegExp("^hsla\\(".concat(rf,",").concat(Qo,",").concat(Qo,",").concat(rf,"\\)$")),Bf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rf(ef,Ou,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Ff,formatHex:Ff,formatHex8:Oc,formatHsl:Gf,formatRgb:Lc,toString:Lc});function Ff(){return this.rgb().formatHex()}function Oc(){return this.rgb().formatHex8()}function Gf(){return hu(this).formatHsl()}function Lc(){return this.rgb().formatRgb()}function Ou(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=Au.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?Dc(e):t===3?new Vo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?nf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?nf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Al.exec(i))?new Vo(e[1],e[2],e[3],1):(e=Tu.exec(i))?new Vo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Tl.exec(i))?nf(e[1],e[2],e[3],e[4]):(e=Iu.exec(i))?nf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Tc.exec(i))?kc(e[1],e[2]/100,e[3]/100,1):(e=Ic.exec(i))?kc(e[1],e[2]/100,e[3]/100,e[4]):Bf.hasOwnProperty(i)?Dc(Bf[i]):i==="transparent"?new Vo(NaN,NaN,NaN,0):null}function Dc(i){return new Vo(i>>16&255,i>>8&255,i&255,1)}function nf(i,e,t,r){return r<=0&&(i=e=t=NaN),new Vo(i,e,t,r)}function Il(i){return i instanceof ef||(i=Ou(i)),i?(i=i.rgb(),new Vo(i.r,i.g,i.b,i.opacity)):new Vo}function Lu(i,e,t,r){return arguments.length===1?Il(i):new Vo(i,e,t,r==null?1:r)}function Vo(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}Rf(Vo,Lu,Cl(ef,{brighter:function(e){return e=e==null?Cu:Math.pow(Cu,e),new Vo(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Ls:Math.pow(Ls,e),new Vo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new Vo(Ns(this.r),Ns(this.g),Ns(this.b),Ws(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nc,formatHex:Nc,formatHex8:Ol,formatRgb:Pc,toString:Pc}));function Nc(){return"#".concat(Ye(this.r)).concat(Ye(this.g)).concat(Ye(this.b))}function Ol(){return"#".concat(Ye(this.r)).concat(Ye(this.g)).concat(Ye(this.b)).concat(Ye((isNaN(this.opacity)?1:this.opacity)*255))}function Pc(){var i=Ws(this.opacity);return"".concat(i===1?"rgb(":"rgba(").concat(Ns(this.r),", ").concat(Ns(this.g),", ").concat(Ns(this.b)).concat(i===1?")":", ".concat(i,")"))}function Ws(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Ns(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Ye(i){return i=Ns(i),(i<16?"0":"")+i.toString(16)}function kc(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new fs(i,e,t,r)}function hu(i){if(i instanceof fs)return new fs(i.h,i.s,i.l,i.opacity);if(i instanceof ef||(i=Ou(i)),!i)return new fs;if(i instanceof fs)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-n,u=(a+n)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+n:2-a-n,o*=60):s=u>0&&u<1?0:o,new fs(o,s,u,i.opacity)}function zf(i,e,t,r){return arguments.length===1?hu(i):new fs(i,e,t,r==null?1:r)}function fs(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}Rf(fs,zf,Cl(ef,{brighter:function(e){return e=e==null?Cu:Math.pow(Cu,e),new fs(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ls:Math.pow(Ls,e),new fs(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Vo(Wf(e>=240?e-240:e+120,a,n),Wf(e,a,n),Wf(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new fs(Uf(this.h),af(this.s),af(this.l),Ws(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Ws(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(Uf(this.h),", ").concat(af(this.s)*100,"%, ").concat(af(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function Uf(i){return i=(i||0)%360,i<0?i+360:i}function af(i){return Math.max(0,Math.min(1,i||0))}function Wf(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function Du(i,e,t,r,n){var a=i*i,o=a*i;return((1-3*i+3*a-o)*e+(4-6*a+3*o)*t+(1+3*i+3*a-3*o)*r+o*n)/6}function jf(i){var e=i.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=i[r],a=i[r+1],o=r>0?i[r-1]:2*n-a,s=r<e-1?i[r+2]:2*a-n;return Du((t-r/e)*e,o,n,a,s)}}function Rc(i){var e=i.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=i[(r+e-1)%e],a=i[r%e],o=i[(r+1)%e],s=i[(r+2)%e];return Du((t-r/e)*e,n,a,o,s)}}var Nu=function(i){return function(){return i}};function Eo(i,e){return function(t){return i+t*e}}function Pu(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function Ll(i,e){var t=e-i;return t?Eo(i,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(i)?e:i)}function of(i){return(i=+i)==1?ys:function(e,t){return t-e?Pu(e,t,i):Nu(isNaN(e)?t:e)}}function ys(i,e){var t=e-i;return t?Eo(i,t):Nu(isNaN(i)?e:i)}var du=function i(e){var t=of(e);function r(n,a){var o=t((n=Lu(n)).r,(a=Lu(a)).r),s=t(n.g,a.g),u=t(n.b,a.b),f=ys(n.opacity,a.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=f(c),n+""}}return r.gamma=i,r}(1);function js(i){return function(e){var t=e.length,r=new Array(t),n=new Array(t),a=new Array(t),o,s;for(o=0;o<t;++o)s=Lu(e[o]),r[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return r=i(r),n=i(n),a=i(a),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=a(u),s+""}}}var vu=js(jf),sf=js(Rc);function Xs(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function Ys(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function gu(i,e){return(Ys(e)?Xs:uf)(i,e)}function uf(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=yu(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function Xf(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function pu(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function Bc(i,e){var t={},r={},n;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(n in e)n in i?t[n]=yu(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var ff=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vs=new RegExp(ff.source,"g");function cs(i){return function(){return i}}function Fc(i){return function(e){return i(e)+""}}function Dl(i,e){var t=ff.lastIndex=Vs.lastIndex=0,r,n,a,o=-1,s=[],u=[];for(i=i+"",e=e+"";(r=ff.exec(i))&&(n=Vs.exec(e));)(a=n.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:pu(r,n)})),t=Vs.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Fc(u[0].x):cs(e):(e=u.length,function(f){for(var c=0,l;c<e;++c)s[(l=u[c]).i]=l.x(f);return s.join("")})}function yu(i,e){var t=typeof e,r;return e==null||t==="boolean"?Nu(e):(t==="number"?pu:t==="string"?(r=Ou(e))?(e=r,du):Dl:e instanceof Ou?du:e instanceof Date?Xf:Ys(e)?Xs:Array.isArray(e)?uf:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Bc:pu)(i,e)}function Gc(i){return+i}function zc(i){return i*i}function Nl(i){return i*(2-i)}function Hs(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function Pl(i){return i*i*i}function kl(i){return--i*i*i+1}function Rl(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var Yf=3,Bl=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(Yf),lh=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(Yf),Uc=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(Yf),Wc=Math.PI,Fl=Wc/2;function Gl(i){return+i==1?1:1-Math.cos(i*Fl)}function zl(i){return Math.sin(i*Fl)}function jc(i){return(1-Math.cos(Wc*i))/2}function Ps(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function Xc(i){return Ps(1-+i)}function cf(i){return 1-Ps(i)}function lf(i){return((i*=2)<=1?Ps(1-i):2-Ps(i-1))/2}function Vf(i){return 1-Math.sqrt(1-i*i)}function Hf(i){return Math.sqrt(1- --i*i)}function Zf(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var ku=4/11,Kf=6/11,hf=8/11,Yc=3/4,$f=9/11,Qf=10/11,qf=15/16,df=21/22,vf=63/64,ks=1/ku/ku;function gf(i){return 1-_s(1-i)}function _s(i){return(i=+i)<ku?ks*i*i:i<hf?ks*(i-=Kf)*i+Yc:i<Qf?ks*(i-=$f)*i+qf:ks*(i-=df)*i+vf}function Ul(i){return((i*=2)<=1?1-_s(1-i):_s(i-1)+1)/2}var mu=1.70158,bu=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(mu),Wl=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(mu),pf=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(mu),Ru=2*Math.PI,Vc=1,Hc=.3,Zs=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Ru);function n(a){return e*Ps(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*Ru)},n.period=function(a){return i(e,a)},n}(Vc,Hc),Zc=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Ru);function n(a){return 1-e*Ps(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*Ru)},n.period=function(a){return i(e,a)},n}(Vc,Hc),jl=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Ru);function n(a){return((a=a*2-1)<0?e*Ps(-a)*Math.sin((r-a)/t):2-e*Ps(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*Ru)},n.period=function(a){return i(e,a)},n}(Vc,Hc),Kc={};function hh(i){return Kc[i.toLowerCase()]||k[i]}function dh(i,e){Kc[i.toLowerCase()]=e}var vh=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},Go=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},$c=[1,0,0,0,1,0,0,0,1];function Bu(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,d.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],f=n[s];u.length>f.length?(u=h(a[s]),f=h(n[s]),f=Fa(f,u),f=gs(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=h(a[s]),f=h(n[s]),f=gs(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var l=u[c],w=f[c],M=[],O=0;O<l.length;O++)(0,d.isNumber)(l[O])&&w&&(0,d.isNumber)(w[O])?(o=yu(w[O],l[O]),M.push(o(t))):M.push(l[O]);r[s].push(M)}}else if(s==="matrix"){var W=gu(n[s]||$c,a[s]||$c),$=W(t);r[s]=$}else vh(s)&&Go(a[s])?r[s]=a[s]:(0,d.isFunction)(a[s])||(o=yu(n[s],a[s]),r[s]=o(t));i.attr(r)}}function Ks(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=hh(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(a);i.attr(f)}else Bu(i,e,a);return!1}var Xl=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=tf(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=Ks(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),Qc=Xl,Jf=40,qc=0,qo=":",Rs=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function wo(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(qo+e)>=0)return!0;return!1}function zo(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function tc(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&hl(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var gh=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,d.each)(Rs,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,d.each)(Rs,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new ou(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===qc&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===qc){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,l=s.clientX-e.clientX,w=s.clientY-e.clientY,M=l*l+w*w;c>120||M>Jf?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,zo(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||tc(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;zo(f,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),Yl=gh,Vl="px",Hl=uu(),Zl=Hl&&Hl.name==="firefox",ph=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,d.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Yl({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new Qc(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");ll&&(n.style.width=t+Vl,n.style.height=r+Vl)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");ll&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(Zl&&!(0,d.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,d.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}($u),Kl=ph,yh=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}($u),$l=yh,Ql=function(i){(0,m.__extends)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=zs(r,[t.minX,t.minY]),f=zs(r,[t.maxX,t.minY]),c=zs(r,[t.minX,t.maxY]),l=zs(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],l[0]),o=Math.max(u[0],f[0],c[0],l[0]),a=Math.min(u[1],f[1],c[1],l[1]),s=Math.max(u[1],f[1],c[1],l[1])}var w=this.attrs;if(w.shadowColor){var M=w.shadowBlur,O=M===void 0?0:M,W=w.shadowOffsetX,$=W===void 0?0:W,et=w.shadowOffsetY,at=et===void 0?0:et,ft=n-O+$,vt=o+O+$,Ft=a-O+at,Xt=s+O+at;n=Math.min(n,ft),o=Math.max(o,vt),a=Math.min(a,Ft),s=Math.max(s,Xt)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}(xc),ec=Ql,yf=new Map;function ms(i,e){yf.set(i,e)}function ql(i){return yf.get(i)}function Jc(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function tl(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function Do(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function bt(i,e){return Math.abs(i-e)<.001}function ae(i,e){var t=(0,d.min)(i),r=(0,d.min)(e),n=(0,d.max)(i),a=(0,d.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function Ge(i,e,t,r){return{minX:(0,d.min)([i,t]),maxX:(0,d.max)([i,t]),minY:(0,d.min)([e,r]),maxY:(0,d.max)([e,r])}}function Lr(i){return(i+Math.PI*2)%(Math.PI*2)}var Wr={box:function(i,e,t,r){return ae([i,t],[e,r])},length:function(i,e,t,r){return Do(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return Do(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?Do(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(un.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];un.normalize(s,s);var u=[n-i,a-e];return Math.abs(un.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},Nr=1e-4;function zr(i,e,t,r,n,a){var o,s=Infinity,u=[t,r],f=20;a&&a>200&&(f=a/10);for(var c=1/f,l=c/10,w=0;w<=f;w++){var M=w*c,O=[n.apply(null,i.concat([M])),n.apply(null,e.concat([M]))],W=Do(u[0],u[1],O[0],O[1]);W<s&&(o=M,s=W)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var $=i.length;return{x:i[$-1],y:e[$-1]}}s=Infinity;for(var w=0;w<32&&!(l<Nr);w++){var et=o-l,at=o+l,O=[n.apply(null,i.concat([et])),n.apply(null,e.concat([et]))],W=Do(u[0],u[1],O[0],O[1]);if(et>=0&&W<s)o=et,s=W;else{var ft=[n.apply(null,i.concat([at])),n.apply(null,e.concat([at]))],vt=Do(u[0],u[1],ft[0],ft[1]);at<=1&&vt<s?(o=at,s=vt):l*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function mn(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=Do(a,o,s,u)}return t/2}function dn(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function wn(i,e,t){var r=i+t-2*e;if(bt(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function xn(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function In(i,e,t,r,n,a,o){var s=dn(i,t,n,o),u=dn(e,r,a,o),f=Wr.pointAt(i,e,t,r,o),c=Wr.pointAt(t,r,n,a,o);return[[i,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,a]]}function v(i,e,t,r,n,a,o){if(o===0)return(Do(i,e,t,r)+Do(t,r,n,a)+Do(i,e,n,a))/2;var s=In(i,e,t,r,n,a,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),v.apply(null,u)+v.apply(null,f)}var A={box:function(i,e,t,r,n,a){var o=wn(i,t,n)[0],s=wn(e,r,a)[0],u=[i,n],f=[e,a];return o!==void 0&&u.push(dn(i,t,n,o)),s!==void 0&&f.push(dn(e,r,a,s)),ae(u,f)},length:function(i,e,t,r,n,a){return v(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return zr([i,t,n],[e,r,a],o,s,dn)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return Do(u.x,u.y,o,s)},interpolationAt:dn,pointAt:function(i,e,t,r,n,a,o){return{x:dn(i,t,n,o),y:dn(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return In(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=xn(i,t,n,o),u=xn(e,r,a,o),f=Math.atan2(u,s);return Lr(f)}};function U(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function q(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function st(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,f,c;if(bt(n,0))bt(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var l=a*a-4*n*o;bt(l,0)?s.push(-a/(2*n)):l>0&&(c=Math.sqrt(l),u=(-a+c)/(2*n),f=(-a-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function ct(i,e,t,r,n,a,o,s,u){var f=U(i,t,n,o,u),c=U(e,r,a,s,u),l=Wr.pointAt(i,e,t,r,u),w=Wr.pointAt(t,r,n,a,u),M=Wr.pointAt(n,a,o,s,u),O=Wr.pointAt(l.x,l.y,w.x,w.y,u),W=Wr.pointAt(w.x,w.y,M.x,M.y,u);return[[i,e,l.x,l.y,O.x,O.y,f,c],[f,c,W.x,W.y,M.x,M.y,o,s]]}function mt(i,e,t,r,n,a,o,s,u){if(u===0)return mn([i,t,n,o],[e,r,a,s]);var f=ct(i,e,t,r,n,a,o,s,.5),c=f[0],l=f[1];return c.push(u-1),l.push(u-1),mt.apply(null,c)+mt.apply(null,l)}var wt={extrema:st,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],f=[e,s],c=st(i,t,n,o),l=st(e,r,a,s),w=0;w<c.length;w++)u.push(U(i,t,n,o,c[w]));for(var w=0;w<l.length;w++)f.push(U(e,r,a,s,l[w]));return ae(u,f)},length:function(i,e,t,r,n,a,o,s){return mt(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,f,c){return zr([i,t,n,o],[e,r,a,s],u,f,U,c)},pointDistance:function(i,e,t,r,n,a,o,s,u,f,c){var l=this.nearestPoint(i,e,t,r,n,a,o,s,u,f,c);return Do(l.x,l.y,u,f)},interpolationAt:U,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:U(i,t,n,o,u),y:U(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return ct(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var f=q(i,t,n,o,u),c=q(e,r,a,s,u);return Lr(Math.atan2(c,f))}};function kt(i,e){var t=Math.abs(i);return e>0?t:t*-1}var Ht={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,f=a-e,c=Math.abs(u),l=Math.abs(f),w=o*o,M=s*s,O=Math.PI/4,W,$,et=0;et<4;et++){W=o*Math.cos(O),$=s*Math.sin(O);var at=(w-M)*Math.pow(Math.cos(O),3)/o,ft=(M-w)*Math.pow(Math.sin(O),3)/s,vt=W-at,Ft=$-ft,Xt=c-at,Yt=l-ft,he=Math.hypot(Ft,vt),_e=Math.hypot(Yt,Xt),oe=he*Math.asin((vt*Yt-Ft*Xt)/(he*_e)),Ue=oe/Math.sqrt(w+M-W*W-$*$);O+=Ue,O=Math.min(Math.PI/2,Math.max(0,O))}return{x:i+kt(W,u),y:e+kt($,f)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return Do(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return Lr(o)}};function ie(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function qt(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function Oe(i,e,t){return Math.atan(-e/i*Math.tan(t))}function ir(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function Yr(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function hr(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function pr(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function gr(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function En(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var kn={box:function(i,e,t,r,n,a,o){for(var s=Oe(t,r,n),u=Infinity,f=-Infinity,c=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var w=s+l;a<o?a<w&&w<o&&c.push(w):o<w&&w<a&&c.push(w)}for(var l=0;l<c.length;l++){var M=Yr(i,e,t,r,n,c[l]);M<u&&(u=M),M>f&&(f=M)}for(var O=ir(t,r,n),W=Infinity,$=-Infinity,et=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var at=O+l;a<o?a<at&&at<o&&et.push(at):o<at&&at<a&&et.push(at)}for(var l=0;l<et.length;l++){var ft=hr(i,e,t,r,n,et[l]);ft<W&&(W=ft),ft>$&&($=ft)}return{x:u,y:W,width:f-u,height:$-W}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var f=En(s-i,u-e,-n),c=f[0],l=f[1],w=Ht.nearestPoint(0,0,t,r,c,l),M=pr(t,r,w.x,w.y);M<a?w=gr(t,r,a):M>o&&(w=gr(t,r,o));var O=En(w.x,w.y,n);return{x:O[0]+i,y:O[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var f=this.nearestPoint(i,e,t,r,s,u);return Do(f.x,f.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:Yr(i,e,t,r,n,u),y:hr(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,f=ie(i,e,t,r,n,a,o,u),c=qt(i,e,t,r,n,a,o,u);return Lr(Math.atan2(c,f))}};function Tn(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=Do(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function qn(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=Do(r[0],r[1],n[0],n[1])}return e}function Kn(i,e){if(e>1||e<0||i.length<2)return null;var t=Tn(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){var w=(e-a)/l;o=Wr.pointAt(f[0],f[1],c[0],c[1],w);break}a+=l}return o}function ia(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=Tn(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}a+=l}return o}function ga(i,e,t){for(var r=Infinity,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=Wr.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var ua={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return ae(e,t)},length:function(i){return qn(i)},pointAt:function(i,e){return Kn(i,e)},pointDistance:function(i,e,t){return ga(i,e,t)},tangentAngle:function(i,e){return ia(i,e)}};function yi(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var xa={box:function(i){return ua.box(i)},length:function(i){return qn(yi(i))},pointAt:function(i,e){return Kn(yi(i),e)},pointDistance:function(i,e,t){return ga(yi(i),e,t)},tangentAngle:function(i,e){return ia(yi(i),e)}};function zi(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function ii(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=zi(e,n)),r&&(a=r.getCanvasBBox(),e=zi(e,a)),e}function ka(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=ae(r,n),u=s.x,f=s.y,c=s.width,l=s.height,w={minX:u,minY:f,maxX:u+c,maxY:f+l};return w=ii(i,w),{x:w.minX,y:w.minY,width:w.maxX-w.minX,height:w.maxY-w.minY}}function Ui(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return ae(r,n)}var Ni=null;function So(){if(!Ni){var i=document.createElement("canvas");i.width=1,i.height=1,Ni=i.getContext("2d")}return Ni}function Uo(i,e,t){var r=1;if((0,d.isString)(i)&&(r=i.split(`
`).length),r>1){var n=_o(e,t);return e*r+n*(r-1)}return e}function _o(i,e){return e?e-i:i*.14}function Ca(i,e){var t=So(),r=0;if((0,d.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,d.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,d.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function Wo(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function ei(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=Wo(e));var u=Ca(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,l=e.textBaseline,w=Uo(n,a,o),M={x:t,y:r-w};c&&(c==="end"||c==="right"?M.x-=u:c==="center"&&(M.x-=u/2)),l&&(l==="top"?M.y+=w:l==="middle"&&(M.y+=w/2)),f={x:M.x,y:M.y,width:u,height:w}}return f}var sa=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,Na=/[^\s\,]+/ig;function Xa(i){var e=i||[];if((0,d.isArray)(e))return e;if((0,d.isString)(e))return e=e.match(sa),(0,d.each)(e,function(t,r){if(t=t.match(Na),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,d.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var Mo=Xa;function $s(i,e,t,r){var n=[],a=!!r,o,s,u,f,c,l,w;if(a){u=r[0],f=r[1];for(var M=0,O=i.length;M<O;M+=1){var W=i[M];u=un.min([0,0],u,W),f=un.max([0,0],f,W)}}for(var M=0,$=i.length;M<$;M+=1){var W=i[M];if(M===0&&!t)w=W;else if(M===$-1&&!t)l=W,n.push(w),n.push(l);else{var et=[M?M-1:$-1,M-1][t?0:1];o=i[et],s=i[t?(M+1)%$:M+1];var at=[0,0];at=un.sub(at,s,o),at=un.scale(at,at,e);var ft=un.distance(W,o),vt=un.distance(W,s),Ft=ft+vt;Ft!==0&&(ft/=Ft,vt/=Ft);var Xt=un.scale([0,0],at,-ft),Yt=un.scale([0,0],at,vt);l=un.add([0,0],W,Xt),c=un.add([0,0],W,Yt),c=un.min([0,0],c,un.max([0,0],s,W)),c=un.max([0,0],c,un.min([0,0],s,W)),Xt=un.sub([0,0],c,W),Xt=un.scale([0,0],Xt,-ft/vt),l=un.add([0,0],W,Xt),l=un.min([0,0],l,un.max([0,0],o,W)),l=un.max([0,0],l,un.min([0,0],o,W)),Yt=un.sub([0,0],W,l),Yt=un.scale([0,0],Yt,vt/ft),c=un.add([0,0],W,Yt),a&&(l=un.max([0,0],l,u),l=un.min([0,0],l,f),c=un.max([0,0],c,u),c=un.min([0,0],c,f)),n.push(w),n.push(l),w=c}}return t&&n.push(n.shift()),n}function mf(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=$s(n,.4,r,t),u=n.length,f=[],c,l,w,a=0;a<u-1;a+=1)c=s[a*2],l=s[a*2+1],w=n[a+1],f.push(["C",c[0],c[1],l[0],l[1],w[0],w[1]]);return r&&(c=s[u],l=s[u+1],w=n[0],f.push(["C",c[0],c[1],l[0],l[1],w[0],w[1]])),f}var Ce=mf;function Pr(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Ir=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],isEqual(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,w=s[u-1][f-1].min+o;s[u][f]=Pr(c,l,w)}}return s};function Xn(i,e){var t=Ir(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var Aa=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,be=new RegExp("([a-z])["+Aa+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Aa+"]*,?["+Aa+"]*)+)","ig"),Jt=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Aa+"]*,?["+Aa+"]*","ig");function He(i){if(!i)return null;if((0,d.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(be,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(Jt,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var mr=/[a-z]/;function wr(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Je(i){var e=He(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(mr.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,f=0,c=0,l,w,M=e[0];(M[0]==="M"||M[0]==="m")&&(o=+M[1],s=+M[2],u=o,f=s,c++,a[0]=["M",o,s]);for(var r=c,O=e.length;r<O;r++){var W=e[r],$=a[r-1],et=[],n=W[0],at=n.toUpperCase();if(n!==at)switch(et[0]=at,at){case"A":et[1]=W[1],et[2]=W[2],et[3]=W[3],et[4]=W[4],et[5]=W[5],et[6]=+W[6]+o,et[7]=+W[7]+s;break;case"V":et[1]=+W[1]+s;break;case"H":et[1]=+W[1]+o;break;case"M":u=+W[1]+o,f=+W[2]+s,et[1]=u,et[2]=f;break;default:for(var ft=1,vt=W.length;ft<vt;ft++)et[ft]=+W[ft]+(ft%2?o:s)}else et=e[r];switch(at){case"Z":o=+u,s=+f;break;case"H":o=et[1],et=["L",o,s];break;case"V":s=et[1],et=["L",o,s];break;case"T":o=et[1],s=et[2];var Ft=wr([$[1],$[2]],[$[3],$[4]]);et=["Q",Ft[0],Ft[1],o,s];break;case"S":o=et[et.length-2],s=et[et.length-1];var Xt=$.length,Yt=wr([$[Xt-4],$[Xt-3]],[$[Xt-2],$[Xt-1]]);et=["C",Yt[0],Yt[1],et[1],et[2],o,s];break;case"M":u=et[et.length-2],f=et[et.length-1];break;default:o=et[et.length-2],s=et[et.length-1]}a.push(et)}return a}var Ze=Math.PI*2,cr=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+a,y:c+o}},xe=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:4/3*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},Ve=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},ge=function(i,e,t,r,n,a,o,s,u,f,c,l){var w=Math.pow(n,2),M=Math.pow(a,2),O=Math.pow(c,2),W=Math.pow(l,2),$=w*M-w*W-M*O;$<0&&($=0),$/=w*W+M*O,$=Math.sqrt($)*(o===s?-1:1);var et=$*n/a*l,at=$*-a/n*c,ft=f*et-u*at+(i+t)/2,vt=u*et+f*at+(e+r)/2,Ft=(c-et)/n,Xt=(l-at)/a,Yt=(-c-et)/n,he=(-l-at)/a,_e=Ve(1,0,Ft,Xt),oe=Ve(Ft,Xt,Yt,he);return s===0&&oe>0&&(oe-=Ze),s===1&&oe<0&&(oe+=Ze),[ft,vt,_e,oe]},dr=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,f=i.largeArcFlag,c=f===void 0?0:f,l=i.sweepFlag,w=l===void 0?0:l,M=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var O=Math.sin(u*Ze/360),W=Math.cos(u*Ze/360),$=W*(e-r)/2+O*(t-n)/2,et=-O*(e-r)/2+W*(t-n)/2;if($===0&&et===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var at=Math.pow($,2)/Math.pow(a,2)+Math.pow(et,2)/Math.pow(o,2);at>1&&(a*=Math.sqrt(at),o*=Math.sqrt(at));var ft=ge(e,t,r,n,a,o,c,w,O,W,$,et),vt=ft[0],Ft=ft[1],Xt=ft[2],Yt=ft[3],he=Math.abs(Yt)/(Ze/4);Math.abs(1-he)<1e-7&&(he=1);var _e=Math.max(Math.ceil(he),1);Yt/=_e;for(var oe=0;oe<_e;oe++)M.push(xe(Xt,Yt)),Xt+=Yt;return M.map(function(Ue){var or=cr(Ue[0],a,o,W,O,vt,Ft),Kr=or.x,An=or.y,Sn=cr(Ue[1],a,o,W,O,vt,Ft),cn=Sn.x,Fn=Sn.y,Pn=cr(Ue[2],a,o,W,O,vt,Ft),tn=Pn.x,Mn=Pn.y;return{x1:Kr,y1:An,x2:cn,y2:Fn,x:tn,y:Mn}})};function Cr(i,e,t,r,n,a,o,s,u){var f=dr({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return f.reduce(function(c,l){var w=l.x1,M=l.y1,O=l.x2,W=l.y2,$=l.x,et=l.y;return c.push(w,M,O,W,$,et),c},[])}function Jr(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function rn(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(a=t[c][0]),n[c]=a,t[c]=segmentToCubic(t[c],r),Hr(t,n,c),o=t.length,a==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function Hr(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var _n=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},ta=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],w=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],M=0,O=0;O<c;O++){var W=f*l[O]+f,$=_n(W,i,t,n,o),et=_n(W,e,r,a,s),at=$*$+et*et;M+=w[O]*Math.sqrt(at)}return f*M},Ta=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,w,M,O=0;O<2;++O){if(O===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,w=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,w=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;M=-w/l,M>0&&M<1&&u.push(M);continue}var W=l*l-4*w*c,$=Math.sqrt(W);if(!(W<0)){var et=(-l+$)/(2*c);et>0&&et<1&&u.push(et);var at=(-l-$)/(2*c);at>0&&at<1&&u.push(at)}}for(var ft=u.length,vt=ft,Ft;ft--;)M=u[ft],Ft=1-M,f[0][ft]=Ft*Ft*Ft*i+3*Ft*Ft*M*t+3*Ft*M*M*n+M*M*M*o,f[1][ft]=Ft*Ft*Ft*e+3*Ft*Ft*M*r+3*Ft*M*M*a+M*M*M*s;return f[0][vt]=i,f[1][vt]=e,f[0][vt+1]=o,f[1][vt+1]=s,f[0].length=f[1].length=vt+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},$n=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(!!c){var l=u/c,w=f/c,M=+l.toFixed(2),O=+w.toFixed(2);if(!(M<+Math.min(i,t).toFixed(2)||M>+Math.max(i,t).toFixed(2)||M<+Math.min(n,o).toFixed(2)||M>+Math.max(n,o).toFixed(2)||O<+Math.min(e,r).toFixed(2)||O>+Math.max(e,r).toFixed(2)||O<+Math.min(a,s).toFixed(2)||O>+Math.max(a,s).toFixed(2)))return{x:l,y:w}}}},ra=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},ya=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},Ka=function(i,e){return i=ya(i),e=ya(e),ra(e,i.x,i.y)||ra(e,i.x2,i.y)||ra(e,i.x,i.y2)||ra(e,i.x2,i.y2)||ra(i,e.x,e.y)||ra(i,e.x2,e.y)||ra(i,e.x,e.y2)||ra(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},io=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=Ta.apply(null,i);return ya(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},rs=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),w=u*u,M=w*u,O=c*i+l*3*u*t+f*3*u*u*n+M*o,W=c*e+l*3*u*r+f*3*u*u*a+M*s,$=i+2*u*(t-i)+w*(n-2*t+i),et=e+2*u*(r-e)+w*(a-2*r+e),at=t+2*u*(n-t)+w*(o-2*n+t),ft=r+2*u*(a-r)+w*(s-2*a+r),vt=f*i+u*t,Ft=f*e+u*r,Xt=f*n+u*o,Yt=f*a+u*s,he=90-Math.atan2($-at,et-ft)*180/Math.PI;return{x:O,y:W,m:{x:$,y:et},n:{x:at,y:ft},start:{x:vt,y:Ft},end:{x:Xt,y:Yt},alpha:he}},mh=function(i,e,t){var r=io(i),n=io(e);if(!Ka(r,n))return t?0:[];for(var a=ta.apply(0,i),o=ta.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},w=t?0:[],M=0;M<s+1;M++){var O=rs.apply(0,i.concat(M/s));f.push({x:O.x,y:O.y,t:M/s})}for(var M=0;M<u+1;M++){var O=rs.apply(0,e.concat(M/u));c.push({x:O.x,y:O.y,t:M/u})}for(var M=0;M<s;M++)for(var W=0;W<u;W++){var $=f[M],et=f[M+1],at=c[W],ft=c[W+1],vt=Math.abs(et.x-$.x)<.001?"y":"x",Ft=Math.abs(ft.x-at.x)<.001?"y":"x",Xt=$n($.x,$.y,et.x,et.y,at.x,at.y,ft.x,ft.y);if(Xt){if(l[Xt.x.toFixed(4)]===Xt.y.toFixed(4))continue;l[Xt.x.toFixed(4)]=Xt.y.toFixed(4);var Yt=$.t+Math.abs((Xt[vt]-$[vt])/(et[vt]-$[vt]))*(et.t-$.t),he=at.t+Math.abs((Xt[Ft]-at[Ft])/(ft[Ft]-at[Ft]))*(ft.t-at.t);Yt>=0&&Yt<=1&&he>=0&&he<=1&&(t?w++:w.push({x:Xt.x,y:Xt.y,t1:Yt,t2:he}))}}return w},Ms=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,f,c,l,w,M=t?0:[],O=0,W=i.length;O<W;O++){var $=i[O];if($[0]==="M")r=s=$[1],n=u=$[2];else{$[0]==="C"?(l=[r,n].concat($.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var et=0,at=e.length;et<at;et++){var ft=e[et];if(ft[0]==="M")a=f=ft[1],o=c=ft[2];else{ft[0]==="C"?(w=[a,o].concat(ft.slice(1)),a=w[6],o=w[7]):(w=[a,o,a,o,f,c,f,c],a=f,o=c);var vt=mh(l,w,t);if(t)M+=vt;else{for(var Ft=0,Xt=vt.length;Ft<Xt;Ft++)vt[Ft].segment1=O,vt[Ft].segment2=et,vt[Ft].bez1=l,vt[Ft].bez2=w;M=M.concat(vt)}}}}}return M};function Sd(i,e){return Ms(i,e)}function ls(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Jl(i,e){return ls(i)*ls(e)?(i[0]*e[0]+i[1]*e[1])/(ls(i)*ls(e)):1}function Cv(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Jl(i,e))}function _d(i,e){return i[0]===e[0]&&i[1]===e[1]}function Ip(i,e){var t=e[1],r=e[2],n=(0,d.mod)((0,d.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,w=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,M=l*l/(t*t)+w*w/(r*r);M>1&&(t*=Math.sqrt(M),r*=Math.sqrt(M));var O=t*t*(w*w)+r*r*(l*l),W=O?Math.sqrt((t*t*(r*r)-O)/O):1;a===o&&(W*=-1),isNaN(W)&&(W=0);var $=r?W*t*w/r:0,et=t?W*-r*l/t:0,at=(s+f)/2+Math.cos(n)*$-Math.sin(n)*et,ft=(u+c)/2+Math.sin(n)*$+Math.cos(n)*et,vt=[(l-$)/t,(w-et)/r],Ft=[(-1*l-$)/t,(-1*w-et)/r],Xt=Cv([1,0],vt),Yt=Cv(vt,Ft);return Jl(vt,Ft)<=-1&&(Yt=Math.PI),Jl(vt,Ft)>=1&&(Yt=0),o===0&&Yt>0&&(Yt=Yt-2*Math.PI),o===1&&Yt<0&&(Yt=Yt+2*Math.PI),{cx:at,cy:ft,rx:_d(i,[f,c])?0:t,ry:_d(i,[f,c])?0:r,startAngle:Xt,endAngle:Xt+Yt,xRotation:n,arcFlag:a,sweepFlag:o}}function Av(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Tv(i){i=Mo(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],a=s;break;case"A":var l=Ip(t,u);c.arcParams=l;break;default:break}if(f==="Z")t=n,r=i[a+1];else{var w=u.length;t=[u[w-2],u[w-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&_d(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var M=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=M;var O=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[O[0]-t[0],O[1]-t[1]],c.endTangent=[t[0]-O[0],t[1]-O[1]];else if(f==="Q"){var W=[u[1],u[2]];c.startTangent=[O[0]-W[0],O[1]-W[1]],c.endTangent=[t[0]-W[0],t[1]-W[1]]}else if(f==="T"){var $=e[s-1],W=Av($.currentPoint,O);$.command==="Q"?(c.command="Q",c.startTangent=[O[0]-W[0],O[1]-W[1]],c.endTangent=[t[0]-W[0],t[1]-W[1]]):(c.command="TL",c.startTangent=[O[0]-t[0],O[1]-t[1]],c.endTangent=[t[0]-O[0],t[1]-O[1]])}else if(f==="C"){var et=[u[1],u[2]],at=[u[3],u[4]];c.startTangent=[O[0]-et[0],O[1]-et[1]],c.endTangent=[t[0]-at[0],t[1]-at[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[et[0]-at[0],et[1]-at[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[at[0]-et[0],at[1]-et[1]])}else if(f==="S"){var $=e[s-1],et=Av($.currentPoint,O),at=[u[1],u[2]];$.command==="C"?(c.command="C",c.startTangent=[O[0]-et[0],O[1]-et[1]],c.endTangent=[t[0]-at[0],t[1]-at[1]]):(c.command="SQ",c.startTangent=[O[0]-at[0],O[1]-at[1]],c.endTangent=[t[0]-at[0],t[1]-at[1]])}else if(f==="A"){var ft=.001,vt=c.arcParams||{},Ft=vt.cx,Xt=Ft===void 0?0:Ft,Yt=vt.cy,he=Yt===void 0?0:Yt,_e=vt.rx,oe=_e===void 0?0:_e,Ue=vt.ry,or=Ue===void 0?0:Ue,Kr=vt.sweepFlag,An=Kr===void 0?0:Kr,Sn=vt.startAngle,cn=Sn===void 0?0:Sn,Fn=vt.endAngle,Pn=Fn===void 0?0:Fn;An===0&&(ft*=-1);var tn=oe*Math.cos(cn-ft)+Xt,Mn=or*Math.sin(cn-ft)+he;c.startTangent=[tn-n[0],Mn-n[1]];var Ln=oe*Math.cos(cn+Pn+ft)+Xt,Dn=or*Math.sin(cn+Pn-ft)+he;c.endTangent=[O[0]-Ln,O[1]-Dn]}e.push(c)}return e}function Iv(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function Op(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function Ov(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function Lp(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Mw(i,e){if(i.length<2||e.length<2)return!1;var t=Ov(i),r=Ov(e);if(!Lp(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=Iv(i),o=Iv(e),s=!1;return each(o,function(u){if(Op(a,u))return s=!0,!1}),s}function Dp(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=A.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=wt.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var l=o.arcParams;c=kn.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(et){return!Number.isNaN(et)&&et!==Infinity&&et!==-Infinity}),r=r.filter(function(et){return!Number.isNaN(et)&&et!==Infinity&&et!==-Infinity});var w=(0,d.min)(t),M=(0,d.min)(r),O=(0,d.max)(t),W=(0,d.max)(r);if(n.length===0)return{x:w,y:M,width:O-w,height:W-M};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,$=void 0;s[0]===w?($=zh(o,e),w=w-$.xExtra):s[0]===O&&($=zh(o,e),O=O+$.xExtra),s[1]===M?($=zh(o,e),M=M-$.yExtra):s[1]===W&&($=zh(o,e),W=W+$.yExtra)}return{x:w,y:M,width:O-w,height:W-M}}function zh(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,d.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var l={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return l}function Np(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||Tv(t),o=Dp(a,n),s=o.x,u=o.y,f=o.width,c=o.height,l={minX:s,minY:u,maxX:s+f,maxY:u+c};return l=ii(i,l),{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}function Pp(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),f=Math.max(r,a),c={minX:o,maxX:s,minY:u,maxY:f};return c=ii(i,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function kp(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}ms("rect",Jc),ms("image",Jc),ms("circle",tl),ms("marker",tl),ms("polyline",ka),ms("polygon",Ui),ms("text",ei),ms("path",Np),ms("line",Pp),ms("ellipse",kp);var Cw="0.5.11",Rp=function(i){(0,m.__extends)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(ou),Md=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},Cd=function(e){if((0,d.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,d.isNumber)(e))return[e,e,e,e];if((0,d.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},Bp=function(e){var t=new Rp(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},Fp=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Fu=function(e){return Number.isNaN(Number(e))},Lv=function(e){for(var t=Infinity,r=-Infinity,n=Infinity,a=-Infinity,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,l=u.maxX,w=u.maxY;f<t&&(t=f),c<n&&(n=c),l>r&&(r=l),w>a&&(a=w)}var M=Math.floor(t),O=Math.floor(n),W=Math.ceil(r)-Math.floor(t),$=Math.ceil(a)-Math.floor(n);return{x:M,y:O,width:W,height:$,minX:t,minY:n,maxX:r,maxY:a}},Gp=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],l={},w=0;w<o;w++){var M=e[w],O=M.source,W=M.target,$="".concat(O,"-").concat(W);if(!c[w]){f[$]||(f[$]=[]),c[w]=!0,f[$].push(M);for(var et=0;et<o;et++)if(w!==et){var at=e[et],ft=at.source,vt=at.target;c[et]||(O===vt&&W===ft?(f[$].push(at),c[et]=!0,l["".concat(ft,"|").concat(vt,"|").concat(f[$].length-1)]=!0):O===ft&&W===vt&&(f[$].push(at),c[et]=!0))}}}for(var Ft in f)for(var Xt=f[Ft],Yt=Xt.length,he=0;he<Yt;he++){var _e=Xt[he];if(_e.source===_e.target){a&&(_e.type=a),_e.loopCfg={position:u[he%8],dist:Math.floor(he/8)*20+50};continue}if(Yt===1&&n&&_e.source!==_e.target){_e.type=n;continue}_e.type=r;var oe=(he%2==0?1:-1)*(l["".concat(_e.source,"|").concat(_e.target,"|").concat(he)]?-1:1);Yt%2==1?_e.curveOffset=oe*Math.ceil(he/2)*s:_e.curveOffset=oe*(Math.floor(he/2)*s+t)}return e},Dv=R(31278),zp=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=Infinity,u=Infinity,f=-Infinity,c=-Infinity;o.forEach(function(vt){var Ft=vt.getModel(),Xt=Ft.x,Yt=Ft.y;s>Xt&&(s=Xt),u>Yt&&(u=Yt),f<Xt&&(f=Xt),c<Yt&&(c=Yt)});var l=n.getMatrix()||[1,0,0,0,1,0,0,0,1],w=de({x:s,y:u},l),M=w.x,O=w.y,W=de({x:f,y:c},l),$=W.x,et=W.y;a={minX:M,maxX:$,minY:O,maxY:et,width:$-M,height:et-O,x:M,y:O}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var at=this.getViewCenter(),ft={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(at.x-ft.x,at.y-ft.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],l=n.x+a.x-o.x-n.minX,w=n.y+a.y-o.y-n.minY;if(!(Fu(l)||Fu(w))){var M=(0,Dv.vs)(c,[["t",l,w]]);if(!u){var O=es({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:M})}});e.animate(function(vt){return{matrix:bo(t,M,vt)}},O);return}var W=f.get("minZoom"),$=f.get("maxZoom"),et=s;W&&s<W?(et=W,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):$&&s>$&&(et=$,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var at=(0,Dv.vs)(M,[["t",-a.x,-a.y],["s",et,et],["t",a.x,a.y]]),ft=es({animateCfg:r,callback:function(){e.setMatrix(at),f.emit("viewportchange",{action:"translate",matrix:M}),f.emit("viewportchange",{action:"zoom",matrix:at})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(vt){return{matrix:bo(t,at,vt)}},ft)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var l=Infinity,w=Infinity,M=-Infinity,O=-Infinity;c.forEach(function(Xt){var Yt=Xt.getModel(),he=Yt.x,_e=Yt.y;l>he&&(l=he),w>_e&&(w=_e),M<he&&(M=he),O<_e&&(O=_e)}),f={minX:l,maxX:M,minY:w,maxY:O,width:M-l,height:O-w,x:l,y:w}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var W=this.getViewCenter(),$={x:f.x+f.width/2,y:f.y+f.height/2},et=(a-n[1]-n[3])/f.width,at=(o-n[0]-n[2])/f.height,ft=et;if(et>at&&(ft=at),e)this.animatedFitView(s,u,t,f,W,$,ft,!0);else{var vt=W.x-$.x,Ft=W.y-$.y;if(Fu(vt)||Fu(Ft))return;r.translate(vt,Ft),r.zoom(ft,W)||console.warn("zoom failed, ratio out of range, ratio: %f",ft)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,l=this.getFormatPadding(),w=c.get("width"),M=c.get("height"),O=c.get("group"),W=O.getMatrix()||[1,0,0,0,1,0,0,0,1];O.resetMatrix();var $,et=c.getNodes();if(et.length>c.get("optimizeThreshold")){var at=Infinity,ft=Infinity,vt=-Infinity,Ft=-Infinity;et.forEach(function(An){var Sn=An.getModel(),cn=Sn.x,Fn=Sn.y;at>cn&&(at=cn),ft>Fn&&(ft=Fn),vt<cn&&(vt=cn),Ft<Fn&&(Ft=Fn)}),$={minX:at,maxX:vt,minY:ft,maxY:Ft,width:vt-at,height:Ft-ft,x:at,y:ft}}else $=O.getCanvasBBox();if(!($.width===0||$.height===0)){var Xt=this.getViewCenter(),Yt={x:$.x+$.width/2,y:$.y+$.height/2},he=(w-l[1]-l[3])/$.width,_e=(M-l[0]-l[2])/$.height,oe;if(s==="x"?oe=he:s==="y"?oe=_e:oe=f==="max"?Math.max(he,_e):Math.min(he,_e),a&&(oe=oe<1?oe:1),t)this.animatedFitView(O,W,r,$,Xt,Yt,oe,!0);else{var Ue=c.getZoom(),or=Ue*oe,Kr=c.get("minZoom");or<Kr&&(or=Kr,console.warn("fitview failed, ratio out of range, ratio: %f",oe,"graph minzoom has been used instead")),c.translate(Xt.x-Yt.x,Xt.y-Yt.y),c.zoomTo(or,Xt)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return Cd(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,l=0,w=0,M=0;this.graph.get("canvas").animate(function(O){w=u*O,M=f*O,n.graph.translate(w-c,M-l),c=w,l=M},(0,m.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=Ar({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),de({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,d.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],a=f[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(!!e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),f=a.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},w=0,M=e;w<M.length;w++){var O=M[w],W=O.getBBox();W.minX<l.minX&&(l.minX=W.minX),W.minY<l.minY&&(l.minY=W.minY),W.maxX>l.maxX&&(l.maxX=W.maxX),W.maxY>l.maxY&&(l.maxY=W.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,!(l.width===0||l.height===0)){var $=this.getViewCenter(),et={x:l.x+l.width/2,y:l.y+l.height/2},at=(s-o[1]-o[3])/l.width,ft=(u-o[0]-o[2])/l.height,vt=at;at>ft&&(vt=ft),r?this.animatedFitView(f,c,n,l,$,et,vt,t):(a.translate($.x-et.x,$.y-et.y),t&&!a.zoom(vt,$)&&console.warn("zoom failed, ratio out of range, ratio: %f",vt))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,d.isNumber)(e)||!(0,d.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),Up=zp;function Ad(i){return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ad(i)}function Nv(i){if(typeof i!="string")return i;var e=function(Yt){if(typeof Yt!="string")return Yt;try{return JSON.parse(Yt.trim())}catch(he){return Yt.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(Yt){return Yt[Yt.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var Yt=[],he=0;he<arguments.length;he++)Yt[he]=arguments[he];return Yt.some(function(_e){return r(o)===_e})},u=function(){return r(a)},f=null,c=0,l="";c<n.length;){var w=n[c],M=s('"',"'");if(!M&&!w.trim()){c+=1;continue}var O=n[c-1]==="\\",W=s("}"),$=s("]"),et=s(","),at=u();if(M)if(r(o)===w&&!O){o.pop();var ft=e(l);at.push(ft),f=ft,l=""}else l+=w;else if($&&w===",")l&&(at.push(e(l)),l="");else if(W&&w===":")o.push(","),l&&(at.push(l),l="");else if(et&&w===",")l&&(at.push(e(l)),l=""),o.pop();else if(w==="}"&&(W||et)){l&&(at.push(e(l)),l=""),et&&o.pop();for(var vt={},Ft=1;Ft<at.length;Ft+=2)vt[at[Ft-1]]=at[Ft];a.pop(),a.length&&r(a).push(vt),o.pop(),f=vt}else w==="]"&&$?(l&&(at.push(e(l)),l=""),a.pop(),a.length&&r(a).push(at),o.pop(),f=at):w==="{"?(a.push([]),o.push("}")):w==="["?(a.push([]),o.push("]")):w==='"'?o.push('"'):w==="'"?o.push("'"):l+=w;c+=1}return f||l}var Wp=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},jp=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,d.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function Pv(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return Pv(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=Wp(s),f=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=Nv(f);t=(0,m.__assign)((0,m.__assign)({},t),c)}else a[u]=Nv(f)}catch(l){if(u==="style")throw l;a[u]=f}}),a.attrs=t,e&&e.style&&a.name&&Ad(e.style[a.name])==="object"&&(a.attrs=(0,m.__assign)((0,m.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,m.__assign)((0,m.__assign)({},a.attrs),e.style)),n.length&&(a.children=n),a}function Xp(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=Va(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,m.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function kv(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,m.__assign)({x:0,y:0,width:0,height:0},e);if((t=i.children)===null||t===void 0?void 0:t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,m.__assign)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var f=kv(i.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return i.bbox=Xp(i,e,r),i.attrs=(0,m.__assign)((0,m.__assign)({},i.attrs),i.bbox),i}function Rv(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],l=i.children||[],w=0;w<f;w+=1)u.push(Rv(l[w],c[w]));var M=Object.keys(e.attrs),O=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:M.filter(function(W){return W!=="children"}).some(function(W){return i.attrs[W]!==e.attrs[W]||!O.includes(W)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Bv(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=jp(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=kv(Pv(u,n));return s.remove(),f};return{draw:function(n,a){var o=t(n),s=a,u=function f(c){var l=c.attrs,w=l===void 0?{}:l,M=c.bbox,O=c.type,W=c.children,$=(0,m.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var et=a.addShape(c.type,(0,m.__assign)({attrs:w,origin:{bbox:M,type:O,children:W}},$));c.keyshape&&(s=et)}c.children&&c.children.forEach(function(at){return f(at)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=Rv(u,f),l=function O(W){var $;W.type!=="group"&&o.addShape(W.type,{attrs:W.attrs}),(($=W.children)===null||$===void 0?void 0:$.length)&&W.children.map(function(et){return O(et)})},w=function O(W){var $,et=s.find(function(at){return at.attrs.key===W.attrs.key});et&&o.removeChild(et),(($=W.children)===null||$===void 0?void 0:$.length)&&W.children.map(function(at){return O(at)})},M=function O(W){var $=W.key;if(W.type!=="group"){var et=s.find(function(ft){return ft.attrs.key===$});switch(W.action){case"change":if(et){var at=W.val.keyshape?a.getOriginStyle():{};et.attr((0,m.__assign)((0,m.__assign)({},at),W.val.attrs))}break;case"add":l(W.val);break;case"delete":w(W.val);break;case"restructure":w(W.formerTarget),l(W.nowTarget);break;default:break}}W.children&&W.children.forEach(function(ft){return O(ft)})};M(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Td={};function Fv(i){return Td[i]||(Td[i]=(0,d.upperFirst)(i)),Td[i]}var Yp={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},Id={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},Uh=function(){function i(){}return i.registerFactory=function(e,t){var r=Fv(e),n=Yp,a=(0,m.__assign)((0,m.__assign)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=Fv(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Bv(t);a=(0,m.__assign)((0,m.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Bv(s);a=(0,m.__assign)((0,m.__assign)((0,m.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):Id;a=(0,m.__assign)((0,m.__assign)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):Id,o=(0,m.__assign)((0,m.__assign)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):Id,o=(0,m.__assign)((0,m.__assign)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),ns=Uh;Uh.registerFactory("node",{defaultShapeType:"circle"}),Uh.registerFactory("edge",{defaultShapeType:"line"}),Uh.registerFactory("combo",{defaultShapeType:"circle"});var Od="bboxCache",Ld="bboxCanvasCache",Aw=null,Vp=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=Md(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,d.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=yn(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=yn(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var M=this.get("originStyle");a&&!M[a]&&(M[a]={});for(var O=this.getCurrentStatesStyle(),W=function(et){var at=t[et],ft=at.get("name"),vt=at.attr();if(ft&&ft!==a){var Ft=O[ft];M[ft]||(M[ft]={}),Ft?Object.keys(vt).forEach(function(he){var _e=vt[he];_e!==Ft[he]&&(M[ft][he]=_e)}):M[ft]=at.get("type")!=="image"?(0,d.clone)(vt):n.getShapeStyleByName(ft)}else{var Xt=at.attr(),Yt={};Object.keys(O).forEach(function(he){var _e=O[he];(he===a||!(0,d.isPlainObject)(_e))&&(Yt[he]=_e)}),Object.keys(Xt).forEach(function(he){var _e=Xt[he];Yt[he]!==_e&&(a?M[a][he]=_e:M[he]=_e)})}},s=0;s<t.length;s++)W(s);delete M.path,delete M.matrix,delete M.x,delete M.y,M[a]&&(delete M[a].x,delete M[a].y,delete M[a].matrix,delete M[a].path),n.set("originStyle",M)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==a)o[c]=f!=="image"?(0,d.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var l=n.getShapeStyleByName();if(delete l.path,delete l.matrix,!a)Object.assign(o,l);else if(c)o[a]=l;else{var w=Md("shape");u.set("name",w),e.shapeMap[w]=u,o[w]=f!=="image"?(0,d.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,d.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=ns.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,d.isPlainObject)(e)?this._cfg=(0,m.__assign)((0,m.__assign)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(Od,null),this.set(Ld,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]:r=this.getKeyShape(),r){var n={};return(0,d.each)(r.attr(),function(a,o){(o!=="img"||(0,d.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,m.__assign)((0,m.__assign)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,d.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,d.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,d.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,d.isString)(t)){var f=r.filter(function(w){return w.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(w){return!w.includes(o)}),s.push(a),this.set("states",s)}if(n){var c=this.get("model"),l=c.type;n.setState(l,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,d.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,d.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),li(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(Od);return e||(e=this.calculateBBox(),this.set(Od,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(Ld);return e||(e=this.calculateCanvasBBox(),this.set(Ld,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),Gv=Vp,Wh={source:"start",target:"end"},Gu="Node",th="Point",Hp="Anchor",Zp=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=Wh[t]+th,a=t+Gu,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,d.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=Wh[t]+th,o=t+Gu,s=this.get(a);if(!s){var u=this.get(o),f=t+Hp,c=this.getPrePoint(t,n),l=r[f];(0,d.isNil)(l)||(s=u.getLinkPointByAnchor(l)),s=s||u.getLinkPoint(c),(0,d.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+Gu,n=Wh[t]+th,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+Gu,n=Wh[t]+th,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=(r==null?void 0:r.includes("move"))?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(Gu)),n=this.get("target".concat(Gu));return r?delete t["source".concat(Gu)]:t.source=this.get("start".concat(th)),n?delete t["target".concat(Gu)]:t.target=this.get("end".concat(th)),!(0,d.isString)(t.source)&&!(0,d.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,d.isString)(t.target)&&!(0,d.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,d.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(Gu)),r=this.get("target".concat(Gu));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(Gv),zv=Zp,Dd="anchorPointsCache",Kp="bboxCache",$p=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=Bn(t[0],r),s=0;s<t.length;s++){var u=t[s],f=Bn(u,r);f<o&&(a=u,o=f,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(f){return f.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=Li({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=eo({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=go(u,t)}var l=c;return f.length&&(l||(l=t),l=this.getNearestPoint(f,l)),l||(l={x:o,y:s}),l},e.prototype.getAnchorPoints=function(){var t=this.get(Dd);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,d.each)(u,function(f,c){var l={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(l)}),this.set(Dd,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(Kp,null),this.set(Dd,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(!!t){var u=!(0,d.isNil)(t.x),f=!(0,d.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,d.isNumber)(t.x)||(0,d.isNumber)(t.y)||t.type||t.anchorPoints||t.size||(t==null?void 0:t.style)&&(((r=t==null?void 0:t.style)===null||r===void 0?void 0:r.r)||((n=t==null?void 0:t.style)===null||n===void 0?void 0:n.width)||((a=t==null?void 0:t.style)===null||a===void 0?void 0:a.height)||((o=t==null?void 0:t.style)===null||o===void 0?void 0:o.rx)||((s=t==null?void 0:t.style)===null||s===void 0?void 0:s.ry)))return"bbox|label";var l=c.includes("label")||c.includes("labelCfg");return l?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(a[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(Gv),Nd=$p,Uv="bboxCache",Wv="bboxCanvasCache",Pd="sizeCache",jv="anchorPointsCache",Qp=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o={r:Math.hypot(n.height,n.width)/2||H.defaultCombo.size[0]/2,width:n.width||H.defaultCombo.size[0],height:n.height||H.defaultCombo.size[1]};a.style=(0,m.__assign)((0,m.__assign)((0,m.__assign)({},r),t.style),o);var s=t.padding||H.defaultCombo.padding;return(0,d.isNumber)(s)?(o.r+=s,o.width+=s*2,o.height+=s*2):(o.r=o.r+Math.max.apply(Math,s),o.width+=s[1]+s[3]||s[1]*2,o.height+=s[0]+s[2]||s[0]*2),this.set(Pd,o),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=yn(t,r);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var a=this.get(Pd),o=this.get(Uv)||{},s=o.x,u=o.x;if(a){a.width=Math.max(a.width,n.width),a.height=Math.max(a.height,n.height);var f=t.get("type");f==="circle"?(n.width=a.r*2,n.height=a.r*2):(n.width=a.width,n.height=a.height),n.minX=n.centerX-n.width/2,n.minY=n.centerY-n.height/2,n.maxX=n.centerX+n.width/2,n.maxY=n.centerY+n.height/2}else n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;return n.x=n.minX,n.y=n.minY,(n.x!==s||n.y!==u)&&this.set(jv,null),n}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(!!t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(!!t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(Wv,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(Uv,null),this.set(Wv,null),this.set(jv,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(Pd,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(Nd),Xv=Qp,jh="node",Xh="edge",Yv="vedge",bh="combo",qp="default",Vv="Mapper",bf="stateStyles",Jp=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,d.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(!!a){var o=Object.values(a);!o.length||(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===Yv?Xh:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,d.upperFirst)(n),s=null,u=r.get(n+(0,d.upperFirst)(bf))||{},f=r.get(qp+o);t[bf]&&(u=t[bf]),f&&(0,d.each)(f,function(Xt,Yt){(0,d.isObject)(Xt)&&!(0,d.isArray)(Xt)?t[Yt]=(0,d.deepMix)({},Xt,t[Yt]):(0,d.isArray)(Xt)?t[Yt]=t[Yt]||(0,d.clone)(f[Yt]):t[Yt]=t[Yt]||f[Yt]});var c=r.get(n+Vv);if(c){var l=c(t);l[bf]&&(u=l[bf],delete l[bf]),(0,d.each)(l,function(Xt,Yt){(0,d.isObject)(Xt)&&!(0,d.isArray)(Xt)?t[Yt]=(0,d.deepMix)({},t[Yt],Xt):t[Yt]=l[Yt]||t[Yt]})}if(r.emit("beforeadditem",{type:e,model:t}),e===Xh||e===Yv){var w=void 0,M=void 0;if(w=t.source,M=t.target,w&&(0,d.isString)(w)&&(w=r.findById(w)),M&&(0,d.isString)(M)&&(M=r.findById(M)),!w||!M){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}w.getType&&w.getType()==="combo"&&(t.isComboEdge=!0),M.getType&&M.getType()==="combo"&&(t.isComboEdge=!0),s=new zv({model:t,source:w,target:M,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===jh)s=new Nd({model:t,styles:u,group:a.addGroup()});else if(e===bh){var O=t.children,W=Ro(O,r),$=void 0,et=void 0;if(isNaN(W.x)?isNaN(t.x)&&($=Math.random()*100):$=W.x,isNaN(W.y)?isNaN(t.y)&&(et=Math.random()*100):et=W.y,isNaN(t.x)||isNaN(t.y))t.x=$,t.y=et;else{var at=t.x-$,ft=t.y-et;this.updateComboSucceeds(t.id,at,ft,O)}var vt=a.addGroup();vt.setZIndex(t.depth),s=new Xv({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?Ro([],r):W,group:vt});var Ft=s.getModel();(O||[]).forEach(function(Xt){var Yt=r.findById(Xt.id);s.addChild(Yt),Xt.depth=Ft.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,d.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+Vv),f=e.getModel(),c=f.x,l=f.y,w=e.getUpdateType(t);if(u){var M=(0,d.deepMix)({},f,t),O=u(M),W=(0,d.deepMix)({},f,O,t);O[bf]&&(e.set("styles",W[bf]),delete W[bf]),(0,d.each)(W,function(oe,Ue){t[Ue]=oe})}else(0,d.each)(t,function(oe,Ue){f[Ue]&&(0,d.isObject)(oe)&&!(0,d.isArray)(oe)&&(t[Ue]=(0,m.__assign)((0,m.__assign)({},f[Ue]),t[Ue]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===Xh){if(t.source){var $=t.source;(0,d.isString)($)&&($=o.findById($)),e.setSource($)}if(t.target){var et=t.target;(0,d.isString)(et)&&(et=o.findById(et)),e.setTarget(et)}e.update(t)}else if(s===jh){e.update(t,w);var at=e.getEdges();w==="move"?(0,d.each)(at,function(oe){r.edgeToBeUpdateMap[oe.getID()]={edge:oe,updateType:w},r.throttleRefresh()}):(w==null?void 0:w.includes("bbox"))&&(0,d.each)(at,function(oe){oe.refresh(w)})}else if(s===bh){if(e.update(t,w),!isNaN(t.x)||!isNaN(t.y)){var ft=t.x-c||0,vt=t.y-l||0;this.updateComboSucceeds(f.id,ft,vt)}var Ft=e.getEdges(),Xt=(w==null?void 0:w.includes("bbox"))||w==="move";if(Xt&&s===bh){var Yt=e.get("shapeFactory"),he=f.type||"circle",_e=f.animate===void 0||t.animate===void 0?(a=(n=Yt[he])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:f.animate||t.animate;_e?setTimeout(function(){if(!(!e||e.destroyed)){var oe=e.getKeyShape();!oe||oe.destroyed||(0,d.each)(Ft,function(Ue){Ue&&!Ue.destroyed&&Ue.refresh()})}},201):(0,d.each)(Ft,function(oe){oe.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,d.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=Ro(t,s,e),c=f.x,l=f.y;e.set("bbox",f);var w=c,M=l;r?(w=isNaN(u.x)?c:u.x,M=isNaN(u.y)?l:u.y):(w=isNaN(c)?u.x:c,M=isNaN(l)?u.y:l),e.update({x:w,y:M});var O=e.get("shapeFactory"),W=u.type||"circle",$=u.animate===void 0?(o=(a=O[W])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;$?setTimeout(function(){if(!(!e||e.destroyed)){var et=e.getKeyShape();!et||et.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o==null?void 0:o.destroyed)&&!((t=o==null?void 0:o.getSource())===null||t===void 0?void 0:t.destroyed)&&!((r=o==null?void 0:o.getTarget())===null||r===void 0?void 0:r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s==null?void 0:s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){Hn(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var l=c.getModel();a.updateItem(f.id,{x:(l.x||0)+t,y:(l.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,d.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,d.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===Xh){var u=r.get("v".concat(a,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),l=r.get("itemMap");delete l[c];var w=r.get("comboTrees"),M=e.get("id");if(a===jh){var O=e.getModel().comboId;if(w&&O){var W=w,$=!1;w.forEach(function(Xt){$||Hn(Xt,function(Yt){if(Yt.id===M&&W){var he=W.indexOf(Yt);return W.splice(he,1),$=!0,!1}return W=Yt.children,!0})})}for(var et=e.getEdges(),at=et.length-1;at>=0;at--)r.removeItem(et[at],!1);O&&r.updateCombo(O)}else if(a===bh){var ft=e.getModel().parentId,vt,Ft=!1;(w||[]).forEach(function(Yt){Ft||Hn(Yt,function(he){return he.id===M?(vt=he,Ft=!0,!1):!0})}),vt.removed=!0,vt&&vt.children&&vt.children.forEach(function(Yt){t.removeItem(Yt.id)});for(var et=e.getEdges(),at=et.length;at>=0;at--)r.removeItem(et[at],!1);ft&&r.updateCombo(ft)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,d.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,d.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,d.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,d.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){Jn(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,d.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===jh){var a=e.getEdges();(0,d.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===bh){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(l){f||!l.children||l.children.length===0||Hn(l,function(w){return w.id===s?(u=w.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(l){var w=n.findById(l.id);r.changeItemVisibility(w,t)});var a=e.getEdges();(0,d.each)(a,function(l){t&&!(l.get("source").isVisible()&&l.get("target").isVisible())||r.changeItemVisibility(l,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),ty=Jp,ey=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,d.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,d.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,d.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),ry=ey,ny=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},Hv=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=Ce(t);return u.unshift(["M",e[0].x,e[0].y]),u},Yh=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];un.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},ay=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=ny(a,s)}return t&&(n+="Z"),n},kd=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},Rd=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,l=e[s].y,w=e[s+1].x,M=e[s+1].y,O=s!==e.length-2?e[s+2].x:w,W=s!==e.length-2?e[s+2].y:M,$=c+(w-u)/6,et=l+(M-f)/6,at=w-(O-c)/6,ft=M-(W-l)/6;o.push(["C",$,et,at,ft,w,M])}return o.unshift(["M",n.x,n.y]),o},Zv=function(e,t){return un.scale([0,0],un.normalize([0,0],e),t)},Kv=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},$v=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function Bd(i,e){var t=function(l){var w=[l[0][0],l[0][1]-e],M=[l[0][0],l[0][1]+e];return"M ".concat(w," A ").concat(e,",").concat(e,",0,0,0,").concat(M," A ").concat(e,",").concat(e,",0,0,0,").concat(w)},r=function(l){var w=un.scale([0,0],Kv(l[0],l[1]),e),M=un.scale([0,0],w,-1),O=un.add([0,0],l[0],w),W=un.add([0,0],l[1],w),$=un.add([0,0],l[1],M),et=un.add([0,0],l[0],M);return"M ".concat(O," L ").concat(W," A ").concat([e,e,"0,0,0",$].join(",")," L ").concat(et," A ").concat([e,e,"0,0,0",O].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=un.scale([0,0],Kv(o,s),e);n[a]=[un.add([0,0],o,u),un.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,l){var w="";return l===0&&(w="M ".concat(n[n.length-1][1]," ")),w+="".concat(f+c[0]," L ").concat(c[1]),w}),n.join(" ")}function Qv(i,e){var t=i.length,r=function(c){var l=[c[0][0],c[0][1]-e],w=[c[0][0],c[0][1]+e];return"M ".concat(l," A ").concat([e,e,"0,0,0",w].join(",")," A ").concat([e,e,"0,0,0",l].join(","))},n=function(c){var l=$v(c[0],c[1]),w=Zv(l,e),M=un.add([0,0],c[0],un.scale([0,0],w,-1)),O=un.add([0,0],c[1],w),W=1.2*e,$=Zv(un.normalize([0,0],l),W),et=un.scale([0,0],$,-1),at=un.add([0,0],M,et),ft=un.add([0,0],O,et),vt=un.add([0,0],M,$);return"M ".concat(M," C ").concat([at,ft,O].join(",")," S ").concat([vt,M].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(f,c){var l=i[(c+1)%t];return{p:f,v:un.normalize([0,0],$v(f,l))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=un.normalize([0,0],un.add([0,0],a[s].v,un.scale([0,0],a[o].v,-1)));a[o].p=un.add([0,0],a[o].p,un.scale([0,0],u,e))}return a.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var qv=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},Jv=function(e){var t=e.map(function(s){return{x:s.getModel().x,y:s.getModel().y}});if(t.sort(function(s,u){return s.x===u.x?s.y-u.y:s.x-u.x}),t.length===1)return t;for(var r=[],n=0;n<t.length;n++){for(;r.length>=2&&qv(r[r.length-2],r[r.length-1],t[n])<=0;)r.pop();r.push(t[n])}for(var a=[],n=t.length-1;n>=0;n--){for(;a.length>=2&&qv(a[a.length-2],a[a.length-1],t[n])<=0;)a.pop();a.push(t[n])}a.pop(),r.pop();var o=r.concat(a);return o},iy={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function oy(i,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},a=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,l=f,w,M,O=0;O<e.width*e.height;O++){if(w=c,M=l,i.findIndex(function($){return $.x===c&&$.y===l})>-1){if(!(i[0].x!==c||i[0].y!==l))return!0}else i.push({x:c,y:l});var W=a(c,l);switch(W){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:w===0&&(M===-1?c-=1:c+=1);break;case 1:case 13:case 5:l--;break;case 9:w===1&&(M===0?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(W)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var sy=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},uy=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=pi(s,u),c=new Ei(s.x,s.y,u.x,u.y),l=r.reduce(function(w,M){return qa(M,c)>0?w+1:w},0);f*Math.pow(l+1,2)<a&&(n=o,a=f*Math.pow(l+1,2))}),n},t0=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=qa(a,t);o>=0&&o<r&&(n=a,r=o)}),n},fy=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,f=function(M,O){var W=!1;return O.forEach(function($){W||(Zi(M,{x:$.x1,y:$.y1})||Zi(M,{x:$.x2,y:$.y2}))&&(W=!0)}),W},c=function(M,O){for(var W=0,$=O;W<$.length;W++){var et=$[W],at=et.getBBox(),ft=[[at.x,at.y],[at.x+at.width,at.y],[at.x,at.y+at.height],[at.x+at.width,at.y+at.height]];if(no(ft,M.x,M.y))return!0}return!1};s&&u<r;){s=!1;for(var l=function(){var M=o.pop(),O=t0(t,M);if(O){var W=ma(O,M),$=W[0],et=W[1];if(et===2){var at=function(vt){for(var Ft=n,Xt=e0(O,Ft,$,vt),Yt=f(Xt,o)||f(Xt,a),he=c(Xt,t);!Yt&&he&&Ft>=1;)Ft/=1.5,Xt=e0(O,Ft,$,vt),Yt=f(Xt,o)||f(Xt,a),he=c(Xt,t);Xt&&!Yt&&(!vt||!he)&&(o.push(new Ei(M.x1,M.y1,Xt.x,Xt.y)),o.push(new Ei(Xt.x,Xt.y,M.x2,M.y2)),s=!0)};at(!0),s||at(!1)}}s||a.push(M),u+=1};!s&&o.length;)l()}for(;o.length;)a.push(o.pop());return a};function cy(i,e,t,r,n){var a=uy(i,t,e);if(a===null)return[];var o=function(l){for(var w=[];l.length>0;){var M=l.pop();if(l.length===0){w.push(M);break}var O=l.pop(),W=new Ei(M.x1,M.y1,O.x2,O.y2),$=t0(e,W);$?(w.push(M),l.push(O)):l.push(W)}return w},s=new Ei(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=fy(s,e,r,n),f=o(u);return f}var ly=function(e,t,r){var n=Object.assign(iy,r),a=Mi(e.map(function(at){return{x:at.getModel().x,y:at.getModel().y}}));e=e.sort(function(at,ft){return pi({x:at.getModel().x,y:at.getModel().y},a)-pi({x:ft.getModel().x,y:ft.getModel().y},a)});var o=[],s=[];e.forEach(function(at){var ft=cy(at,t,o,n.maxRoutingIterations,n.morphBuffer);ft.forEach(function(vt){s.push(vt)}),o.push(at)});for(var u=hy(e,s,n.nodeR0),f=sy(u.width,u.height,n.pixelGroupSize),c=[],l=[],w=0;w<n.maxMarchingIterations;w++)if(dy(e,t,s,u,f,n),c=[],l=[],!!new oy(c,f,n.threshold).march()){var M=c.map(function(at){return{x:Math.round(at.x*n.pixelGroupSize+u.minX),y:Math.round(at.y*n.pixelGroupSize+u.minY)}});if(M){var O=M.length;if(n.skip>1)for(O=Math.floor(M.length/n.skip);O<3&&n.skip>1;)n.skip-=1,O=Math.floor(M.length/n.skip);for(var W=0,$=0;$<O;$+=1,W+=n.skip)l.push({x:M[W].x,y:M[W].y})}var et=function(){for(var ft=0,vt=e;ft<vt.length;ft++){var Ft=vt[ft],Xt=l.map(function(Yt){return[Yt.x,Yt.y]});if(!no(Xt,Ft.getBBox().centerX,Ft.getBBox().centerY))return!1}return!0};if(l&&et())return l;if(n.threshold*=.9,w<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return l};function hy(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function dy(i,e,t,r,n,a){function o(M,O){var W=Math.floor((M-O)/a.pixelGroupSize);return W<0?0:W}function s(M,O){return M*a.pixelGroupSize+O}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),f=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(O,W){var $=Math.min(o(O.minX,W+r.minX),n.width),et=Math.min(o(O.minY,W+r.minY),n.height),at=Math.min(o(O.maxX,-W+r.minX),n.width),ft=Math.min(o(O.maxY,-W+r.minY),n.height);return[$,et,at,ft]},l=function(O,W){for(var $=O.getBBox(),et=c($,a.nodeR1),at=et[0],ft=et[1],vt=et[2],Ft=et[3],Xt=ft;Xt<Ft;Xt+=1)for(var Yt=at;Yt<vt;Yt+=1)if(!(W<0&&n[Yt+Xt*n.width]<=0)){var he=s(Yt,r.minX),_e=s(Xt,r.minY),oe=Fi({x:he,y:_e},{x:$.minX,y:$.minY,width:$.width,height:$.height});if(oe<Math.pow(a.nodeR1,2)){var Ue=Math.sqrt(oe)-a.nodeR1;n.cells[Yt+Xt*n.width]+=W*Ue*Ue}}},w=function(O,W){for(var $=O.getBBox(),et=c($,a.edgeR1),at=et[0],ft=et[1],vt=et[2],Ft=et[3],Xt=ft;Xt<Ft;Xt+=1)for(var Yt=at;Yt<vt;Yt+=1)if(!(W<0&&n.cells[Yt+Xt*n.width]<=0)){var he=s(Yt,r.minX),_e=s(Xt,r.minY),oe=so({x:he,y:_e},O);if(oe<Math.pow(a.edgeR1,2)){var Ue=Math.sqrt(oe)-a.edgeR1;n.cells[Yt+Xt*n.width]+=W*Ue*Ue}}};a.nodeInfluenceFactor&&i.forEach(function(M){l(M,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(M){w(M,a.edgeInfluenceFactor/f)}),a.negativeNodeInfluenceFactor&&e.forEach(function(M){l(M,a.negativeNodeInfluenceFactor/u)})}function e0(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function l(O,W){return n.width*((O.y-n.minY+(W.y-n.minY))*.5)}if(o){if(a)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var w=l(o,u);return w<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(a)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var M=l(a,s);return M<c*.5?a.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:a.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var vy=function(){function i(e,t){this.cfg=(0,d.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,d.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,d.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=Jv(e),a=Bd(r.map(function(o){return[o.x,o.y]}),this.padding),n=He(a);break;case"smooth-convex":r=Jv(e),r.length===2?(a=Bd(r.map(function(o){return[o.x,o.y]}),this.padding),n=He(a)):r.length>2&&(a=Qv(r.map(function(o){return[o.x,o.y]}),this.padding),n=Rd(a));break;case"bubble":r=ly(e,t,this.cfg.bubbleCfg),n=r.length>=2&&Rd(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,m.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(!!e){(0,d.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(!!e){(0,d.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(!!e){(0,d.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(!!e){(0,d.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,d.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,d.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,m.__assign)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,d.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,d.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,d.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,d.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=kd(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),po(n,kd(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),r0=vy,xh=Dt,gy="node",py=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,d.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){Hn(f,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),l=o[c.source]||0,w=o[c.target]||0,M=Math.max(l,w);a[M]?a[M].push(c.id):a[M]=[c.id]}),a.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var l=r.findById(f[c]);l&&l.toFront()}})}},500,!1),r.cfg=(0,d.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Oi(r.cfg.maxStep),r.redoStack=new Oi(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new Up(this),r=new au(this),n=new ty(this),a=new ry(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(!!t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:H.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:H.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:H.nodeContainerClassName}),f=o.addGroup({id:"".concat(a,"-combo"),className:H.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:H.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,d.isPlainObject)(t)?this.cfg=(0,m.__assign)((0,m.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new Oi(this.cfg.maxStep),this.redoStack=new Oi(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,d.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,d.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,d.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,d.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=es({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});Ai(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=xh(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");Ai(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,d.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),l=this.getZoom()||1,w=l*t,M=t,O=!1;if(f&&w<f?(M=f/l,O=!0):c&&w>c&&(M=c/l,O=!0),r?u=xh(u,[["t",-r.x,-r.y],["s",M,M],["t",r.x,r.y]]):u=xh(u,[["s",M,M]]),n){var W=(0,d.clone)(s.getMatrix());W||(W=[1,0,0,0,1,0,0,0,1]);var $=W[0],et=$*M,at=es({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(ft){if(ft===1)W=u;else{var vt=uo($,et,ft)/W[0];r?W=xh(W,[["t",-r.x,-r.y],["s",vt,vt],["t",r.x,r.y]]):W=xh(W,[["s",vt,vt]])}return{matrix:W}},at)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!O},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,d.isString)(t)&&(n=this.findById(t)),!n&&(0,d.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,m.__assign)((0,m.__assign)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,m.__assign)((0,m.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var l=this.get("itemController");if(l.removeItem(n),a==="combo"){var w=wi(this.get("comboTrees"));this.set("comboTrees",w)}}},e.prototype.innerAddItem=function(t,r,n){if(!Lo(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(O){u||Jn(O,function(W){if(r.parentId===W.id){u=!0;var $=(0,m.__assign)({id:r.id,depth:W.depth+2},r);W.children?W.children.push($):W.children=[$],r.depth=$.depth,a=n.addItem(t,r)}var et=s[W.id];return u&&et&&et.getType&&et.getType()==="combo"&&n.updateCombo(et,W.children),!0})}),!u){var f=(0,m.__assign)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,d.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var l=this.get("itemMap"),w=!1,M=!1;o.forEach(function(O){M||w||Jn(O,function(W){if(W.id===r.id)return M=!0,!1;if(r.comboId===W.id&&!M){w=!0;var $=(0,d.clone)(r);$.itemType="node",W.children?W.children.push($):W.children=[$],$.depth=W.depth+1}return w&&l[W.id].getType&&l[W.id].getType()==="combo"&&n.updateCombo(l[W.id],W.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,m.__assign)((0,m.__assign)({},u.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[c];break;case"edge":l.edges=[c];break;case"combo":l.combos=[c];break;default:break}this.pushStack("add",{before:{},after:l})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var l={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var w=t[u].type,M=s[u];if(!!M&&M!==!0){var O=(0,m.__assign)((0,m.__assign)({},M.getModel()),{itemType:w});switch(w){case"node":l.nodes.push(O);break;case"edge":l.edges.push(O);break;case"combo":l.combos.push(O);break;default:break}}}this.pushStack("addItems",{before:{},after:l})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,d.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,d.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var l=(0,m.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,d.each)(l,function(W){return a.setItemState(s,W,!1)}),o.updateItem(s,r),c==="combo"&&(0,d.each)(l,function(W){return a.setItemState(s,W,!0)}),u){var w={nodes:[],edges:[],combos:[]},M={nodes:[],edges:[],combos:[]},O=(0,m.__assign)({id:f.id},r);switch(c){case"node":w.nodes.push(f),M.nodes.push(O);break;case"edge":w.edges.push(f),M.edges.push(O);break;case"combo":w.combos.push(f),M.combos.push(O);break;default:break}this.pushStack("update",{before:w,after:M})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,d.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){Di(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function($){return{type:"node",model:$}}),!1,!1),(f==null?void 0:f.length)!==0){var c=ai(f,a);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function($){return{type:"edge",model:$}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var w=t.get("layoutController");if(w){if(w.layout(M),this.destroyed)return}else M();function M(){(t.get("comboTrees")||[]).forEach(function($){Jn($,function(et){var at=t.findById(et.id);return at.getType()==="combo"&&et.collapsed&&(t.collapseCombo(et.id,!1),t.updateCombo(at)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var $;($=t.getCombos())===null||$===void 0||$.forEach(function(et){et.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var O=this.getNodes();O.forEach(function($){$.toFront()})}else{var W=this.getEdges();W.forEach(function($){$.toBack()})}this.get("enabledStack")&&this.pushStack("render")},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,d.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===gy){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!Di(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(at){return o.clearItemStates(at)}),this.getEdges().map(function(at){return o.clearItemStates(at)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),l={nodes:[],edges:[]},w=s.combos;if(w){var M=ai(w,s.nodes);this.set("comboTrees",M)}else this.set("comboTrees",[]);this.diffItems("node",l,s.nodes),(0,d.each)(c,function(at,ft){c[ft].getModel().depth=0,!(at.getType&&at.getType()==="edge")&&(at.getType&&at.getType()==="combo"?(delete c[ft],at.destroy()):l.nodes.indexOf(at)<0&&(delete c[ft],o.remove(at,!1)))});for(var O=this.getCombos(),W=O.length,$=W-1;$>=0;$--)O[$].destroyed&&O.splice($,1);w&&(o.addCombos(w),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,s.edges),(0,d.each)(c,function(at,ft){at.getType&&(at.getType()==="node"||at.getType()==="combo")||l.edges.indexOf(at)<0&&(delete c[ft],o.remove(at,!1))}),(this.get("comboTrees")||[]).forEach(function(at){Jn(at,function(ft){var vt=n.findById(ft.id);return vt.getType()==="combo"&&ft.collapsed&&n.collapseCombo(ft.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var et=this.get("layoutController");return et&&(et.changeData(function(){setTimeout(function(){var at;(at=o.getCombos())===null||at===void 0||at.forEach(function(ft){ft.set("animate",!0)})},0)}),o.get("animate")&&!et.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(at){return at.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(!!t){if((0,d.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function($){var et=a.findById($),at=et.getType();if(!(at!=="node"&&at!=="combo")){var ft=et.getModel();c["".concat(at,"s")].push({id:$,parentId:at==="node"?ft.comboId:ft.parentId})}});var l=this.get("comboTrees"),w=new Set(r),M=new Map;l&&(l.forEach(function($){Jn($,function(et,at,ft){if(w.has(et.id)){if(at){var vt=a.findById(at.id),Ft=a.findById(et.id);at.children.splice(ft,1),vt.removeChild(Ft),o.updateCombo(vt,at.children)}et.itemType==="combo"&&M.set(et.id,et)}return!0})}),l=l.filter(function($){return!w.has($.id)}),this.set("comboTrees",l));var O={nodes:[],combos:[]},W=r.map(function($){var et=a.findById($),at=et.getModel(),ft="";et.getType&&(ft=et.getType());var vt=M.get($)||{id:et.getID(),itemType:ft};return ft==="combo"?(vt.parentId=s,at.parentId=s):ft==="node"&&(vt.comboId=s,at.comboId=s),f&&O["".concat(ft,"s")].push({id:at.id,parentId:s}),vt});u.children=W,this.addItem("combo",u,!1),this.set("comboSorted",!1),l&&(l.forEach(function($){Hn($,function(et){return et.id===s?(et.itemType="combo",et.children=W,!1):!0})}),this.sortCombos()),f&&(O.combos.push(u),this.pushStack("createCombo",{before:c,after:O}))}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,d.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,l=s.get("comboTrees");l||(l=[]);var w=this.get("itemMap"),M=u.get("id"),O,W=[],$=this.get("combos"),et=this.findById(c),at=r&&this.get("enabledStack"),ft={};if(at&&(ft=(0,d.clone)(f),ft.children=[]),l.forEach(function(Yt){O||Jn(Yt,function(he){var _e;if(he.id===M){O=he;var oe=u.getEdges().map(function(Kr){return Kr.getID()});oe.forEach(function(Kr){n.removeItem(Kr,!1)});var Ue=$.indexOf(u);$.splice(Ue,1),delete w[M];var or=(0,d.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:or,type:"combo"})}if(c&&O&&he.id===c){et.removeCombo(u),W=he.children;var Ue=W.indexOf(O);return Ue!==-1&&W.splice(Ue,1),(_e=O.children)===null||_e===void 0||_e.forEach(function(An){var Sn=n.findById(An.id),cn=Sn.getModel();Sn.getType&&Sn.getType()==="combo"?(An.parentId=c,delete An.comboId,cn.parentId=c,delete cn.comboId):Sn.getType&&Sn.getType()==="node"&&(An.comboId=c,cn.comboId=c),et.addChild(Sn),W.push(An)}),n.updateCombo(et),!1}return!0})}),!c&&O){var vt=l.indexOf(O);l.splice(vt,1),(a=O.children)===null||a===void 0||a.forEach(function(Yt){Yt.parentId=void 0;var he=n.findById(Yt.id).getModel();delete he.parentId,delete he.comboId,Yt.itemType!=="node"&&l.push(Yt)})}if(at){var Ft={nodes:[],combos:[]},Xt={nodes:[],combos:[]};(o=O.children)===null||o===void 0||o.forEach(function(Yt){var he=n.findById(Yt.id),_e=he.getType();_e!=="node"&&_e!=="combo"||(Ft["".concat(_e,"s")].push({id:Yt.id,parentId:M}),Xt["".concat(_e,"s")].push({id:Yt.id,parentId:c}))}),Ft.combos.push(ft),this.pushStack("uncombo",{before:Ft,after:Xt})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){Jn(u,function(f){var c;if(!f)return!0;var l=s[f.id];if(((c=l==null?void 0:l.getType)===null||c===void 0?void 0:c.call(l))==="combo"){var w=(0,m.__spreadArray)([],l.getStates(),!0);(0,d.each)(w,function(M){return r.setItemState(l,M,!1)}),o.updateCombo(l,f.children,t),(0,d.each)(w,function(M){return r.setItemState(l,M,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,d.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){Jn(c,function(l){if(!l)return!0;var w=f[l.id];if(o===l.id&&w&&w.getType&&w.getType()==="combo"){var M=(0,m.__spreadArray)([],w.getStates(),!0);(0,d.each)(M,function(O){w.getStateStyle(O)&&r.setItemState(w,O,!1)}),u.updateCombo(w,l.children),(0,d.each)(M,function(O){w.getStateStyle(O)&&r.setItemState(w,O,!0)}),o&&(o=l.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,d.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),l=!0,w;if((c||[]).forEach(function(at){w||Hn(at,function(ft){if(!w)return ft.id===o.getID()&&(w=ft),!0})}),Hn(w,function(at){return at.id===r?(l=!1,!1):!0}),!l){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var M={},O={};f==="combo"?(M.combos=[{id:s.id,parentId:s.parentId}],O.combos=[{id:s.id,parentId:r}]):f==="node"&&(M.nodes=[{id:s.id,parentId:s.comboId}],O.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:M,after:O})}if(s.parentId||s.comboId){var W=this.findById(s.parentId||s.comboId);W&&W.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var $=this.findById(r);$&&$.addChild(o)}if(u){var $=this.findById(u);$&&$.removeChild(o)}var et=wi(this.get("comboTrees"),s.id,r);this.set("comboTrees",et),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,d.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,d.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,d.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,d.each)(r,function(o){o.refresh()}),(0,d.each)(n,function(o){o.refresh()}),(0,d.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,d.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,u.animate(function(f){(0,d.each)(s,function(c){var l=r.findById(c.id);if(!(!l||l.destroyed)){var w=l.get("originAttrs"),M=l.get("model"),O=l.getContainer().getMatrix();if(w==null&&(O&&(w={x:O[6],y:O[7]}),l.set("originAttrs",w||0)),a){var W=a(l,f,c,w||{x:0,y:0});l.set("model",Object.assign(M,W))}else w?(M.x=w.x+(c.x-w.x)*f,M.y=w.y+(c.y-w.y)*f):(M.x=c.x,M.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,d.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(w){(0,d.each)(w,function(M){u=M.getModel();var O=M.get("originAttrs");if(!(O&&u.x===O.x&&u.y===O.y)){var W=M.updatePosition({x:u.x,y:u.y});f[u.id]=W,u.comboId&&(f[u.comboId]=f[u.comboId]||W),u.parentId&&(f[u.parentId]=f[u.parentId]||W)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,d.each)(a,function(l){var w=l.getSource().getModel(),M=l.getTarget();if(!(0,d.isPlainObject)(M)){var O=M.getModel();(f[w.id]||f[O.id]||l.getModel().isComboEdge)&&l.refresh()}}),(0,d.each)(o,function(l){l.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){this.isAnimating()&&this.get("canvas").stopAnimate()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,d.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(w){var M=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*M[0]+M[6],u.y=u.y*M[0]+M[7];var O=o.getGroup().getCanvasBBox(),W=O.minX,$=O.maxX,et=O.minY,at=O.maxY,ft={x:(W+$)/2,y:(et+at)/2};r==="begin"&&(ft.x=W,ft.y=et),o.translate(u.x-ft.x,u.y-ft.y)})}var c=(0,m.__assign)({},this.get("layout")),l={};Object.assign(l,c,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),!!s&&(s.isLayoutTypeSame(l)&&l.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(l):s.changeLayout(l),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}((t=r.layoutMethods)===null||t===void 0?void 0:t.length)?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,d.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(w){c||Hn(w,function(M){if(c&&M.depth<=a.depth)return!1;if(a.id===M.id&&(c=!0),c){var O=n.findById(M.id);O&&O.getType&&O.getType()==="combo"&&(u=u.concat(O.getNodes()),u=u.concat(O.getCombos()))}return!0})});var l={};s.forEach(function(w){var M=w.getModel(),O=M.isVEdge,W=M.size,$=W===void 0?1:W;if(!(w.isVisible()&&!O)){var et=w.getSource(),at=w.getTarget(),ft=null,vt;if(et.getModel().id===a.id||u.includes(et)&&!u.includes(at)?(ft=at,vt=!1):(at.getModel().id===a.id||!u.includes(et)&&u.includes(at))&&(ft=et,vt=!0),ft){if(O){n.removeItem(w,!1);return}for(var Ft=ft.getModel();!ft.isVisible();){var Xt=Ft.parentId,Yt=Ft.comboId,he=Xt||Yt;if(ft=n.findById(he),!ft||!he)return;Ft=ft.getModel()}var _e=Ft.id,oe=vt?{source:_e,target:a.id,size:$,isVEdge:!0}:{source:a.id,target:_e,size:$,isVEdge:!0},Ue="".concat(oe.source,"-").concat(oe.target);if(l[Ue]){l[Ue].size+=$;return}l[Ue]=oe}}}),this.addItems(Object.values(l).map(function(w){return{type:"vedge",model:w}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,d.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(w){c||Hn(w,function(M){if(c&&M.depth<=a.depth)return!1;if(a.id===M.id&&(c=!0),c){var O=n.findById(M.id);O&&O.getType&&O.getType()==="combo"&&(u=u.concat(O.getNodes()),u=u.concat(O.getCombos()))}return!0})});var l={};s.forEach(function(w){if(!(w.isVisible()&&!w.getModel().isVEdge)){var M=w.getSource(),O=w.getTarget(),W=M.get("id"),$=O.get("id"),et=null,at;if(W===a.id||u.includes(M)&&!u.includes(O)?(et=O,at=!1):$===a.id||!u.includes(M)&&u.includes(O)?(et=M,at=!0):u.includes(M)&&u.includes(O)&&M.isVisible()&&O.isVisible()&&w.show(),et){var ft=w.getModel(),vt=ft.isVEdge,Ft=ft.size,Xt=Ft===void 0?1:Ft;if(vt){n.removeItem(w,!1);return}for(var Yt=et.getModel();!et.isVisible();){var he=Yt.parentId,_e=Yt.comboId,oe=he||_e;if(et=n.findById(oe),!et||!oe)return;Yt=et.getModel()}for(var Ue=Yt.id,or=at?O:M,Kr=or.getModel();!or.isVisible();){var An=Kr.parentId,Sn=Kr.comboId,cn=An||Sn;if(or=n.findById(cn),!or||!cn)return;if(Kr.comboId===a.id||Kr.parentId===a.id)break;Kr=or.getModel()}var Fn=Kr.id;if(Ue){var Pn=at?{source:Ue,target:Fn,isVEdge:!0,size:Xt}:{source:Fn,target:Ue,isVEdge:!0,size:Xt},tn="".concat(Pn.source,"-").concat(Pn.target);if(l[tn]){l[tn].size+=Xt;return}l[tn]=Pn}}}}),this.addItems(Object.values(l).map(function(w){return{type:"vedge",model:w}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,d.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,d.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,d.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=fe(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,d.clone)(r):{before:{},after:(0,d.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=Ot(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=Ot(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=Qe(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new r0(this,(0,m.__assign)((0,m.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,d.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(rt),n0=py;function Fd(i){return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fd(i)}var eh=Dt,a0="-shape",Gd="-label",Vh=["startArrow","endArrow"],i0={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},yy={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Hh={edge:yy,node:i0,combo:i0},zd="-label-bg",Ud={options:{labelCfg:{style:{fontFamily:H.windowFontFamily}},descriptionCfg:{style:{fontFamily:H.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||(t==null?void 0:t.includes("bbox"))?e:(0,d.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+a0),t.shapeMap[this.itemType+a0]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+Gd),t.shapeMap[this.itemType+Gd]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":f=eh(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=eh(f,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":f=eh(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:f=eh(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=eh(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(f)}if(a.background){var c=this.drawLabelBg(e,t,s),l=this.itemType+zd;c.set("classname",l),t.shapeMap[l]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,d.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=H[a]?H[a].style:null;return(0,m.__assign)((0,m.__assign)((0,m.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,d.mix)({},o.attr(),e.style),u=function(l){var w,M=s[l];if((0,d.isPlainObject)(M)){var O=((n=a.shapeMap)===null||n===void 0?void 0:n[l])||a.find(function(W){return W.get("name")===l});O==null||O.attr(M)}else o.attr((w={},w[l]=M,w))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,a;if(e.label||e.label===""){var o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+Gd,c=o.shapeMap[f]||o.find(function(vt){return vt.get("className")===f}),l=this.itemType+zd,w=o.shapeMap[l]||o.find(function(vt){return vt.get("className")===l});if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,d.deepMix)(u,e.labelCfg));var O=this.getLabelStyleByPosition(e,u,o),W=(n=e.labelCfg)===null||n===void 0?void 0:n.style,$=(0,m.__assign)((0,m.__assign)({},O),W),et=$.rotate;if(delete $.rotate,!isNaN(et)&&et!==""){var at=[1,0,0,0,1,0,0,0,1];at=eh(at,[["t",-$.x,-$.y],["r",et],["t",$.x,$.y]]),$.matrix=at,c.attr($)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr($);if(!w)$.background&&(w=this.drawLabelBg(e,o,c),w.set("classname",l),o.shapeMap[l]=w,c.toFront());else if($.background){var ft=this.getLabelBgStyleByPosition(c,u);w.attr(ft)}else o.removeChild(w)}else{var M=this.drawLabel(e,o);M.set("className",f),o.shapeMap[f]=M}}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,d.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),l=r.getStateStyle(f);if(!(!l&&!c)){var w=(0,d.mix)({},l||c),M=r.getContainer(),O={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(O.r=1,O.width=1,O.height=1),t){var W=function(cn){var Fn,Pn=w[cn];if((0,d.isPlainObject)(Pn)&&!Vh.includes(cn)){var tn=((o=M.shapeMap)===null||o===void 0?void 0:o[cn])||M.find(function(Mn){return Mn.get("name")===cn});tn==null||tn.attr(Pn)}else s.attr((Fn={},Fn[cn]=Pn,Fn))};for(var $ in w)W($)}else{var et=Bo(r.getCurrentStatesStyle()),at=r.getModel(),ft=(0,d.mix)({},at.style,Bo(r.getOriginStyle())),vt=s.get("name"),Ft=s.attr(),Xt={};Object.keys(Ft).forEach(function(Sn){if(Sn!=="img"){var cn=Ft[Sn];cn&&Fd(cn)==="object"?Xt[Sn]=(0,d.clone)(cn):Xt[Sn]=cn}});var Yt={},he=function(cn){var Fn=w[cn];if((0,d.isPlainObject)(Fn)&&!Vh.includes(cn)){var Pn=M.shapeMap[cn]||M.find(function(Ln){return Ln.get("name")===cn});if(Pn){var tn=Bo(Pn.attr());(0,d.each)(Fn,function(Ln,Dn){if(cn===vt&&Xt[Dn]&&!O[Dn]){delete Xt[Dn];var Yn=ft[cn][Dn]||Hh[u][Dn];s.attr(Dn,Yn)}else if(tn[Dn]||tn[Dn]===0){delete tn[Dn];var aa=ft[cn][Dn]||Hh[u][Dn];Pn.attr(Dn,aa)}}),Yt[cn]=tn}}else if(Xt[cn]&&!O[cn]){delete Xt[cn];var Mn=ft[cn]||(ft[vt]?ft[vt][cn]:void 0)||Hh[u][cn];s.attr(cn,Mn)}};for(var _e in w)he(_e);vt?Yt[vt]=Xt:(0,d.mix)(Yt,Xt);for(var $ in et)if(!O[$]){var oe=et[$];(!(0,d.isPlainObject)(oe)||Vh.includes($))&&(vt?((0,d.mix)(ft[vt],(a={},a[$]=oe,a)),delete ft[$]):(0,d.mix)(ft,(n={},n[$]=oe,n)),delete et[$])}var Ue={};(0,d.deepMix)(Ue,ft,Yt,et);var or=!1,Kr=function(cn){var Fn,Pn,tn=Ue[cn];if((0,d.isPlainObject)(tn)&&!Vh.includes(cn)){var Mn=M.shapeMap[cn]||M.find(function(Dn){return Dn.get("name")===cn});Mn&&((Mn.get("type")==="text"||Mn.get("labelRelated"))&&(delete tn.x,delete tn.y,delete tn.matrix),cn===vt&&(u==="combo"&&(delete tn.r,delete tn.width,delete tn.height),or=!0),Mn.attr(tn))}else if(!or){var Ln=tn||Hh[u][cn];u==="combo"?vt||s.attr((Fn={},Fn[cn]=Ln,Fn)):s.attr((Pn={},Pn[cn]=Ln,Pn))}};for(var An in Ue)Kr(An)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,d.clone)(f):(0,d.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},my={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:H.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||H.defaultNode.size;return(0,d.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,d.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=ni(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,d.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=Cd(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,m.__assign)((0,m.__assign)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Ue){return Ue.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Ue){return Ue.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Ue){return Ue.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(Ue){return Ue.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,d.mix)({},u,e.linkPoints),c=f.fill,l=f.stroke,w=f.lineWidth,M=f.size/2;M||(M=f.r);var O=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},W=O.left,$=O.right,et=O.top,at=O.bottom,ft=this.getSize(e),vt=ft[0],Ft=ft[1],Xt={r:M,fill:c,stroke:l,lineWidth:w};if(n)!W&&W!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,m.__assign)((0,m.__assign)({},Xt),{x:-vt/2,y:0}));else if(W){var Yt="link-point-left";t.shapeMap[Yt]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Xt),{x:-vt/2,y:0}),className:Yt,name:Yt,isAnchorPoint:!0})}if(a)!$&&$!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,m.__assign)((0,m.__assign)({},Xt),{x:vt/2,y:0}));else if($){var he="link-point-right";t.shapeMap[he]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Xt),{x:vt/2,y:0}),className:he,name:he,isAnchorPoint:!0})}if(o)!et&&et!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,m.__assign)((0,m.__assign)({},Xt),{x:0,y:-Ft/2}));else if(et){var _e="link-point-top";t.shapeMap[_e]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Xt),{x:0,y:-Ft/2}),className:_e,name:_e,isAnchorPoint:!0})}if(s)!at&&at!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,m.__assign)((0,m.__assign)({},Xt),{x:0,y:Ft/2}));else if(at){var oe="link-point-bottom";t.shapeMap[oe]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},Xt),{x:0,y:Ft/2}),className:oe,name:oe,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,m.__assign)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(et){return et.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,d.mix)({},f.attr(),a),l=c.width,w=l===void 0?20:l,M=c.height,O=M===void 0?20:M;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(w=0,O=0),f.attr((0,m.__assign)((0,m.__assign)({},c),{x:-w/2,y:-O/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var W="".concat(this.type,"-icon");if(u)n.shapeMap[W]=n.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:W,name:W});else{var w=a.width,O=a.height;n.shapeMap[W]=n.addShape("image",{attrs:(0,m.__assign)((0,m.__assign)({},a),{x:-w/2,y:-O/2}),className:W,name:W})}var $=n.shapeMap["node-label"]||n.find(function(et){return et.get("name")==="node-label"});$&&$.toFront()}}},by=(0,m.__assign)((0,m.__assign)({},Ud),my);ns.registerNode("single-node",by);var Zh="edge-shape";function xy(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var Ey={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:H.defaultEdge.size,style:{x:0,y:0,stroke:H.defaultEdge.style.stroke,lineAppendWidth:H.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:H.edgeLabel.style.fill,fontSize:H.edgeLabel.style.fontSize,fontFamily:H.windowFontFamily}},stateStyles:(0,m.__assign)({},H.edgeStateStyles)},getPath:function(e){var t=[];return(0,d.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,d.mix)({},t,r,e.style),a=e.size||H.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),l=(0,d.mix)({},H.defaultEdge.style,{stroke:H.defaultEdge.color,lineWidth:a,path:c},n);return l},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),l=[u];c&&(l=l.concat(c)),l.push(f);var w=o.attr(),M=e.style||{};M.stroke===void 0&&(M.stroke=e.color);var O=e.sourceNode,W=e.targetNode,$={radius:M.radius};c||($={source:O,target:W,offset:M.offset,radius:M.radius});var et=this.getPath(l,$),at={};r==="move"?at={path:et}:(w.endArrow&&M.endArrow===!1&&(e.style.endArrow={path:""}),w.startArrow&&M.startArrow===!1&&(e.style.startArrow={path:""}),at=(0,m.__assign)({},e.style),at.lineWidth===void 0&&(at.lineWdith=((0,d.isNumber)(s)?s:s==null?void 0:s[0])||w.lineWidth),at.path===void 0&&(at.path=et),at.stroke===void 0&&(at.stroke=w.stroke||e.color)),o&&o.attr(at)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[Zh],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+f,a.text=e.label,a;var c;(0,d.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var l=hn(o,s,u,f,c);return a.x=l.x,a.y=l.y,a.rotate=l.rotate,a.textAlign=this._getTextAlign(n,l.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,m.__assign)((0,m.__assign)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,d.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=xy(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:Zh,name:Zh,attrs:r});return t.shapeMap[Zh]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,d.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),f=this.itemType+zd;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,d.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},wy=(0,m.__assign)((0,m.__assign)({},Ud),Ey);ns.registerEdge("single-edge",wy),ns.registerEdge("line",{getControlPoints:function(){}},"single-edge"),ns.registerEdge("spline",{getPath:function(e){var t=Hv(e);return t}},"single-edge"),ns.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=qr(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)==(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,d.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=qr(t,o,r)}var f=Bn(t,a),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),ns.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,d.isArray)(this.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,d.isArray)(this.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=Yh(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),ns.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=Yh(r,n,e.curvePosition[0],e.curveOffset[0]),o=Yh(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),ns.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),ns.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),ns.registerEdge("loop",{getPathPoints:function(e){return en(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var Sy={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:H.comboLabel.refX,refY:H.comboLabel.refY,options:{style:{stroke:H.defaultCombo.style.stroke,fill:H.defaultCombo.style.fill,lineWidth:H.defaultCombo.style.lineWidth},labelCfg:{style:{fill:H.comboLabel.style.fill,fontSize:H.comboLabel.style.fontSize,fontFamily:H.windowFontFamily}},stateStyles:(0,m.__assign)({},H.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,d.clone)(e.size||this.options.size||H.defaultCombo.size);return(0,d.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,d.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,d.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,d.isNil)(o)&&(o=this.refX),(0,d.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+a,l;switch(r){case"top":l={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":l={x:-c+o,y:0,textAlign:"left"};break;case"center":l={x:0,y:0,text:e.label,textAlign:"center"};break;default:l={x:c+o,y:0,textAlign:"right"};break}return l.text=e.label,l},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,l=s.height,w=t.getContainer(),M=w.find(function(et){return et.get("name")==="combo-collapsed-substitute-icon"}),O=M&&!M.destroyed,W=t.get("keyShape");if(n&&u){if(O)M.show();else{var $={width:c||r.r*2||r.width,height:l||r.r*2||r.height};M=w.addShape("image",{attrs:(0,m.__assign)({img:f,x:-$.width/2,y:-$.height/2},$),name:"combo-collapsed-substitute-icon",draggable:!0})}W.hide()}else O&&(M.hide(),W.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,m.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},_y=(0,m.__assign)((0,m.__assign)({},Ud),Sy);ns.registerCombo("single-combo",_y),ns.registerCombo("circle",{options:{size:[H.defaultCombo.size[0],H.defaultCombo.size[0]],padding:Math.max.apply(Math,H.defaultCombo.padding),animate:!0,style:{stroke:H.defaultCombo.style.stroke,fill:H.defaultCombo.style.fill,lineWidth:H.defaultCombo.style.lineWidth},labelCfg:{style:{fill:H.comboLabel.style.fill,fontSize:H.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,m.__assign)({},H.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,d.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,d.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,d.isNumber)(o)?o:o[0];else{var u=this.getSize(e);!(0,d.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||H.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var f=(0,m.__assign)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,d.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,d.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,d.isNumber)(o)?o:o[0]:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var f={stroke:e.color},c=t.get("keyShape"),l=(0,d.mix)({},c.attr(),f,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,l,!0)}},"single-combo"),ns.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:H.defaultCombo.style.stroke,fill:H.defaultCombo.style.fill,lineWidth:H.defaultCombo.style.lineWidth},labelCfg:{style:{fill:H.comboLabel.style.fill,fontSize:H.comboLabel.style.fontSize,fontFamily:H.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,m.__assign)({},H.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,d.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,d.isNil)(o)&&(o=this.refX),(0,d.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],f=n.width/2+a[1],c=-n.height/2-a[0],l=n.height/2+a[2],w;switch(r){case"top":w={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":w={x:0,y:l+s,textBaseline:"top",textAlign:"center"};break;case"left":w={x:u+s,y:0,textAlign:"left"};break;case"center":w={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":w={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:w={x:f+o,y:0,textAlign:"right"};break}return w.text=e.label,w},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,d.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,d.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,d.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,d.isNumber)(a.width)||isNaN(a.width)?s=o[0]||H.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,d.isNumber)(a.height)||isNaN(a.height)?u=o[1]||H.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],l=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var w=(0,m.__assign)({x:c,y:l},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},w},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,d.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,d.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,d.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=a.width,f.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var c={stroke:e.color},l=t.get("keyShape"),w=(0,d.mix)({},l.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,w,!1)}},"single-combo"),ns.registerNode("simple-circle",{options:{size:H.defaultNode.size,style:{x:0,y:0,stroke:H.defaultNode.style.stroke,fill:H.defaultNode.style.fill,lineWidth:H.defaultNode.style.lineWidth},labelCfg:{style:{fill:H.nodeLabel.style.fill,fontSize:H.nodeLabel.style.fontSize,fontFamily:H.windowFontFamily}},stateStyles:(0,m.__assign)({},H.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,m.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,d.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),ns.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:H.defaultNode.style.stroke,fill:H.defaultNode.style.fill,lineWidth:H.defaultNode.style.lineWidth},labelCfg:{style:{fill:H.nodeLabel.style.fill,fontSize:H.nodeLabel.style.fontSize,fontFamily:H.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,m.__assign)({},H.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,m.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,d.mix)({},a,s.attr(),u);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),ns.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:H.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(!!r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,m.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,l=a-f/2,w=o-c/2;t.setClip({type:"rect",attrs:(0,m.__assign)({x:l,y:w,width:f,height:c},s)})}else if(n==="ellipse"){var M=r.rx,O=r.ry;t.setClip({type:"ellipse",attrs:(0,m.__assign)({x:a,y:o,rx:M,ry:O},s)})}else if(n==="polygon"){var W=r.points;t.setClip({type:"polygon",attrs:(0,m.__assign)({points:W},s)})}else if(n==="path"){var $=r.path;t.setClip({type:"path",attrs:(0,m.__assign)({path:$},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,m.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var o0={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},s0={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},rc=ns,My=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],u0=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},Cy=Dt,Ay=(0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)({},D),F),b),z),E),p),{transform:Cy,mat3:tt}),Cs=Ay,Ty=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(!!t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=u0(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,m.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),l=this.graph.getCombos(),w=f.length,M=0;M<w;M++){var O=f[M];if(!(!O||O.destroyed)){var W=O.getModel();if(!O.isVisible()){r.push(W);continue}t.push(W)}}for(var $=c.length,M=0;M<$;M++){var et=c[M];if(!(!et||et.destroyed)){var W=et.getModel();if(!et.isVisible()){a.push(W);continue}W.isComboEdge?o.push(W):n.push(W)}}for(var at=l.length,M=0;M<at;M++){var ft=l[M];if(!ft.destroyed){var W=ft.getModel();if(!ft.isVisible()){u.push(W);continue}s.push(W)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(vt){return vt.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){if(e){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;this.initPositions(o.center,s)}n.emit("beforelayout");var u=Promise.resolve();a==null||a.forEach(function(f,c){var l=o[c]||o;u=u.then(function(){var w,M=t.execLayoutMethod(l,c);return c===a.length-1&&((w=o.onAllLayoutEnd)===null||w===void 0||w.call(o)),M})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,m.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,d.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,d.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,l){return c[l.id]=!0,c},{});s=function(l){return f[l.source]&&f[l.target]}}return(0,m.__assign)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,d.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Lv(o);return s.size=[s.width,s.height],s}),a=Object.values((0,d.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Fu(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r,n=this.graph;if(!t)return!1;var a=t.filter(function(ft){return Fu(ft.x)||Fu(ft.y)}),o=a?a.length:0;if(!!o){var s=(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this);if(s)return!1;var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),l=Math.ceil(o/c),w=u/(c-1),M=f/(l-1);(!isFinite(w)||!w)&&(w=0),(!isFinite(M)||!w)&&(M=0);for(var O=e[0]-u/2,W=e[1]-f/2,$=!0,et=0;et<o;et++){var at=a[et];Fu(+at.x)&&($=!1,at.x=et%c*w+O),Fu(+at.y)&&($=!1,at.y=Math.floor(et/c)*M+W)}return $}},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),f0=Ty,Iy=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),c0=Iy,xf=rc.registerNode,l0=rc.registerEdge,Oy=rc.registerCombo,h0=X.registerBehavior,zn=H,Tw={version:H.version,AbstractGraph:n0,BaseGlobal:zn,Util:Cs,Shape:rc,Node:Nd,Edge:zv,Combo:Xv,Hull:r0,registerNode:rc.registerNode,registerEdge:rc.registerEdge,registerCombo:rc.registerCombo,registerBehavior:X.registerBehavior,Arrow:o0,Marker:s0,AbstractLayout:f0,AbstractEvent:c0},Ly=R(10369);function Dy(){return window?window.devicePixelRatio:1}function d0(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function el(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function Eh(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Ny(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function v0(i,e){return i[0]===e[0]&&i[1]===e[1]}var Py=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,ky=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Ry=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,g0=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function p0(i,e){var t=i.match(g0);(0,d.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function By(i,e,t){var r=Py.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,l=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,w=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,M=i.createLinearGradient(s.x,s.y,l,w);return p0(a,M),M}function Fy(i,e,t){var r=ky.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(g0);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,l=f.maxY-f.minY,w=Math.sqrt(c*c+l*l)/2,M=i.createRadialGradient(f.minX+c*n,f.minY+l*a,0,f.minX+c/2,f.minY+l/2,o*w);return p0(s,M),M}function Gy(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=Ry.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function zy(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,d.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return By(i,e,t);if(t[0]==="r")return Fy(i,e,t);if(t[0]==="p")return Gy(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function Uy(i){var e=0,t=0,r=0,n=0;return(0,d.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function Kh(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Wd(i,e){return Kh(i)*Kh(e)?(i[0]*e[0]+i[1]*e[1])/(Kh(i)*Kh(e)):1}function y0(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Wd(i,e))}function m0(i,e){var t=e[1],r=e[2],n=(0,d.mod)((0,d.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,w=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,M=l*l/(t*t)+w*w/(r*r);M>1&&(t*=Math.sqrt(M),r*=Math.sqrt(M));var O=t*t*(w*w)+r*r*(l*l),W=O?Math.sqrt((t*t*(r*r)-O)/O):1;a===o&&(W*=-1),isNaN(W)&&(W=0);var $=r?W*t*w/r:0,et=t?W*-r*l/t:0,at=(s+f)/2+Math.cos(n)*$-Math.sin(n)*et,ft=(u+c)/2+Math.sin(n)*$+Math.cos(n)*et,vt=[(l-$)/t,(w-et)/r],Ft=[(-1*l-$)/t,(-1*w-et)/r],Xt=y0([1,0],vt),Yt=y0(vt,Ft);return Wd(vt,Ft)<=-1&&(Yt=Math.PI),Wd(vt,Ft)>=1&&(Yt=0),o===0&&Yt>0&&(Yt=Yt-2*Math.PI),o===1&&Yt<0&&(Yt=Yt+2*Math.PI),{cx:at,cy:ft,rx:v0(i,[f,c])?0:t,ry:v0(i,[f,c])?0:r,startAngle:Xt,endAngle:Xt+Yt,xRotation:n,arcFlag:a,sweepFlag:o}}var $h=Math.sin,Qh=Math.cos,jd=Math.atan2,qh=Math.PI;function b0(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-a,l=jd(c,f),w=new $d({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Qh(qh/6)+","+10*$h(qh/6)+" L0,0 L"+10*Qh(qh/6)+",-"+10*$h(qh/6),stroke:s,lineWidth:u}});w.translate(n,a),w.rotateAtPoint(n,a,l),i.set(o?"startArrowShape":"endArrowShape",w)}function x0(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,l=o?s:u,w=l.d,M=l.fill,O=l.stroke,W=l.lineWidth,$=(0,m.__rest)(l,["d","fill","stroke","lineWidth"]),et=t-n,at=r-a,ft=jd(at,et);w&&(n=n-Qh(ft)*w,a=a-$h(ft)*w);var vt=new $d({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,m.__assign)((0,m.__assign)({},$),{stroke:O||f,lineWidth:W||c,fill:M})});vt.translate(n,a),vt.rotateAtPoint(n,a,ft),i.set(o?"startArrowShape":"endArrowShape",vt)}function rl(i,e,t,r,n){var a=jd(r-e,t-i);return{dx:Qh(a)*n,dy:$h(a)*n}}function Xd(i,e,t,r,n,a){typeof e.startArrow=="object"?x0(i,e,t,r,n,a,!0):e.startArrow?b0(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function Yd(i,e,t,r,n,a){typeof e.endArrow=="object"?x0(i,e,t,r,n,a,!1):e.endArrow?b0(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var E0={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function rh(i,e){var t=e.attr();for(var r in t){var n=t[r],a=E0[r]?E0[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,d.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=zy(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function Vd(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function Wy(i,e,t){var r=i.get("refreshElements");(0,d.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?Zd(e,t):Hd(e,t)}function Hd(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&Zd(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&Hd(r.cfg.children,e);else{var n=jy(r,e);r.cfg.refresh=n,n&&r.isGroup()&&Hd(r.cfg.children,e)}}}function w0(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&w0(t.cfg.children)}}function Zd(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.refresh=!0,r.isGroup()&&Zd(r.get("children"),e)}}function jy(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&Eh(t,e);return r}function S0(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(!!n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var l=n[c],w=l[0];if(c===0&&a&&a.d){var M=i.getStartTangent();f=rl(M[0][0],M[0][1],M[1][0],M[1][1],a.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var O=n[c+1];if(O[0]==="Z"){var M=i.getEndTangent();f=rl(M[0][0],M[0][1],M[1][0],M[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var M=i.getEndTangent();f=rl(M[0][0],M[0][1],M[1][0],M[1][1],o.d)}var W=f.dx,$=f.dy;switch(w){case"M":e.moveTo(l[1]-W,l[2]-$),u=[l[1],l[2]];break;case"L":e.lineTo(l[1]-W,l[2]-$);break;case"Q":e.quadraticCurveTo(l[1],l[2],l[3]-W,l[4]-$);break;case"C":e.bezierCurveTo(l[1],l[2],l[3],l[4],l[5]-W,l[6]-$);break;case"A":{var et=void 0;r?(et=r[c],et||(et=m0(s,l),r[c]=et)):et=m0(s,l);var at=et.cx,ft=et.cy,vt=et.rx,Ft=et.ry,Xt=et.startAngle,Yt=et.endAngle,he=et.xRotation,_e=et.sweepFlag;if(e.ellipse)e.ellipse(at,ft,vt,Ft,he,Xt,Yt,1-_e);else{var oe=vt>Ft?vt:Ft,Ue=vt>Ft?1:vt/Ft,or=vt>Ft?Ft/vt:1;e.translate(at,ft),e.rotate(he),e.scale(Ue,or),e.arc(0,0,oe,Xt,Yt,1-_e),e.scale(1/Ue,1/or),e.rotate(-he),e.translate(-at,-ft)}break}case"Z":e.closePath();break;default:break}if(w==="Z")s=u;else{var Kr=l.length;s=[l[Kr-2],l[Kr-1]]}}}}function _0(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function Xy(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=Ny(t,n):r?e=t:a&&(e=n)}return e}function Yy(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,d.each)(i,function(a){var o=Xy(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,d.min)(e),minY:(0,d.min)(t),maxX:(0,d.max)(r),maxY:(0,d.max)(n)}}function Vy(i,e){return!i||!e||!Eh(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var Hy=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){_0(this,t)},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),rh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,d.each)(t,function(w){var M=w.cfg.cacheCanvasBBox;M&&w.cfg.isInView&&(r.push(M.minX,M.maxX),n.push(M.minY,M.maxY))});var a=null;if(r.length){var o=(0,d.min)(r),s=(0,d.max)(r),u=(0,d.min)(n),f=(0,d.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var l=c.getViewRange();this.set("isInView",Eh(a,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),rh(t,this),this._applyClip(t,this.getClip()),Vd(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}($l),M0=Hy,Zy=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return M0},e.prototype.onCanvasChange=function(t){_0(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=ql(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,f=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),rh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!Eh(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),rh(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=Eh(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,d.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,d.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(ec),xu=Zy,Ky=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,l=o/2,w=d0(u,f,t,r);return a&&n?w<=c+l:a?w<=c:n?w>=c-l&&w<=c+l:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(xu),$y=Ky;function Jh(i,e,t,r){return i/(t*t)+e/(r*r)}var Qy=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,l=s.rx,w=s.ry,M=(t-f)*(t-f),O=(r-c)*(r-c);return a&&n?Jh(M,O,l+u,w+u)<=1:a?Jh(M,O,l,w)<=1:n?Jh(M,O,l-u,w-u)>=1&&Jh(M,O,l+u,w+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(xu),qy=Qy;function C0(i){return i instanceof HTMLElement&&(0,d.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var Jy=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,d.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):C0(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,l=r.sheight,w=r.img;(w instanceof Image||C0(w))&&(!(0,d.isNil)(u)&&!(0,d.isNil)(f)&&!(0,d.isNil)(c)&&!(0,d.isNil)(l)?t.drawImage(w,u,f,c,l,n,a,o,s):t.drawImage(w,n,a,o,s))},e}(xu),tm=Jy;function nc(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),f=Math.min(e,r),c=Math.max(e,r),l=n/2;return a>=s-l&&a<=u+l&&o>=f-l&&o<=c+l?Wr.pointToLine(i,e,t,r,a,o)<=n/2:!1}var em=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&Xd(this,t,a,o,r,n),u&&Yd(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,l=s.y2;return nc(u,f,c,l,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},l={dx:0,dy:0};u&&u.d&&(c=rl(n,a,o,s,r.startArrow.d)),f&&f.d&&(l=rl(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,a+c.dy),t.lineTo(o-l.dx,s-l.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return Wr.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return Wr.pointAt(n,a,o,s,t)},e}(xu),rm=em,nm={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(1/3*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(1/3*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},am=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,d.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,d.isFunction)(a))s=a,u=s(r,n,o),u=Je(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");S0(this,t,{path:r},n)},e.Symbols=nm,e}(xu),im=am;function A0(i,e,t){var r=So();return i.createPath(r),r.isPointInPath(e,t)}var om=1e-6;function Kd(i){return Math.abs(i)<om?0:i<0?-1:1}function sm(i,e,t){return(t[0]-i[0])*(e[1]-i[1])==(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function T0(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(sm(o,s,[e,t]))return!0;Kd(o[1]-t)>0!=Kd(s[1]-t)>0&&Kd(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function wh(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return d0(f.x,f.y,o,s)<=a/2}var um=Dt;function fm(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function cm(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],f=u.currentPoint,c=u.params,l=u.prePoint,w=u.box;if(!(w&&!el(w.x-o,w.y-o,w.width+e,w.height+e,t,r))){switch(u.command){case"L":case"Z":a=nc(l[0],l[1],f[0],f[1],e,t,r);break;case"Q":var M=A.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],t,r);a=M<=e/2;break;case"C":var O=wt.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);a=O<=e/2;break;case"A":var W=u.arcParams,$=W.cx,et=W.cy,at=W.rx,ft=W.ry,vt=W.startAngle,Ft=W.endAngle,Xt=W.xRotation,Yt=[t,r,1],he=at>ft?at:ft,_e=at>ft?1:at/ft,oe=at>ft?ft/at:1,Ue=um(null,[["t",-$,-et],["r",-Xt],["s",1/_e,1/oe]]);Yi.transformMat3(Yt,Yt,Ue),a=wh(0,0,he,vt,Ft,e,Yt[0],Yt[1]);break;default:break}if(a)break}}return a}function lm(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var td=(0,m.__assign)({hasArc:fm,extractPolygons:lm,isPointInStroke:cm},I);function I0(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=T0(a,e,t),r)break}return r}var hm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Je(t);var r=td.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Tv(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();Xd(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();Yd(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=td.isPointInStroke(s,o,t,r,c)}if(!f&&a)if(u)f=A0(this,t,r);else{var l=this.attr("path"),w=td.extractPolygons(l);f=I0(w.polygons,t,r)||I0(w.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");S0(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,d.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,d.each)(r,function(c,l){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),a=l)});var s=o[a];if((0,d.isNil)(s)||(0,d.isNil)(a))return null;var u=s.length,f=o[a+1];return wt.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",td.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,f=this.get("curve");if(!!f){if((0,d.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(t+=wt.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,d.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(a=[],a[0]=r/t,o=wt.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(xu),$d=hm;function O0(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],f=i[o+1][0],c=i[o+1][1];if(nc(s,u,f,c,e,t,r))return!0}if(n){var l=i[0],w=i[a-1];if(nc(l[0],l[1],w[0],w[1],e,t,r))return!0}return!1}var dm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=O0(s,o,t,r,!0)),!u&&a&&(u=T0(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(xu),vm=dm,gm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];a&&Xd(this,t,n[1][0],n[1][1],u,f),o&&Yd(this,t,n[s-2][0],n[s-2][1],c,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return O0(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];if(a&&a.d){var w=rl(u,f,n[1][0],n[1][1],a.d);u+=w.dx,f+=w.dy}if(o&&o.d){var w=rl(n[s-2][0],n[s-2][1],c,l,o.d);c-=w.dx,l-=w.dy}t.beginPath(),t.moveTo(u,f);for(var M=0;M<s-1;M++){var O=n[M];t.lineTo(O[0],O[1])}t.lineTo(c,l)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,d.isNil)(r)?(this.set("totalLength",ua.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,d.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),Wr.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,d.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=Wr.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(xu),pm=gm;function ym(i,e,t,r,n,a,o){var s=n/2;return el(i-s,e-s,t,n,a,o)||el(i+t-s,e-s,n,r,a,o)||el(i+s,e+r-s,t,n,a,o)||el(i-s,e+s,n,r,a,o)}function mm(i,e,t,r,n,a,o,s){var u=a/2;return nc(i+n,e,i+t-n,e,a,o,s)||nc(i+t,e+n,i+t,e+r-n,a,o,s)||nc(i+t-n,e+r,i+n,e+r,a,o,s)||nc(i,e+r-n,i,e+n,a,o,s)||wh(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||wh(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||wh(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||wh(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var bm=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,l=s.height,w=s.radius;if(w){var O=!1;return n&&(O=mm(u,f,c,l,w,o,t,r)),!O&&a&&(O=A0(this,t,r)),O}else{var M=o/2;if(a&&n)return el(u-M,f-M,c+M,l+M,t,r);if(a)return el(u,f,c,l,t,r);if(n)return ym(u,f,c,l,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var f=Uy(u),c=f[0],l=f[1],w=f[2],M=f[3];t.moveTo(n+c,a),t.lineTo(n+o-l,a),l!==0&&t.arc(n+o-l,a+l,l,-Math.PI/2,0),t.lineTo(n+o,a+s-w),w!==0&&t.arc(n+o-w,a+s-w,w,0,Math.PI/2),t.lineTo(n+M,a+s),M!==0&&t.arc(n+M,a+s-M,M,Math.PI/2,Math.PI),t.lineTo(n,a+c),c!==0&&t.arc(n+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(xu),xm=bm,Em=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Wo(t)},e.prototype._setText=function(t){var r=null;(0,d.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,f=a.fontSize*1,c=this._getSpaceingY(),l=Uo(a.text,a.fontSize,a.lineHeight),w;(0,d.each)(r,function(M,O){w=u+O*(c+f)-l+f,o==="middle"&&(w+=l-f-(l-f)/2),o==="top"&&(w+=l-f),(0,d.isNil)(M)||(n?t.fillText(M,s,w):t.strokeText(M,s,w))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,d.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,d.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,d.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(xu),wm=Em;function Sm(i,e){if(e){var t=xo(e);return zs(t,i)}return i}function L0(i,e,t){var r=i.getTotalMatrix();if(r){var n=Sm([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function D0(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!hc(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=L0(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function N0(i,e,t){if(!D0(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=N0(s,e,t);else if(D0(s,e,t)){var u=s,f=L0(s,e,t),c=f[0],l=f[1];u.isInShape(c,l)&&(r=s)}if(r)break}return r}var _m=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return y},e.prototype.getGroupBase=function(){return M0},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Dy();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=N0(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=Yy(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=Vy(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,d.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),rh(t,this),Vd(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),rh(t,this),Wy(this,n,a),Vd(t,n,a),t.restore()):r.length&&w0(r),(0,d.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,d.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Kl),Ef=_m,Iw="0.5.12",Qd={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},oi={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},Ow=null;function Qs(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function P0(i){var e=Qd[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=Qs(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function k0(i,e){var t=i.get("el"),r=(0,d.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function Mm(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function Cm(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Sh(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function _h(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){P0(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function R0(i,e){e.forEach(function(t){t.draw(i)})}function B0(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")Mm(o,a.indexOf(i));else if(e==="sort"){var c=i.get("children");c&&c.length&&k0(i,function(l,w){return c.indexOf(l)-c.indexOf(w)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Sh(i):e==="clip"?_h(i,r):e==="attr"||e==="add"&&i.draw(r)}}var Am=function(i){(0,m.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Qs("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){B0(this,t)},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),_h(this,t),this.createPath(t),r.length&&R0(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){oi[s]&&a.setAttribute(oi[s],o)}),Sh(this)},e}($l),F0=Am,Tm=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return F0},e.prototype.onCanvasChange=function(t){B0(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=ql(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,l=a-c,w=o-c,M=a+s+c,O=o+u+c;return{x:l,y:w,minX:l,minY:w,maxX:M,maxY:O,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||P0(this),_h(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,l=n.lineWidth,w=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),f&&w.setAttribute(oi.fillOpacity,f)),this.canStroke&&l>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&w.setAttribute(oi.strokeOpacity,c),l&&w.setAttribute(oi.lineWidth,l))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(oi[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(oi[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(oi[r],"url(#"+o+")")}else a.setAttribute(oi[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,f=a.shadowColor;(o||s||u||f)&&Cm(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&Sh(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(ec),qs=Tm,Im=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):oi[s]&&a.setAttribute(oi[s],o)})},e}(qs),Om=Im,Lm=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,d.each)(r||n,function(f,c){oi[c]&&a.setAttribute(oi[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(qs),Dm=Lm,Nm=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):oi[s]&&a.setAttribute(oi[s],o)})},e}(qs),Pm=Nm,km=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,d.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):oi[u]&&o.setAttribute(oi[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,d.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,d.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(qs),Rm=km,Bm=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,d.isObject)(o)?t.addArrow(n,oi[s]):t.getDefaultArrow(n,oi[s]);a.setAttribute(oi[s],"url(#"+u+")")}else a.removeAttribute(oi[s]);else oi[s]&&a.setAttribute(oi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return Wr.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return Wr.pointAt(n,a,o,s,t)},e}(qs),Fm=Bm,ed={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(1/3*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(1/3*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},G0={get:function(i){return ed[i]},register:function(i,e){ed[i]=e},remove:function(i){delete ed[i]},getAll:function(){return ed}},Gm=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,d.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,d.isFunction)(o)?s=o:s=G0.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=G0,e}(qs),zm=Gm,Um=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,d.each)(r||a,function(s,u){if(u==="path"&&(0,d.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,d.isObject)(s)?t.addArrow(a,oi[u]):t.getDefaultArrow(a,oi[u]);o.setAttribute(oi[u],"url(#"+f+")")}else o.removeAttribute(oi[u]);else oi[u]&&o.setAttribute(oi[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(qs),Wm=Um,jm=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="points"&&(0,d.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):oi[s]&&a.setAttribute(oi[s],o)})},e}(qs),Xm=jm,Ym=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="points"&&(0,d.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):oi[s]&&a.setAttribute(oi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,d.isNil)(r)?(this.set("totalLength",ua.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,d.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),Wr.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,d.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=Wr.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(qs),Vm=Ym,Hm=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Zm=/[^\s,]+/gi;function Km(i){var e=0,t=0,r=0,n=0;return(0,d.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function Lw(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(Hm),each(i,function(e,t){if(e=e.match(Zm),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var $m=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,d.each)(r||a,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(c)===-1&&oi[c]&&o.setAttribute(oi[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=Km(s);(0,d.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(qs),Qm=$m,z0=.3,qm={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},Jm={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},t1={left:"left",start:"left",center:"middle",right:"end",end:"end"},e1=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,m.__assign)((0,m.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,d.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?Sh(n):oi[u]&&o.setAttribute(oi[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=uu();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",Jm[n]||"alphabetic"):t.setAttribute("alignment-baseline",qm[n]||"baseline"),t.setAttribute("text-anchor",t1[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,d.each)(u,function(l,w){w===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-f+'em">'+l+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+l+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(f-1)/2+'em">'+l+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(f+z0)+'em">'+l+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(f-1)-z0)+'em">'+l+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+l+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(qs),r1=e1,n1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,a1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,i1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function U0(i){var e=i.match(i1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,d.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function o1(i,e){var t=n1.exec(i),r=(0,d.mod)((0,d.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=U0(n)}function s1(i,e){var t=a1.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=U0(o)}var u1=function(){function i(e){this.cfg={};var t=null,r=(0,d.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=Qs("linearGradient"),o1(e,t)):(t=Qs("radialGradient"),s1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),f1=u1,c1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},l1={x:"-40%",y:"-40%",width:"200%",height:"200%"},h1=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=Qs("filter");return(0,d.each)(l1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,d.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,d.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[c1[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),d1=h1,v1=function(){function i(e,t){this.cfg={};var r=Qs("marker"),n=(0,d.uniqueId)("marker_");r.setAttribute("id",n);var a=Qs("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY",""+5)},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,d.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),W0=v1,g1=function(){function i(e){this.type="clip",this.cfg={};var t=Qs("clipPath");this.el=t,this.id=(0,d.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),p1=g1,y1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,m1=function(){function i(e){this.cfg={};var t=Qs("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=Qs("image");t.appendChild(r);var n=(0,d.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=y1.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),b1=m1,x1=function(){function i(e){var t=Qs("defs"),r=(0,d.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new W0(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new f1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new W0(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new d1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new b1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new p1(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),E1=x1,w1=function(i){(0,m.__extends)(e,i);function e(t){return i.call(this,(0,m.__assign)((0,m.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return F0},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!Qd[a.tagName]){for(var o=a.parentNode;o&&!Qd[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=Qs("svg"),r=new E1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&k0(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Sh(this):t==="clip"?_h(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();_h(this,t),r.length&&R0(t,r)},e}(Kl),Mh=w1,Dw="0.5.6",S1=R(6767),Ch=R.n(S1),_1=R(17621),rd=R.n(_1),nd=2,j0=.16,M1=.05,C1=.05,A1=.15,X0=5,Y0=4,T1=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function V0(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-nd*e:Math.round(i.h)+nd*e:r=t?Math.round(i.h)+nd*e:Math.round(i.h)-nd*e,r<0?r+=360:r>=360&&(r-=360),r}function H0(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-j0*e:e===Y0?r=i.s+j0:r=i.s+M1*e,r>1&&(r=1),t&&e===X0&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function Z0(i,e,t){var r;return t?r=i.v+C1*e:r=i.v-A1*e,r>1&&(r=1),Number(r.toFixed(2))}function ad(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=rd()(i),n=X0;n>0;n-=1){var a=r.toHsv(),o=rd()({h:V0(a,n,!0),s:H0(a,n,!0),v:Z0(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=Y0;s+=1){var u=r.toHsv(),f=rd()({h:V0(u,s),s:H0(u,s),v:Z0(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?T1.map(function(c){var l=c.index,w=c.opacity,M=rd().mix(e.backgroundColor||"#141414",t[l],w*100).toHexString();return M}):t}var qd={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},hs={},Jd={};Object.keys(qd).forEach(function(i){hs[i]=ad(qd[i]),hs[i].primary=hs[i][5],Jd[i]=ad(qd[i],{theme:"dark",backgroundColor:"#141414"}),Jd[i].primary=Jd[i][5]});var Nw=hs.red,Pw=hs.volcano,kw=hs.gold,Rw=hs.orange,Bw=hs.yellow,Fw=hs.lime,Gw=hs.green,zw=hs.cyan,Uw=hs.blue,Ww=hs.geekblue,jw=hs.purple,Xw=hs.magenta,Yw=hs.grey,Jo=function(e,t,r){var n=Ch()(e),a=Ch()(t);return Ch()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},I1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=Jo(t,e,.05).rgb().toString(),a=Jo(t,e,.1).rgb().toString(),o=Jo(t,e,.2).rgb().toString(),s=Jo(t,e,.4).rgb().toString(),u=Jo(t,r,.02).rgb().toString(),f=Jo(t,r,.05).rgb().toString(),c=Jo(t,r,.1).rgb().toString(),l=Jo(t,r,.2).rgb().toString(),w=Jo(t,r,.3).rgb().toString(),M=ad(e,{theme:"default",backgroundColor:t}),O=Ch()(e).hex().toLowerCase(),W=M.indexOf(O),$=e;return W!==-1&&($=M[W+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:$,highlightFill:o,disableStroke:w,disableFill:f,edgeMainStroke:w,edgeActiveStroke:e,edgeInactiveStroke:l,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:w,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:w,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:$,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:f}},O1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=Jo(t,e,.2).rgb().toString(),a=Jo(t,e,.3).rgb().toString(),o=Jo(t,e,.6).rgb().toString(),s=Jo(t,e,.8).rgb().toString(),u=Jo(t,r,.2).rgb().toString(),f=Jo(t,r,.25).rgb().toString(),c=Jo(t,r,.3).rgb().toString(),l=Jo(t,r,.4).rgb().toString(),w=Jo(t,r,.5).rgb().toString(),M=ad(e,{theme:"dark",backgroundColor:t}),O=Ch()(e).hex().toLowerCase(),W=M.indexOf(O),$=e;return W!==-1&&($=M[W+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:w,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:l,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:l,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:$,comboHighlightFill:f,comboDisableStroke:l,comboDisableFill:u}},tv=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?I1(e,t,"rgb(150, 150, 150)"):O1(e,t,"#777")},L1=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(tv(o,t,r,n))}),a},D1="rgb(95, 149, 255)",N1="rgb(255, 255, 255)",K0="rgb(0, 0, 0)",Ja=tv(D1,N1),nl={version:"0.8.0",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Ja.mainStroke,fill:Ja.mainFill},size:20,color:Ja.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Ja.activeFill,stroke:Ja.activeStroke}},nodeStateStyles:{active:{fill:Ja.activeFill,stroke:Ja.activeStroke,lineWidth:2,shadowColor:Ja.mainStroke,shadowBlur:10},selected:{fill:Ja.selectedFill,stroke:Ja.selectedStroke,lineWidth:4,shadowColor:Ja.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Ja.highlightFill,stroke:Ja.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Ja.inactiveFill,stroke:Ja.inactiveStroke,lineWidth:1},disable:{fill:Ja.disableFill,stroke:Ja.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:K0,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Ja.edgeMainStroke,lineAppendWidth:2},color:Ja.edgeMainStroke},edgeStateStyles:{active:{stroke:Ja.edgeActiveStroke,lineWidth:1},selected:{stroke:Ja.edgeSelectedStroke,lineWidth:2,shadowColor:Ja.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ja.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Ja.edgeInactiveStroke,lineWidth:1},disable:{stroke:Ja.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:K0,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Ja.comboMainFill,lineWidth:1,stroke:Ja.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Ja.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Ja.comboActiveStroke,lineWidth:1,fill:Ja.comboActiveFill},selected:{stroke:Ja.comboSelectedStroke,lineWidth:2,fill:Ja.comboSelectedFill,shadowColor:Ja.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ja.comboHighlightStroke,lineWidth:2,fill:Ja.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Ja.comboInactiveStroke,fill:Ja.comboInactiveFill,lineWidth:1},disable:{stroke:Ja.comboDisableStroke,fill:Ja.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function id(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var P1=Cs.cloneEvent,k1=Cs.isViewportChanged,R1=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,d.wrapBehavior)(this,"onCanvasEvents"),f=(0,d.wrapBehavior)(this,"onExtendEvents"),c=(0,d.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(id(s,"wheel",c)),typeof window!="undefined"&&(a.push(id(window,"keydown",f)),a.push(id(window,"keyup",f)),a.push(id(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,d.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),k1(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var l=e.getItemRoot(o);if(!l){n.emit(s,t);return}var w=l.get("item");if(!w.destroyed){var M=w.getType();if(t.target=o,t.item=w,t.canvasX===t.x&&t.canvasY===t.y){var O=n.getCanvasByPoint(t.x,t.y);t.canvasX=O.x,t.canvasY=O.y}t.name&&!t.name.includes(":")?(n.emit("".concat(M,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,M)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,d.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=P1(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,d.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(c0),B1=R1,Ha=R(83360),F1=R(81746),od=R.n(F1),$0=Cs.traverseTree,G1=function(e,t){var r;return e?(0,d.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},z1=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,l=n[o],w=l.length;r[o*4+2]=c,r[o*4+3]=l.length,f=Math.max(f,l.length);for(var M=0;M<w;++M){var O=l[M];r.push(+O)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},U1=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var f=t[s];a[o[f.source]].push(o[f.target]),a[o[f.source]].push(r(f)),a[o[f.target]].push(o[f.source]),a[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var l=n.length,w=a[s],M=w.length;n[s*4+2]=l,n[s*4+3]=M/2,c=Math.max(c,M/2);for(var O=0;O<M;++O){var W=w[O];n.push(+W)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},W1=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,a.push(f.x),a.push(f.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var l=0;for(u=0;u<e.length;u++){var w=a.length,M=o[u],O=M.length;a[u*4+2]=w+1048576*O/4,a[u*4+3]=0,l=Math.max(l,O/4);for(var W=0;W<O;++W){var $=M[W];a.push(+$)}}for(;a.length%4!=0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:l}},j1=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!=0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},X1=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!=0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},Y1=function(e,t){var r=["V","TB","BT"],n={x:Infinity,y:Infinity},a={x:-Infinity,y:-Infinity},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;$0(e,function(l){return u++,l.x>a.x&&(a.x=l.x),l.x<n.x&&(n.x=l.x),l.y>a.y&&(a.y=l.y),l.y<n.y&&(n.y=l.y),!0});var f=Math.PI*2/u,c=a[s]-n[s];return c===0||$0(e,function(l){var w=(l[s]-n[s])/c*(Math.PI*2-f)+f,M=Math.abs(o==="x"?l.x-e.x:l.y-e.y);return l.x=M*Math.cos(w),l.y=M*Math.sin(w),!0}),e},Q0=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},V1=(0,m.__assign)((0,m.__assign)((0,m.__assign)((0,m.__assign)({},Cs),T),x),S),wf=V1,H1=wf.radialLayout,Z1=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=od()[t.type](r,t.config);return H1(n),n};return}this.layoutMethod=function(r){return od()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),K1=Z1;(0,Ha.registerLayout)("grid",Ha.GridLayout),(0,Ha.registerLayout)("random",Ha.RandomLayout),(0,Ha.registerLayout)("force",Ha.ForceLayout),(0,Ha.registerLayout)("circular",Ha.CircularLayout),(0,Ha.registerLayout)("dagre",Ha.DagreLayout),(0,Ha.registerLayout)("dagreCompound",Ha.DagreCompoundLayout),(0,Ha.registerLayout)("radial",Ha.RadialLayout),(0,Ha.registerLayout)("concentric",Ha.ConcentricLayout),(0,Ha.registerLayout)("mds",Ha.MDSLayout),(0,Ha.registerLayout)("fruchterman",Ha.FruchtermanLayout),(0,Ha.registerLayout)("fruchterman-gpu",Ha.FruchtermanGPULayout),(0,Ha.registerLayout)("gForce",Ha.GForceLayout),(0,Ha.registerLayout)("force2",Ha.Force2Layout),(0,Ha.registerLayout)("gForce-gpu",Ha.GForceGPULayout),(0,Ha.registerLayout)("comboForce",Ha.ComboForceLayout),(0,Ha.registerLayout)("comboCombined",Ha.ComboCombinedLayout),(0,Ha.registerLayout)("forceAtlas2",Ha.ForceAtlas2Layout);var $1=function(e,t){t.isCustomLayout=!0,Ha.Layouts[e]=(0,Ha.registerLayout)(e,t)},Q1=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),q1=Q1,J1=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@latest/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,l=c.nodes,w=c.edges,M=c.layoutCfg,O=M===void 0?{}:M,W=O.type,$=layout.getLayoutByName(W);if(!$){this.postMessage({type:n.ERROR,message:"layout ".concat(W," not found")});break}var et;O.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:l}),et==null||et.destroy()},et=new $(O),et.init({nodes:l,edges:w}),et.execute();break}case n.GPURUN:{var at=s.data,ft=at.nodes,w=at.edges,vt=at.layoutCfg,O=vt===void 0?{}:vt,Ft=at.canvas,W=O.type,$=layout.getLayoutByName(W);if(!$){this.postMessage({type:n.ERROR,message:"layout ".concat(W," not found")});break}if(W.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(W," does not support GPU")});break}var Xt=new $(O);Xt.init({nodes:ft,edges:w}),Xt.executeWithWorker(Ft,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new q1(t,e);return r},nh={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function ev(i){return ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ev(i)}var q0=function(e){return setTimeout(e,16)},J0=function(e){return clearTimeout(e)},sd={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||q0;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||J0;return t(e)}},tb=["fruchterman","gForce"],eb=["force","grid","circular"],rb=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=J1(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;!this.worker||(this.worker.terminate(),this.worker=null,t.requestId&&(sd.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(sd.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,m.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,w,M,O,W,w,$;return(0,m.__generator)(this,function(et){switch(et.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(this.hasGPUVersion(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),Cs.isForce(u)?(f=t.onTick,c=t.animate,l=c===void 0&&(u==="force"||u==="force2"),w=function(){f&&f(),(c||l)&&s.refreshPositions()},t.tick=w):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),M=!1;try{O=new Ha.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=O}catch(at){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return M=O.enableTick,M&&(W=t.onTick,w=function(){W&&W(),s.refreshPositions()},O.tick=w),$=this.filterLayoutData(this.data,t),ob($,r),O.init($),s.emit("beforesublayout",{type:u}),[4,O.execute()];case 1:return et.sent(),O.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,m.__awaiter)(n,void 0,void 0,function(){var s,u,f;return(0,m.__generator)(this,function(c){switch(c.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},f=this.filterLayoutData(this.data,r),t.init(f),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return c.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n=this.graph;if(!(!n||n.get("destroyed"))){this.data=this.setDataFromGraph();var a=this.data,o=a.nodes,s=a.hiddenNodes;if(!o)return!1;var u=n.get("width"),f=n.get("height"),c={};Object.assign(c,{width:u,height:f,center:[u/2,f/2]},this.layoutCfg),this.layoutCfg=c;var l=c.type,w=this.destoryLayoutMethods();n.emit("beforelayout"),(w==null?void 0:w.length)&&l&&(w==null?void 0:w.length)===1&&w[0]===l?this.tweakInit():this.initPositions(c.center,o),this.initPositions(c.center,s),l&&l.split("-")[1]==="gpu"&&(l=l.split("-")[0],c.gpuEnabled=!0);var M=!1;c.gpuEnabled&&(M=!0,Q0().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),M=!1)),M&&!this.hasGPUVersion(l)&&(console.warn("The '".concat(l,"' layout does not support GPU calculation for now, it will run in CPU.")),M=!1),this.isGPU=M;var O=c.onLayoutEnd,W=c.layoutEndFormatted,$=c.adjust;if(W||(c.layoutEndFormatted=!0,c.onAllLayoutEnd=function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(ft){switch(ft.label){case 0:return O&&O(o),this.refreshLayout(),$&&c.pipes?[4,this.adjustPipesBox(this.data,$)]:[3,2];case 1:ft.sent(),this.refreshLayout(),ft.label=2;case 2:return n.emit("afterlayout"),[2]}})})}),this.stopWorker(),c.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var et=Promise.resolve(),at=!1;return c.type?(at=!0,et=et.then(function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(ft){switch(ft.label){case 0:return[4,this.execLayoutMethod(c,0)];case 1:return[2,ft.sent()]}})})})):c.pipes&&(at=!0,c.pipes.forEach(function(ft,vt){et=et.then(function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(Ft){switch(Ft.label){case 0:return[4,this.execLayoutMethod(ft,vt)];case 1:return[2,Ft.sent()]}})})})})),at?et.then(function(){c.onAllLayoutEnd&&c.onAllLayoutEnd(),t&&t()}).catch(function(ft){console.warn("graph layout failed,",ft)}):(n.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(!!(a==null?void 0:a.length)){var s={};a.forEach(function(c){var l=c.x,w=c.y;!isNaN(l)&&!isNaN(w)&&(s[c.id]={x:l,y:w},c.mass=c.mass||2)}),o.forEach(function(c){var l=c.source,w=c.target,M=s[l],O=s[w];!M&&O?s[l]={x:O.x+(Math.random()-.5)*80,y:O.y+(Math.random()-.5)*80}:!O&&M&&(s[w]={x:M.x+(Math.random()-.5)*80,y:M.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");a.forEach(function(c){var l=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=l.x,c.y=l.y})}},e.prototype.initWithPreset=function(){var t=this,r=t.layoutCfg,n=t.data,a=r.preset;if(!(a==null?void 0:a.type)||!Ha.Layouts[a==null?void 0:a.type])return!1;var o=new Ha.Layouts[a==null?void 0:a.type](a);return o.layout(n),delete r.preset,!0},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),l=!1;if(o.type)l=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){l=!0;for(var w=function(et){c=c.then(function(){return n.runWebworker(u,t,et)})},M=0,O=o.pipes;M<O.length;M++){var W=O[M];w(W)}}return l&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function($){console.error("layout failed",$)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),l=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,w=ab(n,function(O){return typeof O!="function"});if(!l)t.postMessage({type:nh.RUN,nodes:u,edges:f,layoutCfg:w});else{var M=c.transferControlToOffscreen();w.type="".concat(w.type,"-gpu"),t.postMessage({type:nh.GPURUN,nodes:u,edges:f,layoutCfg:w,canvas:M},[M])}return new Promise(function(O,W){t.onmessage=function($){a.handleWorkerMessage(O,W,$,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,f=s.workerData,c=n.data,l=c.type,w=function(){o.onTick&&o.onTick()};switch(l){case nh.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=sd.requestAnimationFrame(function(){rv(a,c),u.refreshPositions(),w(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=sd.requestAnimationFrame(function(){rv(a,f.currentTickData),u.refreshPositions(),f.requestId2=null,w(),t()})),f.requestId=null}));break;case nh.END:f.currentTick==null&&(rv(a,c),t());break;case nh.GPUEND:f.currentTick==null&&(ib(a,c),t());break;case nh.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,m.__rest)(t,["disableTriggerLayout"]),f=(0,d.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o==null?void 0:o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,c=c.then(function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(w){switch(w.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,w.sent()]}})})})):(o==null?void 0:o.length)&&(l=!0,o.forEach(function(w,M){var O=f.pipes[M];c=c.then(function(){return(0,m.__awaiter)(r,void 0,void 0,function(){return(0,m.__generator)(this,function(W){switch(W.label){case 0:return[4,this.updateLayoutMethod(w,O)];case 1:return[2,W.sent()]}})})})})),l&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(w){console.warn("layout failed",w)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;(o==null?void 0:o.length)||a(),eb.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(O){return Math.max(O.height,O.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,l=(0,d.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(M,O){var W,$,et,at=M.x-((W=l[O])===null||W===void 0?void 0:W.x),ft=M.y-(($=l[O])===null||$===void 0?void 0:$.y);(et=f[O])===null||et===void 0||et.forEach(function(vt){vt.x+=at,vt.y+=ft})}),a()};var w=new Ha.Layouts[r](s);w.layout({nodes:c})})},e.prototype.hasGPUVersion=function(t){return tb.includes(t)},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(f0),nb=rb;function rv(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function ab(i,e){var t={};return i&&ev(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function ib(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function ob(i,e){var t;if(!!((t=i==null?void 0:i.nodes)===null||t===void 0?void 0:t.length)){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}var Ah,nv,tg,av;function sb(){Ah=document.createElement("table"),nv=document.createElement("tr"),tg=/^\s*<(\w+|!)[^>]*>/,av={tr:document.createElement("tbody"),tbody:Ah,thead:Ah,tfoot:Ah,td:nv,th:nv,"*":document.createElement("div")}}function co(i){Ah||sb();var e=tg.test(i)&&RegExp.$1;(!e||!(e in av))&&(e="*");var t=av[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var eg=Dt,ub="svg",fb=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new nb(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new B1(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===ub)u=new Mh({container:t,width:a,height:o});else{var f={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new Ef(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,d.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,m.__awaiter)(this,void 0,void 0,function(){var o,s,u;return(0,m.__generator)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var l=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=l,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),l=c.getRenderer(),w=s||c.get("el"),M="";t||(t="image/png"),setTimeout(function(){return(0,m.__awaiter)(u,void 0,void 0,function(){var O,W,$,et,at,ft,vt,Ft,Xt,Yt;return(0,m.__generator)(this,function(he){switch(he.label){case 0:return l!=="svg"?[3,1]:(O=w.cloneNode(!0),W=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),$=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",W),$.replaceChild(O,$.documentElement),et=new XMLSerializer().serializeToString($),M="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(et)),[3,4]);case 1:return at=void 0,ft=w.getContext("2d"),vt=a||this.get("width"),Ft=o||this.get("height"),Xt=void 0,f?[4,this.downloadImageWatermark(f,ft,vt,Ft)]:[3,3];case 2:he.sent(),he.label=3;case 3:if(r){Yt=typeof window!="undefined"?window.devicePixelRatio:1;try{at=ft.getImageData(0,0,vt*Yt,Ft*Yt),Xt=ft.globalCompositeOperation,ft.globalCompositeOperation="destination-over",ft.fillStyle=r,ft.fillRect(0,0,vt,Ft)}catch(_e){console.error("Download image failed. Out of memory at ImageData creation")}}M=w.toDataURL(t),r&&(ft.clearRect(0,0,vt,Ft),ft.putImageData(at,0,0),ft.globalCompositeOperation=Xt),he.label=4;case 4:return n&&n(M),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var l=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var w=void 0,M=o.getContext("2d"),O=Math.max(this.get("width"),500),W=Math.max(this.get("height"),500),$=void 0;if(r){var et=typeof window!="undefined"&&window.devicePixelRatio||1;try{w=M.getImageData(0,0,O*et,W*et),$=M.globalCompositeOperation,M.globalCompositeOperation="destination-over",M.fillStyle=r,M.fillRect(0,0,O,W)}catch(at){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(M.clearRect(0,0,O,W),M.putImageData(w,0,0),M.globalCompositeOperation=$)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),f=co('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,l=n?n.padding:void 0;l?(0,d.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var w=o+l[0]+l[2],M=s+l[1]+l[3],O={container:f,height:w,width:M,quickHit:!0},W=u==="svg"?new Mh(O):new Ef(O),$=this.get("group"),et=$.clone(),at=(0,d.clone)(et.getMatrix());at||(at=[1,0,0,0,1,0,0,0,1]);var ft=(a.maxX+a.minX)/2,vt=(a.maxY+a.minY)/2;at=eg(at,[["t",-ft,-vt],["t",s/2+l[3],o/2+l[0]]]),et.resetMatrix(),et.setMatrix(at),W.add(et);var Ft=W.get("el"),Xt="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var Yt=Ft.cloneNode(!0),he=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),_e=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",he);_e.replaceChild(Yt,_e.documentElement);var oe=new XMLSerializer().serializeToString(_e);Xt="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(oe))}else{var Ue=void 0,or=Ft.getContext("2d"),Kr=void 0;if(c){var An=typeof window!="undefined"?window.devicePixelRatio:1;try{Ue=or.getImageData(0,0,M*An,w*An),Kr=or.globalCompositeOperation,or.globalCompositeOperation="destination-over",or.fillStyle=c,or.fillRect(0,0,M,w)}catch(Sn){console.error("Download image failed. Out of memory at ImageData creation")}}Xt=Ft.toDataURL(r),c&&(or.clearRect(0,0,M,w),or.putImageData(Ue,0,0),or.globalCompositeOperation=Kr)}t&&t(Xt)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=co('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),w=n?n.backgroundColor:void 0,M=n?n.padding:void 0;M?(0,d.isNumber)(M)&&(M=[M,M,M,M]):M=[0,0,0,0];var O=s+M[0]+M[2],W=u+M[1]+M[3];if(l){var $=this.get("graphWaterMarker").cfg||{},et=$.width,at=$.height;O=Math.ceil(O/at)*at,W=Math.ceil(W/et)*et}var ft={container:c,height:O,width:W},vt=f==="svg"?new Mh(ft):new Ef(ft),Ft=this.get("group"),Xt=Ft.clone(),Yt=(0,d.clone)(Xt.getMatrix());Yt||(Yt=[1,0,0,0,1,0,0,0,1]);var he=(o.maxX+o.minX)/2,_e=(o.maxY+o.minY)/2;Yt=eg(Yt,[["t",-he,-_e],["t",u/2+M[3],s/2+M[0]]]),Xt.resetMatrix(),Xt.setMatrix(Yt),vt.add(Xt);var oe=vt.get("el");r||(r="image/png"),this.asyncToDataUrl(r,w,function(Ue){var or=document.createElement("a"),Kr=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(Ue,f,or,Kr);var An=document.createEvent("MouseEvents");An.initEvent("click",!1,!1),or.dispatchEvent(An)},W,O,oe)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":r.split("/")[1]),c=document.createElement("a");o.asyncToDataUrl(r,n,function(l){a.dataURLToImage(l,u,c,f);var w=document.createEvent("MouseEvents");w.initEvent("click",!1,!1),c.dispatchEvent(w)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,l=new Uint8Array(c);c--;)l[c]=f.charCodeAt(c);var w=new Blob([l],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(w,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(w)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=nl.waterMarkerImage);var n=this.get("container");(0,d.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,d.deepMix)({},nl.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var w={container:n,width:s,height:u,capture:!1},M=this.get("pixelRatio");M&&(w.pixelRatio=M,window.devicePixelRatio=M),a=new Ef(w),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var O=a.get("context"),W=c.rotate,$=c.x,et=c.y;O.rotate(-W*Math.PI/180);var at=new Image;at.crossOrigin="anonymous",at.src=t,at.onload=function(){if(O.drawImage(at,$,et,c.width,c.height),O.rotate(W*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var ft=document.querySelector(".g6-graph-watermarker");ft||(ft=document.createElement("div"),ft.className="g6-graph-watermarker"),ft.className="g6-graph-watermarker",a.destroyed||(ft.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(ft))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,d.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,d.deepMix)({},nl.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t==null?void 0:t.length)){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var w={container:n,width:s,height:u,capture:!1},M=this.get("pixelRatio");M&&(w.pixelRatio=M,window.devicePixelRatio=M),a=new Ef(w),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var O=a.get("context"),W=c.rotate,$=c.fill,et=c.fontFamily,at=c.fontSize,ft=c.baseline,vt=c.x,Ft=c.y,Xt=c.lineHeight;O.rotate(-W*Math.PI/180),O.font="".concat(at,"px ").concat(et),O.fillStyle=$,O.textBaseline=ft;for(var Yt=(0,d.isString)(t)?[t]:t,he=Yt.length-1;he>=0;he--)O.fillText(Yt[he],vt,Ft+he*Xt);if(O.rotate(W*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var _e=document.querySelector(".g6-graph-watermarker");_e||(_e=document.createElement("div"),_e.className="g6-graph-watermarker"),_e.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(_e)}},e.prototype.destroy=function(){var t,r,n,a;(0,d.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(!!u){var f=u.parentElement;!f||f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(n0),rg=fb,cb=wf.radialLayout,lb=wf.traverseTree,hb=function(i){(0,m.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="TB"),t.radial?function(r){var n=od()[t.type](r,t);return cb(n),n}:function(r){return od()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,d.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,d.each)(t.children||[],function(l){a.innerAddChild(l,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,d.each)(t.children||[],function(O){a.innerUpdateChild(O,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var l,w;o.get("originAttrs")&&(l=o.get("originAttrs").x,w=o.get("originAttrs").y);var M=o.getModel();n&&o.set("originAttrs",{x:M.x,y:M.y}),o.set("model",Object.assign(M,t.data)),(l!==t.x||w!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(!!o)if((0,d.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t){var r=this;this.getNodes().map(function(n){return r.clearItemStates(n)}),this.getEdges().map(function(n){return r.clearItemStates(n)}),t?(r.data(t),r.render()):r.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t){var r=this;if(!t){console.warn("layout cannot be null");return}r.set("layout",t),r.set("layoutMethod",r.getLayout()),r.layout()},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=r.get("data"),a=r.get("layoutMethod"),o=a?a(n,r.get("layout")):n,s=r.get("animate");if(r.emit("beforerefreshlayout",{data:n,layoutData:o}),r.emit("beforelayout"),r.innerUpdateChild(o,void 0,s),t){var u=r.get("viewController");u.fitView()}s?r.layoutAnimate(o):(r.refresh(),r.paint()),r.emit("afterrefreshlayout",{data:n,layoutData:o}),r.emit("afterlayout")},e.prototype.addChild=function(t,r){var n=this;n.emit("beforeaddchild",{model:t,parent:r}),(0,d.isString)(r)||(r=r.get("id"));var a=n.findDataById(r);if(a){a.children||(a.children=[]),a.children.push(t);var o=n.findById(r);o.refresh(),n.changeData()}},e.prototype.updateChildren=function(t,r){var n=this,a=n.findById(r);if(!r||!a){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var o=n.findDataById(r);o.children=t,a.refresh(),n.changeData()},e.prototype.updateChild=function(t,r){var n=this;if(!r||!n.findById(r)){n.changeData(t);return}var a=n.findDataById(r),o=n.findById(t.id);if(a.children||(a.children=[]),!o)a.children.push(t);else{var s=e.indexOfChild(a.children,t.id);s>-1&&(a.children[s]=t)}var u=n.findById(r);u==null||u.refresh(),n.changeData()},e.prototype.removeChild=function(t){var r=this,n=r.findById(t),a;if(n?a=n==null?void 0:n.get("parent"):a=r.getNodes().find(function(c){var l=c.getModel().children||[];return!!l.find(function(w){return w.id===t})}),a&&!a.destroyed){var o=a.get("id"),s=r.findDataById(o),u=s&&s.children||[],f=e.indexOfChild(u,t);u.splice(f,1),a.refresh()}r.changeData()},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,d.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){lb(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var l=r(u,o,f,t);u.set("model",Object.assign(c,l))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,d.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,d.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,d.each)(n.get("removeList"),function(s){n.removeItem(s)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(){var t=this,r=t.get("data");if(!r||!(0,d.isObject)(r)||!Object.keys(r).length)throw new Error("data must be defined first");t.clear(),t.emit("beforerender"),t.layout(this.get("fitView")),t.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e}(rg),db=hb;function za(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var vb=function(){function i(e){this._cfgs=(0,d.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,d.each)(r,function(a,o){var s=(0,d.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,d.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),As=vb,gb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ng="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",pb=function(i){gb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:ng,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||ng;a.includes("url(")||(a='url("'.concat(a,'")'));var o=co(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=co(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");za(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;za(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");za(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(As),yb=pb,mb=R(38186),ud=R.n(mb),bb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&ud()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var xb=function(i){bb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=co("<div class=".concat(t||"g6-component-contextmenu","></div>"));za(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,d.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(!!a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,d.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var l=function(he){c(he.target,t.item,u)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var w=u.get("width"),M=u.get("height"),O=o.getBoundingClientRect(),W=this.get("offsetX")||0,$=this.get("offsetY")||0,et=u.getContainer().offsetTop,at=u.getContainer().offsetLeft,ft=t.canvasX+at+W,vt=t.canvasY+et+$;ft+O.width>w&&(ft=t.canvasX-O.width-W+at),vt+O.height>M&&(vt=t.canvasY-O.height-$+et),za(o,{top:"".concat(vt,"px"),left:"".concat(ft,"px"),visibility:"visible"});var Ft=this.get("trigger")==="click",Xt=function(he){if(Ft){Ft=!1;return}r.onMenuHide()};document.body.addEventListener("click",Xt),this.set("handler",Xt)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&za(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(As),Eb=xb,wb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),iv=function(){return iv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},iv.apply(this,arguments)},ag=Math.max,Sb=Dt,_b="default",Mb="keyShape",Cb="delegate",ig="svg",Ab=function(i){wb(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,d.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=co(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),l=0,w=0,M=!1,O=0,W=0,$=0,et=0,at=0,ft=0,vt=f||u?"mousedown":"dragstart";c.addEventListener(vt,function(he){var _e,oe;if(he.dataTransfer){var Ue=new Image;Ue.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(oe=(_e=he.dataTransfer).setDragImage)===null||oe===void 0||oe.call(_e,Ue,0,0);try{he.dataTransfer.setData("text/html","view-port-minimap")}catch(Kr){he.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,he.target===c){var or=c.style;O=parseInt(or.left,10),W=parseInt(or.top,10),$=parseInt(or.width,10),et=parseInt(or.height,10),!($>n[0]||et>n[1])&&(ft=a.getZoom(),at=t.get("ratio"),M=!0,l=he.clientX,w=he.clientY)}},!1);var Ft=function(_e){if(!(!M||(0,d.isNil)(_e.clientX)||(0,d.isNil)(_e.clientY))){var oe=l-_e.clientX,Ue=w-_e.clientY;(O-oe<0||O-oe+$>=n[0])&&(oe=0),(W-Ue<0||W-Ue+et>=n[1])&&(Ue=0),O-=oe,W-=Ue,za(c,{left:"".concat(O,"px"),top:"".concat(W,"px")}),a.translate(oe*ft/at,Ue*ft/at),l=_e.clientX,w=_e.clientY}};!f&&!u&&c.addEventListener("drag",Ft,!1);var Xt=function(){M=!1,r.refresh=!0},Yt=f||u?"mouseup":"dragend";c.addEventListener(Yt,Xt,!1),s.addEventListener("mouseleave",Xt),s.addEventListener("mouseup",Xt),(f||u)&&s.addEventListener("mousemove",Ft,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("dx"),n=this.get("dy"),a=this.get("totaldx"),o=this.get("totaldy"),s=this.get("graph"),u=this.get("size"),f=s.get("width"),c=s.get("height"),l=s.getPointByCanvas(0,0),w=s.getPointByCanvas(f,c),M=this.get("viewport");M||this.initViewport();var O=(w.x-l.x)*t,W=(w.y-l.y)*t,$=l.x*t+a,et=l.y*t+o,at=$+O,ft=et+W;$<0&&(O+=$,$=0),at>u[0]&&(O=O-(at-u[0])),et<0&&(W+=et,et=0),ft>u[1]&&(W=W-(ft-u[1])),this.set("ratio",t);var vt="".concat($,"px"),Ft="".concat(et,"px");za(M,{left:vt,top:Ft,width:"".concat(O,"px"),height:"".concat(W,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===ig&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,d.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,d.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,d.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?f=Object.assign(u,f):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?(f=Object.assign(u,f),a.toFront()):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,d.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,d.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,d.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:iv({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=co("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,d.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=co('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(l){l.preventDefault()}),u.addEventListener("dragover",function(l){l.preventDefault()});var f,c=r.get("renderer");c===ig?f=new Mh({container:u,width:n[0],height:n[1]}):f=new Ef({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(!!t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case _b:this.updateGraphShapes();break;case Mb:this.updateKeyShapes();break;case Cb:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(!!u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),l=r.getZoom()||1,w=c.width/l,M=c.height/l;Number.isFinite(f.width)&&(w=ag(f.width,w),M=ag(f.height,M)),w+=2*s,M+=2*s;var O=Math.min(n[0]/w,n[1]/M),W=[1,0,0,0,1,0,0,0,1],$=0,et=0;Number.isFinite(f.minX)&&($=-f.minX),Number.isFinite(f.minY)&&(et=-f.minY);var at=(n[0]-(w-2*s)*O)/2,ft=(n[1]-(M-2*s)*O)/2;W=Sb(W,[["t",$,et],["s",O,O],["t",at,ft]]),u.setMatrix(W),this.set("ratio",O),this.set("totaldx",at+$*O),this.set("totaldy",ft+et*O),this.set("dx",at),this.set("dy",ft),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");(r==null?void 0:r.parentNode)&&r.parentNode.removeChild(r)},e}(As),Tb=Ab,Ib=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function zu(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function Ob(i,e){return i.x*e.x+i.y*e.y}function og(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var Lb=function(i){Ib(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(vt){(vt.x===null||!vt.y===null||vt.x===void 0||!vt.y===void 0)&&(s=!0),o[vt.id]=vt}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var l=r.getEdgeBundles();r.set("edgeBundles",l);for(var w=r.get("cycles"),M=r.get("iterations"),O=r.get("iterRate"),W=r.get("lambda"),$=0;$<w;$++){for(var et=function(Ft){var Xt=[];n.forEach(function(Yt,he){if(Yt.source!==Yt.target){var _e=o[Yt.source],oe=o[Yt.target];Xt[he]=r.getEdgeForces({source:_e,target:oe},he,u,W);for(var Ue=0;Ue<u+1;Ue++)c[he][Ue].x+=Xt[he][Ue].x,c[he][Ue].y+=Xt[he][Ue].y}})},at=0;at<M;at++)et(at);W=W/2,u*=f,M*=O,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(vt,Ft){vt.source!==vt.target&&(vt.type="polyline",vt.controlPoints=c[Ft].slice(1,c[Ft].length-1))});var ft=r.get("graph");ft.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=a[s.source],l=a[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+l.x),y:.5*(c.y+l.y)}),o[u].push({x:l.x,y:l.y});else{var w=0;((f=o[u])===null||f===void 0?void 0:f.length)?w=r.getEdgeLength(o[u]):w=zu({x:c.x,y:c.y},{x:l.x,y:l.y});var M=w/(t+1),O=M,W=[{x:c.x,y:c.y}];o[u].forEach(function($,et){if(et!==0){for(var at=zu($,o[u][et-1]);at>O;){var ft=O/at,vt={x:o[u][et-1].x,y:o[u][et-1].y};vt.x+=ft*($.x-o[u][et-1].x),vt.y+=ft*($.y-o[u][et-1].y),W.push(vt),at-=O,O=M}O-=at}}),W.push({x:l.x,y:l.y}),o[u]=W}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=zu(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],l=o[u.target];n.forEach(function(w,M){if(!(M<=f)){var O=o[w.source],W=o[w.target],$=t.getBundleScore({source:c,target:l},{source:O,target:W});$>=a&&(s[f].push(M),s[M].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=zu({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=zu({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=Ob({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=zu(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=og(r.source,t),a=og(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*zu(o,s)/zu(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(zu(t.source,t.target)*(n+1)),c=[{x:0,y:0}],l=1;l<n;l++){var w={x:0,y:0},M=o.getSpringForce({pre:s[r][l-1],cur:s[r][l],next:s[r][l+1]},f),O=o.getElectrostaticForce(l,r);w.x=a*(M.x+O.x),w.y=a*(M.y+O.y),c.push(w)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var l={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(l.x)>a||Math.abs(l.y)>a){var w=zu(s[c][t],s[r][t]),M=1/w;f.x+=l.x*M,f.y+=l.y*M}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(As),Db=Lb,Nb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ov=function(){return ov=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},ov.apply(this,arguments)},fd=.05,sg={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Pb=function(i){Nb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,d.clone)(sg),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-fd:a=1/(1-fd);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.set("r2",l*l);var w=r.get("d");r.set("molecularParam",(w+1)*l),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(!!t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-fd:o=1/(1-fd);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||a.get("height"))&&o>1||c<(f||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var l=r.get("d");r.set("molecularParam",(l+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),l=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),l=n.get("d"),w=n.get("molecularParam"),M=a.getNodes(),O=M.length,W=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(W=n.get("cacheCenter"));var $=n.get("delegateCenterDiff");$&&(W.x+=$.x,W.y+=$.y),n.updateDelegate(W,f);for(var et=0;et<O;et++){var at=M[et].getModel(),ft=at.x,vt=at.y;if(!(isNaN(ft)||isNaN(vt))){var Ft=(ft-W.x)*(ft-W.x)+(vt-W.y)*(vt-W.y);if(!isNaN(Ft)&&Ft<c&&Ft!==0){var Xt=Math.sqrt(Ft),Yt=w*Xt/(l*Xt+f),he=(ft-W.x)/Xt,_e=(vt-W.y)/Xt;if(at.x=he*Yt+W.x,at.y=_e*Yt+W.y,s[at.id]||(s[at.id]={x:ft,y:vt,texts:[]}),o.push(at),u&&2*Xt<f)for(var oe=M[et],Ue=oe.getContainer(),or=Ue.getChildren(),Kr=or.length,An=0;An<Kr;An++){var Sn=or[An];Sn.get("type")==="text"&&(s[at.id].texts.push({visible:Sn.get("visible"),shape:Sn}),Sn.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,l=0;l<c;l++){var w=f.texts[l];w.shape.set("visible",w.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,l=t.scaleDBy,w=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var M=r.get("d"),O=r.get("r");if(r.set("molecularParam",(M+1)*O),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),l==="drag"||l==="wheel"||l==="unset"){r.set("scaleDBy",l),r.get("delegate").remove(),r.get("delegate").destroy();var W=r.get("dPercentText");W&&(W.remove(),W.destroy())}if(w==="drag"||w==="wheel"||w==="unset"){r.set("scaleRBy",w),r.get("delegate").remove(),r.get("delegate").destroy();var W=r.get("dPercentText");W&&(W.remove(),W.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=a.get("delegateStyle")||sg;s=u.addShape("circle",{attrs:ov({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(O){a.scaleRByWheel(O)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(O){a.set("dragging",!0),a.set("cacheCenter",{x:O.x,y:O.y}),a.set("dragPrePos",{x:O.x,y:O.y})}),s.on("drag",function(O){a.scaleRByDrag(O)}),s.on("dragend",function(O){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(O){n.scaleDByWheel(O)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(O){a.set("dragging",!0),a.set("cacheCenter",{x:O.x,y:O.y}),a.set("dragPrePos",{x:O.x,y:O.y})}),s.on("drag",function(O){n.scaleDByDrag(O)}),s.on("dragend",function(O){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),l=a.get("dPercentText"),w=t.y+r/1.5+16;if(!l||l.destroyed){var M=o.get("group");l=M.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:w,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",l)}else l.attr({text:"".concat(c,"%"),x:t.x,y:w})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(As),kb=Pb,Rb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ug=.05;typeof document!="undefined"&&ud()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var Bb=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},Fb=function(i){Rb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,d.isString)(a)&&(o=co(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,d.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(l){var w=Bb(l).filter(function(O){return O.nodeName==="LI"});if(w.length!==0){var M=w[0].getAttribute("code");!M||(f?f(M,r):t.handleDefaultOperator(M))}});var c=this.get("position");c&&za(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,l=f.length;c===1?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),l===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))})},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===1)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,d.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(l){var w=o[l];!w||w.forEach(function(M){var O=t.findById(M.id);M.visible?t.showItem(O,!1):t.hideItem(O,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(l){var w=o[l];!w||w.forEach(function(M){var O=t.findById(M.id);delete M.id,t.updateItem(O,M,!1),O.getType()==="combo"&&t.updateCombo(O)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(l){var w=o[l];!w||w.forEach(function(M){var O=M.itemType;delete M.itemType,t.addItem(O,M,!1)})});break}case"add":Object.keys(o).forEach(function(l){var w=o[l];!w||w.forEach(function(M){t.removeItem(M.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(l){var w=o[l];!w||w.forEach(function(M){t.updateComboTree(M.id,M.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(l){var w=o[l];!w||w.forEach(function(M){t.updateComboTree(M.id,M.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(l){return l.id}).filter(function(l){return l!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,d.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var l=o[c];!l||l.forEach(function(w){var M=t.findById(w.id);w.visible?t.showItem(M,!1):t.hideItem(M,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var l=o[c];!l||l.forEach(function(w){var M=t.findById(w.id);delete w.id,t.updateItem(M,w,!1),M.getType()==="combo"&&t.updateCombo(M)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var l=o[c];!l||l.forEach(function(w){var M=w.itemType;delete w.itemType,t.addItem(M,w,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var l=o[c];!l||l.forEach(function(w){t.updateComboTree(w.id,w.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-ug*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-ug*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(As),Gb=Fb,zb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&ud()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Ub=function(i){zb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=co("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,d.isString)(a)&&(a=document.getElementById(a)),za(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){za(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(!!t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,d.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&za(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){za(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),w=t.item;if(w.getType&&w.getType()==="node"&&l&&(0,d.isArray)(l)&&l.length>=2){var M=w.getBBox();c={x:M.minX+M.width*l[0],y:M.minY+M.height*l[1]}}var O=a.getCanvasByPoint(c.x,c.y),W=O.x,$=O.y,et=a.getContainer(),at={x:W+et.offsetLeft+u,y:$+et.offsetTop+f};za(n,{visibility:"visible",display:"unset"});var ft=n.getBoundingClientRect();W+ft.width+u>o&&(at.x-=ft.width+u),$+ft.height+f>s&&(at.y-=ft.height+f),za(n,{left:"".concat(at.x,"px"),top:"".concat(at.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(As),Wb=Ub,fg={};function jb(i){return fg[i]}function Uu(i,e){fg[i]=e}var Xb=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,d.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,d.map)(this.ticks,function(t,r){return(0,d.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,d.isNil)(n)||!(0,d.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,d.assign)(this,this.__cfg__),this.setDomain(),(0,d.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,d.isString)(e)){var r=jb(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,d.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,d.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),sv=Xb,Yb=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,d.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,d.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,m.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,d.isNil)(this.getConfig("min"))&&(this.min=0),(0,d.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(sv),Th=Yb,cg=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,ac="\\d\\d?",ic="\\d\\d",Vb="\\d{3}",Hb="\\d{4}",Ih="[^\\s]+",lg=/\[([^]*?)\]/gm;function hg(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var dg=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function oc(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var vg=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],gg=["January","February","March","April","May","June","July","August","September","October","November","December"],Zb=hg(gg,3),Kb=hg(vg,3),uv={dayNamesShort:Kb,dayNames:vg,monthNamesShort:Zb,monthNames:gg,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!=10?1:0)*i%10]}},cd=oc({},uv),pg=function(i){return cd=oc(cd,i)},yg=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Ts=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},$b={D:function(i){return String(i.getDate())},DD:function(i){return Ts(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return Ts(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return Ts(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return Ts(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return Ts(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return Ts(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return Ts(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return Ts(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return Ts(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return Ts(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return Ts(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+Ts(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+Ts(Math.floor(Math.abs(e)/60),2)+":"+Ts(Math.abs(e)%60,2)}},mg=function(i){return+i-1},bg=[null,ac],xg=[null,Ih],Eg=["isPm",Ih,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],wg=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],Qb={D:["day",ac],DD:["day",ic],Do:["day",ac+Ih,function(i){return parseInt(i,10)}],M:["month",ac,mg],MM:["month",ic,mg],YY:["year",ic,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",ac,void 0,"isPm"],hh:["hour",ic,void 0,"isPm"],H:["hour",ac],HH:["hour",ic],m:["minute",ac],mm:["minute",ic],s:["second",ac],ss:["second",ic],YYYY:["year",Hb],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",ic,function(i){return+i*10}],SSS:["millisecond",Vb],d:bg,dd:bg,ddd:xg,dddd:xg,MMM:["month",Ih,dg("monthNamesShort")],MMMM:["month",Ih,dg("monthNames")],a:Eg,A:Eg,ZZ:wg,Z:wg},ld={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Sg=function(i){return oc(ld,i)},_g=function(i,e,t){if(e===void 0&&(e=ld.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=ld[e]||e;var r=[];e=e.replace(lg,function(a,o){return r.push(o),"@@@"});var n=oc(oc({},cd),t);return e=e.replace(cg,function(a){return $b[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function Mg(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=ld[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(lg,function(vt,Ft){return o.push(yg(Ft)),"@@@"}),u={},f={};s=yg(s).replace(cg,function(vt){var Ft=Qb[vt],Xt=Ft[0],Yt=Ft[1],he=Ft[3];if(u[Xt])throw new Error("Invalid format. "+Xt+" specified twice in format");return u[Xt]=!0,he&&(f[he]=!0),a.push(Ft),"("+Yt+")"}),Object.keys(f).forEach(function(vt){if(!u[vt])throw new Error("Invalid format. "+vt+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=i.match(new RegExp(s,"i"));if(!c)return null;for(var l=oc(oc({},cd),t),w=1;w<c.length;w++){var M=a[w-1],O=M[0],W=M[2],$=W?W(c[w],l):+c[w];if($==null)return null;n[O]=$}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var et;if(n.timezoneOffset==null){et=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var at=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],w=0,ft=at.length;w<ft;w++)if(u[at[w][0]]&&n[at[w][0]]!==et[at[w][1]]())return null}else if(et=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return et}var qb={format:_g,parse:Mg,defaultI18n:uv,setGlobalDateI18n:pg,setGlobalDateMasks:Sg},Cg=qb;function Jb(i){return function(e,t,r,n){for(var a=(0,d.isNil)(r)?0:r,o=(0,d.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var Ag="format";function Tg(i,e){var t=N[Ag]||Cg[Ag];return t(i,e)}function hd(i){return(0,d.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,d.isDate)(i)&&(i=i.getTime()),i}var Eu=1e3,al=60*Eu,il=60*al,Sf=24*il,Oh=Sf*31,Ig=Sf*365,Lh=[["HH:mm:ss",Eu],["HH:mm:ss",Eu*10],["HH:mm:ss",Eu*30],["HH:mm",al],["HH:mm",al*10],["HH:mm",al*30],["HH",il],["HH",il*6],["HH",il*12],["YYYY-MM-DD",Sf],["YYYY-MM-DD",Sf*4],["YYYY-WW",Sf*7],["YYYY-MM",Oh],["YYYY-MM",Oh*4],["YYYY-MM",Oh*6],["YYYY",Sf*380]];function tx(i,e,t){var r=(e-i)/t,n=Jb(function(o){return o[1]})(Lh,r)-1,a=Lh[n];return n<0?a=Lh[0]:n>=Lh.length&&(a=(0,d.last)(Lh)),a}var ex=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=hd(t);var r=this.values.indexOf(t);return r===-1&&((0,d.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):Tg(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,d.each)(t,function(r,n){t[n]=hd(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(Th),rx=ex,nx=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,d.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,d.head)(t),n=(0,d.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,d.isNil)(this.minLimit)||(this.min=r),(0,d.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,d.getRange)(this.values),r=t.min,n=t.max;(0,d.isNil)(this.min)&&(this.min=r),(0,d.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,d.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(sv),dd=nx,ax=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(dd),Dh=ax;function sc(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function Js(i,e){return i===1?1:Math.log(e)/Math.log(i)}function Og(i,e,t){(0,d.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,d.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function Lg(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function Vw(i,e){var t=Lg(i),r=Lg(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var ix=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=Js(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=Js(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=Js(r,this.min);var c=(t-a)/o,l=c*(n-s)+s;return Math.pow(r,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=Og(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(Js(a,r)-Js(a,n)):s=(Js(a,t)-Js(a,n))/(Js(a,r)-Js(a,n)),s},e}(dd),ox=ix,sx=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=sc(n,this.max),o=sc(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(sc(a,t)-sc(a,n))/(sc(a,r)-sc(a,n));return o},e}(dd),ux=sx,fx=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):Tg(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,d.isString)(r)||(0,d.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return hd(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,d.isNil)(r)||!(0,d.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,d.isNil)(n)||!(0,d.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=Infinity,s=o,u=0;(0,d.each)(t,function(f){var c=hd(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,d.isNil)(r)&&(this.min=o),(0,d.isNil)(n)&&(this.max=u)}},e}(Dh),cx=fx,lx=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,d.last)(r);if(o<0)return(0,d.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(a-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,d.last)(t)!==this.max&&t.push(this.max),(0,d.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,d.head)(r))return 0;if(t>(0,d.last)(r))return 1;var n=0;return(0,d.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(dd),Dg=lx,hx=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(Dg),dx=hx,Ng={};function vx(i){return Ng[i]}function Wu(i,e){if(vx(i))throw new Error("type '"+i+"' existed.");Ng[i]=e}var gx=function(i){(0,m.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,d.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(sv),px=gx;function Pg(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,d.isNumber)(t)){var a=(0,d.filter)(e,function(O,W){return W%t==0}),o=(0,d.last)(e);return n&&(0,d.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,f=i.max;if((0,d.isNil)(u)&&(u=0),(0,d.isNil)(f)&&(f=e.length-1),!(0,d.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),l=[],w=u,M=0;M<r&&!(w>=f);M++)w=Math.min(u+M*c,f),M===r-1&&n?l.push(e[f]):l.push(e[w]);return l}function yx(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new mx;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var fv=5,kg=Math.sqrt(50),Rg=Math.sqrt(10),Bg=Math.sqrt(2),mx=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=fv);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),f=vd(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=vd(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=vd(s,u,e)),f>0?(n[a]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[a]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=fv),bx(this._domain[0],this._domain[this._domain.length-1],e||fv)},i}();function bx(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=vd(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function vd(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=kg?10:a>=Rg?5:a>=Bg?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=kg?10:a>=Rg?5:a>=Bg?2:1)}function Fg(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function cv(i,e,t){var r=Fg(i,t,"floor"),n=Fg(e,t,"ceil");r=(0,d.fixedBase)(r,t),n=(0,d.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,d.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function lv(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,f=u===void 0?5:u,c=(0,d.isNil)(n)?(0,d.isNil)(e)?o:e:n,l=(0,d.isNil)(a)?(0,d.isNil)(t)?s:t:a;if(c>l&&(r=[c,l],l=r[0],c=r[1]),f<=2)return[c,l];for(var w=(l-c)/(f-1),M=[],O=0;O<f;O++)M.push(c+w*O);return M}function xx(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=yx(i);return!(0,d.isNil)(n)||!(0,d.isNil)(a)?lv(i,(0,d.head)(o),(0,d.last)(o)):r?cv(e,t,r).ticks:o}function ol(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var Ex=[1,5,2,2.5,4,3],Hw=null,Gg=Number.EPSILON*100;function wx(i,e){return(i%e+e)%e}function Sx(i){return Math.round(i*1e12)/1e12}function _x(i,e,t,r,n,a){var o=(0,d.size)(e),s=(0,d.indexOf)(e,i),u=0,f=wx(r,a);return(f<Gg||a-f<Gg)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function Mx(i,e,t){var r=(0,d.size)(e),n=(0,d.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function Cx(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function Ax(i,e){return i>=e?2-(i-1)/(e-1):1}function Tx(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function Ix(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function Ox(){return 1}function Lx(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=Ex),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(Ln,Dn){return ol(i+u*Dn)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<Infinity;){for(var l=0;l<n.length;l+=1){var w=n[l],M=Mx(w,n,c);if(a[0]*M+a[1]+a[2]+a[3]<f.score){c=Infinity;break}for(var O=2;O<Infinity;){var W=Ax(O,o);if(a[0]*M+a[1]+a[2]*W+a[3]<f.score)break;for(var $=(e-i)/(O+1)/c/w,et=Math.ceil(Math.log10($));et<Infinity;){var at=c*w*Math.pow(10,et),ft=Ix(i,e,at*(O-1));if(a[0]*M+a[1]*ft+a[2]*W+a[3]<f.score)break;var vt=Math.floor(e/at)*c-(O-1)*c,Ft=Math.ceil(i/at)*c;if(vt<=Ft)for(var s=Ft-vt,Xt=0;Xt<=s;Xt+=1){var Yt=vt+Xt,he=Yt*(at/c),_e=he+at*(O-1),oe=at,Ue=_x(w,n,c,he,_e,oe),or=Tx(i,e,he,_e),Kr=Cx(O,o,i,e,he,_e),An=Ox(),Sn=a[0]*Ue+a[1]*or+a[2]*Kr+a[3]*An;Sn>f.score&&(!r||he<=i&&_e>=e)&&(f.lmin=he,f.lmax=_e,f.lstep=oe,f.score=Sn)}et+=1}O+=1}}c+=1}var cn=ol(f.lmax),Fn=ol(f.lmin),Pn=ol(f.lstep),tn=Math.floor(Sx((cn-Fn)/Pn))+1,Mn=new Array(tn);Mn[0]=ol(Fn);for(var l=1;l<tn;l++)Mn[l]=ol(Mn[l-1]+Pn);return{min:Math.min(i,(0,d.head)(Mn)),max:Math.max(e,(0,d.last)(Mn)),ticks:Mn}}function Dx(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=Lx(e,t,r,n).ticks;return!(0,d.isNil)(o)||!(0,d.isNil)(s)?lv(i,(0,d.head)(u),(0,d.last)(u)):a?cv(e,t,a).ticks:u}function Nx(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=Js(e,n);if(r>0)o=Math.floor(Js(e,r));else{var u=Og(a,e,n);o=Math.floor(Js(e,u))}for(var f=s-o,c=Math.ceil(f/t),l=[],w=o;w<s+c;w=w+c)l.push(Math.pow(e,w));return r<=0&&l.unshift(0),l}function zg(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<a*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),l=Math.floor(i/f),w=Math.max(c*f,e),M=Math.min(l*f,i),O=Math.floor((w-M)/f)+1,W=new Array(O),$=0;$<O;$++)W[$]=ol(M+$*f);return{min:M,max:w,ticks:W}}function Px(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(sc(e,i.max)),n=Math.floor(sc(e,i.min)),a=zg(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function kx(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!=0?i[Math.ceil(t)-1]:i.length%2==0?(i[t-1]+i[t])/2:i[t]}function Rx(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(kx(r,o))}return n}function Bx(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=zg(e,t,r).ticks;return!(0,d.isNil)(a)||!(0,d.isNil)(o)?lv(i,(0,d.head)(s),(0,d.last)(s)):n?cv(e,t,n).ticks:s}function Fx(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=tx(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function Gx(i){var e=Pg((0,m.__assign)({showLast:!0},i));return e}function gd(i){return new Date(i).getFullYear()}function zx(i){return new Date(i,0,1).getTime()}function hv(i){return new Date(i).getMonth()}function Ux(i,e){var t=gd(i),r=gd(e),n=hv(i),a=hv(e);return(r-t)*12+(a-n)%12}function Wx(i,e){return new Date(i,e,1).getTime()}function jx(i,e){return Math.ceil((e-i)/Sf)}function Xx(i,e){return Math.ceil((e-i)/il)}function Yx(i,e){return Math.ceil((e-i)/(60*1e3))}function Vx(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=gd(e);if(a>Ig)for(var u=gd(t),f=Math.ceil(a/Ig),c=s;c<=u+f;c=c+f)o.push(zx(c));else if(a>Oh)for(var l=Math.ceil(a/Oh),w=hv(e),M=Ux(e,t),c=0;c<=M+l;c=c+l)o.push(Wx(s,c+w));else if(a>Sf)for(var O=new Date(e),W=O.getFullYear(),$=O.getMonth(),et=O.getDate(),at=Math.ceil(a/Sf),ft=jx(e,t),c=0;c<ft+at;c=c+at)o.push(new Date(W,$,et+c).getTime());else if(a>il)for(var O=new Date(e),W=O.getFullYear(),$=O.getMonth(),at=O.getDate(),vt=O.getHours(),Ft=Math.ceil(a/il),Xt=Xx(e,t),c=0;c<=Xt+Ft;c=c+Ft)o.push(new Date(W,$,at,vt+c).getTime());else if(a>al)for(var Yt=Yx(e,t),he=Math.ceil(a/al),c=0;c<=Yt+he;c=c+he)o.push(e+c*al);else{var _e=a;_e<Eu&&(_e=Eu);for(var oe=Math.floor(e/Eu)*Eu,Ue=Math.ceil((t-e)/Eu),or=Math.ceil(_e/Eu),c=0;c<Ue+or;c=c+or)o.push(oe+c*Eu)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Uu("cat",Pg),Uu("time-cat",Gx),Uu("wilkinson-extended",Dx),Uu("r-pretty",Bx),Uu("time",Fx),Uu("time-pretty",Vx),Uu("log",Nx),Uu("pow",Px),Uu("quantile",Rx),Uu("d3-linear",xx),Wu("cat",Th),Wu("category",Th),Wu("identity",px),Wu("linear",Dh),Wu("log",ox),Wu("pow",ux),Wu("time",cx),Wu("timeCat",rx),Wu("quantize",Dg),Wu("quantile",dx);var Hx=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function Zx(i){return(0,d.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function Ug(i){return Zx(i)}function Kx(i){if(i.length<=2)return Ug(i);var e=[];(0,d.each)(i,function(o){(0,d.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=Ce(e,!1),r=(0,d.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function $x(i,e,t,r){r===void 0&&(r=!0);var n=new Dh({values:i}),a=new Th({values:(0,d.map)(i,function(s,u){return u})}),o=(0,d.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?Kx(o):Ug(o)}function Qx(i,e,t,r){r===void 0&&(r=5);for(var n=new Dh({values:i}),a=new Th({values:(0,d.map)(i,function(w,M){return M})}),o=(0,d.map)(i,function(w,M){return[a.scale(M)*e,t-n.scale(w)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},l=tE(c);s.push.apply(s,l)}return eE(s)}function qx(i,e){var t=new Dh({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function Jx(i,e,t,r){var n=Hx([],i,!0),a=qx(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function tE(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,d.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,d.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:a},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:a}),f}function eE(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Nh=function(){return Nh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Nh.apply(this,arguments)},rE={stroke:"#C5C5C5",strokeOpacity:.85},nE={fill:"#CACED4",opacity:.85},aE=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,l=c===void 0?!0:c,w=e.isArea,M=w===void 0?!1:w,O=e.data,W=O===void 0?[]:O,$=e.lineStyle,et=e.areaStyle,at=e.group,ft=e.interval,vt=ft===void 0?null:ft;this.group=at,this.x=r,this.y=a,this.width=s,this.height=f,this.data=W,this.smooth=l,this.isArea=M,this.lineStyle=Object.assign({},rE,$),this.areaStyle=Object.assign({},nE,et),this.intervalConfig=vt,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,l=e.areaStyle,w=this.group.addGroup({name:"trend-group"});if(s){var M=$x(s,n,a,u);if(w.addShape("path",{attrs:Nh({path:M},c),name:"trend-line"}),f){var O=Jx(M,n,a,s);w.addShape("path",{attrs:Nh({path:O},l),name:"trend-area"})}}this.intervalConfig&&w.addShape("path",{attrs:Nh({path:Qx(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),w.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),iE=aE,ah=function(){return ah=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},ah.apply(this,arguments)},oE={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},sE={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},uE=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,l=e.height,w=l===void 0?24:l,M=e.style,O=M===void 0?{}:M;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=w,n==="trend"?this.style=ah(ah({},oE),O):n==="simple"&&(this.style=ah(ah({},sE),O)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,d.isNumber)(e)&&(this.x=e),(0,d.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),Wg=uE,jg="timebarstartplay",Xg="timebarendplay",ju="valuechange",sl="timebarConfigChanged",uc="playPauseBtn",Ph="nextStepBtn",kh="preStepBtn",dv=function(){return dv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},dv.apply(this,arguments)},fE=function(){function i(e){this.config=(0,d.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,d.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,l=this.config.y+f,w=t.addGroup({name:uc});this.startMarkerGroup=w.addGroup({name:uc}),this.circle=t.addShape("circle",{attrs:dv({x:c,y:l,r:this.config.r*a},r),name:uc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,l,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=w.addGroup({name:uc});var M=.25*this.config.r*a,O=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:l-O/2,width:M,height:O,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:l-O/2,width:M,height:O,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,l=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-l/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-l/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",l)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),cE=fE,jo=function(){return jo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},jo.apply(this,arguments)},Rh=Dt,lE="#aaa",hE="green",dE={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},vE={fill:"#fff"},gE={fill:"green"},Yg={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},Vg={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},pE={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Yg,timeTypeControllerStyle:Vg},vv=110,fc=50,Xu={SINGLE:"single",RANGE:"range"},yE=function(){function i(e){this.controllerCfg=(0,d.deepMix)({},pE,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Xu.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?lE:s,f=e.stroke,c=f===void 0?hE:f,l=e.containerStyle,w=l===void 0?{}:l,M=jo(jo({},dE),e.playBtnStyle||{}),O=jo(jo({},vE),e.preBtnStyle||{}),W=jo(jo({},gE),e.nextBtnStyle||{}),$=r/2-5,et=a+10,at=this.controllerGroup.addShape("rect",{attrs:jo({x:n,y:et,width:t,height:r,stroke:c,fill:u},w),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:et,r:$}):this.playButton=new cE({group:this.controllerGroup,x:t/2,y:et+$+5,r:$,isPlay:this.isPlay,style:M});var ft=O.offsetX||0,vt=O.offsetY||0,Ft=(O.scale||1)*$;this.controllerGroup.addShape("path",{attrs:jo({path:this.getPreMarkerPath(t/2-5*$+ft,et+$+5+vt,Ft*.5)},O),name:kh});var Xt=W.offsetX||0,Yt=W.offsetY||0,he=(W.scale||1)*$;this.controllerGroup.addShape("path",{attrs:jo({path:this.getNextMarkerPath(t/2+5*$+Xt,et+$+5+Yt,he*.5)},W),name:Ph}),at.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var _e=this.controllerCfg.scale,oe=_e===void 0?1:_e,Ue=this.controllerGroup.getCanvasBBox(),or=(Ue.maxX+Ue.minX)/2,Kr=(Ue.maxY+Ue.minY)/2,An=Rh([1,0,0,0,1,0,0,0,1],[["t",-or,-Kr],["s",oe,oe],["t",or,Kr]]);this.controllerGroup.setMatrix(An)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=jo(jo({},Yg),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,f=u===void 0?{}:u,c=a.pointer,l=c===void 0?{}:c,w=a.scale,M=w===void 0?1:w,O=a.offsetX,W=O===void 0?0:O,$=a.offsetY,et=$===void 0?0:$,at=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=at;var ft=[],vt=5;this.speedAxisY=[19,22,26,32,39];for(var Ft=0;Ft<5;Ft++){var Xt=t+this.speedAxisY[Ft],Yt=r-(n?fc:vv);at.addShape("line",{attrs:jo({x1:Yt,x2:Yt+15,y1:Xt,y2:Xt},s),speed:vt,name:"speed-rect"}),this.speedAxisY[Ft]=Xt,ft.push(vt),vt=vt-1}this.speedText=at.addShape("text",{attrs:jo({x:r-(n?fc:vv)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=at.addShape("path",{attrs:jo({path:this.getPointerPath(r-(n?fc:vv),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var he=this.speedGroup.getCanvasBBox(),_e=(he.maxX+he.minX)/2,oe=(he.maxY+he.minY)/2,Ue=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Ue=Rh(Ue,[["t",-_e,-oe],["s",M,M],["t",_e+W*M,oe+et*M]]),this.speedGroup.setMatrix(Ue)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=jo(jo({},Vg),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,l=o.offsetY,w=l===void 0?0:l,M=o.box,O=M===void 0?{}:M,W=o.check,$=W===void 0?{}:W,et=o.text,at=et===void 0?{}:et;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var ft=a===Xu.SINGLE;this.toggleGroup.addShape("rect",{attrs:jo({x:n-fc,y:this.speedAxisY[0]+3.5},O),isChecked:ft,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:jo({path:[["M",n-fc+3,this.speedAxisY[1]+6],["L",n-fc+7,this.speedAxisY[1]+10],["L",n-fc+12,this.speedAxisY[1]+4]]},$),capture:!1,name:"check-icon"}),ft||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:jo({text:ft?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-fc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},at),name:"checked-text"});var vt=this.toggleGroup.getCanvasBBox(),Ft=(vt.maxX+vt.minX)/2,Xt=(vt.maxY+vt.minY)/2,Yt=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Yt=Rh(Yt,[["t",-Ft,-Xt],["s",u,u],["t",Ft+c*u,Xt+w*u]]),this.toggleGroup.setMatrix(Yt)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=Rh(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(sl,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=Infinity;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,a=f)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=Rh(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(sl,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=Xu.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=Xu.SINGLE),t.target.set("isChecked",!a),e.group.emit(sl,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),Hg=yE,oo=function(){return oo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},oo.apply(this,arguments)},mE=Dt,bE={fill:"#416180",opacity:.05},xE={fill:"#416180",opacity:.15,radius:5},EE={fill:"#5B8FF9",opacity:.3,cursor:"grab"},gv=2,wE={width:gv,height:24},SE={textBaseline:"middle",fill:"#000",opacity:.45},_E={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},ME={lineWidth:1,stroke:"#ccc"},CE=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(Ln){return function(Dn){t.currentHandler=Ln;var Yn=Dn.originalEvent;Yn.stopPropagation(),Yn.preventDefault(),t.prevX=(0,d.get)(Yn,"touches.0.pageX",Yn.pageX);var aa=t.canvas.get("container");aa.addEventListener("mousemove",t.onMouseMove),aa.addEventListener("mouseup",t.onMouseUp),aa.addEventListener("mouseleave",t.onMouseUp),aa.addEventListener("touchmove",t.onMouseMove),aa.addEventListener("touchend",t.onMouseUp),aa.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(Ln){Ln.stopPropagation(),Ln.preventDefault();var Dn=(0,d.get)(Ln,"touches.0.pageX",Ln.pageX),Yn=Dn-t.prevX,aa=t.adjustOffsetRange(Yn/t.width);t.updateStartEnd(aa),t.updateUI(),t.prevX=Dn},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var Ln=t.canvas.get("container");Ln&&(Ln.removeEventListener("mousemove",t.onMouseMove),Ln.removeEventListener("mouseup",t.onMouseUp),Ln.removeEventListener("mouseleave",t.onMouseUp),Ln.removeEventListener("touchmove",t.onMouseMove),Ln.removeEventListener("touchend",t.onMouseUp),Ln.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,l=c===void 0?10:c,w=e.trendCfg,M=e.controllerCfg,O=M===void 0?{speed:1}:M,W=e.backgroundStyle,$=W===void 0?{}:W,et=e.foregroundStyle,at=et===void 0?{}:et,ft=e.handlerStyle,vt=ft===void 0?{}:ft,Ft=e.textStyle,Xt=Ft===void 0?{}:Ft,Yt=e.start,he=Yt===void 0?0:Yt,_e=e.end,oe=_e===void 0?1:_e,Ue=e.minText,or=Ue===void 0?"":Ue,Kr=e.maxText,An=Kr===void 0?"":Kr,Sn=e.group,cn=e.graph,Fn=e.canvas,Pn=e.tick,tn=Pn===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Dn){return Dn},ticks:[]}:Pn,Mn=e.type;this.graph=cn,this.canvas=Fn,this.group=Sn,this.timeBarType=Mn,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=l,this.ticks=tn.ticks,this.trendCfg=w,this.controllerCfg=O,this.currentSpeed=O.speed||1,this.tickLabelFormatter=tn.tickLabelFormatter,Mn==="trend"?this.backgroundStyle=oo(oo({},bE),$):Mn==="simple"&&(this.backgroundStyle=oo(oo({},xE),$)),this.foregroundStyle=oo(oo({},EE),at),this.handlerStyle=oo(oo({},wE),vt),this.textStyle=oo(oo({},SE),Xt),this.tickLabelStyle=oo(oo({},_E),tn.tickLabelStyle),this.tickLineStyle=oo(oo({},ME),tn.tickLineStyle),this.currentMode=O.defaultTimeType||Xu.RANGE,this.start=he,this.end=oe,this.minText=or,this.maxText=An,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,d.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,d.size)((0,d.get)(this.trendCfg,"data"))){var o=new iE(oo(oo({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:oo({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:oo({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:oo({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:oo({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:oo({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:oo({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(et){et.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(et){et.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,d.get)(this.handlerStyle,"width",2),c=(0,d.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new Wg({name:"minHandlerShape",group:l,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var w=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new Wg({name:"maxHandlerShape",group:w,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var M=this.ticks,O=r/(M.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(et){et.destroy()});var W=-Infinity,$=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=M.map(function(et,at){e.tickPosList.push(e.x+at*O);var ft;e.tickLabelFormatter?(ft=e.tickLabelFormatter(et),!(0,d.isString)(ft)&&ft&&(ft=et.date)):ft=et.date;var vt=e.x+at*O,Ft=e.y+n+5,Xt=e.group.addShape("text",{attrs:oo({x:vt,y:Ft,text:ft,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,d.isNumber)($)&&at!==M.length-1){var Yt=mE([1,0,0,0,1,0,0,0,1],[["t",-vt,-Ft],["r",$],["t",vt-5,Ft+2]]);Xt.attr({textAlign:"left",matrix:Yt})}at===0?Xt.attr({textAlign:"left"}):at!==M.length-1&&Xt.attr({textAlign:"right"});var he=e.group.addShape("line",{attrs:oo({x1:e.x+at*O,y1:e.y+n+2,x2:e.x+at*O,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});he.toBack();var _e=Xt.getBBox();return _e.minX>W?(Xt.show(),he.show(),W=_e.minX+_e.width+10):(Xt.hide(),he.hide()),Xt}),this.controllerBtnGroup=new Hg(oo({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Xu.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(uc,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Ph,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(kh,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(sl,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===Xu.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Xu.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,d.get)(this.handlerStyle,"width",gv);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,d.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,d.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===Xu.RANGE?this.graph.emit(ju,{value:[this.start,this.end].sort()}):this.currentMode===Xu.SINGLE&&this.graph.emit(ju,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,d.get)(this.handlerStyle,"width",gv),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var l=o.getBBox(),w=s.getBBox(),M=null,O=null;return this.timeBarType==="trend"?(M=u-l.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},O=f+w.width>this.x+this.width?{x:f-a/2-n,textAlign:"right"}:{x:f+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(M=o.attr("x")>l.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},O=s.attr("x")>this.width-w.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[O,M]:[M,O]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(jg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Xg,null))},i.prototype.destory=function(){this.graph.off(ju,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(uc,":click")),e.off("".concat(Ph,":click")),e.off("".concat(kh,":click")),e.off(sl),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),AE=CE,Zw={opacity:.5,fill:"#000"},Kw={opacity:.5,fill:"#000",r:5},$w={fill:"#fff",fontSize:12},TE=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,l=c===void 0?"g6-component-timebar-tooltip":c,w=e.backgroundColor,M=w===void 0?"#000":w,O=e.textColor,W=O===void 0?"#fff":O,$=e.opacity,et=$===void 0?.8:$,at=e.fontSize,ft=at===void 0?12:at;this.container=o,this.className=l,this.backgroundColor=M,this.textColor=W,this.x=r,this.y=a,this.text=s,this.padding=f,this.opacity=et,this.fontSize=ft,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,l=e.container,w=co("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,d.isString)(l)&&(l=document.getElementById(l)),l.appendChild(w),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,za(w,{visibility:"hidden",top:0,left:0});var M=co(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));M.innerHTML=s,w.appendChild(M),e.backgroundDOM=M;var O=co("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));w.appendChild(O),e.arrowDOM=O,e.container=w},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;za(t.container,{top:"".concat(-f-l,"px"),left:"".concat(n,"px"),visibility:"visible"}),za(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),za(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var w=n-u/2,M=n+u/2;w<0?za(t.backgroundDOM,{marginLeft:"".concat(-u/2-w,"px")}):M>t.parentWidth&&za(t.backgroundDOM,{marginLeft:"".concat(-u/2-M+t.parentWidth+12,"px")})},i.prototype.hide=function(){za(this.container,{top:0,left:0,visibility:"hidden"})},i}(),IE=TE,Bh=function(){return Bh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Bh.apply(this,arguments)},OE=Dt,LE={fill:"#5B8FF9"},DE={fill:"#e6e8e9"},NE=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,l=e.x,w=l===void 0?0:l,M=e.y,O=M===void 0?0:M,W=e.tickLabelFormatter,$=e.selectedTickStyle,et=$===void 0?LE:$,at=e.unselectedTickStyle,ft=at===void 0?DE:at,vt=e.tooltipBackgroundColor,Ft=e.tooltipFomatter,Xt=e.tickLabelStyle,Yt=e.controllerCfg,he=Yt===void 0?{speed:1}:Yt;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=W,this.tickLabelStyle=Xt||{},this.selectedTickStyle=et,this.unselectedTickStyle=ft,this.controllerCfg=he,this.currentSpeed=he.speed||1,this.x=w,this.y=O,this.tooltipBackgroundColor=vt,this.tooltipFomatter=Ft,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,l=t.unselectedTickStyle,w=t.tickLabelStyle,M=r-2*a,O=10,W=4,$=3*a+W+O,et=n-$-2*a,at=2,ft=o.length,vt=(M-at*(ft-1))/ft;this.tickWidth=vt;var Ft=this.sliceGroup,Xt=[],Yt=[],he=Math.round(ft*s),_e=Math.round(ft*u);this.startTickRectId=he,this.endTickRectId=_e;var oe=w.rotate;delete w.rotate,o.forEach(function(or,Kr){var An=Kr>=he&&Kr<=_e,Sn=An?c:l,cn=Ft.addShape("rect",{attrs:Bh({x:a+Kr*(vt+at),y:a,width:vt,height:et},Sn),draggable:!0,name:"tick-rect-".concat(Kr)}),Fn=Ft.addShape("rect",{attrs:{x:a+Kr*vt+at*(2*Kr-1)/2,y:a,width:Kr===0||Kr===ft-1?vt+at/2:vt+at,height:et,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(Kr)});Fn.toFront();var Pn=cn.getBBox(),tn=(Pn.minX+Pn.maxX)/2;Xt.push({rect:cn,pickRect:Fn,value:or.date,x:tn,y:Pn.minY});var Mn;if(f?(Mn=f(or),!(0,d.isString)(Mn)&&Mn&&(Mn=or.date)):Kr%Math.round(ft/10)==0&&(Mn=or.date),Mn){Yt.push(Mn);var Ln=Pn.maxY+a*2;Ft.addShape("line",{attrs:{stroke:"#BFBFBF",x1:tn,y1:Ln,x2:tn,y2:Ln+W},name:"tick-line"});var Dn=Ln+W+a,Yn=Ft.addShape("text",{attrs:Bh({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:tn,y:Dn,textAlign:"center",text:Mn,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},w),capture:!1,name:"tick-label"}),aa=Yn.getBBox();if(aa.maxX>r?Yn.attr("textAlign","right"):aa.minX<0&&Yn.attr("textAlign","left"),(0,d.isNumber)(oe)&&Yt.length!==10){var Da=OE([1,0,0,0,1,0,0,0,1],[["t",-tn,-Dn],["r",oe],["t",tn-5,Dn+2]]);Yn.attr({textAlign:"left",matrix:Da})}Yt.length===1?Yn.attr({textAlign:"left"}):Yt.length===10&&Yn.attr({textAlign:"right"})}}),this.tickRects=Xt;var Ue=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Hg(Bh({group:Ue,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var l=c.target;if(!(l.get("type")!=="rect"||!l.get("name"))){var w=parseInt(l.get("name").split("-")[2],10);if(!isNaN(w)){var M=e.tickRects,O=e.unselectedTickStyle;M.forEach(function(at){at.rect.attr(O)});var W=e.selectedTickStyle;M[w].rect.attr(W),e.startTickRectId=w,e.endTickRectId=w;var $=M.length,et=w/$;e.graph.emit(ju,{value:[et,et]})}}}),t.on("dragstart",function(c){var l=e.tickRects,w=e.unselectedTickStyle;l.forEach(function(at){at.rect.attr(w)});var M=c.target,O=parseInt(M.get("name").split("-")[2],10),W=e.selectedTickStyle;l[O].rect.attr(W),e.startTickRectId=O;var $=l.length,et=O/$;e.graph.emit(ju,{value:[et,et]}),e.dragging=!0}),t.on("dragover",function(c){if(!!e.dragging&&c.target.get("type")==="rect"){for(var l=parseInt(c.target.get("name").split("-")[2],10),w=e.startTickRectId,M=e.tickRects,O=e.selectedTickStyle,W=e.unselectedTickStyle,$=0;$<M.length;$++){var et=$>=w&&$<=l?O:W;M[$].rect.attr(et)}var at=M.length;e.endTickRectId=l;var ft=w/at,vt=l/at;e.graph.emit(ju,{value:[ft,vt]})}}),t.on("drop",function(c){if(!!e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var l=e.startTickRectId,w=parseInt(c.target.get("name").split("-")[2],10);if(!(w<l)){var M=e.selectedTickStyle,O=e.tickRects;O[w].rect.attr(M),e.endTickRectId=w;var W=O.length,$=l/W,et=w/W;e.graph.emit(ju,{value:[$,et]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new IE({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var l=c.pickRect;l.on("mouseenter",function(w){var M=w.target;if(M.get("type")==="rect"){var O=parseInt(M.get("name").split("-")[2],10),W=o.getClientByPoint(u[O].x,u[O].y);s.show({x:u[O].x,y:u[O].y,clientX:W.x,clientY:W.y,text:a?a(u[O].value):u[O].value})}}),l.on("mouseleave",function(w){s.hide()})});var f=this.group;f.on("".concat(uc,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(Ph,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(kh,":click"),function(){e.updateStartEnd(-1)}),f.on(sl,function(c){var l=c.type,w=c.speed;e.currentSpeed=w})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(jg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Xg,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)==0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(ju,{value:[f,c]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(uc,":click")),e.off("".concat(Ph,":click")),e.off("".concat(kh,":click")),e.off(sl),this.sliceGroup.destroy()},i}(),PE=NE,kE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_f=function(){return _f=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},_f.apply(this,arguments)},RE=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},BE=4,FE=26,GE=function(i){kE(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,d.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{}}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=this.get("className")||"g6-component-timebar",s=this.get("container"),u=this.get("graph").get("container"),f;s?((0,d.isString)(s)&&(s=document.getElementById(s)),f=s):(f=co("<div class='".concat(o,"'></div>")),za(f,{position:"relative"})),u.appendChild(f),this.set("timeBarContainer",f);var c,l=t.get("renderer");l==="SVG"?c=new Mh({container:f,width:n,height:a}):c=new Ef({container:f,width:n,height:a}),this.get("containerCSS")&&za(f,this.get("containerCSS")),this.set("canvas",c)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");!r||(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,l=r.controllerCfg,w=r.textStyle,M=r.tick,O=r.backgroundStyle,W=r.foregroundStyle,$=f.data,et=RE(f,["data"]),at=n-2*s,ft=u==="trend"?FE:BE,vt=this.get("graph"),Ft=this.get("timeBarGroup"),Xt=this.get("canvas"),Yt=null;if(u==="trend"||u==="simple"){var he=this.get("getValue");Yt=new AE(_f(_f({graph:vt,canvas:Xt,group:Ft,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:at,height:ft,padding:s,backgroundStyle:O,foregroundStyle:W,trendCfg:_f(_f({},et),{data:$.map(function(oe){return(he==null?void 0:he(oe))||oe.value})})},c),{tick:{ticks:$,tickLabelFormatter:M.tickLabelFormatter,tickLabelStyle:M.tickLabelStyle,tickLineStyle:M.tickLineStyle},handlerStyle:_f(_f({},c.handlerStyle),{height:c.height||ft}),controllerCfg:l,textStyle:w}))}else u==="tick"&&(Yt=new PE(_f({graph:vt,canvas:Xt,group:Ft,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:l},M)));var _e=function oe(){var Ue=t.get("timebar");Ue.draggingHandler=!1,Ue.isPlay&&(Ue.isPlay=!1,Ue.currentHandler=Ue.maxHandlerShape,Ue.changePlayStatus()),document.removeEventListener("mouseup",oe)};Xt.on("mousedown",function(oe){(oe.target.get("name")==="maxHandlerShape-handler"||oe.target.get("name")==="minHandlerShape-handler"||oe.target===Yt.foregroundShape)&&document.addEventListener("mouseup",_e)}),this.set("timebar",Yt)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),l=Math.round(o.length*n[1]);l=l>=o.length?o.length-1:l,c=c>=o.length?o.length-1:c;var w=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,M=w?w(o[c]):o[c].date,O=w?w(o[l]):o[l].date;if(s!=="tick"){var W=this.get("timebar");W.setText(M,O)}if(u)u(f,M,O);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var $=this.get("filterItemTypes"),et=this.get("changeData"),at=this.get("getDate"),ft=this.get("shouldIgnore"),vt=o[c].date,Ft=o[l].date;if(et||et===void 0){var Xt=this.cacheGraphData.nodes,Yt=this.cacheGraphData.edges,he={},_e={};f.getNodes().forEach(function(oe){return he[oe.getID()]=!0}),f.getEdges().forEach(function(oe){return _e[oe.getID()]=!0}),$.includes("node")&&(Xt.forEach(function(oe){var Ue=+((at==null?void 0:at(oe))||oe.date),or=Ue>=vt&&Ue<=Ft||(ft==null?void 0:ft("node",oe,{min:vt,max:Ft})),Kr=he[oe.id];Kr&&!or?(f.removeItem(oe.id),he[oe.id]=!1):!Kr&&or&&(f.addItem("node",oe),he[oe.id]=!0)}),Yt==null||Yt.forEach(function(oe){var Ue=he[oe.source]&&he[oe.target]||(ft==null?void 0:ft("edge",oe,{min:vt,max:Ft})),or=!!f.findById(oe.id);or&&!Ue?(f.removeItem(oe.id),_e[oe.id]=!1):!or&&Ue?(f.addItem("edge",oe),_e[oe.id]=!0):or||(_e[oe.id]=!1)})),(this.get("filterEdge")||$.includes("edge"))&&(Yt==null||Yt.filter(function(oe){var Ue=+((at==null?void 0:at(oe))||oe.date),or=Ue>=vt&&Ue<=Ft||(ft==null?void 0:ft("edge",oe,{min:vt,max:Ft})),Kr=he[oe.source]&&he[oe.target],An=or&&Kr,Sn=_e[oe.id];Sn&&!An?(_e[oe.id]=!1,f.removeItem(oe.id)):!Sn&&An&&(_e[oe.id]=!0,f.addItem("edge",oe))}))}else $.includes("node")&&f.getNodes().forEach(function(oe){var Ue=oe.getModel();if(!(ft==null?void 0:ft("node",Ue,{min:vt,max:Ft}))){var or=+((at==null?void 0:at(Ue))||Ue.date);or<vt||or>Ft?f.hideItem(oe):f.showItem(oe)}}),(this.get("filterEdge")||$.includes("edge"))&&f.getEdges().forEach(function(oe){var Ue=oe.getModel();if(!(ft==null?void 0:ft("edge",Ue,{min:o[c].date,max:o[l].date}))){var or=+((at==null?void 0:at(Ue))||Ue.date);if(or<o[c].date||or>o[l].date)f.hideItem(oe);else{var Kr=oe.getSource().isVisible(),An=oe.getTarget().isVisible();Kr&&An&&f.showItem(oe)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(ju,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(ju,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,d.isString)(a)&&(a=document.getElementById(a)),a.removeChild(n)}},e}(As),zE=GE,UE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),WE=Cs.applyMatrix;function jE(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var XE=function(i){UE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,d.isString)(a)&&(a=document.getElementById(a));var o=co("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,l=0,w=0,M=0,O=0,W=0;a.addEventListener("mousedown",function($){if(r.refresh=!1,$.target===o){var et=o.style;w=parseInt(et.width,10),M=parseInt(et.height,10);var at=t.get("width"),ft=t.get("height");w>at||M>ft||(W=n.getZoom(),O=t.get("ratio"),f=!0,s=$.clientX,u=$.clientY)}},!1),a.addEventListener("mousemove",function($){if(!(!f||(0,d.isNil)($.clientX)||(0,d.isNil)($.clientY))){var et=t.get("width"),at=t.get("height"),ft=o.style;c=parseInt(ft.left,10),l=parseInt(ft.top,10),w=parseInt(ft.width,10),M=parseInt(ft.height,10);var vt=s-$.clientX,Ft=u-$.clientY;c-vt<0?vt=c:c-vt+w>=et&&(vt=0),l-Ft<0?Ft=l:l-Ft+M>=at&&(Ft=0),c-=vt,l-=Ft,za(o,{left:"".concat(c,"px"),top:"".concat(l,"px")}),n.translate(vt*W/O,Ft*W/O),s=$.clientX,u=$.clientY}},!1),a.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,f=a.getGroup(),c=f.getCanvasBBox(),l=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],w=[c.maxX-c.minX,c.maxY-c.minY],M={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(M.width=w[0],M.height=M.width/u):(M.height=w[1],M.width=M.height*u),M.minX=l[0]-M.width/2,M.minY=l[1]-M.height/2;var O=f.getMatrix();O||(O=[1,0,0,0,1,0,0,0,1]);var W=tt.invert([1,0,0,0,1,0,0,0,1],O),$=WE({x:M.minX,y:M.minY},W),et=a.getCanvasByPoint($.x,$.y),at=this.get("viewport");at||this.initViewport();var ft=o/M.width,vt=ft*r,Ft=ft*n,Xt=r*-et.x/M.width,Yt=n*-et.y/M.height,he=Xt+vt,_e=Yt+Ft;Xt<0&&(vt+=Xt,Xt=0),he>r&&(vt=vt-(he-r)),Yt<0&&(Ft+=Yt,Yt=0),_e>n&&(Ft=Ft-(_e-n)),this.set("ratio",t);var oe="".concat(Xt,"px"),Ue="".concat(Yt,"px");za(at,{left:oe,top:Ue,width:"".concat(vt,"px"),height:"".concat(Ft,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var l=co("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,d.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(l):r.get("container").appendChild(l),t.set("container",l);var w=co('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(w);var M=co('<span style="display: table-cell; vertical-align: middle; "></span>');w.appendChild(M),t.set("containerDOM",w),t.set("containerSpan",M);var O=co('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",O),t.updateImgSize(),M.appendChild(O),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=jE(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(!!t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=co('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(As),YE=XE,VE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pv=function(){return pv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},pv.apply(this,arguments)},HE=Cs.distance,Zg=.05,Kg={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},ZE=function(i){VE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,d.clone)(Kg),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-Zg:a=1/(1-Zg);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),l=r.get("vShapes");l&&l.forEach(function(et){et.remove(),et.destroy()}),l=[],a.forEach(function(et){var at=et.getModel(),ft=at.x,vt=at.y;HE({x:ft,y:vt},f)<s&&(o[at.id]=et)});var w=n.getEdges(),M=[];w.forEach(function(et){var at=et.getModel(),ft=at.source,vt=at.target;c(at)&&(u==="only-source"||u==="one"?o[ft]&&!o[vt]&&M.push(et):u==="only-target"||u==="one"?o[vt]&&!o[ft]&&M.push(et):u==="both"&&o[ft]&&o[vt]&&M.push(et))});var O=r.get("showNodeLabel"),W=r.get("showEdgelabel"),$=n.get("group");M.forEach(function(et){var at=et.get("group").get("children");at.forEach(function(ft){var vt=ft.get("type"),Ft=$.addShape(vt,{attrs:ft.attr()});l.push(Ft),O&&vt==="text"&&Ft.set("visible",!0)})}),Object.keys(o).forEach(function(et){var at=o[et],ft=at.get("group").clone();if($.add(ft),l.push(ft),W)for(var vt=ft.get("children"),Ft=0;Ft<vt.length;Ft++){var Xt=vt[Ft];Xt.get("type")==="text"&&Xt.set("visible",!0)}}),r.set("vShapes",l)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var l=r.get("dPercentText");l&&(l.remove(),l.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||Kg;o=s.addShape("circle",{attrs:pv({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(As),KE=ZE,$E=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QE=Cs.pointLineDistance,qE={stroke:"#FA8C16",lineWidth:1},JE=function(i){$E(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:qE,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");a===!0||a==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):a==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),a===!0||a==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):a==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,d.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},l={x:n.x+r.width/2,y:n.y+r.height/2},w={x:n.x+r.width/2,y:n.y+r.height},M={x:n.x,y:n.y+r.height/2},O={x:n.x+r.width,y:n.y+r.height/2},W=[],$=[],et=null;if(this.clearAlignLine(),(0,d.each)(s,function(ft){ft[4].isVisible&&(W.push(a.getLineDisObject(ft,c)),W.push(a.getLineDisObject(ft,l)),W.push(a.getLineDisObject(ft,w)))}),(0,d.each)(u,function(ft){ft[4].isVisible&&($.push(a.getLineDisObject(ft,M)),$.push(a.getLineDisObject(ft,l)),$.push(a.getLineDisObject(ft,O)))}),W.sort(function(ft,vt){return ft.dis-vt.dis}),$.sort(function(ft,vt){return ft.dis-vt.dis}),W.length!==0&&W[0].dis<f){t.y=W[0].line[1]-W[0].point.y+n.y,et={type:"item",horizontals:[W[0]]};for(var at=1;at<3;at++)W[0].dis===W[at].dis&&et.horizontals.push(W[at])}if($.length!==0&&$[0].dis<f){t.x=$[0].line[0]-$[0].point.x+n.x,et?et.verticals=[$[0]]:et={type:"item",verticals:[$[0]]};for(var at=1;at<3;at++)$[0].dis===$[at].dis&&et.verticals.push($[at])}et&&(et.bbox=r,this.addAlignLine(et))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),l=c.get("group");n==="item"&&(a&&(0,d.each)(a,function(w){var M=w.line,O=w.point,W=(M[0]+M[2])/2,$,et;O.x<W?($=O.x-r.width/2,et=Math.max(M[0],M[2])):($=O.x+r.width/2,et=Math.min(M[0],M[2]));var at=(0,d.mix)({x1:$,y1:M[1],x2:et,y2:M[1]},u),ft=l.addShape("line",{attrs:at,capture:!1});f.push(ft)}),o&&(0,d.each)(o,function(w){var M=w.line,O=w.point,W=(M[1]+M[3])/2,$,et;O.y<W?($=O.y-r.height/2,et=Math.max(M[1],M[3])):($=O.y+r.height/2,et=Math.min(M[1],M[3]));var at=(0,d.mix)({x1:M[0],y1:$,x2:M[0],y2:et},u),ft=l.addShape("line",{attrs:at,capture:!1});f.push(ft)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:QE(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,d.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(As),t2=JE,e2=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),To=function(){return To=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},To.apply(this,arguments)},r2=["click","mouseenter"],n2=function(i){e2(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=co(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();za(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,l=0,w={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+l};return u.forEach(function(M){var O=s[f[M]],W=M;switch(M){case"top":O+=l;break;case"left":O+=c;break;case"bottom":O=n.getHeight()-t[1]-O+l,W="top";break;default:O=n.getWidth()-t[0]-O+c,W="left";break}w[W]=O}),w.top+=o+n.getContainer().offsetTop,w.left+=a+n.getContainer().offsetLeft,Object.keys(w).forEach(function(M){w[M]="".concat(w[M],"px")}),w},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";r2.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();za(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var w=l.get("children"),M=w[0],O=w[1];M.attr(To(To({},M.get("oriAttrs")),s)),O.attr(To(To({},O.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var w=l.get("children"),M=w[0],O=w[1];M.attr(To(To({},M.get("oriAttrs")),f)),O.attr(To(To({},O.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(et){return et.get("name")==="root"}),l=c.find(function(et){return et.get("name")==="node-group"}),w=c.find(function(et){return et.get("name")==="edge-group"}),M=l.get("children").filter(function(et){return et.get("active")}),O=w.get("children").filter(function(et){return et.get("active")}),W=0,$=["getNodes","getEdges"];$.forEach(function(et){o[et]().forEach(function(at){var ft=!1,vt=et==="getNodes"?M:O;vt.forEach(function(Ft){var Xt=n[Ft.get("id")];ft=ft||Xt(at.getModel())}),ft?(o.setItemState(at,u,!1),o.setItemState(at,s,!0),W++):(o.setItemState(at,s,!1),o.setItemState(at,u,!0))})}),W||$.forEach(function(et){o[et]().forEach(function(at){o.clearItemStates(at,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(!!r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new Ef({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[a,o];u.forEach(function(cn,Fn){s[cn].forEach(function(Pn){var tn,Mn=f[Fn].addGroup({id:Pn.id,name:"node-container"}),Ln,Dn=Pn.type,Yn=t.getShapeSize(Pn),aa=Yn.width,Da=Yn.height,Pa=Yn.r,Wi=t.getStyle(cn.substr(0,4),Pn);switch(Pn.type){case"circle":Ln={r:Pa,x:0,y:0};break;case"rect":Ln={width:aa,height:Da,x:-aa/2,y:-Da/2};break;case"ellipse":Ln={r1:aa,r2:Da,x:0,y:0};break;case"line":Ln={x1:-aa/2,y1:0,x2:aa/2,y2:0},Dn="line";break;case"quadratic":Ln={path:[["M",-aa/2,0],["Q",0,aa/2,aa/2,0]]},Dn="path";break;case"cubic":Ln={path:[["M",-aa/2,0],["C",-aa/6,aa/2,aa/6,-aa/2,aa/2,0]]},Dn="path";break;default:Ln={r:Pa,x:0,y:0};break}var si=Mn.addShape(Dn,{attrs:To(To({},Ln),Wi),name:"".concat(Pn.type,"-node-keyShape"),oriAttrs:To({opacity:1},Wi)});if(Pn.label){var mi=si.getBBox(),di=((tn=Pn.labelCfg)===null||tn===void 0?void 0:tn.style)||{},Ci=To({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},di);Mn.addShape("text",{attrs:To({x:mi.maxX+4,y:0,text:Pn.label},Ci),className:"legend-label",name:"".concat(Pn.type,"-node-text"),oriAttrs:Ci})}})});var c=this.get("padding"),l,w=n.find(function(cn){return cn.get("name")==="title-container"}),M={height:0,maxY:0,width:0};if(this.get("title")){w||(w=n.addGroup({name:"title-container"}));var O={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},W=this.get("titleConfig")||{},$=Object.assign(O,W.style||{});l=w.addShape("text",{attrs:To({text:this.get("title")},$)}),M=w.getCanvasBBox(),w.setMatrix([1,0,0,0,1,0,W.offsetX,W.offsetY,1])}this.layoutItems();var et=n.getCanvasBBox(),at=a.getCanvasBBox(),ft=at.minX<0?Math.abs(at.minX)+c[3]:c[3],vt=M.maxY<at.minY?Math.abs(M.maxY-at.minY)+c[0]:M.maxY+c[0],Ft=[1,0,0,0,1,0,ft,vt,1];a.setMatrix(Ft),et=n.getCanvasBBox();var Xt=[et.minX+et.width+c[1],et.minY+et.height+c[2]];if(l){var W=To({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));M=w.getCanvasBBox();var Yt=w.getMatrix()||[1,0,0,0,1,0,0,0,1];W.position==="center"?Yt[6]=Xt[0]/2+W.offsetX:W.position==="right"?(Yt[6]=Xt[0]-c[3]+W.offsetX,l.attr({textAlign:"right"})):(Yt[6]=c[3]+W.offsetX,l.attr({textAlign:"left"})),w.setMatrix(Yt),M=w.getCanvasBBox(),ft=at.minX<0?Math.abs(at.minX)+c[3]:c[3],vt=at.minY<M.maxY?Math.abs(M.maxY-at.minY)+c[0]:M.maxY+c[0],Ft=[1,0,0,0,1,0,ft,vt,1],a.setMatrix(Ft);var he=[1,0,0,0,1,0,ft,vt,1];this.get("layout")==="vertical"?he[6]+=at.maxX+this.get("horiSep"):he[7]+=at.maxY+this.get("vertiSep"),o.setMatrix(he)}else{at=a.getCanvasBBox();var _e=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?_e[6]+=Ft[6]+at.maxX+this.get("horiSep"):_e[7]+=Ft[7]+at.maxY+this.get("vertiSep"),o.setMatrix(_e)}et=n.getCanvasBBox(),at=a.getCanvasBBox(),Ft=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var oe=o.getMatrix()||[1,0,0,0,1,0,0,0,1],Ue=o.getCanvasBBox();Xt=[Math.max(at.width+Ft[6],Ue.width+oe[6])+c[1],Math.max(at.height+Ft[7],Ue.height+oe[7])+c[2]],r.changeSize(Xt[0],Xt[1]);var or=this.get("containerStyle"),Kr=n.getMatrix()||[1,0,0,0,1,0,0,0,1],An=Cs.invertMatrix({x:0,y:0},Kr),Sn=n.addShape("rect",{attrs:To({x:An.x+(or.lineWidth||1),y:An.y+(or.lineWidth||1),width:Xt[0]-2*(or.lineWidth||1),height:Xt[1]-2*(or.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},or),name:"legend-back-rect",capture:!1});return Sn.toBack(),Xt},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(vt){return vt.get("name")==="root"}),f=u.find(function(vt){return vt.get("name")==="node-group"}),c=u.find(function(vt){return vt.get("name")==="edge-group"}),l={min:0,max:-Infinity},w=-Infinity;f.get("children").forEach(function(vt,Ft){Ft===0&&(l.min=s[0]);var Xt=vt.get("children")[0],Yt=vt.getCanvasBBox(),he=Xt.getBBox(),_e=he.width,oe=he.height,Ue=0,or=0,Kr=0;a==="vertical"?(or=s[1],Kr=s[0]+_e/2,s[0]=Kr+Yt.height+n,Ue=Yt.maxX+or+_e/2):(or=s[0]+_e/2,Kr=s[1],s[0]=or+Yt.width+r,Ue=Yt.maxY+Kr+oe/2),s[0]>l.max&&(l.max=s[0]),Ue>w&&(w=Ue),vt.setMatrix([1,0,0,0,1,0,or,Kr,1])});var M=l.max-l.min,O={min:0,max:-Infinity},W=f.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?W.maxX+r:W.maxY+n,c.get("children").forEach(function(vt,Ft){Ft===0&&(O.min=s[0]);var Xt=vt.get("children")[0],Yt=vt.getCanvasBBox(),he=Xt.getBBox(),_e=he.width,oe=he.height,Ue=0,or=0;a==="vertical"?(Ue=s[1],or=s[0],s[0]=or+Yt.height+n,vt.setMatrix([1,0,0,0,1,0,0,or+oe/2,1])):(Ue=s[0],or=s[1],s[0]=Ue+Yt.width+r,vt.setMatrix([1,0,0,0,1,0,Ue+_e/2,0,1])),s[0]>O.max&&(O.max=s[0])});var $=O.max-O.min;if(o&&o!==""&&o!=="left"){var et=M-$,at=o==="center"?Math.abs(et)/2:Math.abs(et),ft=et<0?f:c;ft.get("children").forEach(function(vt){var Ft=vt.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?Ft[7]+=at:Ft[6]+=at,vt.setMatrix(Ft)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,f,c=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],l=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,d.uniqueId)(),type:n.type||"circle",style:To({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:To({fontFamily:"Arial"},l)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,d.uniqueId)(),type:s,size:f,style:To({lineWidth:(0,d.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:To({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,d.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,d.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,d.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,d.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return To(To({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(As),a2=n2,i2=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tu=function(){return tu=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},tu.apply(this,arguments)},$g=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&ud()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var Qg="canvas-annotation",o2=function(i){i2(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=tu(tu({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,l=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",w=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),M="<p class='g6-annotation-close'>x</p>",O=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(O,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(l,`
          `).concat(M,`
        </div>
        `).concat(w,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new Ef({container:n,width:s.right-s.left,height:s.bottom-s.top});za(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,d.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(l){var w,M=((w=l==null?void 0:l.getModel)===null||w===void 0?void 0:w.call(l))||{},O=M.label,W=M.id;return O||W||"-"}),t.get("getContent")||t.set("getContent",function(l){var w,M;if(!l)return"-";var O=((w=l.getModel)===null||w===void 0?void 0:w.call(l))||{},W=O.label,$=O.id,et=(M=l.getType)===null||M===void 0?void 0:M.call(l),at=et?"".concat(et,": "):"";return"".concat(at).concat(W||$||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,l=c-f,w=u-s,M=r.position,O=M===void 0?"top":M,W=r.offsetX,$=W===void 0?0:W,et=r.offsetY,at=et===void 0?0:et,ft=$g(r,["position","offsetX","offsetY"]),vt=r.height,Ft=vt===void 0?"fit-content":vt,Xt=r.width,Yt=Xt===void 0?n.getWidth():Xt;Ft==="100%"&&(Ft=l),Yt==="100%"&&(Yt=w);var he="unset",_e="unset",oe={};switch(O){case"right":he="".concat(l,"px"),oe={top:0,right:0},oe.right+=s+$,oe.top+=f+at;break;case"bottom":_e="".concat(w,"px"),oe={bottom:0,left:0},oe.left+=s+$,oe.bottom+=f+at;break;case"top":_e="".concat(w,"px");case"left":he="".concat(l,"px");default:oe={top:0,left:0},oe.left+=s+$,oe.top+=f+at;break}Object.keys(oe).forEach(function(or){oe[or]="".concat(oe[or],"px")});var Ue=co("<div class='".concat(r.className," g6-annotation-container'></div>"));return za(Ue,tu(tu({position:"absolute",display:O==="top"||O==="bottom"?"inline-flex":"unset",width:(0,d.isNumber)(Yt)?"".concat(Yt,"px"):Yt,height:(0,d.isNumber)(Ft)?"".concat(Ft,"px"):Ft,maxHeight:he,maxWidth:_e,overflow:"scroll"},oe),ft)),a.appendChild(Ue),Ue.addEventListener("scroll",function(or){t.updateLinks()}),Ue}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),f=u.x,c=u.y,l=a.getClientByPoint(s.x,s.y),w=l.x,M=l.y;Object.values(n).forEach(function(O){var W=O.card;if(!!W){var $=W.style,et=ul($.left),at=ul($.top),ft=W.getBoundingClientRect(),vt=ft.width,Ft=ft.height,Xt=et,Yt=at;et+vt>w-f&&(Xt=w-f-vt),et<0&&(Xt=0),at+Ft>M-c&&(Yt=M-c-Ft),at<0&&(Yt=0),za(W,{left:"".concat(Xt,"px"),top:"".concat(Yt,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),l=Object.assign({},o.get("cardCfg")||{},r),w=l.minHeight,M=l.minWidth,O=l.width,W=l.height,$=l.collapsed,et=$===void 0?!1:$,at=l.x,ft=l.y,vt=l.title,Ft=l.content,Xt=l.maxTitleLength,Yt=l.defaultBegin,he=$g(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),_e=o.get("linkGroup"),oe=this.get("rows")||[[]],Ue=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),or=Ue?Qg:t.getID(),Kr=s[or]||{},An=Kr.card,Sn=Kr.link,cn=Kr.x,Fn=Kr.y,Pn=Kr.title,tn=Kr.content,Mn=this.get("getTitle"),Ln=this.get("getContent"),Dn=this.get("getContentPlaceholder")||function(){return""},Yn=this.get("getTitlePlaceHolder")||function(){return""},aa=Dn(t),Da=Yn(t),Pa=co(this.getDOMContent(tu({itemId:or,collapsed:et,title:((a=Pn||vt||(Mn==null?void 0:Mn(t)))===null||a===void 0?void 0:a.substr(0,Xt))||Da,content:tn||Ft||(Ln==null?void 0:Ln(t))||aa},he))),Wi=(0,d.isNumber)(w)?"".concat(w,"px"):w;za(Pa,{minHeight:et?"unset":Wi,minWidth:(0,d.isNumber)(M)?"".concat(M,"px"):M,height:W,width:O});var si=!!An;si?(Sn==null||Sn.remove(!0),f.replaceChild(Pa,An)):f.appendChild(Pa);var mi;if(!c){if(mi=f.getBoundingClientRect()||{},at!==void 0&&ft!==void 0)cn=at,Fn=ft;else if(!si&&!Ue){var di=mi.top,Ci=Yt||{},Si=Ci.left,bs=Ci.right,Zo=bs===void 0?16:bs,eu=Ci.top,Ko=eu===void 0?8:eu,$o=Ci.bottom,Bs=Zo,is=Ko;isNaN(Si)||(Bs=f.scrollWidth-Si),isNaN($o)||(is=f.scrollHeight-$o);var xs=(0,d.isNumber)(M)?M:100;cn=f.scrollWidth-Pa.scrollWidth-(oe.length-1)*xs-Bs;var Ua=oe[oe.length-1],bi=(Ua[Ua.length-1]||{}).bbox;Fn=(bi==null?void 0:bi.bottom)-di||is}za(Pa,{position:"absolute",left:"".concat(cn,"px"),top:"".concat(Fn,"px"),cusor:c?"unset":"move"})}this.bindListener(Pa,or);var Ra=Pa.getBoundingClientRect();if(!Ue){var xi=yv(t,Ra,u,this.get("canvas")),Pi=this.get("linkStyle");Sn=_e.addShape("path",{attrs:tu({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:xi},Pi)})}if(s[or]=tu(tu({},s[or]||{}),{id:or,collapsed:et,card:Pa,link:Sn,x:cn,y:Fn,cardBBox:Ra,content:tn||Ft,title:Pn||vt,contentPlaceholder:aa,titlePlaceholder:Da,isCanvas:Ue}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var la=!isNaN(at)&&!isNaN(ft);if(!si&&!Ue&&!la){var Ya=mi.bottom,Za=Ya===void 0?0:Ya,di=mi.top;oe[oe.length-1].push({id:or,bbox:Ra}),Ra.top>Za-di-Ra.height-16&&oe.push([]),this.set("rows",oe)}}this.updateCardSize(or);var ki=this.get("onAnnotationChange");ki==null||ki(s[or],si?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(!!t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=ul(o.paddingLeft)+ul(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":za(f,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":za(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(!!n){var a=n[t].collapsed,o=r.findById(t);if(!!o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=tu(tu({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;za(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!!r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(!!f){var c=n.get("graph"),l=c.findById(r);if(l){var w=n.get("itemHighlightState");c.setItemState(l,w,!0)}var M=f[r].link;if(M){var O=n.get("linkHighlightStyle")||{};M.attr(O)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(!!f){var c=n.get("graph"),l=c.findById(r);if(l){var w=n.get("itemHighlightState");c.setItemState(l,w,!1)}var M=f[r].link;if(M){var O=n.get("linkHighlightStyle")||{};Object.keys(O).forEach(function($){M.attr($,void 0),M.attr($,void 0)});var W=n.get("linkStyle");M.attr(W)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var l=n.get("cardCfg").closeType;l==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,l=c===void 0?20:c;if(!!f){var w=u.target,M=w.className;if(!(M!=="g6-annotation-title"&&M!=="g6-annotation-content")){var O=M==="g6-annotation-title"?w.getBoundingClientRect():w.parentNode.getBoundingClientRect(),W=O.width,$=O.height,et=getComputedStyle(w),at=M==="g6-annotation-title"?"input":"textarea",ft=co("<".concat(at,' class="').concat(M,'-input" type="textarea" style="width:').concat(W,"px; height: ").concat($,'px; min-width: 16px;"/>')),vt=co('<div class="'.concat(M,'-input-wrapper" style="width: ').concat(W,"px; height: ").concat($,"px; min-width: 16px; margin-right: ").concat(et.marginRight,'" />'));vt.appendChild(ft),w.parentNode.replaceChild(vt,w);var Ft=f[r],Xt=Ft.contentPlaceholder,Yt=Ft.titlePlaceholder,he=Ft.content,_e=Ft.title,oe=he;M==="g6-annotation-title"?(ft.name="title",ft.maxLength=l,oe=_e):ft.name="content",oe?(ft.innerHTML=w.innerHTML,ft.value=w.innerHTML):ft.placeholder=M==="g6-annotation-title"?Yt:Xt,ft.focus(),ft.addEventListener("blur",function(Ue){ft.value&&(w.innerHTML=ft.value,Ft[ft.name||"title"]=ft.value),vt.parentNode.replaceChild(w,vt),n.updateCardSize(r);var or=n.get("onAnnotationChange");or==null||or(Ft,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:ul(c.left),top:ul(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(!!f){var c=u.clientX,l=u.clientY,w=n.get("dragging");if(!(isNaN(c)||isNaN(l)||!w)){var M=w.x,O=w.y,W=w.left,$=w.top,et=w.card,at=c-M,ft=l-O;W+=at,$+=ft;var vt=n.get("graph"),Ft=vt.getPointByCanvas(0,0),Xt=vt.getPointByCanvas(vt.getWidth(),vt.getHeight()),Yt=vt.getClientByPoint(Ft.x,Ft.y),he=Yt.x,_e=Yt.y,oe=vt.getClientByPoint(Xt.x,Xt.y),Ue=oe.x,or=oe.y,Kr=et.getBoundingClientRect(),An=Kr.right-Kr.left,Sn=Kr.bottom-Kr.top;(W>Ue-he-An&&at>0||W<0&&at<0)&&(W-=at),($>or-_e-Sn&&ft>0||$<0&&ft<0)&&($-=ft),za(et,{left:"".concat(W,"px"),top:"".concat($,"px"),visibility:"hidden"}),M=c,O=l;var cn=(f[r]||{}).link;if(cn){var Fn=vt.findById(r);cn.attr("path",yv(Fn,Kr,vt,n.get("canvas")))}n.set("dragging",{x:M,y:O,left:W,top:$,card:et})}}});var s=function(f){var c=n.get("cardInfoMap");if(!!c){var l=n.get("dragging");if(l){var w=l.left,M=l.top,O=l.card;c[r].x=w,c[r].y=M,za(O,{visibility:"visible"}),n.set("dragging",!1);var W=n.get("rows");W==null||W.forEach(function(et){for(var at=et.length-1;at>=0;at--)et[at].id===r&&et.splice(at,1)});var $=n.get("onAnnotationChange");$==null||$(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(!!r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=ul(s.marginLeft),f=o.getBoundingClientRect().width;za(o,{marginRight:"".concat(a-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(!!r){var n=this.get("cardInfoMap");if(!!n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var l=yv(r,c.getBoundingClientRect(),o,a);f.attr("path",l)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(!!r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(!!r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(!!a){var o=r.getID();!a[o]||n||this.hideCard(o)}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(!!r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,l=u.x,w=u.y,M=u.id,O=u.collapsed,W=u.card;if(!(W&&W.style.display==="none"&&!t)){var $=n.findById(M)||n.get("canvas");s.push({id:M,x:l,y:w,collapsed:O,title:f||(a==null?void 0:a($)),content:c||(o==null?void 0:o($)),visible:W&&W.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,f=a.title,c=a.content,l=a.collapsed,w=a.visible,M=n.findById(o);if(!M&&o===Qg&&(M=n.get("canvas")),!M){var O=r.get("cardInfoMap")||{};O[o]=a,r.set("cardInfoMap",O);return}r.toggleAnnotation(M,{x:s,y:u,title:f,content:c,collapsed:l}),w||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(!!t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(As),s2=o2,u2=function(e,t){var r,n,a,o=Infinity;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(l){var w=t[l],M=c.x-w.x,O=c.y-w.y,W=M*M+O*O;o>W&&(o=W,r=c,n=w,a=[f,l])})});var s=20,u=Cs.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},yv=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),f=u.minX,c=u.minY,l=u.maxX,w=u.maxY,M=e.getModel(),O=M.x,W=M.y;f+=O,c+=W,l+=O,w+=W,o={left:{x:f,y:(c+w)/2},right:{x:l,y:(c+w)/2},top:{x:(f+l)/2,y:c},bottom:{x:(f+l)/2,y:w}}}Object.keys(o).forEach(function(_e){var oe=o[_e],Ue=oe.x,or=oe.y,Kr=r.getClientByPoint(Ue,or);o[_e]=n.getPointByClient(Kr.x,Kr.y)});var $=t.top,et=$===void 0?0:$,at=t.left,ft=at===void 0?0:at,vt=t.right,Ft=vt===void 0?0:vt,Xt=t.bottom,Yt=Xt===void 0?0:Xt,he={left:n.getPointByClient(ft,(et+Yt)/2),right:n.getPointByClient(Ft,(et+Yt)/2),top:n.getPointByClient((ft+Ft)/2,et),bottom:n.getPointByClient((ft+Ft)/2,Yt)};return u2(o,he)},ul=function(e){return Number(e.replace(/\s+|px/gi,""))||0},f2={PluginBase:As,Menu:Eb,Grid:yb,Minimap:Tb,Bundling:Db,ToolBar:Gb,Tooltip:Wb,Fisheye:kb,TimeBar:zE,ImageMinimap:YE,EdgeFilterLens:KE,SnapLine:t2,Legend:a2,Annotation:s2},c2=f2,Ho=c2;xf("circle",{options:{size:zn.defaultNode.size,style:{x:0,y:0,stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,d.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,l=o.show,w=o.text;if(l){var M="".concat(this.type,"-icon");w?t.shapeMap[M]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:M,name:M,draggable:!0}):t.shapeMap[M]=t.addShape("image",{attrs:(0,m.__assign)({x:-f/2,y:-c/2},o),className:M,name:M,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(!!r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),w=this.getSize(e),M=w[0]/2;if(o){var O="link-point-left";t.shapeMap[O]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:-M,y:0,r:f/2||c||5}),className:O,name:O,isAnchorPoint:!0})}if(s){var W="link-point-right";t.shapeMap[W]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:M,y:0,r:f/2||c||5}),className:W,name:W,isAnchorPoint:!0})}if(a){var $="link-point-top";t.shapeMap[$]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:-M,r:f/2||c||5}),className:$,name:$,isAnchorPoint:!0})}if(u){var et="link-point-bottom";t.shapeMap[et]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:M,r:f/2||c||5}),className:et,name:et,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,m.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,m.__assign)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),xf("rect",{options:{size:[100,30],style:{radius:0,stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),w=this.getSize(e),M=w[0],O=w[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:-M/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:M/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:-O/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:O/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,m.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,d.mix)({},a,s.attr(),u);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),xf("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),w=this.getSize(e),M=w[0]/2,O=w[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:-M,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:M,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:-O,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:O,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,m.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),xf("diamond",{options:{size:[80,80],style:{stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),w=this.getSize(e),M=w[0],O=w[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:-M/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:M/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:-O/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:O/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,m.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),xf("triangle",{options:{size:40,direction:"up",style:{stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=a.width,l=a.height,w=a.show,M=a.offset,O=a.text;if(w)if(O)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var W=-c/2,$=-l/2;(u==="up"||u==="down")&&($+=M),(u==="left"||u==="right")&&(W+=M),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:W,y:$},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,f=a.left,c=a.right,l=a.bottom,w=a.size,M=a.r,O=(0,m.__rest)(a,["top","left","right","bottom","size","r"]),W=this.getSize(e),$=W[0];if(f){var et=null,at=$*Math.sin(1/3*Math.PI),ft=$*Math.sin(1/3*Math.PI);s==="up"?et=[-ft,at]:s==="down"?et=[-ft,-at]:s==="left"&&(et=[-ft,ft-at]),et&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},O),{x:et[0],y:et[1],r:w/2||M||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var vt=null,at=$*Math.sin(1/3*Math.PI),ft=$*Math.sin(1/3*Math.PI);s==="up"?vt=[ft,at]:s==="down"?vt=[ft,-at]:s==="right"&&(vt=[ft,ft-at]),vt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},O),{x:vt[0],y:vt[1],r:w/2||M||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var Ft=null,at=$*Math.sin(1/3*Math.PI),ft=$*Math.sin(1/3*Math.PI);s==="up"?Ft=[ft-at,-at]:s==="left"?Ft=[ft,-at]:s==="right"&&(Ft=[-ft,-at]),Ft&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},O),{x:Ft[0],y:Ft[1],r:w/2||M||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var Xt=null,at=$*Math.sin(1/3*Math.PI),ft=$*Math.sin(1/3*Math.PI);s==="down"?Xt=[-ft+at,at]:s==="left"?Xt=[ft,at]:s==="right"&&(Xt=[-ft,at]),Xt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},O),{x:Xt[0],y:Xt[1],r:w/2||M||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,m.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(cn){return cn.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(cn){return cn.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(cn){return cn.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(cn){return cn.get("className")==="link-point-bottom"}),l=n,w=s||u||f||c;w&&(l=w.attr());var M=(0,d.mix)({},l,e.linkPoints),O=M.fill,W=M.stroke,$=M.lineWidth,et=M.size/2;et||(et=M.r);var at=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},ft=at.left,vt=at.right,Ft=at.top,Xt=at.bottom,Yt=this.getSize(e),he=Yt[0],_e={r:et,fill:O,stroke:W,lineWidth:$},oe=null,Ue=he*Math.sin(1/3*Math.PI),or=he*Math.sin(1/3*Math.PI);o==="up"?oe=[-or,Ue]:o==="down"?oe=[-or,-Ue]:o==="left"&&(oe=[-or,or-Ue]),oe&&(s?!ft&&ft!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,m.__assign)((0,m.__assign)({},_e),{x:oe[0],y:oe[1]})):ft&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},_e),{x:oe[0],y:oe[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var Kr=null;o==="up"?Kr=[or,Ue]:o==="down"?Kr=[or,-Ue]:o==="right"&&(Kr=[or,or-Ue]),Kr&&(u?!vt&&vt!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,m.__assign)((0,m.__assign)({},_e),{x:Kr[0],y:Kr[1]})):vt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},_e),{x:Kr[0],y:Kr[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var An=null;o==="up"?An=[or-Ue,-Ue]:o==="left"?An=[or,-Ue]:o==="right"&&(An=[-or,-Ue]),An&&(f?!Ft&&Ft!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,m.__assign)((0,m.__assign)({},_e),{x:An[0],y:An[1]})):Ft&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},_e),{x:An[0],y:An[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var Sn=null;o==="down"?Sn=[-or+Ue,Ue]:o==="left"?Sn=[or,Ue]:o==="right"&&(Sn=[-or,Ue]),Sn&&(c?!Xt&&Xt!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,m.__assign)((0,m.__assign)({},_e),{x:Sn[0],y:Sn[1]})):Xt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},_e),{x:Sn[0],y:Sn[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),xf("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:zn.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:zn.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:zn.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,l=(0,m.__rest)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,m.__assign)({x:-s/2,y:-u/2,height:u},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,w=n.text,M=(0,m.__rest)(n,["width","height","x","y","offset","text"]);w?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},M),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,m.__assign)((0,m.__assign)({},M),{x:f||-o/2+s+l,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,w=n.text,M=(0,m.__rest)(n,["width","height","x","y","offset","text"]);w?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},M),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,m.__assign)((0,m.__assign)({},M),{x:f||o/2-s+l,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,m.__rest)(n,["top","left","right","bottom","size","r"]),w=this.getSize(e),M=w[0],O=w[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:-M/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:M/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:-O/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},l),{x:0,y:O/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],w=null,M=s.show,O=s.width,W=-l/2+a.offset;M&&(W=-l/2+O+a.offset);var $=a.style,et=f.style,at=f.paddingTop;return(0,d.isString)(e.description)?(w=t.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},$),{x:W,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=w,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},et),{x:W,y:17+(at||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(w=t.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},$),{x:W,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=w),w},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,m.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],w=c[1],M=t.get("keyShape");M.attr((0,m.__assign)((0,m.__assign)({},a),{x:-l/2,y:-w/2,width:l,height:w}));var O=t.getContainer(),W=O.shapeMap["rect-logo-icon"]||O.find(function(Pa){return Pa.get("className")==="rect-logo-icon"}),$=W?W.attr():{},et=(0,d.mix)({},$,e.logoIcon),at=et.width;at===void 0&&(at=this.options.logoIcon.width);var ft=e.logoIcon?e.logoIcon.show:void 0,vt=s.offset,Ft=-l/2+at+vt;!ft&&ft!==void 0&&(Ft=-l/2+vt);var Xt=O.shapeMap["node-label"]||O.find(function(Pa){return Pa.get("className")==="node-label"}),Yt=O.shapeMap["rect-description"]||O.find(function(Pa){return Pa.get("className")==="rect-description"});if(e.label)if(!Xt)O.shapeMap["node-label"]=O.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},s.style),{x:Ft,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var he=e.labelCfg?e.labelCfg.style:{},_e=(0,d.mix)({},Xt.attr(),he);e.label&&(_e.text=e.label),_e.x=Ft,(0,d.isString)(e.description)&&(_e.y=-5),Yt&&(Yt.resetMatrix(),Yt.attr({x:Ft})),Xt.resetMatrix(),Xt.attr(_e)}if((0,d.isString)(e.description)){var oe=f.paddingTop;if(!Yt)O.shapeMap["rect-description"]=O.addShape("text",{attrs:(0,m.__assign)((0,m.__assign)({},f.style),{x:Ft,y:17+(oe||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var he=e.descriptionCfg?e.descriptionCfg.style:{},Ue=(0,d.mix)({},Yt.attr(),he);(0,d.isString)(e.description)&&(Ue.text=e.description),Ue.x=Ft,Yt.resetMatrix(),Yt.attr((0,m.__assign)((0,m.__assign)({},Ue),{y:17+(oe||0)}))}}var or=O.shapeMap["pre-rect"]||O.find(function(Pa){return Pa.get("className")==="pre-rect"});if(or&&!or.destroyed){var Kr=(0,d.mix)({},or.attr(),e.preRect);or.attr((0,m.__assign)((0,m.__assign)({},Kr),{x:-l/2,y:-w/2,height:w}))}if(W&&!W.destroyed)if(!ft&&ft!==void 0)W.remove(),delete O.shapeMap["pre-rect"];else{var An=et.width,Sn=et.height,cn=et.x,Fn=et.y,Pn=et.offset,tn=(0,m.__rest)(et,["width","height","x","y","offset"]);W.attr((0,m.__assign)((0,m.__assign)({},tn),{x:cn||-l/2+An+Pn,y:Fn||-Sn/2,width:An,height:Sn}))}else ft&&this.drawLogoIcon(e,O);var Mn=O.shapeMap["rect-state-icon"]||O.find(function(Pa){return Pa.get("className")==="rect-state-icon"}),Ln=Mn?Mn.attr():{},Dn=(0,d.mix)({},Ln,e.stateIcon);if(Mn){!Dn.show&&Dn.show!==void 0&&(Mn.remove(),delete O.shapeMap["rect-state-icon"]);var Yn=Dn.width,Sn=Dn.height,cn=Dn.x,Fn=Dn.y,aa=Dn.offset,Da=(0,m.__rest)(Dn,["width","height","x","y","offset"]);Mn.attr((0,m.__assign)((0,m.__assign)({},Da),{x:cn||l/2-Yn+aa,y:Fn||-Sn/2,width:Yn,height:Sn}))}else Dn.show&&this.drawStateIcon(e,O);this.updateLinkPoints(e,O)},getOptions:function(e,t){return t==="move"?e:(0,d.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),xf("star",{options:{size:60,style:{stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,l=n.r,w=(0,m.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),M=this.getSize(e),O=M[0];if(s){var W=Math.cos((18+72*0)/180*Math.PI)*O,$=Math.sin((18+72*0)/180*Math.PI)*O;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},w),{x:W,y:-$,r:c/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(a){var W=Math.cos((18+72*1)/180*Math.PI)*O,$=Math.sin((18+72*1)/180*Math.PI)*O;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},w),{x:W,y:-$,r:c/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(o){var W=Math.cos((18+72*2)/180*Math.PI)*O,$=Math.sin((18+72*2)/180*Math.PI)*O;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},w),{x:W,y:-$,r:c/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(u){var W=Math.cos((18+72*3)/180*Math.PI)*O,$=Math.sin((18+72*3)/180*Math.PI)*O;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},w),{x:W,y:-$,r:c/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var W=Math.cos((18+72*4)/180*Math.PI)*O,$=Math.sin((18+72*4)/180*Math.PI)*O;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},w),{x:W,y:-$,r:c/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){for(var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n,o=[],s=0;s<5;s++){var u=Math.cos((18+72*s)/180*Math.PI)*r,f=Math.sin((18+72*s)/180*Math.PI)*r,c=Math.cos((54+72*s)/180*Math.PI)*a,l=Math.sin((54+72*s)/180*Math.PI)*a;s===0?o.push(["M",u,-f]):o.push(["L",u,-f]),o.push(["L",c,-l])}return o.push(["Z"]),o},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,m.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Ue){return Ue.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Ue){return Ue.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Ue){return Ue.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(Ue){return Ue.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(Ue){return Ue.get("className")==="link-point-right-bottom"}),f=r,c=n||a||o||s||u;c&&(f=c.attr());var l=(0,d.mix)({},f,e.linkPoints),w=l.fill,M=l.stroke,O=l.lineWidth,W=l.size/2;W||(W=l.r);var $=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},et=$.left,at=$.right,ft=$.top,vt=$.leftBottom,Ft=$.rightBottom,Xt=this.getSize(e),Yt=Xt[0],he={r:W,fill:w,stroke:M,lineWidth:O},_e=Math.cos((18+72*0)/180*Math.PI)*Yt,oe=Math.sin((18+72*0)/180*Math.PI)*Yt;a?!at&&at!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,m.__assign)((0,m.__assign)({},he),{x:_e,y:-oe})):at&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},he),{x:_e,y:-oe}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),_e=Math.cos((18+72*1)/180*Math.PI)*Yt,oe=Math.sin((18+72*1)/180*Math.PI)*Yt,o?!ft&&ft!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,m.__assign)((0,m.__assign)({},he),{x:_e,y:-oe})):ft&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},he),{x:_e,y:-oe}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),_e=Math.cos((18+72*2)/180*Math.PI)*Yt,oe=Math.sin((18+72*2)/180*Math.PI)*Yt,n?!et&&et!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,m.__assign)((0,m.__assign)({},he),{x:_e,y:-oe})):et&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},he),{x:_e,y:-oe}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),_e=Math.cos((18+72*3)/180*Math.PI)*Yt,oe=Math.sin((18+72*3)/180*Math.PI)*Yt,s?!vt&&vt!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,m.__assign)((0,m.__assign)({},he),{x:_e,y:-oe})):vt&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},he),{x:_e,y:-oe}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),_e=Math.cos((18+72*4)/180*Math.PI)*Yt,oe=Math.sin((18+72*4)/180*Math.PI)*Yt,u?!Ft&&Ft!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,m.__assign)((0,m.__assign)({},he),{x:_e,y:-oe})):Ft&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,m.__assign)((0,m.__assign)({},he),{x:_e,y:-oe}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var Fh=Cs.defaultSubjectColors;xf("donut",{options:{size:zn.defaultNode.size,style:{x:0,y:0,stroke:zn.defaultNode.style.stroke,fill:zn.defaultNode.style.fill,lineWidth:zn.defaultNode.style.lineWidth},labelCfg:{style:{fill:zn.nodeLabel.style.fill,fontSize:zn.nodeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:zn.defaultNode.linkPoints.size,lineWidth:zn.defaultNode.linkPoints.lineWidth,fill:zn.defaultNode.linkPoints.fill,stroke:zn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,m.__assign)({},zn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,d.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,l=o.text;c&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,m.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,m.__assign)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}));var w=s.attr("r"),M=.6*w,O=(w+M)/2,W=e,$=W.donutAttrs,et=$===void 0?{}:$,at=W.donutColorMap,ft=at===void 0?{}:at,vt=Object.keys(et).length;if(et&&vt>1){var Ft=[],Xt=0;if(Object.keys(et).forEach(function(oe){var Ue=et[oe]||0;!(0,d.isNumber)(Ue)||(Ft.push({key:oe,value:Ue,color:ft[oe]}),Xt+=Ue)}),Xt){var Yt=w-M;if(vt===1){t.shapeMap["fan-shape-0"]=t.addShape("circle",{attrs:{r:O,x:0,y:0,stroke:Ft[0].color||Fh[0],lineWidth:Yt},name:"fan-shape-0",draggable:!0});return}var he=[O,0],_e=0;Ft.forEach(function(oe,Ue){var or=oe.value/Xt;if(!(or<.001)){if(or>.999&&(or=1),or===1){t.shapeMap["fan-shape-".concat(Ue)]=t.addShape("circle",{attrs:{r:O,x:0,y:0,stroke:oe.color||Fh[Ue%Fh.length],lineWidth:Yt},name:"fan-shape-".concat(Ue),draggable:!0});return}oe.percent=or,oe.angle=or*Math.PI*2,oe.beginAgnle=_e,_e+=oe.angle,oe.endAngle=_e,oe.arcBegin=he,oe.arcEnd=[O*Math.cos(oe.endAngle),-O*Math.sin(oe.endAngle)];var Kr=oe.angle>Math.PI?1:0,An=[["M",oe.arcBegin[0],oe.arcBegin[1]],["A",O,O,0,Kr,0,oe.arcEnd[0],oe.arcEnd[1]],["L",oe.arcEnd[0],oe.arcEnd[1]]];t.shapeMap["fan-shape-".concat(Ue)]=t.addShape("path",{attrs:{path:An,lineWidth:Yt,stroke:oe.color||Fh[Ue%Fh.length]},name:"fan-shape-".concat(Ue),draggable:!0}),he=oe.arcEnd}})}}return this.drawLinkPoints(e,t),s},update:void 0},"circle");var pd=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},l2=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},Qw=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},mv=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]=o,t.push(o)}return t},qg=function(e){return mv(e)},qw=function(e,t){return[e,{x:e.x,y:t.y},t]},yd=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},h2=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},bv=function(e,t,r){var n=h2(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},Jg=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},xv=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},md=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},d2=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},v2=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},g2=function(e,t){return d2(e,t.x).concat(v2(e,t.y))},Gh=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},p2=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},tp=function(e,t,r,n,a){return Gh(e,t)+Gh(e,r)+p2(e,[t,r,n,a])},y2=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},m2=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},bd=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,l=n.x-t.x,w=n.y-t.y,M=a*u-o*s,O=f*w-c*l,W=a*c-o*f,$=s*w-u*l;return M*O<=0&&W*$<=0},Ev=function(e,t,r){if(r.width||r.height){var n=xv(r),a=n[0],o=n[1],s=n[2],u=n[3];return bd(e,t,a,o)||bd(e,t,a,u)||bd(e,t,o,s)||bd(e,t,s,u)}return!1},b2=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(Ev(o,t,r)||Ev(o,t,n))return;a.push(o)}}),mv(a)},x2=function(e,t,r,n,a,o,s){var u=[],f=[t],c={},l={},w={};l[t.id]=0,w[t.id]=tp(t,r,t);var M={};e.forEach(function(et){M[et.id]=et});for(var O,W;f.length;){if(O=void 0,W=Infinity,f.forEach(function(et){w[et.id]<=W&&(W=w[et.id],O=et)}),O===r){var $=[];return y2($,M,c,r.id),$}m2(f,O),u.push(O),b2(e,O,n,a).forEach(function(et){if(u.indexOf(et)===-1){f.indexOf(et)===-1&&f.push(et);var at=w[O.id]+Gh(O,et);l[et.id]&&at>=l[et.id]||(c[et.id]=O.id,l[et.id]=at,w[et.id]=l[et.id]+tp(et,r,t,o,s))}})}return[t,r]},E2=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},w2=function(e,t,r,n){var a=Gh(e,t),o=Gh(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},ep=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(E2(a,s,u)){var f=w2(a,s,u,t),c=f[0],l=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},rp=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=pd(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,l=f.y;o={x:c,y:l,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+l,maxY:u.maxY+l},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=pd(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=pd(t);else if(n.getType()==="combo"){var w=n.getKeyShape().getBBox();if(w){var M=n.getModel(),O=M.x,W=M.y;s={x:O,y:W,width:w.width,height:w.height,minX:w.minX+O,maxX:w.maxX+O,minY:w.minY+W,maxY:w.maxY+W},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=pd(t)}else s=n&&n.getBBox();var $=yd(o,a),et=yd(s,a),at=bv($,e,t),ft=bv(et,t,e),vt=l2([at,ft]),Ft=Jg($,vt),Xt=Jg(et,vt),Yt=[];Yt=Yt.concat(xv(Ft)).concat(xv(Xt));var he={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[vt,Ft,Xt].forEach(function(oe){Yt=Yt.concat(g2(oe,he).filter(function(Ue){return md(Ue,$)&&md(Ue,et)}))}),[{x:at.x,y:ft.y},{x:ft.x,y:at.y}].forEach(function(oe){md(oe,$)&&md(oe,et)&&Yt.push(oe)}),Yt.unshift(at),Yt.push(ft),Yt=mv(Yt);var _e=x2(Yt,at,ft,o,s,e,t);return _e.unshift(e),_e.push(t),qg(_e)},S2=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},_2=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},M2=function(e,t){return[e,t]},C2=function(e,t,r,n,a){return qg(rp(e,t,r,n,a.offset))},A2={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:S2,fallbackRoute:C2},Jw={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:_2,fallbackRoute:M2},Mf=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},T2=function(e,t,r){var n={};return e.forEach(function(a){if(!!a)for(var o=yd(a.getBBox(),r),s=Mf(o.minX,t);s<=Mf(o.maxX,t);s+=1)for(var u=Mf(o.minY,t);u<=Mf(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},wv=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},np=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},ap=function(e,t,r){for(var n=Infinity,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},ip=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,l=yd(f,u);for(var w in l)l[w]=Mf(l[w],a.gridSize);if(c){for(var M=0,O=s;M<O.length;M++)for(var W=O[M],$=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],w=0;w<4;w++){var et=$[w],at=Cs.getLineIntersect(e,{x:e.x+W.stepX*l.width,y:e.y+W.stepY*l.height},et[0],et[1]);at&&!Ev(e,at,f)&&(at.id="".concat(at.x,"|||").concat(at.y),o.push(at))}return o}var ft=bv(l,e,n);return ft.id="".concat(ft.x,"|||").concat(ft.y),[ft]},Sv=function(e,t,r,n){var a=wv(e,t);if(!r[e.id]){var o=wv(n,e);return np(o,a)}var s=wv({x:r[e.id].x,y:r[e.id].y},e);return np(s,a)},I2=function(e,t,r,n,a,o,s){var u=[n],f=e.id,c=e.x,l=e.y,w={x:c,y:l,id:f};for(Sv(w,o,t,r)&&u.unshift({x:o.x===n.x?n.x:w.x*s,y:o.y===n.y?n.y:w.y*s});t[f]&&t[f].id!==f;){var M={x:c,y:l,id:f},O=t[f].id,W=t[f].x,$=t[f].y,et={x:W,y:$,id:O},at=Sv(et,M,t,r);at&&u.unshift({x:et.x===M.x?u[0].x:et.x*s,y:et.y===M.y?u[0].y:et.y*s}),f=O,c=W,l=$}var ft={x:c,y:l,id:f};return u[0].x=ft.x===r.x?a.x:u[0].x,u[0].y=ft.y===r.y?a.y:u[0].y,u.unshift(a),u},O2=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,d.deepMix)(A2,a);o.obstacles=o.obstacles||[];var s=o.gridSize,u=T2(o.obstacles.concat([r,n]),s,o.offset),f={x:Mf(e.x,s),y:Mf(e.y,s)},c={x:Mf(t.x,s),y:Mf(t.y,s)};e.id="".concat(f.x,"|||").concat(f.y),t.id="".concat(c.x,"|||").concat(c.y);var l=ip(f,e,r,c,o),w=ip(c,t,n,f,o);l.forEach(function(Kr){delete u[Kr.id]}),w.forEach(function(Kr){delete u[Kr.id]});for(var M={},O={},W={},$={},et={},at=0;at<l.length;at++){var ft=l[at];M[ft.id]=ft,$[ft.id]=0,et[ft.id]=ap(ft,w,o.distFunc)}for(var vt=o.maximumLoops,Ft=o.penalties,Xt,Yt,he,_e,oe,Ue,or;Object.keys(M).length>0&&vt>0&&(Xt=void 0,Yt=Infinity,Object.keys(M).forEach(function(Kr){var An=M[Kr].id;et[An]<=Yt&&(Yt=et[An],Xt=M[An])}),!!Xt);){if(w.findIndex(function(Kr){return Kr.x===Xt.x&&Kr.y===Xt.y})>-1)return I2(Xt,W,f,t,e,c,s);delete M[Xt.id],O[Xt.id]=!0;for(var at=0;at<o.directions.length;at++)he=o.directions[at],_e={x:Xt.x+he.stepX,y:Xt.y+he.stepY,id:"".concat(Math.round(Xt.x)+he.stepX,"|||").concat(Math.round(Xt.y)+he.stepY)},!O[_e.id]&&(or=Sv(Xt,_e,W,f),!(or>o.maxAllowedDirectionChange)&&(u[_e.id]||(M[_e.id]||(M[_e.id]=_e),oe=o.distFunc(Xt,_e)+(isNaN(Ft[or])?s:Ft[or]),Ue=$[Xt.id]+oe,!($[_e.id]&&Ue>=$[_e.id])&&(W[_e.id]=Xt,$[_e.id]=Ue,et[_e.id]=Ue+ap(_e,w,o.distFunc)))));vt-=1}return o.fallbackRoute(e,t,r,n,o)};l0("polyline",{options:{color:zn.defaultEdge.color,size:zn.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:zn.defaultEdge.style.stroke,lineAppendWidth:zn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:zn.edgeLabel.style.fill,fontSize:zn.edgeLabel.style.fontSize,fontFamily:zn.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,m.__assign)({},zn.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,d.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,l=n.radius,w=this.options.routeCfg,M=(0,d.mix)({},w,e.routeCfg);M.offset=n.offset;var O=this.getPath(u,f,c,l,M);((0,d.isArray)(O)&&O.length<=1||(0,d.isString)(O)&&O.indexOf("L")===-1)&&(O="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(O="M0 0, L0 0");var W=(0,d.mix)({},zn.defaultEdge.style,n,{lineWidth:e.size,path:O});return W},updateShapeStyle:function(e,t){var r=t.getContainer();if(!!t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(vt){return vt.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var l=a.attr(),w=(0,d.mix)({},n,l,e.style),M=e.sourceNode,O=e.targetNode,W=w.radius,$=this.options.routeCfg,et=(0,d.mix)({},$,e.routeCfg);et.offset=w.offset;var at=this.getPath(c,M,O,W,et);((0,d.isArray)(at)&&at.length<=1||(0,d.isString)(at)&&at.indexOf("L")===-1)&&(at="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(at="M0 0, L0 0"),l.endArrow&&w.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&w.startArrow===!1&&(e.style.startArrow={path:""});var ft=(0,d.mix)(n,a.attr(),{lineWidth:o,path:at},e.style);a&&a.attr(ft)}},getPath:function(e,t,r,n,a){var o=a.offset,s=a.simple;if(!o||e.length>2){if(n)return ep(e,n);var u=[];return(0,d.each)(e,function(w,M){M===0?u.push(["M",w.x,w.y]):u.push(["L",w.x,w.y])}),u}var f=s?rp(e[e.length-1],e[0],r,t,o):O2(e[0],e[e.length-1],t,r,a);if(!f||!f.length)return"M0 0, L0 0";if(n){var c=ep(f,n);return c}var l=Cs.pointsToPolygon(f);return l}},"single-edge");var op=wf.cloneEvent,sp=wf.isNaN,up=Math.abs,L2=10,D2=["shift","ctrl","alt","control"],N2={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(sp(r)||sp(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,l=this.scalableRange;c<1&&c>-1&&(c=s*c,l=u*l),(f.minX<=s+c&&f.minX+a>s+c||f.maxX+c>=0&&f.maxX+c+a<0)&&(a=0),(f.minY<=u+l&&f.minY+o>u+l||f.maxY+l>=0&&f.maxY+l+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){!this.mousedown||(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&!!this.shouldBegin(e,this)&&!t.keydown){var n=e.target,a=n&&n.isCanvas&&n.isCanvas();if(!(!this.allowDragOnItem&&!a)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var o=this.graph,s=o.getEdges(),u=0,f=s.length;u<f;u++){var c=s[u].get("group").get("children");!c||c.forEach(function(Ft){Ft.set("ori-visibility",Ft.get("ori-visibility")||Ft.get("visible")),Ft.hide()})}for(var l=o.getNodes(),w=0,M=l.length;w<M;w++)for(var O=l[w].getContainer(),W=O.get("children"),$=0,et=W;$<et.length;$++){var at=et[$],ft=at.get("isKeyShape");ft||(at.set("ori-visibility",at.get("ori-visibility")||at.get("visible")),at.hide())}}if(typeof window!="undefined"){var vt=this;this.handleDOMContextMenu=function(Ft){return vt.onMouseUp(Ft)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(!!this.mousedown){var t=this.graph;if(!this.keydown){var r=e.target,n=r&&r.isCanvas&&r.isCanvas();if(!(!this.allowDragOnItem&&!n)&&(e=op(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(up(this.origin.x-e.clientX)+up(this.origin.y-e.clientY)<L2)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(Yt){return Yt.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,l=f.length;c<l;c++){var w=f[c].get("group").get("children");!w||w.forEach(function(Yt){var he=Yt.get("ori-visibility");Yt.set("ori-visibility",void 0),he&&Yt.show()})}if(a>u)for(var M=n.getNodes(),O=0,W=M.length;O<W;O++)for(var $=M[O].getContainer(),et=$.get("children"),at=0,ft=et;at<ft.length;at++){var vt=ft[at],Ft=vt.get("isKeyShape");if(!Ft){var Xt=vt.get("ori-visibility");vt.set("ori-visibility",void 0),Xt&&vt.show()}}}if(!this.dragging){this.origin=null;return}e=op(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;!r||(D2.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},P2={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(!!e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target}},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}!this.mousedown||(this.dragstart?this.onDrag((0,m.__assign)((0,m.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,m.__assign)((0,m.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),l=f.filter(function(O){var W=O.get("id");return c===W});if(l.length===0?this.targets.push(n):f.length>1?f.forEach(function(O){var W=O.hasLocked();W||t.targets.push(O)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var w=[];this.targets.forEach(function(O){var W=O.getModel(),$=W.x,et=W.y,at=W.id;w.push({x:$,y:et,id:at})}),this.set("beforeDragNodes",w)}if(this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(O){var W=O.getEdges();W.forEach(function($){!$.isVisible()||(t.hidenEdge[$.getID()]=!0,$.hide())})}),this.origin={x:e.x,y:e.y},this.point={},this.originPoint={},typeof window!="undefined"){var M=this;this.handleDOMContextMenu=function(){return M.onDragEnd()},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}}},onDrag:function(e){var t=this;!this.mousedown||!this.origin||!this.shouldUpdate(e,this)||(this.get("enableDelegate")?this.updateDelegate(e):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge")}):this.targets.map(function(r){t.update(r,e)}))},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;a.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,d.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null,typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?t.updateCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)n.updateCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();a!==f.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(!!this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(!!this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),updateFunc:this.update}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,d.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.updateFunc;e.map(function(u){var f=u.get("model"),c=u.get("id");r[c]||(r[c]={x:f.x||0,y:f.y||0});var l=a.x-n.x+r[c].x,w=a.y-n.y+r[c].y,M={x:l,y:w};o?t.updateItem(u,M,!1):u.updatePosition(M)})},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var w=e.x-this.origin.x+this.originPoint.minX,M=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:w,y:M})}else{var r=t.get("group"),n=(0,d.deepMix)({},nl.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,f=a.height,c=a.minX,l=a.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:l},this.delegateRect=r.addShape("rect",{attrs:(0,m.__assign)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=Infinity,n=-Infinity,a=Infinity,o=-Infinity,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,l=f.minY,w=f.maxX,M=f.maxY;c<r&&(r=c),l<a&&(a=l),w>n&&(n=w),M>o&&(o=M)}var O=Math.floor(r),W=Math.floor(a),$=Math.ceil(n)-Math.floor(r),et=Math.ceil(o)-Math.floor(a);return{x:O,y:W,width:$,height:et,minX:r,minY:a}}},k2={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,d.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){for(var n=e.activeState,a=e.inactiveState,o=r.getNodes(),s=r.getCombos(),u=r.getEdges(),f=r.get("vedges"),c=o.length,l=s.length,w=u.length,M=f.length,O=e.inactiveItems||{},W=e.activeItems||{},$=0;$<c;$++){var et=o[$],at=et.getID(),ft=et.hasState("selected");e.resetSelected&&ft&&r.setItemState(et,"selected",!1),W[at]&&(r.setItemState(et,n,!1),delete W[at]),a&&!O[at]&&(r.setItemState(et,a,!0),O[at]=et)}for(var $=0;$<l;$++){var vt=s[$],Ft=vt.getID(),ft=vt.hasState("selected");e.resetSelected&&ft&&r.setItemState(vt,"selected",!1),W[Ft]&&(r.setItemState(vt,n,!1),delete W[Ft]),a&&!O[Ft]&&(r.setItemState(vt,a,!0),O[Ft]=vt)}for(var $=0;$<w;$++){var Xt=u[$],Yt=Xt.getID();W[Yt]&&(r.setItemState(Xt,n,!1),delete W[Yt]),a&&!O[Yt]&&(r.setItemState(Xt,a,!0),O[Yt]=Xt)}for(var $=0;$<M;$++){var he=f[$],_e=he.getID();W[_e]&&(r.setItemState(he,n,!1),delete W[_e]),a&&!O[_e]&&(r.setItemState(he,a,!0),O[_e]=he)}a&&(r.setItemState(t,a,!1),delete O[t.getID()]),W[t.getID()]||(r.setItemState(t,n,!0),W[t.getID()]=t);for(var oe=t.getEdges(),Ue=oe.length,$=0;$<Ue;$++){var Xt=oe[$],Yt=Xt.getID(),or=void 0;Xt.getSource()===t?or=Xt.getTarget():or=Xt.getSource();var Kr=or.getID();a&&O[Kr]&&(r.setItemState(or,a,!1),delete O[Kr]),W[Kr]||(r.setItemState(or,n,!0),W[Kr]=or),O[Yt]&&(r.setItemState(Xt,a,!1),delete O[Yt]),W[Yt]||(r.setItemState(Xt,n,!0),W[Yt]=Xt),Xt.toFront()}e.activeItems=W,e.inactiveItems=O,r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,d.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&!!e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},xd=Math.min,fp=Math.max,cp=Math.abs,lp="shift",R2=["drag","shift","ctrl","alt","control"],B2={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:lp,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return R2.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=lp,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){!this.dragging||this.trigger!=="drag"&&!this.keydown||this.updateBrush(e)},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(a.x,a.y),l=xd(f.x,c.x),w=fp(f.x,c.x),M=xd(f.y,c.y),O=fp(f.y,c.y),W=[],$=[];n.getNodes().forEach(function(ft){if(ft.isVisible()&&s(ft,l,w,M,O)&&o(ft,"select",t)){W.push(ft);var vt=ft.getModel();$.push(vt.id),n.setItemState(ft,u,!0)}});var et=[];this.includeEdges&&W.forEach(function(ft){var vt=ft.getOutEdges();vt.forEach(function(Ft){if(!!Ft.isVisible()){var Xt=Ft.getModel(),Yt=Xt.source,he=Xt.target;$.includes(Yt)&&$.includes(he)&&o(Ft,"select",t)&&(et.push(Ft),n.setItemState(Ft,t.selectedState,!0))}})});var at=[];this.includeCombos&&n.getCombos().forEach(function(ft){if(ft.isVisible()&&s(ft,l,w,M,O)&&o(ft,"select",t)){at.push(ft);var vt=ft.getModel();$.push(vt.id),n.setItemState(ft,u,!0)}}),this.selectedEdges=et,this.selectedNodes=W,this.selectedCombos=at,this.onSelect&&this.onSelect(W,et,at),n.emit("nodeselectchange",{selectedItems:{nodes:W,edges:et,combos:at},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:cp(e.canvasX-t.x),height:cp(e.canvasY-t.y),x:xd(e.canvasX,t.x),y:xd(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(!!t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},hp="shift",F2=["shift","ctrl","alt","control"],G2={getDefaultCfg:function(){return{multiple:!0,trigger:hp,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return F2.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=hp,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(!!f(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,d.each)(c,function(W){W!==r&&a.setItemState(W,t.selectedState,!1)})}var l=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!l){var w=a.findAllByState("node",t.selectedState),M=a.findAllByState("edge",t.selectedState),O=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:w,edges:M,combos:O},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var w=a.findAllByState("node",t.selectedState),M=a.findAllByState("edge",t.selectedState),O=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:w,edges:M,combos:O},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var w=a.findAllByState("node",t.selectedState),M=a.findAllByState("edge",t.selectedState),O=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:w,edges:M,combos:O},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(!!a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,d.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,d.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,d.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;!r||(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},z2=Dt,dp=.05,U2={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),!!n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(!!this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(!!n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(W,$){return Math.hypot($.x-W.x,$.y-W.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),l=this.get("animateCfg"),w=this.graph.get("canvas"),M=w.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:M.x,y:M.y},c,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&!!this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,l=f;e.wheelDelta<0?c=1-dp*u:c=1/(1-dp*u),l=f*c;var w=this.get("minZoom")||n.get("minZoom"),M=this.get("maxZoom")||n.get("maxZoom");l>M?l=M:l<w&&(l=w);var O=this.get("enableOptimize");if(O){var W=this.get("optimizeZoom"),$=this.get("optimized"),et=n.getNodes(),at=n.getEdges(),ft=et.length,vt=at.length;if(!$){for(var Ft=0;Ft<ft;Ft++){var Xt=et[Ft];if(!Xt.destroyed)for(var Yt=Xt.get("group").get("children"),he=Yt.length,_e=0;_e<he;_e++){var oe=Yt[_e];!oe.destoryed&&!oe.get("isKeyShape")&&(oe.set("ori-visibility",oe.get("ori-visibility")||oe.get("visible")),oe.hide())}}for(var Ue=0;Ue<vt;Ue++)for(var or=at[Ue],Yt=or.get("group").get("children"),he=Yt.length,_e=0;_e<he;_e++){var oe=Yt[_e];oe.set("ori-visibility",oe.get("ori-visibility")||oe.get("visible")),oe.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Kr=setTimeout(function(){var Ua=n.getZoom(),bi=t.get("optimized");if(bi){t.set("optimized",!1);for(var Ra=0;Ra<ft;Ra++){var xi=et[Ra],Pi=xi.get("group").get("children"),la=Pi.length;if(Ua<W){var Ya=xi.getKeyShape(),Za=Ya.get("ori-visibility");Ya.set("ori-visibility",void 0),Za&&Ya.show()}else for(var ki=0;ki<la;ki++){var $a=Pi[ki],Za=$a.get("ori-visibility");$a.set("ori-visibility",void 0),!$a.get("visible")&&Za&&Za&&$a.show()}}for(var ui=0;ui<vt;ui++){var Co=at[ui],Pi=Co.get("group").get("children"),la=Pi.length;if(Ua<W){var Ya=Co.getKeyShape(),Za=Ya.get("ori-visibility");Ya.set("ori-visibility",void 0),Za&&Ya.show()}else for(var ki=0;ki<la;ki++){var $a=Pi[ki];if(!$a.get("visible")){var Za=$a.get("ori-visibility");$a.set("ori-visibility",void 0),Za&&$a.show()}}}}},100);this.set("timeout",Kr)}if(f<=1){var An=void 0,Sn=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){An=n.findAllByState("node",a.fixState),Sn=n.findAllByState("edge",a.fixState);for(var cn=f/l,Fn=An.length,Pn=0;Pn<Fn;Pn++){var Xt=An[Pn],tn=Xt.getContainer(),Mn=Xt.getModel(),Ln=Xt.getOriginStyle(),Dn=Xt.getStateStyle(a.fixState),Yn=Xt.get("shapeFactory").getShape(Mn.type).getStateStyle(a.fixState,Xt)[a.fixState];if(a.fixAll){if(l<=1){var aa=(0,d.clone)(tn.getMatrix());aa||(aa=[1,0,0,0,1,0,0,0,1]);var Da=Xt.getModel(),Pa=Da.x,Wi=Da.y;aa=z2(aa,[["t",-Pa,-Wi],["s",cn,cn],["t",Pa,Wi]]),tn.setMatrix(aa)}}else for(var Yt=tn.get("children"),he=Yt.length,_e=0;_e<he;_e++){var oe=Yt[_e],si=void 0,mi=void 0;if(a.fixLabel){var di=oe.get("type");if(di==="text"){si=oe.attr("fontSize")||12;var Ci=Dn[oe.get("name")],Si=Yn[oe.get("name")],bs=Ci?Ci.fontSize:12,Zo=Si?Si.fontSize:12,eu=bs||Zo||12;if(l<=1&&oe.attr("fontSize",eu/l),mi)break}}if(a.fixLineWidth&&oe.get("isKeyShape")){mi=oe.attr("lineWidth")||0;var Ko=Dn.lineWidth||Yn.lineWidth||Ln.lineWidth||0;if(l<=1&&oe.attr("lineWidth",Ko/l),si)break}}}for(var $o=Sn.length,Bs=0;Bs<$o;Bs++)for(var or=Sn[Bs],tn=or.getContainer(),Yt=tn.get("children"),Mn=or.getModel(),Dn=or.getStateStyle(a.fixState),Yn=or.get("shapeFactory").getShape(Mn.type).getStateStyle(a.fixState,or)[a.fixState],he=Yt.length,_e=0;_e<he;_e++){var oe=Yt[_e],si=void 0,mi=void 0;if(a.fixLabel||a.fixAll){var di=oe.get("type");if(di==="text"){si=oe.attr("fontSize")||12;var Ci=Dn[oe.get("name")],Si=Yn[oe.get("name")],bs=Ci?Ci.fontSize:12,Zo=Si?Si.fontSize:12,eu=bs||Zo||12;if(l<=1&&oe.attr("fontSize",eu/l),mi)break}}if((a.fixLineWidth||a.fixAll)&&oe.get("isKeyShape")){mi=oe.attr("lineWidth")||0;var Ko=Dn.lineWidth||Yn.lineWidth||1;if(l<=1&&oe.attr("lineWidth",Ko/l),si)break}}}}var is=this.get("animate"),xs=this.get("animateCfg");n.zoomTo(l,{x:s.x,y:s.y},is,xs),n.emit("wheelzoom",e)}}},vp={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){!this.shouldEnd(e,this)||(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,za(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){za(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){za(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,l=f.y,w=o.getBoundingClientRect();c>n/2?c-=w.width:c+=this.offset,l>a/2?l-=w.height:l+=this.offset;var M="".concat(c,"px"),O="".concat(l,"px");za(this.container,{left:M,top:O,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=co('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),za(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},W2=(0,m.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},vp),j2=(0,m.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},vp),gp="click",X2=["click","dblclick"],Y2={getDefaultCfg:function(){return{trigger:gp,onChange:function(){}}},getEvents:function(){var e,t;return X2.includes(this.trigger)?t=this.trigger:(t=gp,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=e.item;if(!!t){var r=this.graph.findDataById(t.get("id"));if(!!r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;!this.shouldBegin(e,a,this)||(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),!!this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},V2=wf.calculationItemsBBox,H2=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,d.each)(r,function(n){i(n,t)})}},Z2={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(f){var c=f.getModel(),l=c.x,w=c.y,M=c.id;u.push({x:l,y:w,id:M})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var l=r.findById(c.parentId);l&&r.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:e.x,y:e.y},this.currentItemChildCombos=[],H2(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(!!this.origin&&!!this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,l=o.filter(function(w){var M=w.getModel();return a.parentId,M.id!==a.id&&!t.currentItemChildCombos.includes(M.id)});l.map(function(w){var M=w.getBBox(),O=M.centerX,W=M.centerY,$=M.width,et=u-O,at=f-W,ft=2*Math.sqrt(et*et+at*at);c+$-ft>.8*c?r.setItemState(w,t.activeState,!0):r.setItemState(w,t.activeState,!1)})}(0,d.each)(this.targets,function(w){t.updateCombo(w,e)})}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,d.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):a!==f.getID()&&(s=r.findById(a),a!==f.getModel().parentId&&r.updateComboTree(f,a,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(!!this.origin&&!!this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(!!this.origin&&!!this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(!!this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,l=f.y,w=f.id;s.after.combos.push({x:c,y:l,id:w}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,d.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,d.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),a.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(!!e){var r=t.findById(e);if(!!r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var w=e.x-this.origin.x+this.originPoint.minX,M=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:w,y:M})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=V2(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:f,minY:c};var l=(0,m.__assign)((0,m.__assign)({},nl.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,m.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},l),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}}},pp="dblclick",K2=["click","dblclick"],$2={getDefaultCfg:function(){return{trigger:pp,relayout:!0}},getEvents:function(){var e,t;return K2.includes(this.trigger)?t=this.trigger:(t=pp,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;!s||(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},Q2=wf.isPolygonsIntersect,q2=wf.pathToPoints,yp="shift",J2=["drag","shift","ctrl","alt","control"],tw=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=q2(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return Q2(t,r)},ew={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:yp,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return J2.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=yp,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(!!c.isVisible()&&tw(c,a)&&n(c,"select",e)){s.push(c);var l=c.getModel();u.push(l.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var l=c.getOutEdges();l.forEach(function(w){if(!!w.isVisible()){var M=w.getModel(),O=M.source,W=M.target;u.includes(O)&&u.includes(W)&&n(w,"select",e)&&(f.push(w),r.setItemState(w,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,m.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;!t||(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},mp="click",rw=["click","drag"],bp=void 0,nw=["shift","ctrl","control","alt","meta",void 0],aw={getDefaultCfg:function(){return{trigger:mp,key:bp,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;rw.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=mp,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&nw.indexOf(e.key.toLowerCase())===-1&&(e.trigger=bp,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,d.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,m.__assign)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,m.__assign)((0,m.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,d.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,m.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0?void 0:r.call(t)))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;!r||(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},xp="ctrl",iw=["shift","ctrl","alt","control"],ow="1",sw={getDefaultCfg:function(){return{trigger:xp,combinedKey:ow,functionName:"fitView",functionParams:[]}},getEvents:function(){return iw.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=xp,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(!!t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},uw=["shift","ctrl","alt","control","meta"],fw={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||uw.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this,r=e.target,n=r&&r.isCanvas&&r.isCanvas();if(!(!this.allowDragOnItem&&!n)){var a=this.graph,o=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];o.includes("control")&&o.push("ctrl");var s=o.some(function(Dn){return e["".concat(Dn,"Key")]});if(s){var u=a.get("canvas"),f=u.getPointByClient(e.clientX,e.clientY),c=a.getZoom();e.wheelDelta>0?c=c+c*.05:c=c-c*.05,a.zoomTo(c,{x:f.x,y:f.y})}else{var l=e.deltaX||e.movementX,w=e.deltaY||e.movementY;!w&&navigator.userAgent.indexOf("Firefox")>-1&&(w=-e.wheelDelta*125/3);var M=this.graph.get("width"),O=this.graph.get("height"),W=this.graph.get("canvas").getCanvasBBox(),$=this.scalableRange,et=this.scalableRange;$<1&&$>-1&&($=M*$,et=O*et);var at=W.minX,ft=W.maxX,vt=W.minY,Ft=W.maxY;l>0?ft<-$?l=0:ft-l<-$&&(l=ft+$):l<0&&(at>M+$?l=0:at-l>M+$&&(l=at-(M+$))),w>0?Ft<-et?w=0:Ft-w<-et&&(w=Ft+et):w<0&&(vt>O+et?w=0:vt-w>O+et&&(w=vt-(O+et))),this.get("direction")==="x"?w=0:this.get("direction")==="y"&&(l=0),a.translate(-l,-w)}e.preventDefault();var Xt=this.get("enableOptimize");if(Xt){var Yt=this.get("optimizeZoom"),he=this.get("optimized"),_e=a.getNodes(),oe=a.getEdges(),Ue=_e.length,or=oe.length;if(!he){for(var Kr=0;Kr<Ue;Kr++){var An=_e[Kr];if(!An.destroyed)for(var Sn=An.get("group").get("children"),cn=Sn.length,Fn=0;Fn<cn;Fn++){var Pn=Sn[Fn];!Pn.destoryed&&!Pn.get("isKeyShape")&&(Pn.set("ori-visibility",Pn.get("ori-visibility")||Pn.get("visible")),Pn.hide())}}for(var tn=0;tn<or;tn++)for(var Mn=oe[tn],Sn=Mn.get("group").get("children"),cn=Sn.length,Fn=0;Fn<cn;Fn++){var Pn=Sn[Fn];Pn.set("ori-visibility",Pn.get("ori-visibility")||Pn.get("visible")),Pn.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Ln=setTimeout(function(){var Dn=a.getZoom(),Yn=t.get("optimized");if(Yn){t.set("optimized",!1);for(var aa=0;aa<Ue;aa++){var Da=_e[aa],Pa=Da.get("group").get("children"),Wi=Pa.length;if(Dn<Yt){var si=Da.getKeyShape(),mi=si.get("ori-visibility");mi&&si.show()}else for(var di=0;di<Wi;di++){var Ci=Pa[di],mi=Ci.get("ori-visibility");!Ci.get("visible")&&mi&&mi&&Ci.show()}}for(var Si=0;Si<or;Si++){var bs=oe[Si],Pa=bs.get("group").get("children"),Wi=Pa.length;if(Dn<Yt){var si=bs.getKeyShape(),mi=si.get("ori-visibility");mi&&si.show()}else for(var di=0;di<Wi;di++){var Ci=Pa[di];if(!Ci.get("visible")){var mi=Ci.get("ori-visibility");mi&&Ci.show()}}}}},100);this.set("timeout",Ln)}}}},cw={"drag-canvas":N2,"zoom-canvas":U2,"drag-node":P2,"activate-relations":k2,"brush-select":B2,"click-select":G2,"lasso-select":ew,tooltip:W2,"edge-tooltip":j2,"collapse-expand":Y2,"drag-combo":Z2,"collapse-expand-combo":$2,"create-edge":aw,"shortcuts-call":sw,"scroll-canvas":fw};(0,d.each)(cw,function(i,e){h0(e,i)});var lw=(0,m.__assign)((0,m.__assign)({},L),Ly),tS=Ho.Grid,eS=Ho.Minimap,rS=Ho.Bundling,nS=Ho.Menu,hw=Ho.Fisheye,aS=Ho.ToolBar,iS=Ho.Tooltip,dw=Ho.TimeBar,vw=Ho.ImageMinimap,gw=Ho.EdgeFilterLens,pw=Ho.SnapLine,oS=Ho.Legend,yw=Ho.Annotation,Ep={version:nl.version,Graph:rg,TreeGraph:db,Util:wf,Layout:Ha.Layouts,TreeLayout:K1,registerLayout:$1,Global:nl,registerBehavior:h0,registerCombo:Oy,registerEdge:l0,registerNode:xf,Minimap:Ho.Minimap,Grid:Ho.Grid,Bundling:Ho.Bundling,Menu:Ho.Menu,ToolBar:Ho.ToolBar,Tooltip:Ho.Tooltip,Legend:Ho.Legend,TimeBar:dw,SnapLine:pw,Fisheye:hw,ImageMinimap:vw,EdgeFilterLens:gw,Annotation:yw,Algorithm:lw,Arrow:o0,Marker:s0,Shape:rc};Ep.version="4.8.0";var mw=Ep,sS="4.8.0"},4714:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return V}});var L=R(67294),z=R(36950),F=R(90314),I=function(j){var X=j.children,K=j.onClick,J=K===void 0?function(){}:K,rt=L.useContext(z.Z),tt=function(){J();var lt=rt.contextmenu;lt.node&&lt.node.handleClose(),lt.edge&&lt.edge.handleClose(),lt.canvas&&lt.canvas.handleClose()};return L.createElement("li",{onClick:tt},X)},k=function(j){var X=j.bindType,K=X===void 0?"node":X,J=L.useContext(z.Z),rt=j.options,tt=j.onChange,nt=function(jt){try{var Dt=J.contextmenu,Zt=null;K==="node"&&(Zt=Dt.node.item.getModel()),K==="edge"&&(Zt=Dt.edge.item.getModel()),K==="canvas"&&(Zt=null),tt&&(tt(jt,Zt),Dt[K].handleClose())}catch(Vt){console.log(Vt)}},lt=j.children;return rt?L.createElement("ul",{className:"graphin-components-contextmenu-content"},rt.map(function(xt){var jt=xt.key,Dt=xt.icon,Zt=xt.name;return L.createElement(I,{key:jt||Zt,onClick:function(){nt(xt)}},Dt," ",Zt)})):L.createElement("ul",{className:"graphin-components-contextmenu-content"},lt)};k.Item=I;var D=k;function b(Q,j,X){return j in Q?Object.defineProperty(Q,j,{value:X,enumerable:!0,configurable:!0,writable:!0}):Q[j]=X,Q}function E(Q,j){return x(Q)||T(Q,j)||y(Q,j)||p()}function p(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(Q,j){if(!!Q){if(typeof Q=="string")return g(Q,j);var X=Object.prototype.toString.call(Q).slice(8,-1);if(X==="Object"&&Q.constructor&&(X=Q.constructor.name),X==="Map"||X==="Set")return Array.from(Q);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return g(Q,j)}}function g(Q,j){(j==null||j>Q.length)&&(j=Q.length);for(var X=0,K=new Array(j);X<j;X++)K[X]=Q[X];return K}function T(Q,j){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(Q)))){var X=[],K=!0,J=!1,rt=void 0;try{for(var tt=Q[Symbol.iterator](),nt;!(K=(nt=tt.next()).done)&&(X.push(nt.value),!(j&&X.length===j));K=!0);}catch(lt){J=!0,rt=lt}finally{try{!K&&tt.return!=null&&tt.return()}finally{if(J)throw rt}}return X}}function x(Q){if(Array.isArray(Q))return Q}var S=z.Z,N={width:200,background:"#fff"},m,d=function(j){var X=j.children,K=j.bindType,J=K===void 0?"node":K,rt=j.style,tt=L.useContext(S),nt=tt.graph,lt=L.useState({visible:!1,x:0,y:0,item:null}),xt=E(lt,2),jt=xt[0],Dt=xt[1],Zt=function(Be){Be.preventDefault(),Be.stopPropagation();var Ke=nt.get("width"),$t=nt.get("height"),ce=m.getBoundingClientRect(),we=nt.get("offsetX")||0,Pe=nt.get("offsetY")||0,ye=nt.getContainer().offsetTop,Bt=nt.getContainer().offsetLeft,re=Be.canvasX+Bt+we,Ee=Be.canvasY+ye+Pe;if(re+ce.width>Ke&&(re=Be.canvasX-ce.width-we+Bt),Ee+ce.height>$t&&(Ee=Be.canvasY-ce.height-Pe+ye),J==="node"){var It=Be.item&&Be.item.getModel(),Et=It.x,Wt=It.y,fe=nt.getCanvasByPoint(Et,Wt),Fe=Be.canvasX-fe.x,$e=Be.canvasY-fe.y;re=re-Fe,Ee=Ee-$e}Dt(function(Lt){return Object.assign(Object.assign({},Lt),{visible:!0,x:re,y:Ee,item:Be.item})})},Vt=function(){Dt(function(Be){return Be.visible?Object.assign(Object.assign({},Be),{visible:!1,x:0,y:0}):Be})};(0,L.useEffect)(function(){return nt.on("".concat(J,":contextmenu"),Zt),nt.on("canvas:click",Vt),nt.on("canvas:drag",Vt),nt.on("wheelzoom",Vt),function(){nt.off("".concat(J,":contextmenu"),Zt),nt.off("canvas:click",Vt),nt.off("canvas:drag",Vt),nt.off("wheelzoom",Vt)}},[]);var ue=jt.x,dt=jt.y,Ot=jt.visible,ee=jt.item,Re={position:"absolute",left:ue,top:dt};tt.contextmenu=Object.assign(Object.assign({},tt.contextmenu),b({},J,{handleOpen:Zt,handleClose:Vt,item:ee,visible:Ot,x:ue,y:dt,bindType:J}));var me=ee&&!ee.destroyed&&ee.getModel&&ee.getModel().id||"";return L.createElement(L.Fragment,null,L.createElement("div",{ref:function(Be){m=Be},className:"graphin-components-contextmenu",style:Object.assign(Object.assign(Object.assign({},N),rt),Re),key:me},Ot&&X))};d.Menu=D;var V=d},49346:function(Mr,G,R){"use strict";var L=R(36950),z=R(53982),F=R(67294),I={r:249,scaleRByWheel:!0,minR:100,maxR:500,delegateStyle:{stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},showLabel:!1},k=function(b){var E=F.useContext(L.Z),p=E.graph,y=b.options,g=b.visible,T=b.handleEscListener;return F.useEffect(function(){var x=Object.assign(Object.assign({},I),y);x.showLabel&&p.getNodes().forEach(function(m){m.getContainer().getChildren().forEach(function(d){d.get("type")==="text"&&d.hide()})});var S=new z.ZP.Fisheye(x),N=function(d){d.keyCode===27&&T&&(T(),p.get("canvas").setCursor("default"))};return g&&(p.addPlugin(S),p.get("canvas").setCursor("zoom-in")),T&&window.addEventListener("keydown",N),function(){p&&!p.destroyed&&(p.get("canvas").setCursor("default"),p.removePlugin(S)),T&&window.removeEventListener("keydown",N)}},[p,y,g,T]),null};G.Z=k},36950:function(Mr,G,R){"use strict";var L=R(67294),z={graph:{},apis:{},theme:{},layout:{}},F=L.createContext(z);G.Z=F},98818:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return re}});var L=R(67294),z=R(36950),F=function(Ee,It){var Et={};for(var Wt in Ee)Object.prototype.hasOwnProperty.call(Ee,Wt)&&It.indexOf(Wt)<0&&(Et[Wt]=Ee[Wt]);if(Ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var fe=0,Wt=Object.getOwnPropertySymbols(Ee);fe<Wt.length;fe++)It.indexOf(Wt[fe])<0&&Object.prototype.propertyIsEnumerable.call(Ee,Wt[fe])&&(Et[Wt[fe]]=Ee[Wt[fe]]);return Et},I=function(It){var Et=It.type,Wt=It.defaultConfig,fe=It.userProps,Fe=It.mode,$e=Fe===void 0?"default":Fe,Lt=L.useContext(z.Z),Ne=Lt.graph,Xe=fe.disabled,Dr=F(fe,["disabled"]);L.useEffect(function(){if(Ne.removeBehaviors(Et,$e),!Xe)return Ne.addBehaviors(Object.assign(Object.assign({type:Et},Wt),Dr),$e),function(){Ne.destroyed||Ne.removeBehaviors(Et,$e)}},[])},k=I,D={disabled:!1,trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1},b=function(It){return k({type:"activate-relations",userProps:It,defaultConfig:D}),null},E=b,p="shift",y={disabled:!1,brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:p,includeEdges:!0,includeCombos:!1},g=function(It){return k({type:"brush-select",userProps:It,defaultConfig:y}),null},T=g,x="shift",S={disabled:!1,multiple:!0,trigger:x,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0},N=function(It){return k({type:"click-select",userProps:It,defaultConfig:S}),null},m=N,d={direction:"both",enableOptimize:!1,scalableRange:0,shouldBegin:function(){return!0},disabled:!1},V=function(It){return k({type:"drag-canvas",userProps:It,defaultConfig:d}),null},Q=V,j={disabled:!1,enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"},X=function(It){return k({type:"drag-combo",userProps:It,defaultConfig:j}),null},K=X,J={disabled:!1,updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"},rt=function(It){return k({type:"drag-node",userProps:It,defaultConfig:J}),null},tt=rt,nt=function(It){var Et=L.useContext(z.Z),Wt=Et.graph,fe=Et.layout,Fe=Et.dragNodes,$e=Et.updateContext,Lt=It.autoPin,Ne=It.pinAction,Xe=It.dragNodeMass,Dr=Xe===void 0?1e10:Xe,ur=fe.instance;return(0,L.useEffect)(function(){var Or,ln=ur||{type:(Or=Wt.get("layout"))===null||Or===void 0?void 0:Or.type},fn=ln.simulation,Xr=ln.type,Cn=function(){var on;if(fn)fn.stop();else{var sr=((on=Wt.get("layoutController"))===null||on===void 0?void 0:on.layoutMethods)||[];sr.forEach(function(lr){var Qe;return(Qe=lr.stop)===null||Qe===void 0?void 0:Qe.call(lr)})}},Qr=function(on){if(!(Xr!=="graphin-force"&&Xr!=="force2")&&on.item){var sr=on.item.get("model");sr.layout=Object.assign(Object.assign({},sr.layout),{force:{mass:Lt?Dr:null}});var lr=[];Wt.getNodes().forEach(function($r){if($r.hasState("selected")){var an=$r.get("model");an.layout||(an.layout={}),an.layout.force={mass:Lt?Dr:null},lr.push(an)}});var Qe=Fe.concat([sr]);lr.length>1&&(Qe=Qe.concat(lr)),$e({dragNodes:Qe})}};return Wt.on("node:dragstart",Cn),Wt.on("node:dragend",Qr),function(){Wt.off("node:dragstart",Cn),Wt.off("node:dragend",Qr)}},[Wt,Lt,ur,Fe,$e]),(0,L.useEffect)(function(){var Or=Ne||{},ln=Or.id,fn=Or.pinned;if(!!ln){var Xr=Fe;if(!fn)Xr=Fe.filter(function(Gr){return Gr.id!==ln});else{var Cn=Wt.findById(ln);if(!Cn)return;var Qr=Cn.get("model");Qr.layout||(Qr.layout={}),Qr.layout.force={mass:Lt?Dr:null},Xr.push(Qr)}$e({dragNodes:Xr})}},[Ne]),null};nt.defaultProps={autoPin:!1,dragNodeMass:1e10,pinAction:void 0};var lt=nt,xt=function(It){var Et=It.padding,Wt=It.isBindLayoutChange,fe=L.useContext(z.Z),Fe=fe.graph;return(0,L.useEffect)(function(){var $e=function(){Fe.fitView(Et)};return $e(),Wt&&Fe.on("afterlayout",$e),function(){Wt&&Fe.off("afterlayout",$e)}},[]),null},jt=xt,Dt=function(){var It=L.useContext(z.Z),Et=It.graph;return L.useEffect(function(){var Wt=setTimeout(function(){Et.getNodes().forEach(function(fe){Et.setItemState(fe,"normal",!0)}),Et.paint()},1600);return function(){clearTimeout(Wt)}},[]),null},Zt=Dt,Vt=function(It){var Et=L.useContext(z.Z),Wt=It.bindType,fe=Wt===void 0?"node":Wt,Fe=It.disabled,$e=Et.graph;return L.useEffect(function(){if(!Fe){var Lt=function(Or){$e.setItemState(Or.item,"hover",!0)},Ne=function(Or){$e.setItemState(Or.item,"hover",!1)},Xe=function(Or){$e.setItemState(Or.item,"hover",!0)},Dr=function(Or){$e.setItemState(Or.item,"hover",!1)};return fe==="node"&&($e.on("node:mouseenter",Lt),$e.on("node:mouseleave",Ne)),fe==="edge"&&($e.on("edge:mouseenter",Xe),$e.on("edge:mouseleave",Dr)),function(){fe==="node"&&($e.off("node:mouseenter",Lt),$e.off("node:mouseleave",Ne)),fe==="edge"&&($e.off("edge:mouseenter",Xe),$e.off("edge:mouseleave",Dr))}}},[$e,Fe]),null},ue=Vt,dt="shift",Ot={disabled:!1,delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:dt,includeEdges:!0},ee=function(It){return k({type:"lasso-select",userProps:It,defaultConfig:Ot}),null},Re=ee,me=R(49242),Ae=function(It){var Et=It.graphDOM,Wt=L.useContext(z.Z);return L.useEffect(function(){var fe=Wt.graph,Fe=(0,me.debounce)(function(){var $e=Et.clientWidth,Lt=Et.clientHeight;fe.set("width",$e),fe.set("height",Lt);var Ne=fe.get("canvas");Ne&&(Ne.changeSize($e,Lt),fe.autoPaint())},200);return window.addEventListener("resize",Fe,!1),function(){window.removeEventListener("resize",Fe,!1)}},[]),null},Be=Ae,Ke=function(Ee,It){var Et={};for(var Wt in Ee)Object.prototype.hasOwnProperty.call(Ee,Wt)&&It.indexOf(Wt)<0&&(Et[Wt]=Ee[Wt]);if(Ee!=null&&typeof Object.getOwnPropertySymbols=="function")for(var fe=0,Wt=Object.getOwnPropertySymbols(Ee);fe<Wt.length;fe++)It.indexOf(Wt[fe])<0&&Object.prototype.propertyIsEnumerable.call(Ee,Wt[fe])&&(Et[Wt[fe]]=Ee[Wt[fe]]);return Et},$t={trigger:"click"},ce=function(It){var Et=It.onChange,Wt=Ke(It,["onChange"]),fe=L.useContext(z.Z),Fe=fe.graph;return k({defaultConfig:$t,userProps:Wt,type:"collapse-expand"}),L.useEffect(function(){var $e=function(Ne){var Xe=Ne.item,Dr=Ne.collapsed,ur=Xe.get("model");ur.collapsed=Dr,Et&&Et(Xe,Dr)};return Fe.on("itemcollapsed",$e),function(){Fe.off("itemcollapsed",$e)}},[]),null},we=ce,Pe={sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},disabled:!1,animate:!1,animateCfg:{duration:500}},ye=function(It){return k({type:"zoom-canvas",userProps:It,defaultConfig:Pe}),null},Bt=ye,re={DragCanvas:Q,ZoomCanvas:Bt,ClickSelect:m,BrushSelect:T,DragNode:tt,ResizeCanvas:Be,LassoSelect:Re,DragCombo:K,ActivateRelations:E,TreeCollapse:we,FitView:jt,FontPaint:Zt,DragNodeWithForce:lt,Hoverable:ue}},82735:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return bn}});var L=R(67294),z=R(36950);function F(nr,Tr){return E(nr)||b(nr,Tr)||k(nr,Tr)||I()}function I(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k(nr,Tr){if(!!nr){if(typeof nr=="string")return D(nr,Tr);var ar=Object.prototype.toString.call(nr).slice(8,-1);if(ar==="Object"&&nr.constructor&&(ar=nr.constructor.name),ar==="Map"||ar==="Set")return Array.from(nr);if(ar==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ar))return D(nr,Tr)}}function D(nr,Tr){(Tr==null||Tr>nr.length)&&(Tr=nr.length);for(var ar=0,vr=new Array(Tr);ar<Tr;ar++)vr[ar]=nr[ar];return vr}function b(nr,Tr){var ar=nr==null?null:typeof Symbol!="undefined"&&nr[Symbol.iterator]||nr["@@iterator"];if(ar!=null){var vr=[],Br=!0,Fr=!1,kr,Z;try{for(ar=ar.call(nr);!(Br=(kr=ar.next()).done)&&(vr.push(kr.value),!(Tr&&vr.length===Tr));Br=!0);}catch(Te){Fr=!0,Z=Te}finally{try{!Br&&ar.return!=null&&ar.return()}finally{if(Fr)throw Z}}return vr}}function E(nr){if(Array.isArray(nr))return nr}var p=function(Tr){var ar=Tr.bindType,vr=ar===void 0?"node":ar,Br=Tr.container,Fr=L.useContext(z.Z),kr=Fr.graph,Z=L.useState({visible:!1,x:0,y:0,item:null,selectedItems:[]}),Te=F(Z,2),ne=Te[0],it=Te[1],ot=function(zt){zt.preventDefault(),zt.stopPropagation();var Le=kr.get("width"),Me=kr.get("height");if(!!Br.current){var qe=Br.current.getBoundingClientRect(),br=kr.get("offsetX")||0,xr=kr.get("offsetY")||0,sn=kr.getContainer().offsetTop,Rn=kr.getContainer().offsetLeft,tr=zt.canvasX+Rn+br,Sr=zt.canvasY+sn+xr;if(tr+qe.width>Le&&(tr=zt.canvasX-qe.width-br+Rn),Sr+qe.height>Me&&(Sr=zt.canvasY-qe.height-xr+sn),vr==="node"){var jr=zt.item&&zt.item.getModel(),Nn=jr.x,gn=jr.y,ea=kr.getCanvasByPoint(Nn,gn),ha=zt.canvasX-ea.x,Zn=zt.canvasY-ea.y;tr=tr-ha,Sr=Sr-Zn}it(function(na){return Object.assign(Object.assign({},na),{visible:!0,x:tr,y:Sr,item:zt.item})})}},B=function(){it(function(zt){return zt.visible?Object.assign(Object.assign({},zt),{visible:!1,x:0,y:0}):zt})};(0,L.useEffect)(function(){var Mt=function(Le){it(function(Me){return Object.assign(Object.assign({},Me),{selectedItems:Le.selectedItems})})};return kr.on("".concat(vr,":contextmenu"),ot),kr.on("canvas:click",B),kr.on("canvas:drag",B),kr.on("wheelzoom",B),vr==="canvas"&&kr.on("nodeselectchange",Mt),function(){kr.off("".concat(vr,":contextmenu"),ot),kr.off("canvas:click",B),kr.off("canvas:drag",B),kr.off("wheelzoom",B),kr.off("nodeselectchange",Mt)}},[kr,vr]);var _=ne.x,C=ne.y,Y=ne.visible,pt=ne.item,_t=ne.selectedItems;return{oneShow:ot,onClose:B,item:pt,selectedItems:_t,visible:Y,x:_,y:C}},y=p,g={width:"120px",boxShadow:"0 4px 12px rgb(0 0 0 / 15%)"},T=L.createRef(),x=function(Tr){var ar=Tr.bindType,vr=Tr.children,Br=Tr.style,Fr=y({bindType:ar,container:T}),kr=Fr.visible,Z=Fr.x,Te=Fr.y,ne=Fr.item,it={position:"absolute",left:Z,top:Te};if(typeof vr!="function")return console.error("<ContextMenu /> children should be a function"),null;var ot=ne&&!ne.destroyed&&ne.getModel&&ne.getModel().id||"";return L.createElement("div",{ref:T,className:"graphin-components-contextmenu",style:Object.assign(Object.assign(Object.assign({},g),Br),it),key:ot},kr&&vr(Object.assign(Object.assign({},Fr),{id:ot})))},S=x,N=R(53982),m={r:249,scaleRByWheel:!0,minR:100,maxR:500,delegateStyle:{stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},showLabel:!1},d=function(Tr){var ar=L.useContext(z.Z),vr=ar.graph,Br=Tr.options,Fr=Tr.visible,kr=Tr.handleEscListener;return L.useEffect(function(){var Z=Object.assign(Object.assign({},m),Br);Z.showLabel&&vr.getNodes().forEach(function(it){it.getContainer().getChildren().forEach(function(ot){ot.get("type")==="text"&&ot.hide()})});var Te=new N.ZP.Fisheye(Z),ne=function(ot){ot.keyCode===27&&kr&&(kr(),vr.get("canvas").setCursor("default"))};return Fr&&(vr.addPlugin(Te),vr.get("canvas").setCursor("zoom-in")),kr&&window.addEventListener("keydown",ne),function(){vr&&!vr.destroyed&&(vr.get("canvas").setCursor("default"),vr.removePlugin(Te)),kr&&window.removeEventListener("keydown",ne)}},[vr,Br,Fr,kr]),null},V=d,Q=R(49242),j=function(nr,Tr){var ar={};for(var vr in nr)Object.prototype.hasOwnProperty.call(nr,vr)&&Tr.indexOf(vr)<0&&(ar[vr]=nr[vr]);if(nr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Br=0,vr=Object.getOwnPropertySymbols(nr);Br<vr.length;Br++)Tr.indexOf(vr[Br])<0&&Object.prototype.propertyIsEnumerable.call(nr,vr[Br])&&(ar[vr[Br]]=nr[vr[Br]]);return ar},X={members:[],type:"round-convex",nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10},K=function(Tr,ar){var vr=Tr.style,Br=vr===void 0?{}:vr,Fr=j(Tr,["style"]),kr=ar.style,Z=kr===void 0?{}:kr,Te=j(ar,["style"]);return Object.assign(Object.assign(Object.assign({},Fr),Te),{style:Object.assign(Object.assign({},Br),Z)})},J,rt=function(Tr){var ar=L.useContext(z.Z),vr=ar.graph,Br=Tr.options;return L.useEffect(function(){J&&J.length&&J.forEach(function(kr){return vr.removeHull(kr)}),J=Br.map(function(kr){return vr.createHull(K(X,Object.assign({id:"".concat(Math.random())},kr)))});var Fr=(0,Q.debounce)(function(){J.forEach(function(kr,Z){kr.group.destroyed?J[Z]=vr.createHull(K(X,Object.assign({id:"".concat(Math.random())},Br[Z]))):kr.updateData(kr.members)})});return vr.on("afterupdateitem",Fr),vr.on("aftergraphrefreshposition",Fr),function(){vr.off("afterupdateitem",Fr),vr.off("aftergraphrefreshposition",Fr)}},[vr,Br]),null},tt=rt,nt=R(94635);function lt(nr,Tr){return Vt(nr)||Zt(nr,Tr)||jt(nr,Tr)||xt()}function xt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jt(nr,Tr){if(!!nr){if(typeof nr=="string")return Dt(nr,Tr);var ar=Object.prototype.toString.call(nr).slice(8,-1);if(ar==="Object"&&nr.constructor&&(ar=nr.constructor.name),ar==="Map"||ar==="Set")return Array.from(nr);if(ar==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ar))return Dt(nr,Tr)}}function Dt(nr,Tr){(Tr==null||Tr>nr.length)&&(Tr=nr.length);for(var ar=0,vr=new Array(Tr);ar<Tr;ar++)vr[ar]=nr[ar];return vr}function Zt(nr,Tr){var ar=nr==null?null:typeof Symbol!="undefined"&&nr[Symbol.iterator]||nr["@@iterator"];if(ar!=null){var vr=[],Br=!0,Fr=!1,kr,Z;try{for(ar=ar.call(nr);!(Br=(kr=ar.next()).done)&&(vr.push(kr.value),!(Tr&&vr.length===Tr));Br=!0);}catch(Te){Fr=!0,Z=Te}finally{try{!Br&&ar.return!=null&&ar.return()}finally{if(Fr)throw Z}}return vr}}function Vt(nr){if(Array.isArray(nr))return nr}var ue=function(Tr){var ar=L.useContext(z.Z),vr=ar.graph,Br=ar.theme,Fr=Tr.options,kr=Tr.dataMap,Z=Tr.onChange,Te=Br.mode,ne=L.useState({options:Fr}),it=lt(ne,2),ot=it[0],B=it[1];(0,L.useEffect)(function(){B({options:Fr})},[Fr]);var _=ot.options,C=function(pt){var _t=Object.assign(Object.assign({},pt),{checked:!pt.checked}),Mt=_.map(function(Le){var Me=Le.value===pt.value;return Me?_t:Le});B({options:Mt});var zt=kr.get(_t.value);zt.forEach(function(Le){vr.setItemState(Le.id,"active",_t.checked),vr.setItemState(Le.id,"inactive",!_t.checked);var Me=Le.id,qe=vr.findById(Me),br=qe.getEdges();br.forEach(function(xr){vr.setItemState(xr,"normal",_t.checked),vr.setItemState(xr,"inactive",!_t.checked)})}),Z(_t,Mt)};return L.createElement("ul",{className:"graphin-components-legend-content"},_.map(function(Y){var pt=Y.label,_t=Y.checked,Mt=Y.color,zt={light:{active:Mt,inactive:"#ddd"},dark:{active:Mt,inactive:"#2f2f2f"}},Le={light:{active:"#000",inactive:"#ddd"},dark:{active:"#fff",inactive:"#2f2f2f"}},Me=_t?"active":"inactive";return L.createElement("li",{key:Y.value,className:"item",onClick:function(){C(Y)},onKeyDown:function(){C(Y)}},L.createElement("span",{className:"dot",style:{background:zt[Te][Me]}}),L.createElement("span",{className:"label",style:{color:Le[Te][Me]}},pt))}))},dt=ue,Ot=R(43054);function ee(nr){return Be(nr)||Ae(nr)||me(nr)||Re()}function Re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(nr,Tr){if(!!nr){if(typeof nr=="string")return Ke(nr,Tr);var ar=Object.prototype.toString.call(nr).slice(8,-1);if(ar==="Object"&&nr.constructor&&(ar=nr.constructor.name),ar==="Map"||ar==="Set")return Array.from(nr);if(ar==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ar))return Ke(nr,Tr)}}function Ae(nr){if(typeof Symbol!="undefined"&&nr[Symbol.iterator]!=null||nr["@@iterator"]!=null)return Array.from(nr)}function Be(nr){if(Array.isArray(nr))return Ke(nr)}function Ke(nr,Tr){(Tr==null||Tr>nr.length)&&(Tr=nr.length);for(var ar=0,vr=new Array(Tr);ar<Tr;ar++)vr[ar]=nr[ar];return vr}var $t=Ot.Z.getEnumValue,ce=Ot.Z.getEnumDataMap,we=function(Tr){var ar=Tr.bindType,vr=ar===void 0?"node":ar,Br=Tr.sortKey,Fr=L.useContext(z.Z),kr=Fr.graph,Z=kr.save();if(Z.children)return console.error("not support tree graph"),{dataMap:new Map,options:{}};var Te=ce(Z["".concat(vr,"s")],Br),ne=ee(Te.keys()),it=ne.map(function(ot){var B=(Te.get(ot)||[{}])[0],_=$t(B,"style.keyshape.fill"),C=$t(B,"style.color"),Y=_||C;return{color:Y,value:ot,label:ot,checked:!0}});return{dataMap:Te,options:it}},Pe=we,ye={position:"absolute",top:"0px",right:"0px"},Bt=function(Tr){var ar=Tr.bindType,vr=ar===void 0?"node":ar,Br=Tr.sortKey,Fr=Tr.children,kr=Tr.style,Z=Pe({bindType:vr,sortKey:Br}),Te=Z.dataMap,ne=Z.options;return L.createElement("div",{className:"graphin-components-legend",style:Object.assign(Object.assign({},ye),kr)},Fr({bindType:vr,sortKey:Br,dataMap:Te,options:ne}))};Bt.Node=dt;var re=Bt,Ee={className:"graphin-minimap",viewportClassName:"graphin-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0},It={container:{position:"absolute",bottom:0,left:0,background:"#fff",boxShadow:"0px 8px 10px -5px rgba(0,0,0,0.2), 0px 16px 24px 2px rgba(0,0,0,0.14), 0px 6px 30px 5px rgba(0,0,0,0.12)"}},Et=null,Wt=120,fe=function(Tr){var ar=L.useContext(z.Z),vr=ar.graph,Br=Tr.options,Fr=Tr.style,kr=Fr===void 0?{}:Fr;L.useEffect(function(){var Te=vr.getWidth(),ne=vr.getHeight(),it=vr.get("fitViewPadding"),ot=[(Te-it*2)/(ne-it*2)*Wt,Wt],B=Object.assign(Object.assign(Object.assign({container:Et},Ee),{size:ot}),Br),_=new N.ZP.Minimap(B);return vr.addPlugin(_),function(){_&&!_.destroyed&&vr.removePlugin(_)}},[Br]);var Z=Object.assign(Object.assign({},It.container),kr);return L.createElement("div",{ref:function(ne){Et=ne},style:Z})},Fe=fe,$e={line:{stroke:"#FA8C16",lineWidth:.5},itemAlignType:"center"},Lt=function(Tr){var ar=L.useContext(z.Z),vr=ar.graph,Br=Tr.options,Fr=Tr.visible;return L.useEffect(function(){var kr=Object.assign(Object.assign({},$e),Br),Z=new N.ZP.SnapLine(kr);return Fr&&vr.addPlugin(Z),function(){vr&&!vr.destroyed&&vr.removePlugin(Z)}},[vr,Br,Fr]),null},Ne=Lt;function Xe(nr,Tr,ar){var vr=nr.get("canvas"),Br=vr.get("width"),Fr=vr.get("height"),kr=ar<=Fr/4,Z=ar>=3*Fr/4,Te=Tr<=Br/4,ne=Tr>=3*Br/4;return Te&&kr?"bottom-right":ne&&kr?"bottom-left":Te&&Z?"top-right":ne&&Z?"top-left":kr?"bottom":Z?"top":Te?"right":ne?"left":"center"}var Dr=function(Tr){var ar=Tr.graph,vr=Tr.placement,Br=Tr.nodeSize,Fr=Tr.x,kr=Tr.y,Z=Tr.bindType,Te=Z===void 0?"node":Z,ne=Tr.visible;return Te==="edge"?ne?{left:Fr,top:kr}:{visibility:"hidden",left:Fr,top:kr}:(vr==="auto"&&(vr=Xe(ar,Fr,kr)),vr==="top"?ne?{left:Fr,top:kr-Br/2,opacity:1,transform:"translate(-50%,calc(-100% - 6px))",transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",left:0,top:0,opacity:0,transform:"translate(-50%,-100%)",transition:"opacity 0.5s,transform 0.5s"}:vr==="bottom"?ne?{left:Fr,top:kr+Br/2,opacity:1,transform:"translate(-50%,6px)",transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",left:Fr,top:kr+Br/2,opacity:0,transform:"translate(-50%,0px)",transition:"opacity 0.5s,transform 0.5s"}:vr==="left"?ne?{left:Fr-Br/2,top:kr,transform:"translate(calc(-100% - 6px),-50%)",opacity:1,transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",opacity:0,left:Fr-Br/2,top:kr,transform:"translate(-100%,-50%)",transition:"opacity 0.5s,transform 0.5s"}:vr==="right"?ne?{left:Fr+Br/2,top:kr,transform:"translate(6px,-50%)",opacity:1,transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",left:Fr+Br/2,top:kr,transform:"translate(0,-50%)",opacity:0,transition:"opacity 0.5s,transform 0.5s"}:vr==="top-left"?ne?{left:Fr-Br/2,top:kr-Br/2,opacity:1,transform:"translate(calc(-100% - 6px),calc(-100% - 6px))",transition:"opacity 0.5s,transform 0.5s"}:{left:Fr-Br/2,top:kr-Br/2,opacity:0,transform:"translate(-100%,-100%)",transition:"opacity 0.5s,transform 0.5s"}:vr==="top-right"?ne?{left:Fr+Br/2,top:kr-Br/2,opacity:1,transform:"translate(6px,calc(-100% - 6px))",transition:"opacity 0.5s,transform 0.5s"}:{left:Fr+Br/2,top:kr-Br/2,opacity:0,transform:"translate(0,-100%)",transition:"opacity 0.5s,transform 0.5s"}:vr==="bottom-left"?ne?{left:Fr-Br/2,top:kr+Br/2,opacity:1,transform:"translate(calc(-100% - 6px),6px)",transition:"opacity 0.5s,transform 0.5s"}:{left:Fr-Br/2,top:kr+Br/2,opacity:0,transform:"translate(-100%,0px)",transition:"opacity 0.5s,transform 0.5s"}:vr==="bottom-right"?ne?{left:Fr+Br/2,top:kr+Br/2,opacity:1,transform:"translate(6px,6px)",transition:"opacity 0.5s,transform 0.5s"}:{left:Fr+Br/2,top:kr+Br/2,opacity:0,transform:"translate(0,0)",transition:"opacity 0.5s,transform 0.5s"}:vr==="center"?ne?{left:Fr,top:kr,opacity:1,transition:"opacity 0.5s,transform 0.5s"}:{visibility:"hidden",left:Fr,top:kr,opacity:0,transition:"opacity 0.5s,transform 0.5s"}:{left:Fr,top:kr})},ur=Dr,Or=R(81355);function ln(nr,Tr){return Gr(nr)||Qr(nr,Tr)||Xr(nr,Tr)||fn()}function fn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xr(nr,Tr){if(!!nr){if(typeof nr=="string")return Cn(nr,Tr);var ar=Object.prototype.toString.call(nr).slice(8,-1);if(ar==="Object"&&nr.constructor&&(ar=nr.constructor.name),ar==="Map"||ar==="Set")return Array.from(nr);if(ar==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ar))return Cn(nr,Tr)}}function Cn(nr,Tr){(Tr==null||Tr>nr.length)&&(Tr=nr.length);for(var ar=0,vr=new Array(Tr);ar<Tr;ar++)vr[ar]=nr[ar];return vr}function Qr(nr,Tr){var ar=nr==null?null:typeof Symbol!="undefined"&&nr[Symbol.iterator]||nr["@@iterator"];if(ar!=null){var vr=[],Br=!0,Fr=!1,kr,Z;try{for(ar=ar.call(nr);!(Br=(kr=ar.next()).done)&&(vr.push(kr.value),!(Tr&&vr.length===Tr));Br=!0);}catch(Te){Fr=!0,Z=Te}finally{try{!Br&&ar.return!=null&&ar.return()}finally{if(Fr)throw Z}}return vr}}function Gr(nr){if(Array.isArray(nr))return nr}var on=function(Tr){var ar=Tr.bindType,vr=ar===void 0?"node":ar,Br=Tr.container,Fr=L.useContext(z.Z),kr=Fr.graph,Z=(0,L.useRef)(),Te=L.useState({visible:!1,x:0,y:0,item:null}),ne=ln(Te,2),it=ne[0],ot=ne[1],B=function(Mt){Mt.preventDefault(),Mt.stopPropagation(),Z.current&&window.clearTimeout(Z.current);var zt=kr.getPointByClient(Mt.clientX,Mt.clientY),Le=kr.getCanvasByPoint(zt.x,zt.y),Me=Le.x,qe=Le.y;if(vr==="node"&&Mt.item){var br=Mt.item.getModel(),xr=br.x,sn=xr===void 0?0:xr,Rn=br.y,tr=Rn===void 0?0:Rn,Sr=kr.getCanvasByPoint(sn,tr),jr=Mt.canvasX-Sr.x,Nn=Mt.canvasY-Sr.y;Me=Me-jr,qe=qe-Nn}ot(function(gn){return Object.assign(Object.assign({},gn),{visible:!0,item:Mt.item,x:Me,y:qe})})},_=function(){Z.current&&window.clearTimeout(Z.current),Z.current=window.setTimeout(function(){ot(function(Mt){return Object.assign(Object.assign({},Mt),{visible:!1,item:null,x:0,y:0})})},200)},C=function(){ot(Object.assign(Object.assign({},it),{visible:!1,x:0,y:0,item:null}))},Y=function(Mt){var zt=kr.getPointByClient(Mt.clientX,Mt.clientY),Le=kr.getCanvasByPoint(zt.x,zt.y),Me=Le.x,qe=Le.y;if(vr==="node"){if(Mt.item){var br=Mt.item.getModel(),xr=br.x,sn=xr===void 0?0:xr,Rn=br.y,tr=Rn===void 0?0:Rn,Sr=kr.getCanvasByPoint(sn,tr),jr=Mt.canvasX-Sr.x,Nn=Mt.canvasY-Sr.y;Me=Me-jr,qe=qe-Nn}ot(Object.assign(Object.assign({},it),{visible:!0,x:Me,y:qe,item:Mt.item}))}},pt=function(){clearTimeout(Z.current)};return(0,L.useEffect)(function(){var _t,Mt;return kr.on("".concat(vr,":mouseenter"),B),kr.on("".concat(vr,":mouseleave"),_),kr.on("afterremoveitem",_),kr.on("node:dragstart",C),kr.on("node:dragend",Y),(_t=Br.current)===null||_t===void 0||_t.addEventListener("mouseenter",pt),(Mt=Br.current)===null||Mt===void 0||Mt.addEventListener("mouseleave",_),function(){var zt,Le;console.log("effect..remove...."),kr.off("".concat(vr,":mouseenter"),B),kr.off("".concat(vr,":mouseleave"),_),kr.off("afterremoveitem",_),kr.off("node:dragstart",C),kr.off("node:dragend",Y),(zt=Br.current)===null||zt===void 0||zt.removeEventListener("mouseenter",pt),(Le=Br.current)===null||Le===void 0||Le.removeEventListener("mouseleave",_)}},[]),Object.assign({},it)},sr=on,lr={width:"120px",boxShadow:"0 4px 12px rgb(0 0 0 / 15%)"},Qe=L.createRef(),$r=function(Tr){var ar=Tr.children,vr=Tr.bindType,Br=vr===void 0?"node":vr,Fr=Tr.style,kr=Tr.placement,Z=kr===void 0?"top":kr,Te=Tr.hasArrow,ne=sr({bindType:Br,container:Qe}),it=ne.x,ot=ne.y,B=ne.visible,_=ne.item,C=L.useContext(z.Z),Y=C.graph,pt=40;try{if(_){var _t=_.getModel(),Mt=_t.type;if(Mt==="graphin-cirle"){var zt=_.getModel(),Le=zt.style;Le&&(pt=Le.keyshape.size)}}}catch(Rn){console.log(Rn)}var Me=12,qe=ur({graph:Y,placement:Z,nodeSize:pt+Me,x:it,y:ot,bindType:Br,visible:B}),br=Object.assign({position:"absolute"},qe);if(typeof ar!="function")return console.error("<Tooltip /> children should be a function"),null;var xr=_&&!_.destroyed&&_.getModel&&_.getModel()||{},sn=xr.id||"";return L.createElement(L.Fragment,null,L.createElement("div",{ref:Qe,className:"graphin-components-tooltip ".concat(Z),style:Object.assign(Object.assign(Object.assign({},lr),br),Fr)},B&&L.createElement("div",null,Te&&L.createElement("div",{className:"tooltip-arrow ".concat(Z)}),ar({item:_,bindType:Br,model:xr,id:sn}))))},an=$r,bn={ContextMenu:S,Hull:tt,MiniMap:Fe,FishEye:V,SnapLine:Ne,Tooltip:an,Legend:re,useLegend:Pe,useTooltip:sr,useContextMenu:y}},42134:function(Mr,G,R){"use strict";R.d(G,{ZP:function(){return os}});var L={};R.r(L),R.d(L,{handleAutoZoom:function(){return p},handleChangeZoom:function(){return b},handleRealZoom:function(){return E},handleZoomIn:function(){return D},handleZoomOut:function(){return k}});var z={};R.r(z),R.d(z,{focusNodeById:function(){return g},highlightNodeById:function(){return y}});var F=R(53982),I=R(67294),k=function(At){return function(){if(!(!At||At.destroyed)){var ut=At.getZoom(),yt=At.get("canvas"),Ct=yt.getPointByClient(yt.get("width")/2,yt.get("height")/2),ve=yt.get("pixelRatio")||1,ke=1+.05*5;if(!(ke*ut>5))return At.zoom(ke,{x:Ct.x/ve,y:Ct.y/ve}),{text:"".concat(Math.round(ke*ut*100),"%"),ratio:ke*ut}}}},D=function(At){return function(){if(!(!At||At.destroyed)){var ut=At.getZoom(),yt=At.get("canvas"),Ct=yt.getPointByClient(yt.get("width")/2,yt.get("height")/2),ve=yt.get("pixelRatio")||1,ke=1-.05*5;if(!(ke*ut<.3))return At.zoom(ke,{x:Ct.x/ve,y:Ct.y/ve}),{text:"".concat(Math.round(ke*ut*100),"%"),ratio:ke*ut}}}},b=function(At){return function(ut){var yt=ut.text,Ct=ut.ratio;if(!(!At||At.destroyed)){var ve=At.get("canvas"),ke=ve.getPointByClient(ve.get("width")/2,ve.get("height")/2),er=ve.get("pixelRatio")||1;return At.zoomTo(Ct,{x:ke.x/er,y:ke.y/er}),{text:yt,ratio:Ct}}}},E=function(At){return function(){if(!(!At||At.destroyed)){var ut=At.getZoom();return At.zoom(1/ut),At.fitCenter(),{text:"100%",ratio:1}}}},p=function(At){return function(){if(!(!At||At.destroyed)){var ut=At.getNodes();ut.length>0&&At.fitView([20,20]);var yt=At.getZoom();return{text:"".concat(Math.round(yt*100),"%"),ratio:yt}}}},y=function(At){return function(ut){At.getNodes().forEach(function(yt){At.clearItemStates(yt,["active","inactive"]),ut.indexOf(yt.get("id"))!==-1?At.setItemState(yt,"active",!0):At.setItemState(yt,"active",!1)})}},g=function(At){return function(ut){if(!(!At||typeof ut!="string")){var yt=At.findById(ut);if(!yt){console.warn("The node ".concat(ut," does not exist!"));return}At.focusItem(ut,!0,{duration:300,easing:"easeCubic"}),At.setItemState(yt,"selected",!0),yt.toFront()}}};function T(Nt,At,ut){return At in Nt?Object.defineProperty(Nt,At,{value:ut,enumerable:!0,configurable:!0,writable:!0}):Nt[At]=ut,Nt}var x=Object.assign(Object.assign({},L),z),S=function(At){var ut=Object.keys(x);return ut.reduce(function(yt,Ct){return Object.assign(Object.assign({},yt),T({},Ct,x[Ct](At)))},{})},N=S,m=R(98818),d={type:"compactBox",direction:"LR",getId:function(At){return At.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 80},getHGap:function(){return 20}},V=["dendrogram","compactBox","mindmap","indented"],Q={type:"force2"},j=R(36950),X=function(){return Math.round((Math.random()-.5)*80)},K=500,J=300,rt=function(At,ut){var yt=At.nodes,Ct=At.edges,ve=ut.nodes,ke=new Map;ve.forEach(function(Pt){var Tt=Pt.id,H=Pt.x,gt=Pt.y;ke.set(Tt,{x:H,y:gt})});var er=new Map;yt.forEach(function(Pt){var Tt=Pt.id,H=ke.get(Tt),gt=H.x,Rt=H.y;!window.isNaN(gt)&&!window.isNaN(Rt)?(Pt.x=gt,Pt.y=Rt):er.set(Tt,Pt)});var yr=new Map;return Ct.forEach(function(Pt){var Tt=Pt.source,H=Pt.target,gt=er.get(Tt),Rt=er.get(H),te=ke.get(Tt),De=!window.isNaN(te.x)&&!window.isNaN(te.y),rr=ke.get(H),Er=!window.isNaN(rr.x)&&!window.isNaN(rr.y);gt&&Er&&yr.set(Tt,{x:rr.x+X(),y:rr.y+X()}),Rt&&De&&yr.set(H,{x:te.x+X(),y:te.y+X()})}),yt.forEach(function(Pt){var Tt=Pt.id,H=ke.get(Tt);(window.isNaN(H.x)||window.isNaN(H.y))&&(H=yr.get(Tt)||{}),!window.isNaN(H.x)&&!window.isNaN(H.y)?(Pt.x=H.x,Pt.y=H.y):(Pt.x=K/2+Math.round(Math.random()*K),Pt.y=J/2+Math.round(Math.random()*J))}),Object.assign(Object.assign({},At),{nodes:yt,edges:Ct})},tt=rt,nt=R(69286);function lt(Nt,At){if(!(Nt instanceof At))throw new TypeError("Cannot call a class as a function")}function xt(Nt,At){for(var ut=0;ut<At.length;ut++){var yt=At[ut];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(Nt,yt.key,yt)}}function jt(Nt,At,ut){return At&&xt(Nt.prototype,At),ut&&xt(Nt,ut),Object.defineProperty(Nt,"prototype",{writable:!1}),Nt}var Dt=function(At){return!(At&&At.nodes&&At.nodes.length!==0)},Zt=["force","graphin-force","g6force","gForce","comboForce"],Vt=function(){function Nt(At){var ut=this;lt(this,Nt),this.updateOptions=function(){var yt={type:"concentric"},Ct=ut.graphin,ve=Ct.width,ke=Ct.height,er=Ct.props,yr=er.layout,Pt=yr===void 0?yt:yr,Tt=Pt.type,H=Tt===void 0?"concentric":Tt,gt=Pt.preset,Rt={width:ve,height:ke,center:[ve/2,ke/2]};if(ut.options=Object.assign(Object.assign(Object.assign({},Rt),nt.Z[H]||{}),Pt),Dt(ut.graphin.data)){ut.prevOptions={};return}if(Zt.indexOf(H)!==-1){var te=ut.prevOptions.type||"grid";(gt==null?void 0:gt.type)&&(te=gt.type),Dt(ut.graphin.data)&&(te=gt.type||"grid"),ut.options.preset=Object.assign(Object.assign(Object.assign({type:te},Rt),nt.Z[te]||{}),gt)}},this.processForce=function(){var yt=ut,Ct=yt.options,ve=yt.graphin,ke=ve.graph,er=Ct.type,yr=Ct.animation,Pt=Ct.animate;if(er==="graphin-force"&&(yt.options.graph=ke),er==="force"||er==="g6force"||er==="gForce"||er==="comboCombined"){var Tt=yt.options.onTick,H=function(){Tt&&Tt(),(yr||Pt)&&yt.refreshPosition()};yt.options.tick=H;var gt=yt.options.onLayoutEnd;yt.options.onLayoutEnd=function(){yt.refreshPosition(),gt==null||gt(),ke.emit("afterlayout")}}(er==="comboForce"||er==="comboCombined")&&(yt.options.comboTrees=ke.get("comboTrees"));var Rt={prev:Zt.indexOf(yt.prevOptions.type)!==-1,current:Zt.indexOf(yt.options.type)!==-1},te=yt.options.type===yt.prevOptions.type;if(!Dt(ve.data)){if(Rt.current&&!te){var De=yt.options.preset;yt.presetLayout=new F.ZP.Layout[De.type](Object.assign({},De)||{}),yt.presetLayout.init(ve.data),yt.presetLayout.execute(),yt.presetLayout.data=Object.assign({},ve.data)}if(Rt.current&&Rt.prev&&!yt.hasPosition()){var rr=yt.graph.save(),Er=yt.options.preset;Dt(rr)&&(yt.presetLayout=new F.ZP.Layout[Er.type](Object.assign({},Er)||{}),yt.presetLayout.init(ve.data),yt.presetLayout.execute(),rr=ve.data),ve.data=tt(ve.data,rr)}}},this.refreshPosition=function(){var yt=ut.graphin,Ct=yt.options,ve=Ct.animate,ke=Ct.layoutAnimate,er=ut.options.type;ve&&!ke&&!ut.options.animation?ut.graph.positionsAnimate(er==="comboCombined"):ut.graph.refreshPositions(er==="comboCombined")},this.destroy=function(){ut.presetLayout&&ut.presetLayout.destroy&&ut.presetLayout.destroy(),ut.instance&&ut.instance.destroy&&ut.instance.destroy(),ut.presetLayout=null,ut.instance=null},this.getDataFromGraph=function(){for(var yt=[],Ct=[],ve=[],ke=[],er=ut.graph.getNodes(),yr=ut.graph.getEdges(),Pt=ut.graph.getCombos(),Tt=er.length,H=0;H<Tt;H++){var gt=er[H];if(gt&&gt.isVisible()){var Rt=gt.getModel();yt.push(Rt)}}for(var te=yr.length,De=0;De<te;De++){var rr=yr[De];if(rr&&rr.isVisible()){var Er=rr.getModel();Er.isComboEdge?ke.push(Er):Ct.push(Er)}}for(var yn=Pt.length,en=0;en<yn;en++){var hn=Pt[en];if(hn&&hn.isVisible()){var Qn=hn.getModel();ve.push(Qn)}}return{nodes:yt,edges:Ct,combos:ve,comboEdges:ke}},this.graphin=At,this.graph=this.graphin.graph,this.presetLayout=null,this.prevOptions={},this.init()}return jt(Nt,[{key:"hasPosition",value:function(){var ut=this.graphin,yt=ut.data,Ct=yt===void 0?{}:yt;return!Ct.nodes||Ct.nodes.length===0?!1:Ct.nodes.every(function(ve){return!window.isNaN(Number(ve.x))&&!window.isNaN(Number(ve.y))})}},{key:"init",value:function(){this.updateOptions();var ut=this.options,yt=this.graphin,Ct=yt.data,ve=ut.type;this.processForce(),F.ZP.Layout[ve]||console.warn("".concat(ve," layout not found, current layout is grid"));var ke=F.ZP.Layout[ve]||F.ZP.Layout.grid;this.graph.emit("beforelayout"),this.instance=new ke(this.options),this.instance.init(Ct)}},{key:"start",value:function(){var ut=this.options.type;this.instance.execute(),!(ut==="force"||ut==="g6force"||ut==="gForce"||ut==="comboCombined"||ut==="force2")&&(this.refreshPosition(),this.graph.emit("afterlayout"))}},{key:"changeLayout",value:function(){var ut=this.graphin,yt=ut.graph,Ct=ut.data,ve=ut.isTree,ke=ut.layoutCache;if(!yt||yt.destroyed||!Ct||!Ct.nodes||!Ct.nodes.length||ke&&this.hasPosition()||ve)return!1;Zt.indexOf(this.options.type)!==-1&&this.destroy(),this.prevOptions=Object.assign({},this.options),this.init(),this.start()}}]),Nt}(),ue=Vt,dt=R(81710),Ot=R(46581),ee=R(76575),Re={mode:"light",primaryColor:"#873bf4",nodeSize:26,edgeSize:1,primaryEdgeColor:"#ddd"},me=function(At){var ut=Object.assign(Object.assign({},Re),At),yt=ut.primaryColor,Ct=ut.primaryEdgeColor,ve=ut.nodeSize,ke=ut.edgeSize,er=ut.mode,yr=ut.background,Pt=(0,ee.Z)({primaryColor:yt,nodeSize:ve,mode:er}),Tt=(0,Ot.Z)({primaryEdgeColor:Ct,edgeSize:ke,mode:er}),H=(0,dt.Z)(),gt={light:"#fff",dark:"#1f1f1f"};return Object.assign(Object.assign({},ut),{mode:er,background:yr||gt[er],defaultNodeStyle:{type:Pt.type,style:Pt.style},defaultNodeStatusStyle:{status:Pt.status},defaultEdgeStyle:{type:Tt.type,style:Tt.style},defaultEdgeStatusStyle:{status:Tt.status},defaultComboStyle:{type:H.type,style:H.style},defaultComboStatusStyle:{status:H.status}})},Ae=R(57804),Be=function Nt(At,ut){if(window.isNaN(At)&&window.isNaN(ut)&&typeof At=="number"&&typeof ut=="number"||At===ut)return!0;if(typeof At=="function"&&typeof ut=="function"||At instanceof Date&&ut instanceof Date||At instanceof RegExp&&ut instanceof RegExp||At instanceof String&&ut instanceof String||At instanceof Number&&ut instanceof Number)return At.toString()===ut.toString();if(!(At instanceof Object&&ut instanceof Object))return!1;var yt=[],Ct=Object.keys(At),ve=Object.keys(ut);if(Ct.length!==ve.length)return!1;for(var ke=0;ke<Ct.length;ke++){var er=Ct[ke],yr=Nt(At[er],ut[er]);yt.push(yr)}return yt.every(function(Pt){return Pt})},Ke=Be,$t={animation:"animate",minDistanceThreshold:"minMovement",maxIterations:"maxIterations"},ce=function Nt(At,ut){if(!At)return At;var yt={};if(Object.keys(At).forEach(function(Tt){var H;if(Tt==="preset"&&((H=At.preset)===null||H===void 0?void 0:H.type)){yt.preset=Nt(At.preset,ut);return}var gt=$t[Tt];gt?yt[gt]=At[Tt]:yt[Tt]=At[Tt]}),At.done&&(At.onLayoutEnd?yt.onLayoutEnd=function(Tt){At.onLayoutEnd(ut,Tt),At.done(ut,Tt)}:yt.onLayoutEnd=function(Tt){At.done(ut,Tt)}),yt.type==="concentric"){var Ct=yt.minNodeSpacing,ve=Ct===void 0?60:Ct,ke=yt.preventOverlap,er=ke===void 0?!0:ke,yr=yt.nodeSize,Pt=yr===void 0?60:yr;yt.minNodeSpacing=ve,yt.preventOverlap=er,yt.nodeSize=Pt}return yt};function we(Nt){return we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(At){return typeof At}:function(At){return At&&typeof Symbol=="function"&&At.constructor===Symbol&&At!==Symbol.prototype?"symbol":typeof At},we(Nt)}function Pe(Nt,At){if(!(Nt instanceof At))throw new TypeError("Cannot call a class as a function")}function ye(Nt,At){for(var ut=0;ut<At.length;ut++){var yt=At[ut];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(Nt,yt.key,yt)}}function Bt(Nt,At,ut){return At&&ye(Nt.prototype,At),ut&&ye(Nt,ut),Object.defineProperty(Nt,"prototype",{writable:!1}),Nt}function re(Nt,At){if(typeof At!="function"&&At!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(At&&At.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),Object.defineProperty(Nt,"prototype",{writable:!1}),At&&Ee(Nt,At)}function Ee(Nt,At){return Ee=Object.setPrototypeOf||function(yt,Ct){return yt.__proto__=Ct,yt},Ee(Nt,At)}function It(Nt){var At=fe();return function(){var yt=Fe(Nt),Ct;if(At){var ve=Fe(this).constructor;Ct=Reflect.construct(yt,arguments,ve)}else Ct=yt.apply(this,arguments);return Et(this,Ct)}}function Et(Nt,At){if(At&&(we(At)==="object"||typeof At=="function"))return At;if(At!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wt(Nt)}function Wt(Nt){if(Nt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Nt}function fe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Nt){return!1}}function Fe(Nt){return Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(ut){return ut.__proto__||Object.getPrototypeOf(ut)},Fe(Nt)}var $e=function(Nt,At){var ut={};for(var yt in Nt)Object.prototype.hasOwnProperty.call(Nt,yt)&&At.indexOf(yt)<0&&(ut[yt]=Nt[yt]);if(Nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ct=0,yt=Object.getOwnPropertySymbols(Nt);Ct<yt.length;Ct++)At.indexOf(yt[Ct])<0&&Object.prototype.propertyIsEnumerable.call(Nt,yt[Ct])&&(ut[yt[Ct]]=Nt[yt[Ct]]);return ut},Lt=m.Z.DragCanvas,Ne=m.Z.ZoomCanvas,Xe=m.Z.DragNode,Dr=m.Z.DragCombo,ur=m.Z.ClickSelect,Or=m.Z.BrushSelect,ln=m.Z.ResizeCanvas,fn=function(Nt){re(ut,Nt);var At=It(ut);function ut(yt){var Ct;Pe(this,ut),Ct=At.call(this,yt),Ct.graphDOM=null,Ct.initData=function(H){H.children&&(Ct.isTree=!0),Ct.data=(0,Ae.Z)(H)},Ct.initGraphInstance=function(){var H=Ct.props,gt=H.theme,Rt=H.data,te=H.layout,De=H.width,rr=H.height,Er=H.defaultCombo,yn=Er===void 0?{style:{},type:"graphin-combo"}:Er,en=H.defaultEdge,hn=en===void 0?{style:{},type:"graphin-line"}:en,Qn=H.defaultNode,fa=Qn===void 0?{style:{},type:"graphin-circle"}:Qn,Hn=H.nodeStateStyles,Jn=H.edgeStateStyles,ja=H.comboStateStyles,Va=H.modes,ni=Va===void 0?{default:[]}:Va,ai=H.animate,wi=H.handleAfterLayout,Ro=$e(H,["theme","data","layout","width","height","defaultCombo","defaultEdge","defaultNode","nodeStateStyles","edgeStateStyles","comboStateStyles","modes","animate","handleAfterLayout"]);ni.default.length>0&&console.info("%c suggestion: you can use @antv/graphin Behaviors components","color:lightgreen");var ss=Ct.graphDOM,Bo=ss.clientWidth,es=ss.clientHeight;Ct.initData(Rt),Ct.width=Number(De)||Bo||500,Ct.height=Number(rr)||es||500;var Di=me(gt),Lo=Di.defaultNodeStyle,nu=Di.defaultEdgeStyle,au=Di.defaultComboStyle,Ss=Di.defaultNodeStatusStyle,vs=Di.defaultEdgeStatusStyle,iu=Di.defaultComboStatusStyle,h=$e(Di,["defaultNodeStyle","defaultEdgeStyle","defaultComboStyle","defaultNodeStatusStyle","defaultEdgeStatusStyle","defaultComboStatusStyle"]);Ct.isTree=Boolean(Rt.children)||V.indexOf(String(te&&te.type))!==-1;var P={defaultNode:{style:Object.assign(Object.assign({},fa.style),{_theme:gt}),type:fa.type||"graphin-circle"},defaultEdge:{style:Object.assign(Object.assign({},hn.style),{_theme:gt}),type:hn.type||"graphin-line"},defaultCombo:{style:Object.assign(Object.assign({},yn.style),{_theme:gt}),type:yn.type||"combo",labelCfg:yn.labelCfg},nodeStateStyles:Hn,edgeStateStyles:Jn,comboStateStyles:ja};Ct.theme=Object.assign(Object.assign({},P),h),Ct.options=Object.assign(Object.assign(Object.assign({container:Ct.graphDOM,renderer:"canvas",width:Ct.width,height:Ct.height,animate:ai!==!1},P),{modes:ni}),Ro),Ct.isTree?(Ct.options.layout=te||d,Ct.graph=new F.ZP.TreeGraph(Ct.options)):(Ct.useGraphinLayoutController||(Ct.options.layout=ce(te,Ct.graph)||Q),Ct.graph=new F.ZP.Graph(Ct.options)),Ct.graph.on("afterlayout",function(){wi&&wi(Ct.graph)}),Ct.graph.data(Ct.data),Ct.setTextDirection(),Ct.graph.render(),!Ct.isTree&&Ct.useGraphinLayoutController&&(Ct.layout=new ue(Wt(Ct)),Ct.layout.start()),Ct.initStatus(),Ct.apis=N(Ct.graph),Ct.setState({isReady:!0,context:{graph:Ct.graph,apis:Ct.apis,theme:Ct.theme,layout:Ct.layout,dragNodes:Ct.dragNodes,updateContext:Ct.updateContext}})},Ct.updateLayout=function(){Ct.useGraphinLayoutController&&Ct.layout.changeLayout()},Ct.updateOptions=function(){var H=$e(Ct.props,[]);return H},Ct.initStatus=function(){if(!Ct.isTree){var H=Ct.props.data,gt=H.nodes,Rt=gt===void 0?[]:gt,te=H.edges,De=te===void 0?[]:te;Rt.forEach(function(rr){var Er=rr.status;Er&&Object.keys(Er).forEach(function(yn){Ct.graph.setItemState(rr.id,yn,Boolean(Er[yn]))})}),De.forEach(function(rr){var Er=rr.status;Er&&Object.keys(Er).forEach(function(yn){Ct.graph.setItemState(rr.id,yn,Boolean(Er[yn]))})})}},Ct.updateContext=function(H){Ct.setState(function(gt){return{context:Object.assign(Object.assign({},gt.context),H)}})},Ct.clear=function(){Ct.layout&&Ct.layout.destroy&&Ct.layout.destroy(),Ct.layout={},Ct.graph.clear(),Ct.data={nodes:[],edges:[],combos:[]},Ct.graph.destroy()};var ve=yt.data,ke=yt.layout,er=yt.width,yr=yt.height,Pt=yt.layoutCache,Tt=$e(yt,["data","layout","width","height","layoutCache"]);return Ct.data=ve,Ct.isTree=Boolean(yt.data&&yt.data.children)||V.indexOf(String(ke&&ke.type))!==-1,Ct.graph={},Ct.height=Number(yr),Ct.width=Number(er),Ct.theme={},Ct.apis={},Ct.layoutCache=Pt,Ct.layout={},Ct.dragNodes=[],Ct.useGraphinLayoutController=(ke==null?void 0:ke.type)==="graphin-force",Ct.options=Object.assign({},Tt),Ct.state={isReady:!1,context:{graph:Ct.graph,apis:Ct.apis,theme:Ct.theme,layout:Ct.layout,dragNodes:Ct.dragNodes,updateContext:Ct.updateContext}},Ct}return Bt(ut,[{key:"setTextDirection",value:function(){var Ct=this.props.dir,ve=Ct===void 0?"ltr":Ct;this.graph.get("canvas").get("el").setAttribute("dir",ve)}},{key:"componentDidMount",value:function(){this.initGraphInstance()}},{key:"componentDidUpdate",value:function(Ct){var ve=this,ke,er,yr=this.shouldUpdate(Ct,"data"),Pt=this.shouldUpdate(Ct,"layout"),Tt=this.shouldUpdate(Ct,"options"),H=this.shouldUpdate(Ct,"theme"),gt=this.props,Rt=gt.data,te=gt.layoutCache,De=gt.rtl,rr=gt.layout,Er=(0,Ae.Z)(rr);this.layoutCache=te,Tt&&Ct.rtl!==De&&(this.setTextDirection(),this.graph.render());var yn;if(yr){if(this.initData(Rt),this.isTree)this.graph.changeData(this.data);else{var en=this.state.context.dragNodes;if(yn=en.filter(function(Hn){var Jn;return((Jn=ve.data)===null||Jn===void 0?void 0:Jn.nodes)&&ve.data.nodes.find(function(ja){return ja.id===Hn.id})}),(er=(ke=this.data)===null||ke===void 0?void 0:ke.nodes)===null||er===void 0||er.forEach(function(Hn){var Jn,ja,Va,ni,ai=yn.find(function(wi){return wi.id===Hn.id});ai&&(Hn.mass=(ja=(Jn=ai.layout)===null||Jn===void 0?void 0:Jn.force)===null||ja===void 0?void 0:ja.mass,Hn.layout=Object.assign(Object.assign({},Hn.layout),{force:{mass:(ni=(Va=ai.layout)===null||Va===void 0?void 0:Va.force)===null||ni===void 0?void 0:ni.mass}}))}),this.useGraphinLayoutController)this.graph.data(this.data),this.graph.set("layoutController",null),this.graph.changeData(this.data),this.data=this.layout.getDataFromGraph(),this.layout.changeLayout();else{Er&&(Er.disableTriggerLayout=!0);var hn=ce(Er,this.graph);this.graph.updateLayout(hn),this.graph.data(this.data),this.graph.changeData(this.data),this.data=this.graph.get("data")}}this.initStatus(),this.apis=N(this.graph),this.setState(function(Hn){return Object.assign(Object.assign({},Hn),{context:{graph:ve.graph,apis:ve.apis,theme:ve.theme,layout:ve.layout,dragNodes:yn||Hn.context.dragNodes,updateContext:ve.updateContext}})},function(){ve.graph.emit("graphin:datachange"),Pt&&ve.graph.emit("graphin:layoutchange",{prevLayout:Ct.layout,layout:Er})});return}if(Pt){if(this.useGraphinLayoutController=(Er==null?void 0:Er.type)==="graphin-force",this.isTree){this.graph.updateLayout(Er);return}if(this.useGraphinLayoutController)Object.keys(this.layout).length===0&&(this.layout=new ue(this)),this.data=this.layout.getDataFromGraph(),this.layout.changeLayout();else{var Qn=this.graph.get("layoutController");Qn||this.graph.initLayoutController();var fa=ce(Er,this.graph);fa&&(fa.disableTriggerLayout=!1),this.graph.updateLayout(fa),this.data=this.graph.get("data")}this.graph.emit("graphin:layoutchange",{prevLayout:Ct.layout,layout:Er})}}},{key:"componentWillUnmount",value:function(){this.clear()}},{key:"componentDidCatch",value:function(Ct,ve){console.error("Catch component error: ",Ct,ve)}},{key:"shouldUpdate",value:function(Ct,ve){var ke=Ct[ve],er=this.props[ve],yr=Ke(ke,er);return!yr}},{key:"render",value:function(){var Ct=this,ve,ke=this.state.isReady,er=this.props,yr=er.modes,Pt=er.style,Tt=er.containerId,H=er.containerStyle;return I.createElement(j.Z.Provider,{value:this.state.context},I.createElement("div",{id:Tt||"graphin-container",style:Object.assign({height:"100%",width:"100%",position:"relative"},H)},I.createElement("div",{"data-testid":"custom-element",className:"graphin-core",ref:function(Rt){Ct.graphDOM=Rt},style:Object.assign({height:"100%",width:" 100%",minHeight:"500px",background:((ve=this.theme)===null||ve===void 0?void 0:ve.background)||"#fff"},Pt)}),I.createElement("div",{className:"graphin-components"},ke&&I.createElement(I.Fragment,null,!yr&&I.createElement(I.Fragment,null,I.createElement(Lt,null),I.createElement(Ne,null),I.createElement(Xe,null),I.createElement(Dr,null),I.createElement(ur,null),I.createElement(Or,null)),I.createElement(ln,{graphDOM:this.graphDOM}),this.props.children))))}}],[{key:"registerBehavior",value:function(Ct,ve){F.ZP.registerBehavior(Ct,ve)}},{key:"registerFontFamily",value:function(Ct){var ve=Ct(),ke=ve.glyphs,er=ve.fontFamily,yr=ke.map(function(Pt){return{name:Pt.name,unicode:String.fromCodePoint(Pt.unicode_decimal)}});return new Proxy(yr,{get:function(Tt,H){var gt=Tt.find(function(Rt){return Rt.name===H});return gt?gt==null?void 0:gt.unicode:(console.error("%c fontFamily:".concat(er,",does not found ").concat(H," icon")),"")}})}},{key:"registerLayout",value:function(Ct,ve){F.ZP.registerLayout(Ct,ve)}}]),ut}(I.PureComponent);fn.registerNode=function(Nt,At,ut){F.ZP.registerNode(Nt,At,ut)},fn.registerEdge=function(Nt,At,ut){F.ZP.registerEdge(Nt,At,ut)},fn.registerCombo=function(Nt,At,ut){F.ZP.registerCombo(Nt,At,ut)};var Xr=fn,Cn=R(43054);function Qr(Nt){return lr(Nt)||sr(Nt)||on(Nt)||Gr()}function Gr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function on(Nt,At){if(!!Nt){if(typeof Nt=="string")return Qe(Nt,At);var ut=Object.prototype.toString.call(Nt).slice(8,-1);if(ut==="Object"&&Nt.constructor&&(ut=Nt.constructor.name),ut==="Map"||ut==="Set")return Array.from(Nt);if(ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut))return Qe(Nt,At)}}function sr(Nt){if(typeof Symbol!="undefined"&&Nt[Symbol.iterator]!=null||Nt["@@iterator"]!=null)return Array.from(Nt)}function lr(Nt){if(Array.isArray(Nt))return Qe(Nt)}function Qe(Nt,At){(At==null||At>Nt.length)&&(At=Nt.length);for(var ut=0,yt=new Array(At);ut<At;ut++)yt[ut]=Nt[ut];return yt}var $r=function(At,ut){var yt=At.data.id,Ct=0,ve=0,ke=0;return ut.forEach(function(er){er.source.id===yt&&(ve+=1,Ct+=1),er.target.id===yt&&(ke+=1,Ct+=1)}),{degree:Ct,sDegree:ve,tDegree:ke}},an=function(At,ut){return Qr(new Set(At==null?void 0:At.map(function(yt){var Ct;return(Ct=yt==null?void 0:yt.data)===null||Ct===void 0?void 0:Ct[ut]})))||[]},bn=function(At,ut,yt){var Ct,ve;return At==="source"?((Ct=yt==null?void 0:yt.find(function(ke){var er;return((er=ke.target)===null||er===void 0?void 0:er.id)===ut.id}))===null||Ct===void 0?void 0:Ct.source)||{}:((ve=yt==null?void 0:yt.find(function(ke){var er;return((er=ke.source)===null||er===void 0?void 0:er.id)===ut.id}))===null||ve===void 0?void 0:ve.target)||{}},nr=function(At,ut,yt,Ct){var ve,ke=((ve=yt==null?void 0:yt.data)===null||ve===void 0?void 0:ve[ut])||"",er=(Ct==null?void 0:Ct.filter(function(yr){var Pt;return((Pt=yr==null?void 0:yr.data)===null||Pt===void 0?void 0:Pt[ut])===ke}))||[];return At==="leaf"&&(er=er.filter(function(yr){var Pt,Tt,H,gt;return((Tt=(Pt=yr.data)===null||Pt===void 0?void 0:Pt.layout)===null||Tt===void 0?void 0:Tt.sDegree)===0||((gt=(H=yr.data)===null||H===void 0?void 0:H.layout)===null||gt===void 0?void 0:gt.tDegree)===0})),er},Tr=function(At,ut,yt){var Ct=[];switch(At){case"source":Ct=yt==null?void 0:yt.filter(function(ve){var ke;return((ke=ve.source)===null||ke===void 0?void 0:ke.id)===ut.id}).map(function(ve){return ve.target});break;case"target":Ct=yt==null?void 0:yt.filter(function(ve){var ke;return((ke=ve.target)===null||ke===void 0?void 0:ke.id)===ut.id}).map(function(ve){return ve.source});break;case"both":Ct=yt==null?void 0:yt.filter(function(ve){var ke;return((ke=ve.source)===null||ke===void 0?void 0:ke.id)===ut.id}).map(function(ve){return ve.target}).concat(yt==null?void 0:yt.filter(function(ve){var ke;return((ke=ve.target)===null||ke===void 0?void 0:ke.id)===ut.id}).map(function(ve){return ve.source}));break;default:break}return Ct=Cn.Z.uniqBy(Ct,function(ve,ke){return ve.id===ke.id}),Ct},ar=function(At,ut,yt,Ct){var ve,ke=((ve=ut==null?void 0:ut.data)===null||ve===void 0?void 0:ve.layout)||{},er=ke.sDegree,yr=ke.tDegree,Pt=ut,Tt=[];er===0?(Pt=bn("source",ut,yt),Tt=Tr("both",Pt,yt)):yr===0&&(Pt=bn("target",ut,yt),Tt=Tr("both",Pt,yt)),Tt=Tt.filter(function(gt){var Rt;return((Rt=gt.data)===null||Rt===void 0?void 0:Rt.layout)&&(gt.data.layout.sDegree===0||gt.data.layout.tDegree===0)});var H=nr(At,Ct,ut,Tt);return{coreNode:Pt,relativeLeafNodes:Tt,sameTypeLeafNodes:H}},vr=function(At){var ut=At.map(function(yr){return yr.x}),yt=At.map(function(yr){return yr.y}),Ct=(Math.max.apply(null,ut)+Math.min.apply(null,ut))/2,ve=(Math.max.apply(null,yt)+Math.min.apply(null,yt))/2,ke=function(Pt,Tt){return Math.sqrt((Pt-Ct)*(Pt-Ct)+(Tt-ve)*(Tt-ve))},er=At.map(function(yr){return ke(yr.x||0,yr.y||0)});return At[er.findIndex(function(yr){return yr===Math.min.apply(null,er)})]},Br=function(At){var ut={x:0,y:0};At.forEach(function(Ct){ut.x+=Ct.x||0,ut.y+=Ct.y||0});var yt=At.length||1;return{x:ut.x/yt,y:ut.y/yt}},Fr={getDegree:$r,getRelativeNodesType:an,getCoreNodeAndRelativeLeafNodes:ar,getCoreNode:bn,getSameTypeNodes:nr,getMinDistanceNode:vr,getAvgNodePosition:Br};function kr(Nt,At){for(var ut=0;ut<At.length;ut++){var yt=At[ut];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(Nt,yt.key,yt)}}function Z(Nt,At,ut){return At&&kr(Nt.prototype,At),ut&&kr(Nt,ut),Object.defineProperty(Nt,"prototype",{writable:!1}),Nt}function Te(Nt,At){if(!(Nt instanceof At))throw new TypeError("Cannot call a class as a function")}var ne=Z(function Nt(At){Te(this,Nt),this.id=At.id,this.data=At||{},this.x=At.x||0,this.y=At.y||0}),it=Z(function Nt(At,ut,yt,Ct){Te(this,Nt),this.id=At,this.source=ut,this.target=yt,this.data=Ct||{}});function ot(Nt){const At=+this._x.call(null,Nt),ut=+this._y.call(null,Nt);return B(this.cover(At,ut),At,ut,Nt)}function B(Nt,At,ut,yt){if(isNaN(At)||isNaN(ut))return Nt;var Ct,ve=Nt._root,ke={data:yt},er=Nt._x0,yr=Nt._y0,Pt=Nt._x1,Tt=Nt._y1,H,gt,Rt,te,De,rr,Er,yn;if(!ve)return Nt._root=ke,Nt;for(;ve.length;)if((De=At>=(H=(er+Pt)/2))?er=H:Pt=H,(rr=ut>=(gt=(yr+Tt)/2))?yr=gt:Tt=gt,Ct=ve,!(ve=ve[Er=rr<<1|De]))return Ct[Er]=ke,Nt;if(Rt=+Nt._x.call(null,ve.data),te=+Nt._y.call(null,ve.data),At===Rt&&ut===te)return ke.next=ve,Ct?Ct[Er]=ke:Nt._root=ke,Nt;do Ct=Ct?Ct[Er]=new Array(4):Nt._root=new Array(4),(De=At>=(H=(er+Pt)/2))?er=H:Pt=H,(rr=ut>=(gt=(yr+Tt)/2))?yr=gt:Tt=gt;while((Er=rr<<1|De)==(yn=(te>=gt)<<1|Rt>=H));return Ct[yn]=ve,Ct[Er]=ke,Nt}function _(Nt){var At,ut,yt=Nt.length,Ct,ve,ke=new Array(yt),er=new Array(yt),yr=Infinity,Pt=Infinity,Tt=-Infinity,H=-Infinity;for(ut=0;ut<yt;++ut)isNaN(Ct=+this._x.call(null,At=Nt[ut]))||isNaN(ve=+this._y.call(null,At))||(ke[ut]=Ct,er[ut]=ve,Ct<yr&&(yr=Ct),Ct>Tt&&(Tt=Ct),ve<Pt&&(Pt=ve),ve>H&&(H=ve));if(yr>Tt||Pt>H)return this;for(this.cover(yr,Pt).cover(Tt,H),ut=0;ut<yt;++ut)B(this,ke[ut],er[ut],Nt[ut]);return this}function C(Nt,At){if(isNaN(Nt=+Nt)||isNaN(At=+At))return this;var ut=this._x0,yt=this._y0,Ct=this._x1,ve=this._y1;if(isNaN(ut))Ct=(ut=Math.floor(Nt))+1,ve=(yt=Math.floor(At))+1;else{for(var ke=Ct-ut||1,er=this._root,yr,Pt;ut>Nt||Nt>=Ct||yt>At||At>=ve;)switch(Pt=(At<yt)<<1|Nt<ut,yr=new Array(4),yr[Pt]=er,er=yr,ke*=2,Pt){case 0:Ct=ut+ke,ve=yt+ke;break;case 1:ut=Ct-ke,ve=yt+ke;break;case 2:Ct=ut+ke,yt=ve-ke;break;case 3:ut=Ct-ke,yt=ve-ke;break}this._root&&this._root.length&&(this._root=er)}return this._x0=ut,this._y0=yt,this._x1=Ct,this._y1=ve,this}function Y(){var Nt=[];return this.visit(function(At){if(!At.length)do Nt.push(At.data);while(At=At.next)}),Nt}function pt(Nt){return arguments.length?this.cover(+Nt[0][0],+Nt[0][1]).cover(+Nt[1][0],+Nt[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function _t(Nt,At,ut,yt,Ct){this.node=Nt,this.x0=At,this.y0=ut,this.x1=yt,this.y1=Ct}function Mt(Nt,At,ut){var yt,Ct=this._x0,ve=this._y0,ke,er,yr,Pt,Tt=this._x1,H=this._y1,gt=[],Rt=this._root,te,De;for(Rt&&gt.push(new _t(Rt,Ct,ve,Tt,H)),ut==null?ut=Infinity:(Ct=Nt-ut,ve=At-ut,Tt=Nt+ut,H=At+ut,ut*=ut);te=gt.pop();)if(!(!(Rt=te.node)||(ke=te.x0)>Tt||(er=te.y0)>H||(yr=te.x1)<Ct||(Pt=te.y1)<ve))if(Rt.length){var rr=(ke+yr)/2,Er=(er+Pt)/2;gt.push(new _t(Rt[3],rr,Er,yr,Pt),new _t(Rt[2],ke,Er,rr,Pt),new _t(Rt[1],rr,er,yr,Er),new _t(Rt[0],ke,er,rr,Er)),(De=(At>=Er)<<1|Nt>=rr)&&(te=gt[gt.length-1],gt[gt.length-1]=gt[gt.length-1-De],gt[gt.length-1-De]=te)}else{var yn=Nt-+this._x.call(null,Rt.data),en=At-+this._y.call(null,Rt.data),hn=yn*yn+en*en;if(hn<ut){var Qn=Math.sqrt(ut=hn);Ct=Nt-Qn,ve=At-Qn,Tt=Nt+Qn,H=At+Qn,yt=Rt.data}}return yt}function zt(Nt){if(isNaN(Tt=+this._x.call(null,Nt))||isNaN(H=+this._y.call(null,Nt)))return this;var At,ut=this._root,yt,Ct,ve,ke=this._x0,er=this._y0,yr=this._x1,Pt=this._y1,Tt,H,gt,Rt,te,De,rr,Er;if(!ut)return this;if(ut.length)for(;;){if((te=Tt>=(gt=(ke+yr)/2))?ke=gt:yr=gt,(De=H>=(Rt=(er+Pt)/2))?er=Rt:Pt=Rt,At=ut,!(ut=ut[rr=De<<1|te]))return this;if(!ut.length)break;(At[rr+1&3]||At[rr+2&3]||At[rr+3&3])&&(yt=At,Er=rr)}for(;ut.data!==Nt;)if(Ct=ut,!(ut=ut.next))return this;return(ve=ut.next)&&delete ut.next,Ct?(ve?Ct.next=ve:delete Ct.next,this):At?(ve?At[rr]=ve:delete At[rr],(ut=At[0]||At[1]||At[2]||At[3])&&ut===(At[3]||At[2]||At[1]||At[0])&&!ut.length&&(yt?yt[Er]=ut:this._root=ut),this):(this._root=ve,this)}function Le(Nt){for(var At=0,ut=Nt.length;At<ut;++At)this.remove(Nt[At]);return this}function Me(){return this._root}function qe(){var Nt=0;return this.visit(function(At){if(!At.length)do++Nt;while(At=At.next)}),Nt}function br(Nt){var At=[],ut,yt=this._root,Ct,ve,ke,er,yr;for(yt&&At.push(new _t(yt,this._x0,this._y0,this._x1,this._y1));ut=At.pop();)if(!Nt(yt=ut.node,ve=ut.x0,ke=ut.y0,er=ut.x1,yr=ut.y1)&&yt.length){var Pt=(ve+er)/2,Tt=(ke+yr)/2;(Ct=yt[3])&&At.push(new _t(Ct,Pt,Tt,er,yr)),(Ct=yt[2])&&At.push(new _t(Ct,ve,Tt,Pt,yr)),(Ct=yt[1])&&At.push(new _t(Ct,Pt,ke,er,Tt)),(Ct=yt[0])&&At.push(new _t(Ct,ve,ke,Pt,Tt))}return this}function xr(Nt){var At=[],ut=[],yt;for(this._root&&At.push(new _t(this._root,this._x0,this._y0,this._x1,this._y1));yt=At.pop();){var Ct=yt.node;if(Ct.length){var ve,ke=yt.x0,er=yt.y0,yr=yt.x1,Pt=yt.y1,Tt=(ke+yr)/2,H=(er+Pt)/2;(ve=Ct[0])&&At.push(new _t(ve,ke,er,Tt,H)),(ve=Ct[1])&&At.push(new _t(ve,Tt,er,yr,H)),(ve=Ct[2])&&At.push(new _t(ve,ke,H,Tt,Pt)),(ve=Ct[3])&&At.push(new _t(ve,Tt,H,yr,Pt))}ut.push(yt)}for(;yt=ut.pop();)Nt(yt.node,yt.x0,yt.y0,yt.x1,yt.y1);return this}function sn(Nt){return Nt[0]}function Rn(Nt){return arguments.length?(this._x=Nt,this):this._x}function tr(Nt){return Nt[1]}function Sr(Nt){return arguments.length?(this._y=Nt,this):this._y}function jr(Nt,At,ut){var yt=new Nn(At==null?sn:At,ut==null?tr:ut,NaN,NaN,NaN,NaN);return Nt==null?yt:yt.addAll(Nt)}function Nn(Nt,At,ut,yt,Ct,ve){this._x=Nt,this._y=At,this._x0=ut,this._y0=yt,this._x1=Ct,this._y1=ve,this._root=void 0}function gn(Nt){for(var At={data:Nt.data},ut=At;Nt=Nt.next;)ut=ut.next={data:Nt.data};return At}var ea=jr.prototype=Nn.prototype;ea.copy=function(){var Nt=new Nn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),At=this._root,ut,yt;if(!At)return Nt;if(!At.length)return Nt._root=gn(At),Nt;for(ut=[{source:At,target:Nt._root=new Array(4)}];At=ut.pop();)for(var Ct=0;Ct<4;++Ct)(yt=At.source[Ct])&&(yt.length?ut.push({source:yt,target:At.target[Ct]=new Array(4)}):At.target[Ct]=gn(yt));return Nt},ea.add=ot,ea.addAll=_,ea.cover=C,ea.data=Y,ea.extent=pt,ea.find=Mt,ea.remove=zt,ea.removeAll=Le,ea.root=Me,ea.size=qe,ea.visit=br,ea.visitAfter=xr,ea.x=Rn,ea.y=Sr;var ha=.81,Zn=.1;function na(Nt,At,ut){return Nt.map(function(yt,Ct){var ve={vx:0,vy:0};return Nt.forEach(function(ke,er){if(Ct!==er){var yr=yt.x-ke.x||.001,Pt=yt.y-ke.y||.001,Tt=Math.sqrt(yr*yr+Pt*Pt)+Zn,H=Tt*At,gt=ut/(H*H)||0;ve.vx+=(yr/Tt||0)*gt,ve.vy+=(Pt/Tt||0)*gt}}),ve})}function da(Nt,At,ut){var yt=ut/(At*At),Ct=Nt.map(function(ke,er){return Object.assign(Object.assign({index:er},ke),{vx:0,vy:0,weight:yt})}),ve=jr(Ct,function(ke){return ke.x},function(ke){return ke.y}).visitAfter(Vn);return Ct.forEach(function(ke){se(ke,ve)}),Ct.map(function(ke){return{vx:ke.vx,vy:ke.vy}})}function Vn(Nt){var At=0,ut=0,yt=0;if(Nt.length){for(var Ct=0;Ct<4;Ct++){var ve=Nt[Ct];ve&&ve.weight&&(At+=ve.weight,ut+=ve.x*ve.weight,yt+=ve.y*ve.weight)}Nt.x=ut/At,Nt.y=yt/At,Nt.weight=At}else{var ke=Nt;Nt.x=ke.data.x,Nt.y=ke.data.y,Nt.weight=ke.data.weight}}function se(Nt,At){var ut=function(Ct,ve,ke,er,yr){var Pt=Nt.x-Ct.x||.001,Tt=Nt.y-Ct.y||.001,H=er-ve,gt=Pt*Pt+Tt*Tt+Zn,Rt=Math.sqrt(gt)+Zn;if(H*H/ha<gt)return Nt.vx+=Pt/Rt*Ct.weight/gt,Nt.vy+=Tt/Rt*Ct.weight/gt,!0;if(Ct.length)return!1;Ct.data!==Nt&&(Nt.vx+=Pt/Rt*Ct.data.weight/gt,Nt.vy+=Tt/Rt*Ct.data.weight/gt)};At.visit(ut)}function Ut(Nt,At){for(var ut=0;ut<At.length;ut++){var yt=At[ut];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(Nt,yt.key,yt)}}function le(Nt,At,ut){return At&&Ut(Nt.prototype,At),ut&&Ut(Nt,ut),Object.defineProperty(Nt,"prototype",{writable:!1}),Nt}function ze(Nt,At){if(!(Nt instanceof At))throw new TypeError("Cannot call a class as a function")}var Ie=le(function Nt(At,ut){var yt=this;ze(this,Nt),this.getvec=function(){return yt},this.add=function(Ct){return new Nt(yt.x+Ct.x,yt.y+Ct.y)},this.subtract=function(Ct){return new Nt(yt.x-Ct.x,yt.y-Ct.y)},this.magnitude=function(){return Math.sqrt(yt.x*yt.x+yt.y*yt.y)},this.normalise=function(){return yt.divide(yt.magnitude())},this.divide=function(Ct){return new Nt(yt.x/Ct||0,yt.y/Ct||0)},this.scalarMultip=function(Ct){return new Nt(yt.x*Ct,yt.y*Ct)},this.x=At,this.y=ut}),We=Ie;function _r(Nt,At){for(var ut=0;ut<At.length;ut++){var yt=At[ut];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(Nt,yt.key,yt)}}function nn(Nt,At,ut){return At&&_r(Nt.prototype,At),ut&&_r(Nt,ut),Object.defineProperty(Nt,"prototype",{writable:!1}),Nt}function pn(Nt,At){if(!(Nt instanceof At))throw new TypeError("Cannot call a class as a function")}var Gn=nn(function Nt(At,ut,yt){var Ct=this,ve=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;pn(this,Nt),this.updateAcc=function(ke){Ct.a=Ct.a.add(ke.divide(Ct.m))},this.p=At,this.m=ve,this.v=new We(0,0),this.a=new We(0,0),this.id=ut,this.data=yt}),jn=Gn;function oa(Nt,At){for(var ut=0;ut<At.length;ut++){var yt=At[ut];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(Nt,yt.key,yt)}}function va(Nt,At,ut){return At&&oa(Nt.prototype,At),ut&&oa(Nt,ut),Object.defineProperty(Nt,"prototype",{writable:!1}),Nt}function _a(Nt,At){if(!(Nt instanceof At))throw new TypeError("Cannot call a class as a function")}var fi=va(function Nt(At,ut,yt){_a(this,Nt),this.source=At,this.target=ut,this.length=yt}),Ba=fi;function Wa(Nt,At){for(var ut=0;ut<At.length;ut++){var yt=At[ut];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(Nt,yt.key,yt)}}function wa(Nt,At,ut){return At&&Wa(Nt.prototype,At),ut&&Wa(Nt,ut),Object.defineProperty(Nt,"prototype",{writable:!1}),Nt}function vi(Nt,At){if(!(Nt instanceof At))throw new TypeError("Cannot call a class as a function")}var ti=wa(function Nt(At){var ut=this;vi(this,Nt),this.updateOptions=function(yt){!yt||Object.keys(yt).forEach(function(Ct){ut.props[Ct]=yt[Ct]})},this.setData=function(yt){ut.nodes=[],ut.edges=[],ut.nodeSet={},ut.edgeSet={},ut.nodePoints=new Map,ut.edgeSprings=new Map,ut.sourceData=yt,ut.judgingDistance=0,("nodes"in yt||"edges"in yt)&&(ut.addNodes(yt.nodes),ut.addEdges(yt.edges))},this.getMass=function(yt){var Ct,ve=yt.layout||{},ke=ve.degree,er=ke===void 0?(Ct=Fr.getDegree(yt,ut.edges))===null||Ct===void 0?void 0:Ct.degree:ke,yr=ve.force;return yr&&yr.mass?yr.mass:er<5?1:er*5},this.init=function(){var yt=ut.props,Ct=yt.width,ve=yt.height,ke=ut.props.centripetalOptions,er=ut.props,yr=er.leafCluster,Pt=er.clustering,Tt=er.nodeClusterBy,H=er.clusterNodeStrength,gt=function(hn){return typeof H=="function"?H(hn):H},Rt;if(ut.nodes.forEach(function(en){var hn=en.data.x||Ct/2,Qn=en.data.y||ve/2,fa=new We(hn,Qn);en.data.layout||(en.data.layout={});var Hn=Fr.getDegree(en,ut.edges);en.data.layout=Object.assign(Object.assign({},en.data.layout),Hn);var Jn=ut.getMass(en.data);ut.nodePoints.set(en.id,new jn(fa,String(en.id),en.data,Jn))}),ut.edges.forEach(function(en){var hn=ut.nodePoints.get(en.source.id),Qn=ut.nodePoints.get(en.target.id),fa=ut.props.defSpringLen(en,hn,Qn);ut.edgeSprings.set(en.id,new Ba(hn,Qn,fa))}),yr){Rt=ut.getSameTypeLeafMap();var te=Fr.getRelativeNodesType(ut.nodes,Tt);ke={single:100,leaf:function(hn,Qn,fa){var Hn=Rt[hn.id]||{},Jn=Hn.relativeLeafNodes,ja=Hn.sameTypeLeafNodes;return(ja==null?void 0:ja.length)===(Jn==null?void 0:Jn.length)||(te==null?void 0:te.length)===1?1:gt(hn)},others:1,center:function(hn,Qn,fa){var Hn,Jn=((Hn=hn.data)===null||Hn===void 0?void 0:Hn.layout)||{},ja=Jn.degree;if(!ja)return{x:100,y:100};var Va;if(ja===1){var ni=Rt[hn.id]||{},ai=ni.sameTypeLeafNodes,wi=ai===void 0?[]:ai;wi.length===1?Va=void 0:wi.length>1&&(Va=Fr.getAvgNodePosition(wi))}else Va=void 0;return{x:Va==null?void 0:Va.x,y:Va==null?void 0:Va.y}}}}if(Pt){Rt||(Rt=ut.getSameTypeLeafMap());var De=Array.from(new Set(ut.nodes.map(function(en){var hn;return(hn=en.data)===null||hn===void 0?void 0:hn[Tt]}))).filter(function(en){return en!==void 0}),rr={};De.forEach(function(en){var hn=ut.nodes.filter(function(Qn){var fa;return((fa=Qn.data)===null||fa===void 0?void 0:fa[Tt])===en});rr[en]=Fr.getAvgNodePosition(hn)}),ke={single:function(hn){return gt(hn)},leaf:function(hn){return gt(hn)},others:function(hn){return gt(hn)},center:function(hn,Qn,fa){var Hn,Jn=rr[(Hn=hn.data)===null||Hn===void 0?void 0:Hn[Tt]];return{x:Jn==null?void 0:Jn.x,y:Jn==null?void 0:Jn.y}}}}ut.centripetalOptions=Object.assign(Object.assign({},ut.centripetalOptions),ke);var Er=ut.nodePoints.size,yn=Math.pow(10,2);ut.props.minEnergyThreshold=1/2*Math.pow(1,2)*1*Er*yn},this.start=function(){ut.init(),ut.props.animation?ut.animation():ut.slienceForce()},this.calTotalEnergy=function(){var yt=0;return ut.nodes.forEach(function(Ct){var ve=ut.nodePoints.get(Ct.id),ke=ve.v.magnitude(),er=ve.m;yt+=er*Math.pow(ke,2)*.5}),yt},this.slienceForce=function(){for(var yt=ut.props,Ct=yt.done,ve=yt.maxIterations,ke=yt.minDistanceThreshold,er=0;(ut.judgingDistance>ke||er<1)&&er<ve;er++)ut.tick(ut.props.tickInterval),ut.iterations++;ut.render(),Ct&&Ct(ut.renderNodes)},this.requestAnimationFrame=function(yt){var Ct=ut.props.enableWorker;return Ct?setInterval(function(){yt()},16):window.requestAnimationFrame(yt)},this.cancelAnimationFrame=function(yt){var Ct=ut.props.enableWorker;Ct?clearInterval(yt):window.cancelAnimationFrame(yt)},this.animation=function(){var yt=ut.props,Ct=yt.enableWorker,ve=yt.maxIterations,ke=yt.minDistanceThreshold,er=yt.done,yr=yt.tickInterval;if(Ct){for(var Pt=new Date().valueOf(),Tt=.22,H=function(en){return en>10?2e3:20*en*en},gt=0;gt<ve;gt++){var Rt=Math.max(.02,Tt-gt*.002);ut.tick(Rt);var te=new Date().valueOf()-Pt;te>=H(gt)&&(ut.render(),Pt=new Date().valueOf());var De=ut.calTotalEnergy(),rr=ut.registers.get("monitor");if(rr&&rr(ut.reportMointor(De)),ut.judgingDistance<ke){ut.render(),er&&er(ut.renderNodes);return}}return}var Er=function yn(){ut.tick(yr),ut.render(),ut.iterations++;var en=ut.calTotalEnergy(),hn=ut.registers.get("monitor");hn&&hn(ut.reportMointor(en)),ut.judgingDistance<ke||ut.iterations>ut.props.maxIterations?(ut.cancelAnimationFrame(ut.timer),ut.iterations=0,ut.done=!0,er&&er(ut.renderNodes)):ut.timer=ut.requestAnimationFrame(yn)};ut.timer=ut.requestAnimationFrame(Er)},this.render=function(){var yt=ut.registers.get("render");ut.renderNodes=[],ut.nodePoints.forEach(function(Ct){ut.renderNodes.push(Object.assign(Object.assign({},ut.nodeSet[Ct.id]&&ut.nodeSet[Ct.id].data),{x:Ct.p.x,y:Ct.p.y}))}),yt?yt({nodes:ut.renderNodes,edges:ut.sourceData.edges}):console.error("need a render function")},this.reportMointor=function(yt){var Ct={energy:yt,iterations:ut.iterations,nodes:ut.nodes,edges:ut.edges};return Ct},this.tick=function(yt){ut.updateCoulombsLawOptimized(),ut.updateHookesLaw(),ut.attractToCentre(),ut.attractToSide(),ut.updateVelocity(yt),ut.updatePosition(yt)},this.updateCoulombsLawOptimized=function(){var yt=ut.props.coulombDisScale,Ct=ut.props.repulsion,ve=ut.nodes.map(function(er){var yr=ut.nodePoints.get(er.id).p;return{x:yr.x,y:yr.y}}),ke=da(ve,yt,Ct);ut.nodes.forEach(function(er,yr){ut.nodePoints.get(er.id).updateAcc(new We(ke[yr].vx,ke[yr].vy))})},this.updateCoulombsLaw=function(){for(var yt=ut.nodes.length,Ct=0;Ct<yt;Ct++)for(var ve=Ct+1;ve<yt;ve++)if(Ct!==ve){var ke=ut.nodes[Ct],er=ut.nodes[ve],yr=ut.props.coulombDisScale,Pt=ut.props.repulsion,Tt=ut.nodePoints.get(ke.id).p.subtract(ut.nodePoints.get(er.id).p),H=(Tt.magnitude()+.1)*yr,gt=Tt.normalise(),Rt=1;ut.nodePoints.get(ke.id).updateAcc(gt.scalarMultip(Pt*Rt).divide(Math.pow(H,2))),ut.nodePoints.get(er.id).updateAcc(gt.scalarMultip(Pt*Rt).divide(-Math.pow(H,2)))}},this.updateHookesLaw=function(){ut.edges.forEach(function(yt){var Ct=ut.edgeSprings.get(yt.id),ve=Ct.target.p.subtract(Ct.source.p),ke=Ct.length-ve.magnitude(),er=ve.normalise();Ct.source.updateAcc(er.scalarMultip(-ut.props.stiffness*ke)),Ct.target.updateAcc(er.scalarMultip(ut.props.stiffness*ke))})},this.implementForce=function(yt,Ct){var ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,ke=ut.nodePoints.get(yt.id),er=ke.p.subtract(Ct);ke.updateAcc(er.scalarMultip(-ve))},this.attractToCentre=function(){ut.nodes.forEach(function(yt){var Ct,ve=(Ct=yt.data)===null||Ct===void 0?void 0:Ct.layout,ke=ve.degree,er=ve.sDegree,yr=ve.tDegree,Pt=ut.centripetalOptions,Tt=Pt.leaf,H=Pt.single,gt=Pt.others,Rt=Pt.center,te=ut.props,De=te.width,rr=te.height;if(Rt!==void 0){var Er=Rt(yt,ut.nodes,ut.edges,De,rr),yn=Er.x,en=Er.y,hn=Er.centerStrength;if(!(yn===void 0||en===void 0)){var Qn=new We(yn,en);if(hn){ut.implementForce(yt,Qn,hn);return}var fa=typeof Tt=="function"?Tt(yt,ut.nodes,ut.edges):Tt,Hn=typeof H=="function"?H(yt):H,Jn=typeof gt=="function"?gt(yt):gt,ja=yr===0||er===0,Va=ke===0;if(!(fa===0||Hn===0||Jn===0)){if(Va){ut.implementForce(yt,Qn,Hn);return}if(ja){ut.implementForce(yt,Qn,fa);return}ut.implementForce(yt,Qn,Jn)}}}})},this.attractToSide=function(){if(!(!ut.props.defSideCoe||typeof ut.props.defSideCoe!="function")){var yt=ut.props.height;ut.nodes.forEach(function(Ct){var ve=ut.props.defSideCoe(Ct);if(ve!==0){var ke=ut.nodePoints.get(Ct.id),er=ke.p.x,yr=ve>0?0:yt,Pt=new We(er,yr);ut.implementForce(Ct,Pt,Math.abs(ve))}})}},this.updateVelocity=function(yt){ut.nodes.forEach(function(Ct){var ve=ut.nodePoints.get(Ct.id);ve.v=ve.v.add(ve.a.scalarMultip(yt)).scalarMultip(ut.props.damping),ve.v.magnitude()>ut.props.maxSpeed&&(ve.v=ve.v.normalise().scalarMultip(ut.props.maxSpeed)),ve.a=new We(0,0)})},this.updatePosition=function(yt){var Ct;if(!((Ct=ut.nodes)===null||Ct===void 0?void 0:Ct.length)){ut.judgingDistance=0;return}var ve=ut.props.distanceThresholdMode,ke=0;ve==="max"?ut.judgingDistance=-Infinity:ve==="min"&&(ut.judgingDistance=Infinity),ut.nodes.forEach(function(er){var yr=ut.nodePoints.get(er.id);yr.p=yr.p.add(yr.v.scalarMultip(yt));var Pt=yr.v.scalarMultip(yt),Tt=Pt.magnitude();switch(ve){case"max":ut.judgingDistance<Tt&&(ut.judgingDistance=Tt);break;case"min":ut.judgingDistance>Tt&&(ut.judgingDistance=Tt);break;default:ke=ke+Tt;break}}),(!ve||ve==="mean")&&(ut.judgingDistance=ke/ut.nodes.length)},this.addNode=function(yt){var Ct=ut.props.ignore;Ct&&Ct(yt)||(yt.id in ut.nodeSet||ut.nodes.push(yt),ut.nodeSet[yt.id]=yt)},this.addNodes=function(yt){yt.forEach(function(Ct){ut.addNode(new ne(Ct))})},this.addEdge=function(yt){return yt.id in ut.edgeSet||ut.edges.push(yt),ut.edgeSet[yt.id]=yt,yt},this.addEdges=function(yt){try{for(var Ct=yt.length,ve=0;ve<Ct;ve++){var ke=yt[ve],er=ke.source,yr=ke.target,Pt=ut.nodeSet[er];if(Pt===void 0)throw new TypeError("invalid node name: ".concat(ke.source));var Tt=ut.nodeSet[yr];if(Tt===void 0)throw new TypeError("invalid node name: ".concat(ke.target));var H=ke.data,gt=new it(String(ut.nextEdgeId++),Pt,Tt,H);ut.addEdge(gt)}}catch(Rt){console.error(Rt)}},this.register=function(yt,Ct){ut.registers.set(yt,Ct)},this.restart=function(yt,Ct){var ve=ut.props.ignore;Ct.getNodes().forEach(function(er){var yr=er.get("model");if(!(ve&&ve(yr))){var Pt=new We(yr.x,yr.y),Tt=ut.nodePoints.get(yr.id);Tt&&(Tt.p=Pt,ut.nodePoints.set(yr.id,Tt))}});var ke=function(yr){var Pt=new We(yr.x,yr.y),Tt=ut.getMass(yr);ut.nodePoints.set(yr.id,new jn(Pt,yr.id,yr.data,Tt)),ut.edges.forEach(function(H){var gt=ut.nodePoints.get(H.source.id),Rt=ut.nodePoints.get(H.target.id);if(gt.id===yr.id||Rt.id===yr.id){var te=ut.edgeSprings.get(H.id).length||100;ut.edgeSprings.set(H.id,new Ba(gt,Rt,te))}})};yt.forEach(ke),ut.props.restartAnimation?ut.animation():ut.slienceForce()},this.stop=function(){window.cancelAnimationFrame(ut.timer),ut.done=!0},this.getSameTypeLeafMap=function(){var yt=ut.props.nodeClusterBy,Ct={};return ut.nodes.forEach(function(ve){var ke,er=((ke=ve.data)===null||ke===void 0?void 0:ke.layout)||{},yr=er.degree;yr===1&&(Ct[ve.id]=Fr.getCoreNodeAndRelativeLeafNodes("leaf",ve,ut.edges,yt))}),Ct},this.props={stiffness:200,enableWorker:!1,defSpringLen:function(Ct){return Ct.data.spring||200},repulsion:200*5,centripetalOptions:{leaf:2,single:2},leafCluster:!1,clustering:!1,nodeClusterBy:"cluster",clusterNodeStrength:20,damping:.9,minEnergyThreshold:.1,maxSpeed:1e3,coulombDisScale:.005,tickInterval:.02,groupFactor:4,maxIterations:7440,minDistanceThreshold:.4,distanceThresholdMode:"mean",animation:!0,restartAnimation:!0,width:200,height:200},this.updateOptions(At),this.sourceData={nodes:[],edges:[],combos:[]},this.nodes=[],this.edges=[],this.nodeSet={},this.edgeSet={},this.renderNodes=[],this.nodePoints=new Map,this.edgeSprings=new Map,this.registers=new Map,this.done=!1,this.judgingDistance=0,this.iterations=0,this.nextEdgeId=0,this.timer=0,this.center=new We(0,0),this.centripetalOptions={leaf:2,single:2,others:1,center:function(Ct){return{x:ut.props.width/2,y:ut.props.height/2}}},this.dragNodes=[]}),Ia=ti,qi=Ia,gi=function(Nt,At){var ut={};for(var yt in Nt)Object.prototype.hasOwnProperty.call(Nt,yt)&&At.indexOf(yt)<0&&(ut[yt]=Nt[yt]);if(Nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ct=0,yt=Object.getOwnPropertySymbols(Nt);Ct<yt.length;Ct++)At.indexOf(yt[Ct])<0&&Object.prototype.propertyIsEnumerable.call(Nt,yt[Ct])&&(ut[yt[Ct]]=Nt[yt[Ct]]);return ut},ji=function(){F.ZP.registerLayout("graphin-force",{getDefaultCfg:function(){return{preset:{name:"grid",options:{}},stiffness:200,repulsion:200*5,centripetalOptions:{leaf:1.6,single:1.6},damping:.9,minEnergyThreshold:.1,maxSpeed:1e3,MaxIterations:1e4,animation:!0}},init:function(At){this.nodes=At.nodes,this.edges=At.edges;var ut=this,yt=ut.graph,Ct=gi(ut,["graph"]),ve=Object.assign(Object.assign({},this.getDefaultCfg()),Ct),ke=ve.width,er=ve.height,yr=ve.animation,Pt=ve.done,Tt=Pt===void 0?function(){}:Pt,H=gi(ve,["width","height","animation","done"]);this.simulation=new qi(Object.assign(Object.assign(Object.assign({width:ke,height:er,animation:yr},H),Ct),{done:function(Rt){Tt(yt,Rt)}})),this.simulation.setData(At),this.simulation.register("render",function(gt){if(!yr&&At&&At.nodes&&At.nodes.length>0){var Rt=gt.nodes;return At.nodes.forEach(function(De,rr){var Er=Rt[rr];if(Er&&Er.id===De.id)De.x=Rt[rr].x,De.y=Rt[rr].y;else{var yn=Rt.find(function(en){return en.id===De.id});yn&&(De.x=yn.x,De.y=yn.y)}}),Object.assign({},gt)}try{if(!yt||yt.destroyed)return;var te=!1;gt.nodes.forEach(function(De){var rr=yt.findById(De.id);if(rr){var Er=rr.get("model");Er.x=De.x,Er.y=De.y,rr.getType()==="combo"&&(te=!0)}}),yt.refreshPositions(te)}catch(De){console.error(De)}})},execute:function(){this.simulation.start()},layout:function(At){this.init(At),this.execute()},updateCfg:function(At){this.cfg=Object.assign(Object.assign({},this.cfg),At)},destroy:function(){this.destroyed=!0,this.simulation.stop(),this.simulation=null},getType:function(){return"graphin-force"}})},Ti=function(){F.ZP.registerLayout("preset",{init:function(){},execute:function(){},destroy:function(){this.destroyed=!0}})},ri=R(49242);function No(Nt,At){return Xi(Nt)||Ji(Nt,At)||Ii(Nt,At)||Po()}function Po(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ii(Nt,At){if(!!Nt){if(typeof Nt=="string")return ho(Nt,At);var ut=Object.prototype.toString.call(Nt).slice(8,-1);if(ut==="Object"&&Nt.constructor&&(ut=Nt.constructor.name),ut==="Map"||ut==="Set")return Array.from(Nt);if(ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut))return ho(Nt,At)}}function ho(Nt,At){(At==null||At>Nt.length)&&(At=Nt.length);for(var ut=0,yt=new Array(At);ut<At;ut++)yt[ut]=Nt[ut];return yt}function Ji(Nt,At){var ut=Nt==null?null:typeof Symbol!="undefined"&&Nt[Symbol.iterator]||Nt["@@iterator"];if(ut!=null){var yt=[],Ct=!0,ve=!1,ke,er;try{for(ut=ut.call(Nt);!(Ct=(ke=ut.next()).done)&&(yt.push(ke.value),!(At&&yt.length===At));Ct=!0);}catch(yr){ve=!0,er=yr}finally{try{!Ct&&ut.return!=null&&ut.return()}finally{if(ve)throw er}}return yt}}function Xi(Nt){if(Array.isArray(Nt))return Nt}var Ri=function(Nt,At){var ut={};for(var yt in Nt)Object.prototype.hasOwnProperty.call(Nt,yt)&&At.indexOf(yt)<0&&(ut[yt]=Nt[yt]);if(Nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ct=0,yt=Object.getOwnPropertySymbols(Nt);Ct<yt.length;Ct++)At.indexOf(yt[Ct])<0&&Object.prototype.propertyIsEnumerable.call(Nt,yt[Ct])&&(ut[yt[Ct]]=Nt[yt[Ct]]);return ut},Oi=function(At,ut,yt){if(!!ut)try{At.forEach(function(Ct){var ve=Ct.cfg.name,ke=ut[ve];if(ke){var er=yt(ut,ve),yr=er.animate,Pt=er.visible,Tt=Ri(er,["animate","visible"]);if(Ct.attrs.img)Tt.opacity!==void 0&&Ct.attr({opacity:Tt.opacity});else if(Ct.attr(Tt),Ct.cfg.visible=Pt!==!1,yr){var H=yr.attrs,gt=Ri(yr,["attrs"]);Ct.animate(H,gt)}}})}catch(Ct){console.error(Ct)}};function Io(Nt){return Object.keys(Nt).forEach(function(At){Nt[At]===void 0&&delete Nt[At]}),Nt}var to=function(At){if(!At)return[0,0];var ut=0,yt=0;if((0,ri.isNumber)(At))ut=At,yt=At;else if((0,ri.isArray)(At)){if(At.length===1){var Ct=No(At,1),ve=Ct[0];ut=ve,yt=ve}else if(At.length===2){var ke=No(At,2),er=ke[0],yr=ke[1];ut=er,yt=yr}}return[ut,yt]},Yi=function(At){var ut=At.label,yt=At.keyshape;if(!(yt==null?void 0:yt.size)&&!(ut==null?void 0:ut.offset))return{x:void 0,y:void 0,textBaseline:ut==null?void 0:ut.textBaseline};!(yt==null?void 0:yt.size)&&(ut==null?void 0:ut.offset)&&(yt.size=26,console.info("you should set keyshape.size when you update label position,the default keyshape size value is  26"));var Ct=yt.size,ve=[0,0],ke=ut.position,er=ut.offset,yr=er===void 0?ve:er;(typeof yr=="number"||typeof yr=="string")&&(ve=[Number(yr),Number(yr)]),yr.length>0&&(ve=yr);var Pt=ve,Tt=No(Pt,2),H=Tt[0],gt=Tt[1];if(ke==="center")return{x:0+H,y:0+gt};var Rt=to(Ct),te=Rt[0],De=Rt[1],rr;switch(ke){case"top":rr={x:0+H,y:-De/2-gt,textBaseline:"bottom"};break;case"bottom":rr={x:0+H,y:De/2+gt,textBaseline:"top"};break;case"left":rr={x:0-te-H,y:0+gt,textAlign:"right"};break;case"right":rr={x:0+te+H,y:0+gt,textAlign:"left"};break;default:rr={x:0+H,y:De/2+gt,textBaseline:"top"};break}return rr},un=function(){var At=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"RT",ut=arguments.length>1?arguments[1]:void 0,yt=0,Ct=0;return At==="LT"?(yt=ut*Math.cos(Math.PI*3/4),Ct=-ut*Math.sin(Math.PI*3/4)):At==="LB"?(yt=ut*Math.cos(Math.PI*5/4),Ct=-ut*Math.sin(Math.PI*5/4)):At==="RT"?(yt=ut*Math.cos(Math.PI*1/4),Ct=-ut*Math.sin(Math.PI*1/4)):At==="RB"&&(yt=ut*Math.cos(Math.PI*7/4),Ct=-ut*Math.sin(Math.PI*7/4)),{x:yt,y:Ct}};function vo(Nt){return ko(Nt)||Qa(Nt)||eo(Nt)||Fo()}function Fo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qa(Nt){if(typeof Symbol!="undefined"&&Nt[Symbol.iterator]!=null||Nt["@@iterator"]!=null)return Array.from(Nt)}function ko(Nt){if(Array.isArray(Nt))return de(Nt)}function go(Nt,At){return qr(Nt)||Ar(Nt,At)||eo(Nt,At)||Li()}function Li(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eo(Nt,At){if(!!Nt){if(typeof Nt=="string")return de(Nt,At);var ut=Object.prototype.toString.call(Nt).slice(8,-1);if(ut==="Object"&&Nt.constructor&&(ut=Nt.constructor.name),ut==="Map"||ut==="Set")return Array.from(Nt);if(ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut))return de(Nt,At)}}function de(Nt,At){(At==null||At>Nt.length)&&(At=Nt.length);for(var ut=0,yt=new Array(At);ut<At;ut++)yt[ut]=Nt[ut];return yt}function Ar(Nt,At){var ut=Nt==null?null:typeof Symbol!="undefined"&&Nt[Symbol.iterator]||Nt["@@iterator"];if(ut!=null){var yt=[],Ct=!0,ve=!1,ke,er;try{for(ut=ut.call(Nt);!(Ct=(ke=ut.next()).done)&&(yt.push(ke.value),!(At&&yt.length===At));Ct=!0);}catch(yr){ve=!0,er=yr}finally{try{!Ct&&ut.return!=null&&ut.return()}finally{if(ve)throw er}}return yt}}function qr(Nt){if(Array.isArray(Nt))return Nt}var Bn=function(Nt,At){var ut={};for(var yt in Nt)Object.prototype.hasOwnProperty.call(Nt,yt)&&At.indexOf(yt)<0&&(ut[yt]=Nt[yt]);if(Nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ct=0,yt=Object.getOwnPropertySymbols(Nt);Ct<yt.length;Ct++)At.indexOf(yt[Ct])<0&&Object.prototype.propertyIsEnumerable.call(Nt,yt[Ct])&&(ut[yt[Ct]]=Nt[yt[Ct]]);return ut};function Sa(Nt){var At;return(0,ri.isNumber)(Nt)?At=Nt/2:(0,ri.isArray)(Nt)&&(At=Nt[0]/2),At}var ci=function(){var At=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=me(At),yt=ut.defaultNodeStyle,Ct=ut.defaultNodeStatusStyle;return{style:yt.style,status:Ct.status}},_i=function(At){var ut=At.halo,yt=At.keyshape,Ct=ut.size,ve=ut.visible,ke=ut.fill,er=ut.fillOpacity,yr=Bn(ut,["size","visible","fill","fillOpacity"]),Pt=Sa(Ct),Tt,H,gt;if(yt&&yt.size){var Rt=Sa(yt.size);Tt=Rt+15}yt&&yt.fill&&(H=yt.fill),yt&&yt.stroke&&(gt=yt.stroke);var te=Object.assign({x:0,y:0,r:Pt||Tt,fill:ke||H||gt,fillOpacity:er||.1,visible:ve!==!1},yr);return{name:"halo",visible:ve!==!1,attrs:Io(te)}},li=function(At){var ut=At.keyshape,yt=ut.size,Ct=ut.visible,ve=ut.stroke,ke=ut.fill,er=ut.fillOpacity,yr=ut.strokeOpacity,Pt=Bn(ut,["size","visible","stroke","fill","fillOpacity","strokeOpacity"]),Tt=Sa(yt),H=Object.assign({x:0,y:0,r:Tt,cursor:"pointer",visible:Ct!==!1,stroke:ve,strokeOpacity:yr||1,fill:ke||ve,fillOpacity:er||.2},Pt);return{name:"keyshape",visible:Ct!==!1,attrs:Io(H)}},Ai=function(At){var ut=At.label,yt=ut.value,Ct=ut.fill,ve=ut.fontSize,ke=ut.visible,er=Bn(ut,["value","fill","fontSize","visible"]),yr=Yi(At),Pt=Object.assign({x:yr.x,y:yr.y,fontSize:ve,text:yt,textAlign:"center",fill:Ct,textBaseline:yr.textBaseline,visible:ke!==!1},er);return{name:"label",visible:ke!==!1,attrs:Io(Pt)}},Ea=function(At){var ut=At.icon,yt=ut.value,Ct=yt===void 0?"":yt,ve=ut.type,ke=ut.fontFamily,er=ut.textAlign,yr=er===void 0?"center":er,Pt=ut.textBaseline,Tt=Pt===void 0?"middle":Pt,H=ut.fill,gt=ut.size,Rt=ut.visible,te=ut.clip,De=Bn(ut,["value","type","fontFamily","textAlign","textBaseline","fill","size","visible","clip"]),rr=to(gt),Er=go(rr,2),yn=Er[0],en=Er[1],hn={name:"icon",visible:Rt!==!1,capture:!1};return ve==="text"||ve==="font"?Object.assign(Object.assign({},hn),{attrs:Object.assign({x:0,y:0,textAlign:yr,textBaseline:Tt,text:Ct,fontSize:yn,fontFamily:ke,fill:H,visible:Rt!==!1},De)}):Object.assign(Object.assign({},hn),{attrs:Object.assign({x:-yn/2,y:-en/2,img:Ct,width:yn,height:en,visible:Rt!==!1},De)})},ro=function(At,ut){return ut==="keyshape"?li(At).attrs:ut==="halo"?_i(At).attrs:ut==="label"?Ai(At).attrs:ut==="icon"?Ea(At).attrs:At[ut]||{}},Yo=function(At,ut,yt){var Ct=At.type,ve=At.position,ke=At.value,er=ke===void 0?"":ke,yr=At.size,Pt=At.fill,Tt=At.stroke,H=At.color,gt=At.fontSize,Rt=At.fontFamily,te=At.padding,De=te===void 0?0:te,rr=At.offset,Er=rr===void 0?[0,0]:rr,yn=At.id,en=to(Er),hn=to(yr),Qn=go(hn,2),fa=Qn[0],Hn=Qn[1],Jn=un(ve,yt),ja=Jn.x,Va=Jn.y,ni=ja,ai=Va;if(fa===Hn){ni+=en[0],ai+=en[1];var wi={attrs:{r:fa/2+De,fill:Pt,stroke:Tt,x:ni,y:ai},name:"badges-circle"};yn&&(wi.id=yn),ut.addShape("circle",wi)}else{ni=ja-fa-De*2,ai=Va-Hn-De*2,ve==="LB"?ai=Va:ve==="RT"?(ni=ja,ai=Va-Hn-De*2):ve==="RB"&&(ni=ja,ai=Va),ni+=en[0],ai+=en[1];var Ro={attrs:{width:fa+De*2,height:Hn+De*2,fill:Pt,stroke:Tt,x:ni,y:ai,radius:(Hn+De*2)/3},name:"badges-rect"};yn&&(Ro.id=yn),ut.addShape("rect",Ro)}Ct==="font"||Ct==="text"?ut.addShape("text",{attrs:{x:fa!==Hn?ni+fa/2+De:ni,y:fa!==Hn?ai+Hn/2+De:ai,text:er,fontSize:gt,textAlign:"center",textBaseline:"middle",fontFamily:Rt,fill:H},capture:!1,name:"badges-text"}):Ct==="image"&&ut.addShape("image",{attrs:{x:ni-fa/2,y:ni-Hn/2,width:fa,height:Hn,img:er},capture:!1,name:"badges-image"})},Bi=function(){F.ZP.registerNode("graphin-circle",{options:{style:{},status:{}},draw:function(At,ut){var yt=At.style._theme;this.options=ci(yt);var Ct=(0,ri.deepMix)({},this.options.style,At.style);At._initialStyle=Object.assign({},Ct);var ve=Ct.icon,ke=Ct.badges,er=ke===void 0?[]:ke,yr=Ct.keyshape,Pt=Sa(yr.size);ut.addShape("circle",_i(Ct));var Tt=ut.addShape("circle",li(Ct));ut.addShape("text",Ai(Ct));var H=ve.type;if((H==="text"||H==="font")&&ut.addShape("text",Ea(Ct)),H==="image"){var gt=Ea(Ct),Rt=ut.addShape("image",gt),te=Ct.icon.clip;if(te){var De=te.r,rr=Bn(te,["r"]);Rt.setClip({type:"circle",attrs:Object.assign({x:0,y:0,r:De},rr)})}}return er.forEach(function(Er){Yo(Er,ut,Pt)}),Tt},setState:function(At,ut,yt){var Ct;if(!!At){var ve=yt.getModel(),ke=yt.getContainer().get("children"),er=(0,ri.deepMix)({},this.options.status,ve.style.status),yr=yt.getModel()._initialStyle,Pt=((Ct=yt._cfg)===null||Ct===void 0?void 0:Ct.states)||[];try{Object.keys(er).forEach(function(Tt){At===Tt&&(ut?Oi(ke,er[Tt],ro):(Oi(ke,yr,ro),Pt.forEach(function(H){Oi(ke,er[H],ro)})))})}catch(Tt){console.error(Tt)}}},update:function(At,ut){if(!!At.style)try{var yt=(0,ri.deepMix)({},At._initialStyle,At.style);At._initialStyle=Object.assign({},yt);var Ct=yt.badges,ve=yt.keyshape,ke=Sa(ve.size),er=ut.getContainer(),yr=er.get("children");Oi(yr,yt,ro);var Pt=vo(yr);if(Ct){var Tt=0;Pt.forEach(function(H){H.cfg.name.startsWith("badges")?yr.splice(Tt,1):Tt=Tt+1}),Ct.forEach(function(H){Yo(H,er,ke)})}}catch(H){console.error("error")}}})},no=R(32096);function Oo(Nt,At){return Hi(Nt)||yo(Nt,At)||po(Nt,At)||Vi()}function Vi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function po(Nt,At){if(!!Nt){if(typeof Nt=="string")return Ei(Nt,At);var ut=Object.prototype.toString.call(Nt).slice(8,-1);if(ut==="Object"&&Nt.constructor&&(ut=Nt.constructor.name),ut==="Map"||ut==="Set")return Array.from(Nt);if(ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ut))return Ei(Nt,At)}}function Ei(Nt,At){(At==null||At>Nt.length)&&(At=Nt.length);for(var ut=0,yt=new Array(At);ut<At;ut++)yt[ut]=Nt[ut];return yt}function yo(Nt,At){var ut=Nt==null?null:typeof Symbol!="undefined"&&Nt[Symbol.iterator]||Nt["@@iterator"];if(ut!=null){var yt=[],Ct=!0,ve=!1,ke,er;try{for(ut=ut.call(Nt);!(Ct=(ke=ut.next()).done)&&(yt.push(ke.value),!(At&&yt.length===At));Ct=!0);}catch(yr){ve=!0,er=yr}finally{try{!Ct&&ut.return!=null&&ut.return()}finally{if(ve)throw er}}return yt}}function Hi(Nt){if(Array.isArray(Nt))return Nt}var ma=function(Nt,At){var ut={};for(var yt in Nt)Object.prototype.hasOwnProperty.call(Nt,yt)&&At.indexOf(yt)<0&&(ut[yt]=Nt[yt]);if(Nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ct=0,yt=Object.getOwnPropertySymbols(Nt);Ct<yt.length;Ct++)At.indexOf(yt[Ct])<0&&Object.prototype.propertyIsEnumerable.call(Nt,yt[Ct])&&(ut[yt[Ct]]=Nt[yt[Ct]]);return ut},qa=function(){var At=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=me(At),yt=ut.defaultEdgeStyle,Ct=ut.defaultEdgeStatusStyle;return{style:yt.style,status:Ct.status}},Mi;(function(Nt){Nt.NORMAL="normal",Nt.SELECTED="selected",Nt.HOVERED="hovered",Nt.DISABLED="disabled"})(Mi||(Mi={}));function pi(Nt){return Object.keys(Nt).forEach(function(At){Nt[At]===void 0&&delete Nt[At]}),Nt}function so(Nt){var At=Nt.value,ut=ma(Nt,["value"]),yt=Object.assign({id:"label",text:At},ut);return pi(yt)}function Zi(Nt){var At=ma(Nt,[]),ut=Object.assign({id:"keyshape"},At);return pi(ut)}function Fi(Nt){var At=ma(Nt,[]),ut=Object.assign({id:"halo"},At);return pi(ut)}var mo=function(At,ut){return ut==="keyshape"?Zi(At.keyshape||{}):ut==="halo"?Fi(At.halo||{}):ut==="label"?so(At.label||{}):{}},uo=function(At,ut,yt){var Ct={x:(ut.x+At.x)/2,y:(ut.y+At.y)/2},ve=ut.x-At.x,ke=ut.y-At.y,er=Math.sqrt(Math.pow(ve,2)+Math.pow(ke,2)),yr=Ct.y-ve*yt/er||0,Pt=Ct.x+ke*yt/er||0;return{x:Pt,y:yr}},bo=function(At,ut){var yt,Ct,ve,ke=At.startPoint,er=ke===void 0?{x:0,y:0}:ke,yr=At.endPoint,Pt=yr===void 0?{x:0,y:0}:yr,Tt=At.sourceNode,H=At.targetNode,gt=ut.keyshape,Rt=gt.type,te=Rt===void 0?"line":Rt,De=gt.poly,rr=De===void 0?{distance:0}:De,Er=gt.loop,yn=Er===void 0?{}:Er,en=Tt.get("model"),hn=((yt=H)===null||yt===void 0?void 0:yt.get("model"))||{id:"temp"};if(te==="loop"||en.id===hn.id){var Qn=((ve=(Ct=en.style)===null||Ct===void 0?void 0:Ct.keyshape)===null||ve===void 0?void 0:ve.size)||26,fa=Object.assign({distance:0,dx:8,rx:void 0,ry:void 0},yn),Hn=fa.distance,Jn=fa.dx,ja=fa.rx,Va=fa.ry,ni=Qn/2,ai=Math.sqrt(Math.max(Math.pow(ni,2)-Math.pow(Jn,2),0)),wi=ja||ni*2*.5,Ro=Va||ni*2*.6;return[["M",er.x-Jn,er.y-ai],["A",wi+Hn,Ro+Hn,0,1,1,er.x+Jn,er.y-ai]]}if(te==="poly"){var ss=uo(er,Pt,(rr==null?void 0:rr.distance)||0);return[["M",er.x,er.y],["Q",ss.x,ss.y,Pt.x,Pt.y]]}return[["M",er.x,er.y],["L",Pt.x,Pt.y]]},La=function(){F.ZP.registerEdge("graphin-line",{draw:function(At,ut){var yt,Ct,ve,ke,er,yr,Pt,Tt=At.style._theme;this.options=qa(Tt);var H=(0,ri.deepMix)({},this.options.style,At.style);At&&(At._initialStyle=Object.assign({},H));var gt=At.startPoint,Rt=gt===void 0?{x:0,y:0}:gt,te=At.endPoint,De=te===void 0?{x:0,y:0}:te,rr=At.sourceNode,Er=At.targetNode,yn=H.label,en=H.halo,hn=H.keyshape,Qn=rr.get("model"),fa=((yt=Er)===null||yt===void 0?void 0:yt.get("model"))||{id:"temp"},Hn=((ve=(Ct=Qn.style)===null||Ct===void 0?void 0:Ct.keyshape)===null||ve===void 0?void 0:ve.size)||28,Jn=(hn==null?void 0:hn.type)==="loop"||Qn.id===fa.id,ja=yn.value,Va=(hn==null?void 0:hn.type)==="poly",ni=uo(Rt,De,((ke=hn==null?void 0:hn.poly)===null||ke===void 0?void 0:ke.distance)||0),ai=(hn==null?void 0:hn.lineWidth)||1,wi=ai+5,Ro=bo(At,H);ut.addShape("path",{attrs:Object.assign({id:"halo",path:Ro,lineWidth:ai+10,stroke:en.stroke||hn.stroke,strokeOpacity:en.strokeOpacity||.4},en),draggable:!0,name:"halo",visible:en.visible!==!1});var ss=ut.addShape("path",{attrs:Object.assign({id:"keyshape",path:Ro,endArrow:Jn?void 0:{d:0,path:"M 0,0 L ".concat(wi,",").concat(wi/2," L ").concat(wi,",-").concat(wi/2," Z"),fill:hn.stroke},startArrow:Jn?{d:0,path:"M 0,0 L ".concat(wi,",").concat(wi/2," L ").concat(wi,",-").concat(wi/2," Z"),fill:hn.stroke}:void 0},hn),draggable:!0,name:"keyshape"});if(ja){var Bo=yn.value,es=yn.fontSize,Di=es===void 0?8:es,Lo=yn.offset,nu=Lo===void 0?[0,0]:Lo,au=yn.background,Ss=ma(yn,["value","fontSize","offset","background"]),vs=Boolean(au),iu=Oo(nu,2),h=iu[0],P=iu[1],ht=Math.atan((De.y-Rt.y)/(De.x-Rt.x)),St=[(Rt.x+De.x)/2,(Rt.y+De.y)/2];if(Va&&(St=[(ni.x+St[0])/2,(ni.y+St[1])/2]),De.x-Rt.x==0&&(ht=Math.PI/2),Jn&&(ht=2*Math.PI),vs){var Gt=(0,no.Z)(Bo),Kt=Gt*Di*.6,Qt=Di*1.8,pe={fill:"#fff",width:Kt,height:Qt,stroke:hn.stroke,lineWidth:1,radius:6},Se=Object.assign(Object.assign({},pe),au),je=Se.fill,fr=Se.width,Rr=Se.height,Vr=Se.stroke,Ur=ma(Se,["fill","width","height","stroke"]),vn=-Rr/2+P;Jn&&(vn=-(Rr/2+P+Di+Hn*1+(((er=hn==null?void 0:hn.loop)===null||er===void 0?void 0:er.distance)||0)*2));var On=ut.addShape("rect",{attrs:Object.assign({id:"label-background",x:-fr/2+h,y:vn,width:fr,height:Rr,fill:je,stroke:Vr},Ur),draggable:!0,name:"label-background"});On.rotate(ht),On.translate(St[0],St[1])}var Zr=P-Di/2;vs&&(Zr=P+Di/2),Jn&&(vs?Zr=-(P+Di/2+Hn*1+(((yr=hn==null?void 0:hn.loop)===null||yr===void 0?void 0:yr.distance)||0)*2):Zr=-(P+Di+Hn*1+(((Pt=hn==null?void 0:hn.loop)===null||Pt===void 0?void 0:Pt.distance)||0)*2));var Wn=ut.addShape("text",{attrs:Object.assign({id:"label",x:h,y:Zr,text:Bo,fontSize:Di},Ss),draggable:!0,name:"label"});Wn.rotate(ht),Wn.translate(St[0],St[1])}return ss},setState:function(At,ut,yt){var Ct;if(!!At){var ve=yt.getModel(),ke=yt.getContainer().get("children"),er=(0,ri.deepMix)({},this.options.status,ve.style.status),yr=yt.getModel()._initialStyle,Pt=((Ct=yt._cfg)===null||Ct===void 0?void 0:Ct.states)||[];try{Object.keys(er).forEach(function(Tt){At===Tt&&(ut?Oi(ke,er[Tt],mo):(Oi(ke,yr,mo),Pt.forEach(function(H){Oi(ke,er[H],mo)})))})}catch(Tt){console.error(Tt)}}},afterDraw:function(At,ut){var yt=(0,ri.deepMix)({},this.options.style,At.style),Ct=yt.animate,ve=yt.keyshape;if(!(!Ct||!Ct.type||Ct.visible===!1)){var ke=ut.get("children").find(function(yn){return yn.get("name")==="keyshape"}),er=Ct.color,yr=Ct.type,Pt=Ct.repeat,Tt=Pt===void 0?!0:Pt,H=Ct.duration,gt=H===void 0?3e3:H;if(yr==="circle-running"){var Rt=ke.getPoint(0),te=ut.addShape("circle",{attrs:{x:Rt.x,y:Rt.y,fill:er||ve.stroke,r:ve.lineWidth*1.5+2},name:"circle-shape"});te.animate(function(yn){var en=ke.getPoint(yn);return{x:en.x,y:en.y}},{repeat:Tt,duration:gt})}if(yr==="line-dash"){var De=0,rr=Ct.lineDash||ve.lineDash||[4,2,1,2];ke.animate(function(){return De++,De>9&&(De=0),{lineDash:rr,lineDashOffset:-De}},{repeat:Tt,duration:gt})}if(yr==="line-growth"){var Er=ke.getTotalLength();ke.animate(function(yn){var en=yn*Er;return{lineDash:[en,Er-en]}},{repeat:Tt,duration:gt})}}}})};ji(),Ti(),Bi(),La();var ds=Xr.registerFontFamily,os=Xr},69286:function(Mr,G,R){"use strict";R.d(G,{$:function(){return z}});function L(I,k,D){return k in I?Object.defineProperty(I,k,{value:D,enumerable:!0,configurable:!0,writable:!0}):I[k]=D,I}var z=[{type:"graphin-force",options:{},title:"\u6E10\u8FDB\u529B\u5BFC"},{type:"force",title:"D3\u529B\u5BFC",options:{preventOverlap:!0,linkDistance:250,nodeStrength:30,edgeStrength:.1,collideStrength:.8,nodeSize:30,alpha:.3,alphaDecay:.028,alphaMin:.01,forceSimulation:null,clustering:!1}},{type:"concentric",title:"\u540C\u5FC3\u5706\u5E03\u5C40",options:{minNodeSpacing:60,preventOverlap:!0,nodeSize:60}},{type:"grid",options:{},title:"\u7F51\u683C\u5E03\u5C40"},{type:"radial",options:{},title:"\u8F90\u5C04\u5E03\u5C40"},{type:"dagre",title:"\u5C42\u6B21\u5E03\u5C40",options:{}},{type:"circular",options:{},title:"\u73AF\u5F62\u5E03\u5C40"},{type:"gForce",options:{linkDistance:function(){return 200},preventOverlap:!0},title:"G6\u529B\u5BFC"},{type:"mds",options:{},title:"\u964D\u7EF4\u5E03\u5C40"},{type:"random",options:{},title:"\u968F\u673A\u5E03\u5C40"}],F=z.map(function(I){var k=I.type,D=I.options;return Object.assign({type:k},D)}).reduce(function(I,k){return Object.assign(Object.assign({},I),L({},k.type,k))},{});G.Z=F},81710:function(Mr,G){"use strict";var R=function(){var z={type:"circle",style:{labelCfg:{position:"top"}},status:{}};return z};G.Z=R},46581:function(Mr,G){"use strict";var R={primaryEdgeColor:"#ddd",edgeSize:1,mode:"light"},L=function(F){var I=Object.assign(Object.assign({},R),F),k=I.edgeSize,D=I.primaryEdgeColor,b=I.mode,E={light:{stroke:D,label:D,disabled:"#ddd"},dark:{stroke:D,label:D,disabled:"#ddd3"}},p=E[b],y={type:"graphin-line",style:{keyshape:{type:"line",lineWidth:k,stroke:p.stroke,strokeOpacity:1,lineAppendWidth:9,cursor:"pointer"},halo:{visible:!1,cursor:"pointer",strokeOpacity:.4},label:{value:"",position:"top",fill:p.label,fontSize:12,textAlign:"center"},animate:{}},status:{hover:{halo:{visible:!0}},selected:{halo:{visible:!0},keyshape:{lineWidth:2},label:{visible:!0}},active:{halo:{visible:!0},keyshape:{lineWidth:2},label:{visible:!0}},inactive:{halo:{visible:!1},keyshape:{strokeOpacity:.1},label:{visible:!1}},disabled:{halo:{visible:!1},keyshape:{lineWidth:.5,stroke:p.disabled},label:{visible:!1}}}};return y};G.Z=L},76575:function(Mr,G){"use strict";var R={primaryColor:"#FF6A00",nodeSize:26,mode:"light"},L=function(F){var I=Object.assign(Object.assign({},R),F),k=I.nodeSize,D=I.primaryColor,b=I.mode,E=12,p={light:{fill:D,fillOpacity:.1,stroke:D,strokeOpacity:1,icon:D,badge:{fill:D,stroke:D,font:"#fff"},label:"#000",disabled:"#ddd"},dark:{fill:D,fillOpacity:.3,stroke:D,strokeOpacity:1,icon:"#fff",badge:{fill:D,stroke:D,font:"#fff"},label:"#fff",disabled:"#ddd3"}},y=p[b],g={type:"graphin-circle",style:{keyshape:{size:k,fill:y.fill,fillOpacity:y.fillOpacity,stroke:y.stroke,strokeOpacity:y.strokeOpacity,lineWidth:1,opacity:1,type:"circle"},label:{position:"bottom",value:"",fill:y.label,fontSize:E,offset:0,background:void 0,fillOpacity:1},icon:{type:"text",value:"",size:k/2,fill:y.icon,fillOpacity:1,offset:[0,0]},badges:[],halo:{visible:!1,fillOpacity:.1}},status:{normal:{},selected:{halo:{visible:!0},keyshape:{lineWidth:5}},hover:{halo:{visible:!0}},active:{},inactive:{keyshape:{fillOpacity:.04,strokeOpacity:.04},icon:{fillOpacity:.04},label:{fillOpacity:.04}},disabled:{halo:{visible:!1},keyshape:{fill:y.disabled,stroke:y.disabled},icon:{fill:y.disabled},label:{fill:y.disabled}}}};return g};G.Z=L},32096:function(Mr,G){"use strict";var R=function(z){return Array.from(String(z)).reduce(function(F,I){return I.charCodeAt(0)>255?F+2:F+1},0)};G.Z=R},57804:function(Mr,G,R){"use strict";Mr=R.hmd(Mr);function L(de){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ar){return typeof Ar}:function(Ar){return Ar&&typeof Symbol=="function"&&Ar.constructor===Symbol&&Ar!==Symbol.prototype?"symbol":typeof Ar},L(de)}var z=200,F="__lodash_hash_undefined__",I=9007199254740991,k="[object Arguments]",D="[object Array]",b="[object Boolean]",E="[object Date]",p="[object Error]",y="[object Function]",g="[object GeneratorFunction]",T="[object Map]",x="[object Number]",S="[object Object]",N="[object Promise]",m="[object RegExp]",d="[object Set]",V="[object String]",Q="[object Symbol]",j="[object WeakMap]",X="[object ArrayBuffer]",K="[object DataView]",J="[object Float32Array]",rt="[object Float64Array]",tt="[object Int8Array]",nt="[object Int16Array]",lt="[object Int32Array]",xt="[object Uint8Array]",jt="[object Uint8ClampedArray]",Dt="[object Uint16Array]",Zt="[object Uint32Array]",Vt=/[\\^$.*+?()[\]{}|]/g,ue=/\w*$/,dt=/^\[object .+?Constructor\]$/,Ot=/^(?:0|[1-9]\d*)$/,ee={};ee[k]=ee[D]=ee[X]=ee[K]=ee[b]=ee[E]=ee[J]=ee[rt]=ee[tt]=ee[nt]=ee[lt]=ee[T]=ee[x]=ee[S]=ee[m]=ee[d]=ee[V]=ee[Q]=ee[xt]=ee[jt]=ee[Dt]=ee[Zt]=!0,ee[p]=ee[y]=ee[j]=!1;var Re=(typeof R.g=="undefined"?"undefined":L(R.g))=="object"&&R.g&&R.g.Object===Object&&R.g,me=(typeof self=="undefined"?"undefined":L(self))=="object"&&self&&self.Object===Object&&self,Ae=Re||me||Function("return this")(),Be=(typeof exports=="undefined"?"undefined":L(exports))=="object"&&exports&&!exports.nodeType&&exports,Ke=Be&&L(Mr)=="object"&&Mr&&!Mr.nodeType&&Mr,$t=Ke&&Ke.exports===Be;function ce(de,Ar){return de.set(Ar[0],Ar[1]),de}function we(de,Ar){return de.add(Ar),de}function Pe(de,Ar){for(var qr=-1,Bn=de?de.length:0;++qr<Bn&&Ar(de[qr],qr,de)!==!1;);return de}function ye(de,Ar){for(var qr=-1,Bn=Ar.length,Sa=de.length;++qr<Bn;)de[Sa+qr]=Ar[qr];return de}function Bt(de,Ar,qr,Bn){var Sa=-1,ci=de?de.length:0;for(Bn&&ci&&(qr=de[++Sa]);++Sa<ci;)qr=Ar(qr,de[Sa],Sa,de);return qr}function re(de,Ar){for(var qr=-1,Bn=Array(de);++qr<de;)Bn[qr]=Ar(qr);return Bn}function Ee(de,Ar){return de==null?void 0:de[Ar]}function It(de){var Ar=!1;if(de!=null&&typeof de.toString!="function")try{Ar=!!(de+"")}catch(qr){}return Ar}function Et(de){var Ar=-1,qr=Array(de.size);return de.forEach(function(Bn,Sa){qr[++Ar]=[Sa,Bn]}),qr}function Wt(de,Ar){return function(qr){return de(Ar(qr))}}function fe(de){var Ar=-1,qr=Array(de.size);return de.forEach(function(Bn){qr[++Ar]=Bn}),qr}var Fe=Array.prototype,$e=Function.prototype,Lt=Object.prototype,Ne=Ae["__core-js_shared__"],Xe=function(){var de=/[^.]+$/.exec(Ne&&Ne.keys&&Ne.keys.IE_PROTO||"");return de?"Symbol(src)_1."+de:""}(),Dr=$e.toString,ur=Lt.hasOwnProperty,Or=Lt.toString,ln=RegExp("^"+Dr.call(ur).replace(Vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fn=$t?Ae.Buffer:void 0,Xr=Ae.Symbol,Cn=Ae.Uint8Array,Qr=Wt(Object.getPrototypeOf,Object),Gr=Object.create,on=Lt.propertyIsEnumerable,sr=Fe.splice,lr=Object.getOwnPropertySymbols,Qe=fn?fn.isBuffer:void 0,$r=Wt(Object.keys,Object),an=Ia(Ae,"DataView"),bn=Ia(Ae,"Map"),nr=Ia(Ae,"Promise"),Tr=Ia(Ae,"Set"),ar=Ia(Ae,"WeakMap"),vr=Ia(Object,"create"),Br=Ji(an),Fr=Ji(bn),kr=Ji(nr),Z=Ji(Tr),Te=Ji(ar),ne=Xr?Xr.prototype:void 0,it=ne?ne.valueOf:void 0;function ot(de){var Ar=-1,qr=de?de.length:0;for(this.clear();++Ar<qr;){var Bn=de[Ar];this.set(Bn[0],Bn[1])}}function B(){this.__data__=vr?vr(null):{}}function _(de){return this.has(de)&&delete this.__data__[de]}function C(de){var Ar=this.__data__;if(vr){var qr=Ar[de];return qr===F?void 0:qr}return ur.call(Ar,de)?Ar[de]:void 0}function Y(de){var Ar=this.__data__;return vr?Ar[de]!==void 0:ur.call(Ar,de)}function pt(de,Ar){var qr=this.__data__;return qr[de]=vr&&Ar===void 0?F:Ar,this}ot.prototype.clear=B,ot.prototype.delete=_,ot.prototype.get=C,ot.prototype.has=Y,ot.prototype.set=pt;function _t(de){var Ar=-1,qr=de?de.length:0;for(this.clear();++Ar<qr;){var Bn=de[Ar];this.set(Bn[0],Bn[1])}}function Mt(){this.__data__=[]}function zt(de){var Ar=this.__data__,qr=Vn(Ar,de);if(qr<0)return!1;var Bn=Ar.length-1;return qr==Bn?Ar.pop():sr.call(Ar,qr,1),!0}function Le(de){var Ar=this.__data__,qr=Vn(Ar,de);return qr<0?void 0:Ar[qr][1]}function Me(de){return Vn(this.__data__,de)>-1}function qe(de,Ar){var qr=this.__data__,Bn=Vn(qr,de);return Bn<0?qr.push([de,Ar]):qr[Bn][1]=Ar,this}_t.prototype.clear=Mt,_t.prototype.delete=zt,_t.prototype.get=Le,_t.prototype.has=Me,_t.prototype.set=qe;function br(de){var Ar=-1,qr=de?de.length:0;for(this.clear();++Ar<qr;){var Bn=de[Ar];this.set(Bn[0],Bn[1])}}function xr(){this.__data__={hash:new ot,map:new(bn||_t),string:new ot}}function sn(de){return ti(this,de).delete(de)}function Rn(de){return ti(this,de).get(de)}function tr(de){return ti(this,de).has(de)}function Sr(de,Ar){return ti(this,de).set(de,Ar),this}br.prototype.clear=xr,br.prototype.delete=sn,br.prototype.get=Rn,br.prototype.has=tr,br.prototype.set=Sr;function jr(de){this.__data__=new _t(de)}function Nn(){this.__data__=new _t}function gn(de){return this.__data__.delete(de)}function ea(de){return this.__data__.get(de)}function ha(de){return this.__data__.has(de)}function Zn(de,Ar){var qr=this.__data__;if(qr instanceof _t){var Bn=qr.__data__;if(!bn||Bn.length<z-1)return Bn.push([de,Ar]),this;qr=this.__data__=new br(Bn)}return qr.set(de,Ar),this}jr.prototype.clear=Nn,jr.prototype.delete=gn,jr.prototype.get=ea,jr.prototype.has=ha,jr.prototype.set=Zn;function na(de,Ar){var qr=Io(de)||Oi(de)?re(de.length,String):[],Bn=qr.length,Sa=!!Bn;for(var ci in de)(Ar||ur.call(de,ci))&&!(Sa&&(ci=="length"||No(ci,Bn)))&&qr.push(ci);return qr}function da(de,Ar,qr){var Bn=de[Ar];(!(ur.call(de,Ar)&&Ri(Bn,qr))||qr===void 0&&!(Ar in de))&&(de[Ar]=qr)}function Vn(de,Ar){for(var qr=de.length;qr--;)if(Ri(de[qr][0],Ar))return qr;return-1}function se(de,Ar){return de&&Wa(Ar,go(Ar),de)}function Ut(de,Ar,qr,Bn,Sa,ci,_i){var li;if(Bn&&(li=ci?Bn(de,Sa,ci,_i):Bn(de)),li!==void 0)return li;if(!Qa(de))return de;var Ai=Io(de);if(Ai){if(li=ji(de),!Ar)return Ba(de,li)}else{var Ea=gi(de),ro=Ea==y||Ea==g;if(un(de))return nn(de,Ar);if(Ea==S||Ea==k||ro&&!ci){if(It(de))return ci?de:{};if(li=Ti(ro?{}:de),!Ar)return wa(de,se(li,de))}else{if(!ee[Ea])return ci?de:{};li=ri(de,Ea,Ut,Ar)}}_i||(_i=new jr);var Yo=_i.get(de);if(Yo)return Yo;if(_i.set(de,li),!Ai)var Bi=qr?vi(de):go(de);return Pe(Bi||de,function(no,Oo){Bi&&(Oo=no,no=de[Oo]),da(li,Oo,Ut(no,Ar,qr,Bn,Oo,de,_i))}),li}function le(de){return Qa(de)?Gr(de):{}}function ze(de,Ar,qr){var Bn=Ar(de);return Io(de)?Bn:ye(Bn,qr(de))}function Ie(de){return Or.call(de)}function We(de){if(!Qa(de)||Ii(de))return!1;var Ar=vo(de)||It(de)?ln:dt;return Ar.test(Ji(de))}function _r(de){if(!ho(de))return $r(de);var Ar=[];for(var qr in Object(de))ur.call(de,qr)&&qr!="constructor"&&Ar.push(qr);return Ar}function nn(de,Ar){if(Ar)return de.slice();var qr=new de.constructor(de.length);return de.copy(qr),qr}function pn(de){var Ar=new de.constructor(de.byteLength);return new Cn(Ar).set(new Cn(de)),Ar}function Gn(de,Ar){var qr=Ar?pn(de.buffer):de.buffer;return new de.constructor(qr,de.byteOffset,de.byteLength)}function jn(de,Ar,qr){var Bn=Ar?qr(Et(de),!0):Et(de);return Bt(Bn,ce,new de.constructor)}function oa(de){var Ar=new de.constructor(de.source,ue.exec(de));return Ar.lastIndex=de.lastIndex,Ar}function va(de,Ar,qr){var Bn=Ar?qr(fe(de),!0):fe(de);return Bt(Bn,we,new de.constructor)}function _a(de){return it?Object(it.call(de)):{}}function fi(de,Ar){var qr=Ar?pn(de.buffer):de.buffer;return new de.constructor(qr,de.byteOffset,de.length)}function Ba(de,Ar){var qr=-1,Bn=de.length;for(Ar||(Ar=Array(Bn));++qr<Bn;)Ar[qr]=de[qr];return Ar}function Wa(de,Ar,qr,Bn){qr||(qr={});for(var Sa=-1,ci=Ar.length;++Sa<ci;){var _i=Ar[Sa],li=Bn?Bn(qr[_i],de[_i],_i,qr,de):void 0;da(qr,_i,li===void 0?de[_i]:li)}return qr}function wa(de,Ar){return Wa(de,qi(de),Ar)}function vi(de){return ze(de,go,qi)}function ti(de,Ar){var qr=de.__data__;return Po(Ar)?qr[typeof Ar=="string"?"string":"hash"]:qr.map}function Ia(de,Ar){var qr=Ee(de,Ar);return We(qr)?qr:void 0}var qi=lr?Wt(lr,Object):Li,gi=Ie;(an&&gi(new an(new ArrayBuffer(1)))!=K||bn&&gi(new bn)!=T||nr&&gi(nr.resolve())!=N||Tr&&gi(new Tr)!=d||ar&&gi(new ar)!=j)&&(gi=function(Ar){var qr=Or.call(Ar),Bn=qr==S?Ar.constructor:void 0,Sa=Bn?Ji(Bn):void 0;if(Sa)switch(Sa){case Br:return K;case Fr:return T;case kr:return N;case Z:return d;case Te:return j}return qr});function ji(de){var Ar=de.length,qr=de.constructor(Ar);return Ar&&typeof de[0]=="string"&&ur.call(de,"index")&&(qr.index=de.index,qr.input=de.input),qr}function Ti(de){return typeof de.constructor=="function"&&!ho(de)?le(Qr(de)):{}}function ri(de,Ar,qr,Bn){var Sa=de.constructor;switch(Ar){case X:return pn(de);case b:case E:return new Sa(+de);case K:return Gn(de,Bn);case J:case rt:case tt:case nt:case lt:case xt:case jt:case Dt:case Zt:return fi(de,Bn);case T:return jn(de,Bn,qr);case x:case V:return new Sa(de);case m:return oa(de);case d:return va(de,Bn,qr);case Q:return _a(de)}}function No(de,Ar){return Ar=Ar==null?I:Ar,!!Ar&&(typeof de=="number"||Ot.test(de))&&de>-1&&de%1==0&&de<Ar}function Po(de){var Ar=L(de);return Ar=="string"||Ar=="number"||Ar=="symbol"||Ar=="boolean"?de!=="__proto__":de===null}function Ii(de){return!!Xe&&Xe in de}function ho(de){var Ar=de&&de.constructor,qr=typeof Ar=="function"&&Ar.prototype||Lt;return de===qr}function Ji(de){if(de!=null){try{return Dr.call(de)}catch(Ar){}try{return de+""}catch(Ar){}}return""}function Xi(de){return Ut(de,!0,!0)}function Ri(de,Ar){return de===Ar||de!==de&&Ar!==Ar}function Oi(de){return Yi(de)&&ur.call(de,"callee")&&(!on.call(de,"callee")||Or.call(de)==k)}var Io=Array.isArray;function to(de){return de!=null&&Fo(de.length)&&!vo(de)}function Yi(de){return ko(de)&&to(de)}var un=Qe||eo;function vo(de){var Ar=Qa(de)?Or.call(de):"";return Ar==y||Ar==g}function Fo(de){return typeof de=="number"&&de>-1&&de%1==0&&de<=I}function Qa(de){var Ar=L(de);return!!de&&(Ar=="object"||Ar=="function")}function ko(de){return!!de&&L(de)=="object"}function go(de){return to(de)?na(de):_r(de)}function Li(){return[]}function eo(){return!1}G.Z=Xi},43054:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return on}});var L=R(49242),z=R(69286),F=R(81710),I=R(46581),k=R(76575),D=function(lr,Qe){return lr.reduce(function($r,an){return $r.some(function(bn){return Qe(an,bn)})||$r.push(an),$r},[])},b=R(32096),E=R(57804),p=!0,y=function(lr){return Math.floor(Math.random()*lr)},g=function(){var lr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,Qe=y(255),$r=y(255),an=y(255),bn="rgba(".concat(Qe,",").concat($r,",").concat(an,",").concat(lr,")");return bn},T={},x=function(lr){T[lr]||(T[lr]=g());var Qe=T[lr];return function(){if(p,!1){var $r;for(var an,bn,nr;nr<an;nr++);}}},S=x,N=function(lr){return lr.charAt(0)==="#"?lr.slice(1):lr},m=function(lr){var Qe=lr.length===3||lr.length===4,$r=Qe?"".concat(lr.slice(0,1)).concat(lr.slice(0,1)):lr.slice(0,2),an=Qe?"".concat(lr.slice(1,2)).concat(lr.slice(1,2)):lr.slice(2,4),bn=Qe?"".concat(lr.slice(2,3)).concat(lr.slice(2,3)):lr.slice(4,6),nr=(Qe?"".concat(lr.slice(3,4)).concat(lr.slice(3,4)):lr.slice(6,8))||"ff";return{r:$r,g:an,b:bn,a:nr}},d=function(lr){return parseInt(lr,16)},V=function(lr){var Qe=lr.r,$r=lr.g,an=lr.b,bn=lr.a;return{r:d(Qe),g:d($r),b:d(an),a:+(d(bn)/255).toFixed(2)}},Q=function(lr){return!isNaN(parseFloat(String(lr)))&&isFinite(Number(lr))},j=function(lr,Qe){var $r=lr.r,an=lr.g,bn=lr.b,nr=lr.a,Tr=Q(Qe)?Qe:nr;return"rgba(".concat($r,", ").concat(an,", ").concat(bn,", ").concat(Tr,")")},X=function(lr,Qe){var $r=N(lr),an=m($r),bn=V(an);return j(bn,Qe)},K=function(lr){var Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,$r=N(lr),an=m($r),bn=V(an),nr=bn.r,Tr=bn.g,ar=bn.b,vr=nr.toString(16),Br=Tr.toString(16),Fr=ar.toString(16),kr=Math.round(Number(Qe)*255).toString(16);return vr.length===1&&(vr="0".concat(vr)),Br.length===1&&(Br="0".concat(Br)),Fr.length===1&&(Fr="0".concat(Fr)),kr.length===1&&(kr="0".concat(kr)),"#".concat(vr).concat(Br).concat(Fr).concat(kr)},J=X;function rt(sr){return xt(sr)||lt(sr)||nt(sr)||tt()}function tt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nt(sr,lr){if(!!sr){if(typeof sr=="string")return jt(sr,lr);var Qe=Object.prototype.toString.call(sr).slice(8,-1);if(Qe==="Object"&&sr.constructor&&(Qe=sr.constructor.name),Qe==="Map"||Qe==="Set")return Array.from(sr);if(Qe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qe))return jt(sr,lr)}}function lt(sr){if(typeof Symbol!="undefined"&&sr[Symbol.iterator]!=null||sr["@@iterator"]!=null)return Array.from(sr)}function xt(sr){if(Array.isArray(sr))return jt(sr)}function jt(sr,lr){(lr==null||lr>sr.length)&&(lr=sr.length);for(var Qe=0,$r=new Array(lr);Qe<lr;Qe++)$r[Qe]=sr[Qe];return $r}function Dt(sr,lr){for(var Qe=0;Qe<lr.length;Qe++){var $r=lr[Qe];$r.enumerable=$r.enumerable||!1,$r.configurable=!0,"value"in $r&&($r.writable=!0),Object.defineProperty(sr,$r.key,$r)}}function Zt(sr,lr,Qe){return lr&&Dt(sr.prototype,lr),Qe&&Dt(sr,Qe),Object.defineProperty(sr,"prototype",{writable:!1}),sr}function Vt(sr,lr){if(!(sr instanceof lr))throw new TypeError("Cannot call a class as a function")}var ue=Zt(function sr(lr){var Qe=this;Vt(this,sr),this.nodeIds=[],this.bfs=function($r){var an;if(!!Qe.root){var bn=[];for(bn.push(Qe.root);bn.length;){var nr=bn.shift();if($r(nr))return nr;((an=nr==null?void 0:nr.children)===null||an===void 0?void 0:an.length)&&bn.push.apply(bn,rt(nr.children))}}},this.getRoot=function(){return Qe.root},this.getNode=function($r){var an=Qe.bfs(function(bn){return bn.id===$r});return an},this.addRoot=function($r,an){Qe.root={id:$r,children:[]},Qe.nodeIds.push($r)},this.addNode=function($r){var an=$r.parentId,bn=$r.id,nr=$r.data;if(!Qe.root){Qe.addRoot(bn,nr);return}var Tr;if(an)Tr=Qe.getNode(an);else{var ar=Math.floor(Math.random()*Qe.nodeIds.length);Tr=Qe.getNode(Qe.nodeIds[ar])}if(!Tr){console.error("Parent node doesn't exist!");return}Qe.nodeIds.push(bn),Tr.children.push({id:bn,parent:Tr,children:[]})},lr&&(this.root=lr)}),dt=function sr(lr,Qe){Qe(lr),lr.children&&lr.children.length>0&&lr.children.forEach(function($r){sr($r,Qe)})},Ot=dt;function ee(sr){return Be(sr)||Ae(sr)||me(sr)||Re()}function Re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(sr,lr){if(!!sr){if(typeof sr=="string")return Ke(sr,lr);var Qe=Object.prototype.toString.call(sr).slice(8,-1);if(Qe==="Object"&&sr.constructor&&(Qe=sr.constructor.name),Qe==="Map"||Qe==="Set")return Array.from(sr);if(Qe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qe))return Ke(sr,lr)}}function Ae(sr){if(typeof Symbol!="undefined"&&sr[Symbol.iterator]!=null||sr["@@iterator"]!=null)return Array.from(sr)}function Be(sr){if(Array.isArray(sr))return Ke(sr)}function Ke(sr,lr){(lr==null||lr>sr.length)&&(lr=sr.length);for(var Qe=0,$r=new Array(lr);Qe<lr;Qe++)$r[Qe]=sr[Qe];return $r}function $t(sr,lr){for(var Qe=0;Qe<lr.length;Qe++){var $r=lr[Qe];$r.enumerable=$r.enumerable||!1,$r.configurable=!0,"value"in $r&&($r.writable=!0),Object.defineProperty(sr,$r.key,$r)}}function ce(sr,lr,Qe){return lr&&$t(sr.prototype,lr),Qe&&$t(sr,Qe),Object.defineProperty(sr,"prototype",{writable:!1}),sr}function we(sr,lr){if(!(sr instanceof lr))throw new TypeError("Cannot call a class as a function")}var Pe={nodeCount:10,nodeType:"company"},ye=ce(function sr(lr){var Qe=this;we(this,sr),this.initNodes=function(){var $r=Qe.options,an=$r.nodeCount,bn=$r.nodeType,nr=Array.from({length:an});Qe.nodes=nr.map(function(vr,Br){return{id:"node-".concat(Br),label:"node-".concat(Br),type:bn}});for(var Tr=0;Tr<an;Tr=Tr+1)for(var ar=0;ar<an-1;ar=ar+1)Qe.edges.push({source:"node-".concat(Tr),target:"node-".concat(ar)});Qe.nodeIds=Qe.nodes.map(function(vr){return vr.id})},this.expand=function($r){return Qe.edges=[],Qe.nodes=[],$r.forEach(function(an){for(var bn=0;bn<Qe.options.nodeCount;bn+=1)Qe.nodes.push({id:"".concat(an.id,"-").concat(bn),type:an.type}),Qe.edges.push({source:"".concat(an.id,"-").concat(bn),target:an.id})}),Qe},this.type=function($r){return Qe.nodes=Qe.nodes.map(function(an){return Object.assign(Object.assign({},an),{type:$r})}),Qe},this.circle=function(){var $r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",an=$r;return Qe.nodeIds.indexOf(an)===-1&&(an="node-0"),Qe.edges=Qe.edges.filter(function(bn){return bn.source===an||bn.target===an}),Qe},this.random=function(){var $r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.5,an=Qe.options.nodeCount,bn=parseInt(String(an*$r)),nr=Qe.nodeIds.sort(function(){return Math.random()-.5}).slice(0,bn);return Qe.edges=Qe.edges.filter(function(Tr){return nr.indexOf(Tr.target)!==-1}),Qe.edges=Qe.edges.sort(function(){return Math.random()-.5}).slice(0,bn),Qe},this.tree=function(){Qe.edges=[],Qe.treeData=new ue;var $r=Qe.nodeIds[0];return Qe.nodeIds.forEach(function(an){Qe.treeData.addNode({id:an,style:{label:{value:an}}})}),Qe.treeData.bfs(function(an){var bn;return an.id!==$r&&Qe.edges.push({source:(bn=an==null?void 0:an.parent)===null||bn===void 0?void 0:bn.id,target:an.id,properties:[]}),!1}),Qe},this.value=function(){return{nodes:Qe.nodes,edges:Qe.edges}},this.combos=function($r){var an=new Set;return Qe.nodes=Qe.nodes.map(function(bn,nr){var Tr=Math.ceil((nr+1)/$r),ar="combo-".concat(Tr);return an.add(ar),Object.assign(Object.assign({},bn),{comboId:ar})}),Qe.combosData=ee(an).map(function(bn){return{id:bn,label:bn}}),Qe},this.graphin=function(){return{nodes:Qe.nodes.map(function($r){return Object.assign(Object.assign({},$r),{id:$r.id,type:"graphin-circle",comboId:$r.comboId,style:{label:{value:"".concat($r.id)}}})}),edges:Qe.edges.map(function($r){return{source:$r.source,target:$r.target}}),combos:Qe.combosData}},this.graphinTree=function(){var $r=Qe.treeData.getRoot();return Ot($r,function(an){delete an.parent}),$r},this.options=Pe,this.options.nodeCount=lr,this.nodes=[],this.edges=[],this.nodeIds=[],this.treeData=new ue,this.initNodes()}),Bt=function(lr){return new ye(lr)},re=Bt;function Ee(sr){return sr%2==0}function It(sr){return!Ee(sr)}var Et=30,Wt=10,fe=1,Fe=function(lr){var Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{poly:Et,loop:Wt,loopLabelPosition:fe},$r=Qe.poly,an=$r===void 0?Et:$r,bn=Qe.loop,nr=bn===void 0?Wt:bn,Tr=Qe.loopLabelPosition,ar=Tr===void 0?fe:Tr,vr={};lr.forEach(function(kr,Z){var Te=Object.assign({},kr),ne=Te.source,it=Te.target,ot="".concat(ne,"-").concat(it);Te.id=Te.id||"".concat(ne,"-").concat(it,"-").concat(Z);var B="".concat(it,"-").concat(ne);vr[ot]?vr[ot].push(Te):vr[B]?(Te.revert=!0,vr[B].push(Te)):vr[ot]=[Te]});var Br=Object.values(vr),Fr=[];return Br.forEach(function(kr){if(kr.length>1){var Z=Ee(kr.length);kr.forEach(function(Te,ne){var it,ot=Te.source,B=Te.target,_=ot===B,C=ne,Y;if(Z){var pt=Math.ceil((C+1)/2);Y=an*pt}else{var _t=It(C)?C+1:C,Mt=Math.ceil(_t/2);Y=an*Mt}var zt=Ee(C)?Y:-Y;Te.revert&&(zt=-zt,delete Te.revert);var Le;if(_){var Me=C*nr;if(Le={type:"loop",loop:{distance:Me}},(it=Te.style)===null||it===void 0?void 0:it.label){var qe=0,br=-(Et*ar+Me*2);Te.style.label.offset=[qe,br]}}else Le={type:"poly",poly:{distance:zt}};(0,L.deepMix)(Te,{style:{keyshape:Le}}),Te.isMultiple=!0,Fr.push(Te)})}else Fr.push(kr[0])}),Fr},$e=Fe;function Lt(sr){return ur(sr)||Dr(sr)||Xe(sr)||Ne()}function Ne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xe(sr,lr){if(!!sr){if(typeof sr=="string")return Or(sr,lr);var Qe=Object.prototype.toString.call(sr).slice(8,-1);if(Qe==="Object"&&sr.constructor&&(Qe=sr.constructor.name),Qe==="Map"||Qe==="Set")return Array.from(sr);if(Qe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qe))return Or(sr,lr)}}function Dr(sr){if(typeof Symbol!="undefined"&&sr[Symbol.iterator]!=null||sr["@@iterator"]!=null)return Array.from(sr)}function ur(sr){if(Array.isArray(sr))return Or(sr)}function Or(sr,lr){(lr==null||lr>sr.length)&&(lr=sr.length);for(var Qe=0,$r=new Array(lr);Qe<lr;Qe++)$r[Qe]=sr[Qe];return $r}var ln=function(lr,Qe){var $r=Qe.split("."),an=$r.reduce(function(bn,nr,Tr,ar){var vr=bn[nr];return!vr&&Tr!==ar.length-1?{}:vr},lr);return an},fn=function(lr,Qe){var $r=new Map;return lr.forEach(function(an){var bn=ln(an,Qe),nr=$r.get(bn);nr?$r.set(bn,[].concat(Lt(nr),[an])):$r.set(bn,[an])}),$r},Xr=function(lr,Qe){var $r=!0,an=Object.keys(lr),bn=Object.keys(Qe);if(an.length!==bn.length)return!1;for(var nr=0;nr<an.length;nr++){var Tr=an[nr];if(lr[Tr]!==Qe[Tr]){$r=!1;break}}return $r},Cn=Xr,Qr=function(){function lr(){return((1+Math.random())*65536|0).toString(16).substring(1)}return"".concat(lr()+lr(),"-").concat(lr(),"-").concat(lr(),"-").concat(lr(),"-").concat(lr()).concat(lr()).concat(lr())},Gr=Qr,on={hexToRgba:J,debug:S,mock:re,shallowEqual:Cn,hexToRgbaToHex:K,getNodeStyleByTheme:k.Z,getEdgeStyleByTheme:I.Z,getComboStyleByTheme:F.Z,deepMix:L.deepMix,cloneDeep:E.Z,uuid:Gr,walk:Ot,processEdges:$e,calcByteLength:b.Z,layouts:z.$,uniqBy:D,getEnumDataMap:fn,getEnumValue:ln}},69787:function(Mr,G,R){"use strict";R.r(G),R.d(G,{Graph:function(){return J},GraphWithEvent:function(){return Re},algorithm:function(){return L},comparision:function(){return F},essence:function(){return z},generate:function(){return I}});var L={};R.r(L),R.d(L,{components:function(){return Pe},dfs:function(){return re},dijkstra:function(){return Xe},dijkstraAll:function(){return ur},findCycles:function(){return Xr},floydWarshall:function(){return pt},isAcyclic:function(){return Te},postorder:function(){return it},preorder:function(){return B},prim:function(){return ce},tarjan:function(){return ln},topsort:function(){return kr}});var z={};R.r(z),R.d(z,{hasSelfLoop:function(){return na},isGraph:function(){return ea},isNullGraph:function(){return Zn},isSimpleGraph:function(){return ha}});var F={};R.r(F),R.d(F,{containAllSameEdges:function(){return br},containAllSameNodes:function(){return qe},containSameEdges:function(){return Mt},containSameNodes:function(){return _t},getSameEdges:function(){return Le},getSameNodes:function(){return zt},isGraphComplement:function(){return da},isGraphContainsAnother:function(){return sn},isGraphOptionSame:function(){return Me},isGraphSame:function(){return xr}});var I={};R.r(I),R.d(I,{getGraphComplement:function(){return Vn}});var k;(function(se){se.DEFAULT_EDGE_NAME="\0",se.GRAPH_NODE="\0",se.EDGE_KEY_DELIM=""})(k||(k={}));function D(se,Ut){var le=se.get(Ut)||0;se.set(Ut,le+1)}function b(se,Ut){var le=se.get(Ut);le!==void 0&&(le=le-1,le>0?se.set(Ut,le):se.delete(Ut))}function E(se,Ut,le,ze){var Ie=String(Ut),We=String(le);if(!se&&Ie>We){var _r=Ie;Ie=We,We=_r}return Ie+k.EDGE_KEY_DELIM+We+k.EDGE_KEY_DELIM+(ze===void 0?k.DEFAULT_EDGE_NAME:ze)}function p(se,Ut,le,ze){var Ie=String(Ut),We=String(le),_r={v:Ut,w:le};if(!se&&Ie>We){var nn=_r.v;_r.v=_r.w,_r.w=nn}return ze!==void 0&&(_r.name=ze),_r}function y(se,Ut){return E(se,Ut.v,Ut.w,Ut.name)}function g(se){return typeof se=="function"}var T=function(Ut){return Ut.nodes().map(function(le){var ze=Ut.node(le),Ie=Ut.parent(le),We={id:le,value:ze,parent:Ie};return We.value===void 0&&delete We.value,We.parent===void 0&&delete We.parent,We})},x=function(Ut){return Ut.edges().map(function(le){var ze=Ut.edge(le),Ie={v:le.v,w:le.w,value:ze,name:le.name};return Ie.name===void 0&&delete Ie.name,Ie.value===void 0&&delete Ie.value,Ie})},S=function(Ut){var le={options:{directed:Ut.isDirected(),multigraph:Ut.isMultigraph(),compound:Ut.isCompound()},nodes:T(Ut),edges:x(Ut),value:Ut.graph()};return le.value===void 0&&delete le.value,le},N=function(Ut){var le=new J(Ut.options);return Ut.value!==void 0&&le.setGraph(Ut.value),Ut.nodes.forEach(function(ze){le.setNode(ze.id,ze.value),ze.parent&&le.setParent(ze.id,ze.parent)}),Ut.edges.forEach(function(ze){le.setEdge(ze.v,ze.w,ze.value,ze.name)}),le};function m(se,Ut){var le=Object.keys(se);if(Object.getOwnPropertySymbols){var ze=Object.getOwnPropertySymbols(se);Ut&&(ze=ze.filter(function(Ie){return Object.getOwnPropertyDescriptor(se,Ie).enumerable})),le.push.apply(le,ze)}return le}function d(se){for(var Ut=1;Ut<arguments.length;Ut++){var le=arguments[Ut]!=null?arguments[Ut]:{};Ut%2?m(Object(le),!0).forEach(function(ze){V(se,ze,le[ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(le)):m(Object(le)).forEach(function(ze){Object.defineProperty(se,ze,Object.getOwnPropertyDescriptor(le,ze))})}return se}function V(se,Ut,le){return Ut in se?Object.defineProperty(se,Ut,{value:le,enumerable:!0,configurable:!0,writable:!0}):se[Ut]=le,se}function Q(se,Ut){if(!(se instanceof Ut))throw new TypeError("Cannot call a class as a function")}function j(se,Ut){for(var le=0;le<Ut.length;le++){var ze=Ut[le];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(se,ze.key,ze)}}function X(se,Ut,le){return Ut&&j(se.prototype,Ut),le&&j(se,le),Object.defineProperty(se,"prototype",{writable:!1}),se}var K={compound:!1,multigraph:!1,directed:!0},J=function(){function se(){var Ut=this,le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Q(this,se),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=k.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Ut.directed},this.isMultigraph=function(){return Ut.multigraph},this.isCompound=function(){return Ut.compound},this.setGraph=function(Ie){return Ut.label=Ie,Ut},this.graph=function(){return Ut.label},this.setDefaultNodeLabel=function(Ie){return g(Ie)?Ut.defaultNodeLabelFn=Ie:Ut.defaultNodeLabelFn=function(){return Ie},Ut},this.nodeCount=function(){return Ut.nodeCountNum},this.node=function(Ie){return Ut.nodesLabelMap.get(Ie)},this.nodes=function(){return Array.from(Ut.nodesLabelMap.keys())},this.sources=function(){return Ut.nodes().filter(function(Ie){var We;return!((We=Ut.inEdgesMap.get(Ie))===null||We===void 0?void 0:We.size)})},this.sinks=function(){return Ut.nodes().filter(function(Ie){var We;return!((We=Ut.outEdgesMap.get(Ie))===null||We===void 0?void 0:We.size)})},this.setNodes=function(Ie,We){return Ie.map(function(_r){return Ut.setNode(_r,We)}),Ut},this.hasNode=function(Ie){return Ut.nodesLabelMap.has(Ie)},this.checkCompound=function(){if(!Ut.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(Ie){if(Ut.isCompound()){var We,_r=(We=Ut.parentMap)===null||We===void 0?void 0:We.get(Ie);if(_r!==Ut.GRAPH_NODE)return _r}},this.removeFromParentsChildList=function(Ie){var We=Ut.parentMap.get(Ie);Ut.childrenMap.get(We).delete(Ie)},this.setParent=function(Ie,We){var _r,nn;Ut.checkCompound();for(var pn=We===void 0?Ut.GRAPH_NODE:We,Gn=Ut.parent(pn);Gn;){if(Ie===Gn)throw new Error("Setting "+We+" as parent of "+Ie+" would create a cycle");Gn=Ut.parent(Gn)}We&&Ut.setNode(We),Ut.setNode(Ie),Ut.removeFromParentsChildList(Ie),(_r=Ut.parentMap)===null||_r===void 0||_r.set(Ie,pn);var jn=Ut.childrenMap.get(pn);return jn.set(Ie,!0),(nn=Ut.childrenMap)===null||nn===void 0||nn.set(pn,jn),Ut},this.children=function(Ie){var We=Ie===void 0?Ut.GRAPH_NODE:Ie;if(Ut.isCompound()){var _r,nn=(_r=Ut.childrenMap)===null||_r===void 0?void 0:_r.get(We);return nn?Array.from(nn.keys()):void 0}if(We===Ut.GRAPH_NODE)return Ut.nodes();if(Ie&&Ut.hasNode(Ie))return[]},this.predecessors=function(Ie){var We=Ut.predecessorsMap.get(Ie);return We?Array.from(We.keys()):void 0},this.successors=function(Ie){var We=Ut.successorsMap.get(Ie);return We?Array.from(We.keys()):void 0},this.neighbors=function(Ie){var We;if(!!Ut.hasNode(Ie))return Array.from(new Set((We=Ut.predecessors(Ie))===null||We===void 0?void 0:We.concat(Ut.successors(Ie))))},this.isLeaf=function(Ie){var We;if(Ut.isDirected()){var _r;return!((_r=Ut.successors(Ie))===null||_r===void 0?void 0:_r.length)}return!((We=Ut.neighbors(Ie))===null||We===void 0?void 0:We.length)},this.filterNodes=function(Ie){var We=Ut.directed,_r=Ut.multigraph,nn=Ut.compound,pn=new se({directed:We,multigraph:_r,compound:nn});if(pn.setGraph(Ut.graph()),Ut.nodes().forEach(function(jn){Ie(jn)&&pn.setNode(jn,Ut.node(jn))}),Ut.edges().forEach(function(jn){pn.hasNode(jn.v)&&pn.hasNode(jn.w)&&pn.setEdgeObj(jn,Ut.edge(jn))}),nn){var Gn=function(oa){for(var va=Ut.parent(oa);va!==void 0&&!pn.hasNode(va);)va=Ut.parent(va);return va};pn.nodes().forEach(function(jn){pn.setParent(jn,Gn(jn))})}return pn},this.setDefaultEdgeLabel=function(Ie){return g(Ie)?Ut.defaultEdgeLabelFn=Ie:Ut.defaultEdgeLabelFn=function(){return Ie},Ut},this.edgeCount=function(){return Ut.edgeCountNum},this.setEdgeObj=function(Ie,We){return Ut.setEdge(Ie.v,Ie.w,We,Ie.name)},this.setPath=function(Ie,We){return Ie.reduce(function(_r,nn){return Ut.setEdge(_r,nn,We),nn}),Ut},this.edgeFromArgs=function(Ie,We,_r){return Ut.edge({v:Ie,w:We,name:_r})},this.edge=function(Ie){return Ut.edgesLabelsMap.get(y(Ut.isDirected(),Ie))},this.hasEdge=function(Ie,We,_r){return Ut.edgesLabelsMap.has(y(Ut.isDirected(),{v:Ie,w:We,name:_r}))},this.removeEdgeObj=function(Ie){var We=Ie.v,_r=Ie.w,nn=Ie.name;return Ut.removeEdge(We,_r,nn)},this.edges=function(){return Array.from(Ut.edgesMap.values())},this.inEdges=function(Ie,We){var _r=Ut.inEdgesMap.get(Ie);if(_r)return Array.from(_r.values()).filter(function(nn){return!We||nn.v===We})},this.outEdges=function(Ie,We){var _r=Ut.outEdgesMap.get(Ie);if(_r)return Array.from(_r.values()).filter(function(nn){return!We||nn.w===We})},this.nodeEdges=function(Ie,We){var _r;if(!!Ut.hasNode(Ie))return(_r=Ut.inEdges(Ie,We))===null||_r===void 0?void 0:_r.concat(Ut.outEdges(Ie,We))},this.toJSON=function(){return S(Ut)},this.nodeInDegree=function(Ie){var We=Ut.inEdgesMap.get(Ie);return We?We.size:0},this.nodeOutDegree=function(Ie){var We=Ut.outEdgesMap.get(Ie);return We?We.size:0},this.nodeDegree=function(Ie){return Ut.nodeInDegree(Ie)+Ut.nodeOutDegree(Ie)},this.source=function(Ie){return Ie.v},this.target=function(Ie){return Ie.w};var ze=d(d({},K),le);this.compound=ze.compound,this.directed=ze.directed,this.multigraph=ze.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return X(se,[{key:"setNode",value:function(le,ze){var Ie=this.nodesLabelMap,We=this.defaultNodeLabelFn,_r=this.isCompound,nn=this.parentMap,pn=this.childrenMap,Gn=this.inEdgesMap,jn=this.outEdgesMap,oa=this.predecessorsMap,va=this.successorsMap;if(Ie.has(le))return ze!==void 0&&Ie.set(le,ze),this;if(Ie.set(le,ze||We(le)),_r()){var _a;nn==null||nn.set(le,this.GRAPH_NODE),pn==null||pn.set(le,new Map),(pn==null?void 0:pn.has(this.GRAPH_NODE))||pn==null||pn.set(this.GRAPH_NODE,new Map),pn==null||(_a=pn.get(this.GRAPH_NODE))===null||_a===void 0||_a.set(le,!0)}return[Gn,jn,oa,va].forEach(function(fi){return fi.set(le,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(le){var ze=this;if(this.hasNode(le)){var Ie=function(Wa){ze.removeEdge(Wa.v,Wa.w,Wa.name)},We=this.inEdgesMap,_r=this.outEdgesMap,nn=this.predecessorsMap,pn=this.successorsMap,Gn=this.nodesLabelMap;if(this.isCompound()){var jn,oa,va;this.removeFromParentsChildList(le),(jn=this.parentMap)===null||jn===void 0||jn.delete(le),(oa=this.children(le))===null||oa===void 0||oa.forEach(function(Ba){return ze.setParent(Ba)}),(va=this.childrenMap)===null||va===void 0||va.delete(le)}var _a=We.get(le),fi=_r.get(le);Array.from(_a.values()).forEach(function(Ba){return Ie(Ba)}),Array.from(fi.values()).forEach(function(Ba){return Ie(Ba)}),Gn.delete(le),We.delete(le),_r.delete(le),nn.delete(le),pn.delete(le),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(le,ze,Ie,We){var _r,nn,pn=p(this.isDirected(),le,ze,We),Gn=y(this.isDirected(),pn),jn=pn.v,oa=pn.w;if(this.edgesLabelsMap.has(Gn))return this.edgesLabelsMap.set(Gn,Ie),this;if(We!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(jn),this.setNode(oa),this.edgesLabelsMap.set(Gn,Ie||this.defaultEdgeLabelFn(jn,oa,We)),Object.freeze(pn),this.edgesMap.set(Gn,pn);var va=this.predecessorsMap.get(oa),_a=this.successorsMap.get(jn);return D(va,jn),D(_a,oa),(_r=this.inEdgesMap.get(oa))===null||_r===void 0||_r.set(Gn,pn),(nn=this.outEdgesMap.get(jn))===null||nn===void 0||nn.set(Gn,pn),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(le,ze,Ie){var We=E(this.isDirected(),le,ze,Ie),_r=this.edgesMap.get(We);if(_r){var nn=p(this.isDirected(),le,ze,Ie),pn=nn.v,Gn=nn.w;this.edgesLabelsMap.delete(We),this.edgesMap.delete(We);var jn=this.predecessorsMap.get(Gn),oa=this.successorsMap.get(pn);b(jn,pn),b(oa,Gn),this.inEdgesMap.get(Gn).delete(We),this.outEdgesMap.get(pn).delete(We),this.edgeCountNum-=1}return this}}]),se}();J.fromJSON=N;function rt(se){return rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ut){return typeof Ut}:function(Ut){return Ut&&typeof Symbol=="function"&&Ut.constructor===Symbol&&Ut!==Symbol.prototype?"symbol":typeof Ut},rt(se)}function tt(se,Ut){if(!(se instanceof Ut))throw new TypeError("Cannot call a class as a function")}function nt(se,Ut){for(var le=0;le<Ut.length;le++){var ze=Ut[le];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(se,ze.key,ze)}}function lt(se,Ut,le){return Ut&&nt(se.prototype,Ut),le&&nt(se,le),Object.defineProperty(se,"prototype",{writable:!1}),se}function xt(){return typeof Reflect!="undefined"&&Reflect.get?xt=Reflect.get:xt=function(Ut,le,ze){var Ie=jt(Ut,le);if(!!Ie){var We=Object.getOwnPropertyDescriptor(Ie,le);return We.get?We.get.call(arguments.length<3?Ut:ze):We.value}},xt.apply(this,arguments)}function jt(se,Ut){for(;!Object.prototype.hasOwnProperty.call(se,Ut)&&(se=ee(se),se!==null););return se}function Dt(se,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function");se.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:se,writable:!0,configurable:!0}}),Object.defineProperty(se,"prototype",{writable:!1}),Ut&&Zt(se,Ut)}function Zt(se,Ut){return Zt=Object.setPrototypeOf||function(ze,Ie){return ze.__proto__=Ie,ze},Zt(se,Ut)}function Vt(se){var Ut=Ot();return function(){var ze=ee(se),Ie;if(Ut){var We=ee(this).constructor;Ie=Reflect.construct(ze,arguments,We)}else Ie=ze.apply(this,arguments);return ue(this,Ie)}}function ue(se,Ut){if(Ut&&(rt(Ut)==="object"||typeof Ut=="function"))return Ut;if(Ut!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dt(se)}function dt(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}function Ot(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(se){return!1}}function ee(se){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(le){return le.__proto__||Object.getPrototypeOf(le)},ee(se)}var Re=function(se){Dt(le,se);var Ut=Vt(le);function le(){var ze;tt(this,le);for(var Ie=arguments.length,We=new Array(Ie),_r=0;_r<Ie;_r++)We[_r]=arguments[_r];return ze=Ut.call.apply(Ut,[this].concat(We)),ze.eventPool={},ze}return lt(le,[{key:"appendEvent",value:function(Ie,We){this.eventPool[Ie]||(this.eventPool[Ie]=[]),this.eventPool[Ie].push(We)}},{key:"removeEvent",value:function(Ie,We){if(!!this.eventPool[Ie]){var _r=this.eventPool[Ie].indexOf(We);_r>-1&&this.eventPool[Ie].splice(_r,1)}}},{key:"emitEvent",value:function(Ie){for(var We=arguments.length,_r=new Array(We>1?We-1:0),nn=1;nn<We;nn++)_r[nn-1]=arguments[nn];!this.eventPool[Ie]||this.eventPool[Ie].forEach(function(pn){pn.apply(void 0,_r)})}},{key:"setNode",value:function(Ie,We){return xt(ee(le.prototype),"setNode",this).call(this,Ie,We),this.emitEvent("nodeAdd",Ie,We),this}},{key:"removeNode",value:function(Ie){return xt(ee(le.prototype),"removeNode",this).call(this,Ie),this.emitEvent("nodeRemove",Ie),this}},{key:"setEdge",value:function(Ie,We,_r,nn){return xt(ee(le.prototype),"setEdge",this).call(this,Ie,We,_r,nn),this.emitEvent("edgeAdd",Ie,We,_r,nn),this}},{key:"removeEdge",value:function(Ie,We,_r){return xt(ee(le.prototype),"removeEdge",this).call(this,Ie,We,_r),this.emitEvent("edgeRemove",Ie,We,_r),this}}]),le}(J);function me(se,Ut){for(var le=0;le<Ut.length;le++){var ze=Ut[le];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(se,ze.key,ze)}}function Ae(se,Ut,le){return Ut&&me(se.prototype,Ut),le&&me(se,le),Object.defineProperty(se,"prototype",{writable:!1}),se}function Be(se,Ut){if(!(se instanceof Ut))throw new TypeError("Cannot call a class as a function")}var Ke=Ae(function se(){var Ut=this;Be(this,se),this.arr=[],this.keyIndice=new Map,this.size=function(){return Ut.arr.length},this.keys=function(){return Ut.arr.map(function(le){return le.key})},this.has=function(le){return Ut.keyIndice.has(le)},this.priority=function(le){var ze=Ut.keyIndice.get(le);if(ze!==void 0)return Ut.arr[ze].priority},this.swap=function(le,ze){var Ie=Ut.arr,We=Ut.keyIndice,_r=[Ie[le],Ie[ze]],nn=_r[0],pn=_r[1];Ie[le]=pn,Ie[ze]=nn,We.set(nn.key,ze),We.set(pn.key,le)},this.innerDecrease=function(le){for(var ze=Ut.arr,Ie=ze[le].priority,We,_r=le;_r!==0;){var nn;if(We=_r>>1,((nn=ze[We])===null||nn===void 0?void 0:nn.priority)<Ie)break;Ut.swap(_r,We),_r=We}},this.heapify=function(le){var ze=Ut.arr,Ie=le<<1,We=Ie+1,_r=le;Ie<ze.length&&(_r=ze[Ie].priority<ze[_r].priority?Ie:_r,We<ze.length&&(_r=ze[We].priority<ze[_r].priority?We:_r),_r!==le&&(Ut.swap(le,_r),Ut.heapify(_r)))},this.min=function(){if(Ut.size()===0)throw new Error("Queue underflow");return Ut.arr[0].key},this.add=function(le,ze){var Ie=Ut.keyIndice,We=Ut.arr;if(!Ie.has(le)){var _r=We.length;return Ie.set(le,_r),We.push({key:le,priority:ze}),Ut.innerDecrease(_r),!0}return!1},this.removeMin=function(){Ut.swap(0,Ut.arr.length-1);var le=Ut.arr.pop();return Ut.keyIndice.delete(le.key),Ut.heapify(0),le.key},this.decrease=function(le,ze){if(!Ut.has(le))throw new Error("There's no key named ".concat(le));var Ie=Ut.keyIndice.get(le);if(ze>Ut.arr[Ie].priority)throw new Error("New priority is greater than current priority.Key: ".concat(le," Old: + ").concat(Ut.arr[Ie].priority," New: ").concat(ze));Ut.arr[Ie].priority=ze,Ut.innerDecrease(Ie)}}),$t=function(Ut,le){var ze=new J,Ie=new Map,We=new Ke,_r;function nn(jn){var oa=jn.v===_r?jn.w:jn.v,va=We.priority(oa);if(va!==void 0){var _a=le(jn);_a<va&&(Ie.set(oa,_r),We.decrease(oa,_a))}}if(Ut.nodeCount()===0)return ze;Ut.nodes().forEach(function(jn){We.add(jn,Number.POSITIVE_INFINITY),ze.setNode(jn)}),We.decrease(Ut.nodes()[0],0);for(var pn=!1;We.size()>0;){var Gn;if(_r=We.removeMin(),Ie.has(_r))ze.setEdge(_r,Ie.get(_r));else{if(pn)throw new Error("Input graph is not connected: "+Ut.graph());pn=!0}(Gn=Ut.nodeEdges(_r))===null||Gn===void 0||Gn.forEach(nn)}return ze},ce=$t,we=function(Ut){var le=new Set,ze=[],Ie=Ut.nodes();return Ie.forEach(function(We){for(var _r=[],nn=[We];nn.length>0;){var pn=nn.pop();if(!le.has(pn)){var Gn,jn;le.add(pn),_r.push(pn),(Gn=Ut.successors(pn))===null||Gn===void 0||Gn.forEach(function(oa){return nn.push(oa)}),(jn=Ut.predecessors(pn))===null||jn===void 0||jn.forEach(function(oa){return nn.push(oa)})}}_r.length&&ze.push(_r)}),ze},Pe=we,ye=function se(Ut,le,ze,Ie,We,_r){Ie.includes(le)||(Ie.push(le),ze||_r.push(le),We(le).forEach(function(nn){return se(Ut,nn,ze,Ie,We,_r)}),ze&&_r.push(le))},Bt=function(Ut,le,ze){var Ie=Array.isArray(le)?le:[le],We=function(Gn){return Ut.isDirected()?Ut.successors(Gn):Ut.neighbors(Gn)},_r=[],nn=[];return Ie.forEach(function(pn){if(Ut.hasNode(pn))ye(Ut,pn,ze==="post",nn,We,_r);else throw new Error("Graph does not have node: "+pn)}),_r},re=Bt;function Ee(se,Ut){return Fe(se)||fe(se,Ut)||Et(se,Ut)||It()}function It(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Et(se,Ut){if(!!se){if(typeof se=="string")return Wt(se,Ut);var le=Object.prototype.toString.call(se).slice(8,-1);if(le==="Object"&&se.constructor&&(le=se.constructor.name),le==="Map"||le==="Set")return Array.from(se);if(le==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(le))return Wt(se,Ut)}}function Wt(se,Ut){(Ut==null||Ut>se.length)&&(Ut=se.length);for(var le=0,ze=new Array(Ut);le<Ut;le++)ze[le]=se[le];return ze}function fe(se,Ut){var le=se==null?null:typeof Symbol!="undefined"&&se[Symbol.iterator]||se["@@iterator"];if(le!=null){var ze=[],Ie=!0,We=!1,_r,nn;try{for(le=le.call(se);!(Ie=(_r=le.next()).done)&&(ze.push(_r.value),!(Ut&&ze.length===Ut));Ie=!0);}catch(pn){We=!0,nn=pn}finally{try{!Ie&&le.return!=null&&le.return()}finally{if(We)throw nn}}return ze}}function Fe(se){if(Array.isArray(se))return se}var $e=function(){return 1},Lt=function(Ut,le,ze,Ie){return Ne(Ut,le,ze||$e,Ie||function(We){return Ut.outEdges(We)})},Ne=function(Ut,le,ze,Ie){var We=new Map,_r=new Ke,nn,pn,Gn=function(va){var _a=va.v!==nn?va.v:va.w,fi=We.get(_a),Ba=ze(va),Wa=pn.distance+Ba;if(Ba<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+va+" Weight: "+Ba);Wa<fi.distance&&(fi.distance=Wa,fi.predecessor=nn,_r.decrease(_a,Wa))};for(Ut.nodes().forEach(function(oa){var va=oa===le?0:Number.POSITIVE_INFINITY;We.set(oa,{distance:va}),_r.add(oa,va)});_r.size()>0&&(nn=_r.removeMin(),pn=We.get(nn),!(pn&&pn.distance===Number.POSITIVE_INFINITY));)Ie(nn).forEach(Gn);var jn={};return Array.from(We.entries()).forEach(function(oa){var va=Ee(oa,2),_a=va[0],fi=va[1];return jn[String(_a)]=fi,jn}),jn},Xe=Lt,Dr=function(Ut,le,ze){var Ie={};return Ut.nodes().forEach(function(We){return Ie[String(We)]=Xe(Ut,We,le,ze),Ie}),Ie},ur=Dr,Or=function(Ut){var le=0,ze=[],Ie=new Map,We=[];function _r(nn){var pn,Gn={onStack:!0,lowlink:le,index:le};if(Ie.set(nn,Gn),le+=1,ze.push(nn),(pn=Ut.successors(nn))===null||pn===void 0||pn.forEach(function(_a){var fi;if(Ie.has(_a)){if((fi=Ie.get(_a))===null||fi===void 0?void 0:fi.onStack){var Wa=Ie.get(_a);Gn.lowlink=Math.min(Gn.lowlink,Wa.index)}}else{_r(_a);var Ba=Ie.get(_a);Gn.lowlink=Math.min(Gn.lowlink,Ba.lowlink)}}),Gn.lowlink===Gn.index){var jn=[],oa;do{oa=ze.pop();var va=Ie.get(oa);va.onStack=!1,jn.push(oa)}while(nn!==oa);We.push(jn)}}return Ut.nodes().forEach(function(nn){Ie.has(nn)||_r(nn)}),We},ln=Or,fn=function(Ut){return ln(Ut).filter(function(le){return le.length>1||le.length===1&&Ut.hasEdge(le[0],le[0])})},Xr=fn;function Cn(se){return Cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ut){return typeof Ut}:function(Ut){return Ut&&typeof Symbol=="function"&&Ut.constructor===Symbol&&Ut!==Symbol.prototype?"symbol":typeof Ut},Cn(se)}function Qr(se,Ut){for(var le=0;le<Ut.length;le++){var ze=Ut[le];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(se,ze.key,ze)}}function Gr(se,Ut,le){return Ut&&Qr(se.prototype,Ut),le&&Qr(se,le),Object.defineProperty(se,"prototype",{writable:!1}),se}function on(se,Ut){if(!(se instanceof Ut))throw new TypeError("Cannot call a class as a function")}function sr(se,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function");se.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:se,writable:!0,configurable:!0}}),Object.defineProperty(se,"prototype",{writable:!1}),Ut&&ar(se,Ut)}function lr(se){var Ut=nr();return function(){var ze=vr(se),Ie;if(Ut){var We=vr(this).constructor;Ie=Reflect.construct(ze,arguments,We)}else Ie=ze.apply(this,arguments);return Qe(this,Ie)}}function Qe(se,Ut){if(Ut&&(Cn(Ut)==="object"||typeof Ut=="function"))return Ut;if(Ut!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $r(se)}function $r(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}function an(se){var Ut=typeof Map=="function"?new Map:void 0;return an=function(ze){if(ze===null||!Tr(ze))return ze;if(typeof ze!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Ut!="undefined"){if(Ut.has(ze))return Ut.get(ze);Ut.set(ze,Ie)}function Ie(){return bn(ze,arguments,vr(this).constructor)}return Ie.prototype=Object.create(ze.prototype,{constructor:{value:Ie,enumerable:!1,writable:!0,configurable:!0}}),ar(Ie,ze)},an(se)}function bn(se,Ut,le){return nr()?bn=Reflect.construct:bn=function(Ie,We,_r){var nn=[null];nn.push.apply(nn,We);var pn=Function.bind.apply(Ie,nn),Gn=new pn;return _r&&ar(Gn,_r.prototype),Gn},bn.apply(null,arguments)}function nr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(se){return!1}}function Tr(se){return Function.toString.call(se).indexOf("[native code]")!==-1}function ar(se,Ut){return ar=Object.setPrototypeOf||function(ze,Ie){return ze.__proto__=Ie,ze},ar(se,Ut)}function vr(se){return vr=Object.setPrototypeOf?Object.getPrototypeOf:function(le){return le.__proto__||Object.getPrototypeOf(le)},vr(se)}var Br=function(se){sr(le,se);var Ut=lr(le);function le(){return on(this,le),Ut.apply(this,arguments)}return Gr(le)}(an(Error));function Fr(se){var Ut=new Set,le=new Set,ze=[];function Ie(We){if(le.has(We))throw new Br;if(!Ut.has(We)){var _r;le.add(We),Ut.add(We),(_r=se.predecessors(We))===null||_r===void 0||_r.forEach(Ie),le.delete(We),ze.push(We)}}if(se.sinks().forEach(Ie),Ut.size!==se.nodeCount())throw new Br;return ze}var kr=Fr,Z=function(Ut){try{kr(Ut)}catch(le){if(le instanceof Br)return!1;throw le}return!0},Te=Z,ne=function(Ut,le){return re(Ut,le,"post")},it=ne,ot=function(Ut,le){return re(Ut,le,"pre")},B=ot,_=function(){return 1};function C(se,Ut,le){return Y(se,Ut||_,le||function(ze){return se.outEdges(ze)})}function Y(se,Ut,le){var ze={},Ie=se.nodes();return Ie.forEach(function(We){var _r=String(We);ze[_r]={},ze[_r][_r]={distance:0},Ie.forEach(function(nn){We!==nn&&(ze[_r][String(nn)]={distance:Number.POSITIVE_INFINITY})}),le(We).forEach(function(nn){var pn=nn.v===We?nn.w:nn.v,Gn=Ut(nn);ze[_r][String(pn)]={distance:Gn,predecessor:We}})}),Ie.forEach(function(We){var _r=String(We),nn=ze[_r];Ie.forEach(function(pn){var Gn=String(pn),jn=ze[Gn];Ie.forEach(function(oa){var va=String(oa),_a=jn[_r],fi=nn[va],Ba=jn[va],Wa=_a.distance+fi.distance;Wa<Ba.distance&&(Ba.distance=Wa,Ba.predecessor=fi.predecessor)})})}),ze}var pt=C,_t=function(Ut,le){for(var ze=Ut.nodes(),Ie=0;Ie<ze.length;Ie++){var We=ze[Ie];if(le.hasNode(We))return!0}return!1},Mt=function(Ut,le){for(var ze=Ut.edges(),Ie=0;Ie<ze.length;Ie++){var We=ze[Ie];if(le.hasEdge(We.v,We.w,We.name))return!0}return!1},zt=function(Ut,le){var ze=Ut.nodes(),Ie=ze.filter(function(We){return le.hasNode(We)});return Ie},Le=function(Ut,le){var ze=Ut.edges(),Ie=ze.filter(function(We){return le.hasEdge(We.v,We.w,We.name)});return Ie},Me=function(Ut,le){return Ut.isCompound()===le.isCompound()&&Ut.isDirected()===le.isDirected()&&Ut.isMultigraph()===le.isMultigraph()},qe=function(Ut,le){var ze=zt(Ut,le);return ze.length===Ut.nodes().length},br=function(Ut,le){var ze=Le(Ut,le);return ze.length===Ut.edges().length},xr=function(Ut,le){return Me(Ut,le)&&Ut.nodeCount()===le.nodeCount()&&qe(Ut,le)&&Ut.edgeCount()===le.edgeCount()&&br(Ut,le)},sn=function(Ut,le){return qe(Ut,le)&&br(Ut,le)};function Rn(se,Ut){return gn(se)||Nn(se,Ut)||Sr(se,Ut)||tr()}function tr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sr(se,Ut){if(!!se){if(typeof se=="string")return jr(se,Ut);var le=Object.prototype.toString.call(se).slice(8,-1);if(le==="Object"&&se.constructor&&(le=se.constructor.name),le==="Map"||le==="Set")return Array.from(se);if(le==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(le))return jr(se,Ut)}}function jr(se,Ut){(Ut==null||Ut>se.length)&&(Ut=se.length);for(var le=0,ze=new Array(Ut);le<Ut;le++)ze[le]=se[le];return ze}function Nn(se,Ut){var le=se==null?null:typeof Symbol!="undefined"&&se[Symbol.iterator]||se["@@iterator"];if(le!=null){var ze=[],Ie=!0,We=!1,_r,nn;try{for(le=le.call(se);!(Ie=(_r=le.next()).done)&&(ze.push(_r.value),!(Ut&&ze.length===Ut));Ie=!0);}catch(pn){We=!0,nn=pn}finally{try{!Ie&&le.return!=null&&le.return()}finally{if(We)throw nn}}return ze}}function gn(se){if(Array.isArray(se))return se}function ea(se){return se instanceof J}function ha(se){if(se.isMultigraph())return!1;for(var Ut=se.edges(),le=new Map,ze=0;ze<Ut.length;ze++){var Ie=Ut[ze];if(Ie.v===Ie.w)return!1;var We=[Ie.v,Ie.w].sort(),_r=Rn(We,2),nn=_r[0],pn=_r[1],Gn="".concat(nn,"-").concat(pn);if(le.has(Gn))return!1;le.set(Gn,!0)}return!0}function Zn(se){return se.nodes().length===0}function na(se){for(var Ut=se.edges(),le=0;le<Ut.length;le++){var ze=Ut[le];if(ze.v===ze.w)return!0}return!1}var da=function(Ut,le){if(!ha(Ut)||!ha(le)||!qe(Ut,le)||Mt(Ut,le))return!1;var ze=Ut.nodeCount();return Ut.edgeCount()+le.edgeCount()===ze*(ze-1)/2},Vn=function(Ut){if(!ha(Ut))return null;for(var le=Ut.nodeCount(),ze=new J({compound:Ut.isCompound(),directed:Ut.isDirected(),multigraph:Ut.isMultigraph()}),Ie=Ut.nodes(),We=0;We<le;We++){var _r=Ie[We];ze.setNode(_r,Ut.node(_r));for(var nn=We+1;nn<le;nn++){var pn=Ie[nn];Ut.hasEdge(_r,pn)||ze.setEdge(_r,pn)}}return ze}},81746:function(Mr){(function(R,L){Mr.exports=L()})(typeof self!="undefined"?self:this,function(){return function(G){var R={};function L(z){if(R[z])return R[z].exports;var F=R[z]={i:z,l:!1,exports:{}};return G[z].call(F.exports,F,F.exports,L),F.l=!0,F.exports}return L.m=G,L.c=R,L.d=function(z,F,I){L.o(z,F)||Object.defineProperty(z,F,{configurable:!1,enumerable:!0,get:I})},L.n=function(z){var F=z&&z.__esModule?function(){return z.default}:function(){return z};return L.d(F,"a",F),F},L.o=function(z,F){return Object.prototype.hasOwnProperty.call(z,F)},L.p="",L(L.s=31)}([function(G,R,L){"use strict";var z=L(4);R.a=function(F){return Array.isArray?Array.isArray(F):Object(z.a)(F,"Array")}},function(G,R,L){"use strict";var z=function(F){return F!==null&&typeof F!="function"&&isFinite(F.length)};R.a=z},function(G,R,L){"use strict";var z=L(0),F=L(13);function I(k,D){if(!!k){var b;if(Object(z.a)(k))for(var E=0,p=k.length;E<p&&(b=D(k[E],E),b!==!1);E++);else if(Object(F.a)(k)){for(var y in k)if(k.hasOwnProperty(y)&&(b=D(k[y],y),b===!1))break}}}R.a=I},function(G,R,L){"use strict";var z=L(4);R.a=function(F){return Object(z.a)(F,"Function")}},function(G,R,L){"use strict";var z={}.toString,F=function(I,k){return z.call(I)==="[object "+k+"]"};R.a=F},function(G,R,L){"use strict";var z=L(4),F=function(I){return Object(z.a)(I,"Number")};R.a=F},function(G,R,L){"use strict";var z=function(F){return F==null};R.a=z},function(G,R,L){var z=L(33),F=z.mix;G.exports={assign:F}},function(G,R,L){"use strict";var z=L(4);R.a=function(F){return Object(z.a)(F,"String")}},function(G,R,L){"use strict";var z=L(15),F=L(4),I=function(k){if(!Object(z.a)(k)||!Object(F.a)(k,"Object"))return!1;if(Object.getPrototypeOf(k)===null)return!0;for(var D=k;Object.getPrototypeOf(D)!==null;)D=Object.getPrototypeOf(D);return Object.getPrototypeOf(k)===D};R.a=I},function(G,R,L){"use strict";var z=L(6);R.a=function(F){return Object(z.a)(F)?"":F.toString()}},function(G,R,L){var z=L(18),F=function(){function I(D,b){b===void 0&&(b={});var E=this;E.options=b,E.rootNode=z(D,b)}var k=I.prototype;return k.execute=function(){throw new Error("please override this method")},I}();G.exports=F},function(G,R,L){"use strict";var z=L(1),F=function(I,k){return Object(z.a)(I)?I.indexOf(k)>-1:!1};R.a=F},function(G,R,L){"use strict";R.a=function(z){var F=typeof z;return z!==null&&F==="object"||F==="function"}},function(G,R,L){"use strict";var z=L(2),F=L(1),I=function(k,D){if(!Object(F.a)(k))return k;var b=[];return Object(z.a)(k,function(E,p){D(E,p)&&b.push(E)}),b};R.a=I},function(G,R,L){"use strict";var z=function(F){return typeof F=="object"&&F!==null};R.a=z},function(G,R,L){"use strict";R.a=F;function z(I,k){for(var D in k)k.hasOwnProperty(D)&&D!=="constructor"&&k[D]!==void 0&&(I[D]=k[D])}function F(I,k,D,b){return k&&z(I,k),D&&z(I,D),b&&z(I,b),I}},function(G,R,L){var z=L(30),F=["LR","RL","TB","BT","H","V"],I=["LR","RL","H"],k=function(E){return I.indexOf(E)>-1},D=F[0];G.exports=function(b,E,p){var y=E.direction||D;if(E.isHorizontal=k(y),y&&F.indexOf(y)===-1)throw new TypeError("Invalid direction: "+y);if(y===F[0])p(b,E);else if(y===F[1])p(b,E),b.right2left();else if(y===F[2])p(b,E);else if(y===F[3])p(b,E),b.bottom2top();else if(y===F[4]||y===F[5]){var g=z(b,E),T=g.left,x=g.right;p(T,E),p(x,E),E.isHorizontal?T.right2left():T.bottom2top(),x.translate(T.x-x.x,T.y-x.y),b.x=T.x,b.y=x.y;var S=b.getBoundingBox();E.isHorizontal?S.top<0&&b.translate(0,-S.top):S.left<0&&b.translate(-S.left,0)}var N=E.fixedRoot;return N===void 0&&(N=!0),N&&b.translate(-(b.x+b.width/2+b.hgap),-(b.y+b.height/2+b.vgap)),b}},function(G,R,L){var z=L(7),F=18,I=F*2,k=F,D={getId:function(y){return y.id||y.name},getPreH:function(y){return y.preH||0},getPreV:function(y){return y.preV||0},getHGap:function(y){return y.hgap||k},getVGap:function(y){return y.vgap||k},getChildren:function(y){return y.children},getHeight:function(y){return y.height||I},getWidth:function(y){var g=y.label||" ";return y.width||g.split("").length*F}};function b(p,y){var g=this;if(g.vgap=g.hgap=0,p instanceof b)return p;g.data=p;var T=y.getHGap(p),x=y.getVGap(p);return g.preH=y.getPreH(p),g.preV=y.getPreV(p),g.width=y.getWidth(p),g.height=y.getHeight(p),g.width+=g.preH,g.height+=g.preV,g.id=y.getId(p),g.x=g.y=0,g.depth=0,g.children||(g.children=[]),g.addGap(T,x),g}z.assign(b.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(y,g){var T=this;T.hgap+=y,T.vgap+=g,T.width+=2*y,T.height+=2*g},eachNode:function(y){for(var g=this,T=[g],x;x=T.shift();)y(x),T=x.children.concat(T)},DFTraverse:function(y){this.eachNode(y)},BFTraverse:function(y){for(var g=this,T=[g],x;x=T.shift();)y(x),T=T.concat(x.children)},getBoundingBox:function(){var y={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(g){y.left=Math.min(y.left,g.x),y.top=Math.min(y.top,g.y),y.width=Math.max(y.width,g.x+g.width),y.height=Math.max(y.height,g.y+g.height)}),y},translate:function(y,g){y===void 0&&(y=0),g===void 0&&(g=0),this.eachNode(function(T){T.x+=y,T.y+=g,T.x+=T.preH,T.y+=T.preV})},right2left:function(){var y=this,g=y.getBoundingBox();y.eachNode(function(T){T.x=T.x-(T.x-g.left)*2-T.width}),y.translate(g.width,0)},bottom2top:function(){var y=this,g=y.getBoundingBox();y.eachNode(function(T){T.y=T.y-(T.y-g.top)*2-T.height}),y.translate(0,g.height)}});function E(p,y,g){y===void 0&&(y={}),y=z.assign({},D,y);var T=new b(p,y),x=[T],S;if(!g&&!p.collapsed){for(;S=x.shift();)if(!S.data.collapsed){var N=y.getChildren(S.data),m=N?N.length:0;if(S.children=new Array(m),N&&m)for(var d=0;d<m;d++){var V=new b(N[d],y);S.children[d]=V,x.push(V),V.parent=S,V.depth=S.depth+1}}}return T}G.exports=E},function(G,R,L){"use strict";var z=L(6),F=L(20);function I(k,D){var b=Object(F.a)(D),E=b.length;if(Object(z.a)(k))return!E;for(var p=0;p<E;p+=1){var y=b[p];if(D[y]!==k[y]||!(y in k))return!1}return!0}R.a=I},function(G,R,L){"use strict";var z=L(2),F=L(3),I=Object.keys?function(k){return Object.keys(k)}:function(k){var D=[];return Object(z.a)(k,function(b,E){Object(F.a)(k)&&E==="prototype"||D.push(E)}),D};R.a=I},function(G,R,L){"use strict";var z=L(1),F=Array.prototype.splice,I=function(D,b){if(!Object(z.a)(D))return[];for(var E=D?b.length:0,p=E-1;E--;){var y=void 0,g=b[E];(E===p||g!==y)&&(y=g,F.call(D,g,1))}return D};R.a=I},function(G,R,L){"use strict";var z=L(12),F=L(2),I=function(k){var D=[];return Object(F.a)(k,function(b){Object(z.a)(D,b)||D.push(b)}),D};R.a=I},function(G,R,L){"use strict";var z=L(0),F=L(3),I=L(24),k=function(D,b){if(!b)return{0:D};if(!Object(F.a)(b)){var E=Object(z.a)(b)?b:b.replace(/\s+/g,"").split("*");b=function(y){for(var g="_",T=0,x=E.length;T<x;T++)g+=y[E[T]]&&y[E[T]].toString();return g}}var p=Object(I.a)(D,b);return p};R.a=k},function(G,R,L){"use strict";var z=L(2),F=L(0),I=L(3),k=Object.prototype.hasOwnProperty;function D(b,E){if(!E||!Object(F.a)(b))return{};var p={},y=Object(I.a)(E)?E:function(T){return T[E]},g;return Object(z.a)(b,function(T){g=y(T),k.call(p,g)?p[g].push(T):p[g]=[T]}),p}R.a=D},function(G,R,L){"use strict";R.a=function(z,F){return z.hasOwnProperty(F)}},function(G,R,L){"use strict";var z=L(2),F=L(3),I=Object.values?function(k){return Object.values(k)}:function(k){var D=[];return Object(z.a)(k,function(b,E){Object(F.a)(k)&&E==="prototype"||D.push(b)}),D};R.a=I},function(G,R,L){"use strict";var z={}.toString,F=function(I){return z.call(I).replace(/^\[object /,"").replace(/]$/,"")};R.a=F},function(G,R,L){"use strict";var z=Object.prototype,F=function(I){var k=I&&I.constructor,D=typeof k=="function"&&k.prototype||z;return I===D};R.a=F},function(G,R,L){"use strict";var z=L(15),F=L(1),I=L(8),k=function(D,b){if(D===b)return!0;if(!D||!b||Object(I.a)(D)||Object(I.a)(b))return!1;if(Object(F.a)(D)||Object(F.a)(b)){if(D.length!==b.length)return!1;for(var E=!0,p=0;p<D.length&&(E=k(D[p],b[p]),!!E);p++);return E}if(Object(z.a)(D)||Object(z.a)(b)){var y=Object.keys(D),g=Object.keys(b);if(y.length!==g.length)return!1;for(var E=!0,p=0;p<y.length&&(E=k(D[y[p]],b[y[p]]),!!E);p++);return E}return!1};R.a=k},function(G,R,L){var z=L(18);G.exports=function(F,I){for(var k=z(F.data,I,!0),D=z(F.data,I,!0),b=F.children.length,E=Math.round(b/2),p=I.getSide||function(x,S){return S<E?"right":"left"},y=0;y<b;y++){var g=F.children[y],T=p(g,y);T==="right"?D.children.push(g):k.children.push(g)}return k.eachNode(function(x){x.isRoot()||(x.side="left")}),D.eachNode(function(x){x.isRoot()||(x.side="right")}),{left:k,right:D}}},function(G,R,L){var z={compactBox:L(32),dendrogram:L(114),indented:L(116),mindmap:L(118)};G.exports=z},function(G,R,L){function z(y,g){y.prototype=Object.create(g.prototype),y.prototype.constructor=y,y.__proto__=g}var F=L(11),I=L(113),k=L(17),D=L(7),b=function(y){z(g,y);function g(){return y.apply(this,arguments)||this}var T=g.prototype;return T.execute=function(){var S=this;return k(S.rootNode,S.options,I)},g}(F),E={};function p(y,g){return g=D.assign({},E,g),new b(y,g).execute()}G.exports=p},function(G,R,L){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=L(12);L.d(R,"contains",function(){return z.a}),L.d(R,"includes",function(){return z.a});var F=L(34);L.d(R,"difference",function(){return F.a});var I=L(35);L.d(R,"find",function(){return I.a});var k=L(36);L.d(R,"findIndex",function(){return k.a});var D=L(37);L.d(R,"firstValue",function(){return D.a});var b=L(38);L.d(R,"flatten",function(){return b.a});var E=L(39);L.d(R,"flattenDeep",function(){return E.a});var p=L(40);L.d(R,"getRange",function(){return p.a});var y=L(41);L.d(R,"pull",function(){return y.a});var g=L(21);L.d(R,"pullAt",function(){return g.a});var T=L(42);L.d(R,"reduce",function(){return T.a});var x=L(43);L.d(R,"remove",function(){return x.a});var S=L(44);L.d(R,"sortBy",function(){return S.a});var N=L(45);L.d(R,"union",function(){return N.a});var m=L(22);L.d(R,"uniq",function(){return m.a});var d=L(46);L.d(R,"valuesOfKey",function(){return d.a});var V=L(47);L.d(R,"head",function(){return V.a});var Q=L(48);L.d(R,"last",function(){return Q.a});var j=L(49);L.d(R,"startsWith",function(){return j.a});var X=L(50);L.d(R,"endsWith",function(){return X.a});var K=L(14);L.d(R,"filter",function(){return K.a});var J=L(51);L.d(R,"every",function(){return J.a});var rt=L(52);L.d(R,"some",function(){return rt.a});var tt=L(53);L.d(R,"group",function(){return tt.a});var nt=L(24);L.d(R,"groupBy",function(){return nt.a});var lt=L(23);L.d(R,"groupToMap",function(){return lt.a});var xt=L(54);L.d(R,"getWrapBehavior",function(){return xt.a});var jt=L(55);L.d(R,"wrapBehavior",function(){return jt.a});var Dt=L(56);L.d(R,"number2color",function(){return Dt.a});var Zt=L(57);L.d(R,"parseRadius",function(){return Zt.a});var Vt=L(58);L.d(R,"clamp",function(){return Vt.a});var ue=L(59);L.d(R,"fixedBase",function(){return ue.a});var dt=L(60);L.d(R,"isDecimal",function(){return dt.a});var Ot=L(61);L.d(R,"isEven",function(){return Ot.a});var ee=L(62);L.d(R,"isInteger",function(){return ee.a});var Re=L(63);L.d(R,"isNegative",function(){return Re.a});var me=L(64);L.d(R,"isNumberEqual",function(){return me.a});var Ae=L(65);L.d(R,"isOdd",function(){return Ae.a});var Be=L(66);L.d(R,"isPositive",function(){return Be.a});var Ke=L(67);L.d(R,"maxBy",function(){return Ke.a});var $t=L(68);L.d(R,"minBy",function(){return $t.a});var ce=L(69);L.d(R,"mod",function(){return ce.a});var we=L(70);L.d(R,"toDegree",function(){return we.a});var Pe=L(71);L.d(R,"toInteger",function(){return Pe.a});var ye=L(72);L.d(R,"toRadian",function(){return ye.a});var Bt=L(73);L.d(R,"forIn",function(){return Bt.a});var re=L(25);L.d(R,"has",function(){return re.a});var Ee=L(74);L.d(R,"hasKey",function(){return Ee.a});var It=L(75);L.d(R,"hasValue",function(){return It.a});var Et=L(20);L.d(R,"keys",function(){return Et.a});var Wt=L(19);L.d(R,"isMatch",function(){return Wt.a});var fe=L(26);L.d(R,"values",function(){return fe.a});var Fe=L(76);L.d(R,"lowerCase",function(){return Fe.a});var $e=L(77);L.d(R,"lowerFirst",function(){return $e.a});var Lt=L(78);L.d(R,"substitute",function(){return Lt.a});var Ne=L(79);L.d(R,"upperCase",function(){return Ne.a});var Xe=L(80);L.d(R,"upperFirst",function(){return Xe.a});var Dr=L(27);L.d(R,"getType",function(){return Dr.a});var ur=L(81);L.d(R,"isArguments",function(){return ur.a});var Or=L(0);L.d(R,"isArray",function(){return Or.a});var ln=L(1);L.d(R,"isArrayLike",function(){return ln.a});var fn=L(82);L.d(R,"isBoolean",function(){return fn.a});var Xr=L(83);L.d(R,"isDate",function(){return Xr.a});var Cn=L(84);L.d(R,"isError",function(){return Cn.a});var Qr=L(3);L.d(R,"isFunction",function(){return Qr.a});var Gr=L(85);L.d(R,"isFinite",function(){return Gr.a});var on=L(6);L.d(R,"isNil",function(){return on.a});var sr=L(86);L.d(R,"isNull",function(){return sr.a});var lr=L(5);L.d(R,"isNumber",function(){return lr.a});var Qe=L(13);L.d(R,"isObject",function(){return Qe.a});var $r=L(15);L.d(R,"isObjectLike",function(){return $r.a});var an=L(9);L.d(R,"isPlainObject",function(){return an.a});var bn=L(28);L.d(R,"isPrototype",function(){return bn.a});var nr=L(87);L.d(R,"isRegExp",function(){return nr.a});var Tr=L(8);L.d(R,"isString",function(){return Tr.a});var ar=L(4);L.d(R,"isType",function(){return ar.a});var vr=L(88);L.d(R,"isUndefined",function(){return vr.a});var Br=L(89);L.d(R,"isElement",function(){return Br.a});var Fr=L(90);L.d(R,"requestAnimationFrame",function(){return Fr.a});var kr=L(91);L.d(R,"clearAnimationFrame",function(){return kr.a});var Z=L(92);L.d(R,"augment",function(){return Z.a});var Te=L(93);L.d(R,"clone",function(){return Te.a});var ne=L(94);L.d(R,"debounce",function(){return ne.a});var it=L(95);L.d(R,"memoize",function(){return it.a});var ot=L(96);L.d(R,"deepMix",function(){return ot.a});var B=L(2);L.d(R,"each",function(){return B.a});var _=L(97);L.d(R,"extend",function(){return _.a});var C=L(98);L.d(R,"indexOf",function(){return C.a});var Y=L(99);L.d(R,"isEmpty",function(){return Y.a});var pt=L(29);L.d(R,"isEqual",function(){return pt.a});var _t=L(100);L.d(R,"isEqualWith",function(){return _t.a});var Mt=L(101);L.d(R,"map",function(){return Mt.a});var zt=L(102);L.d(R,"mapValues",function(){return zt.a});var Le=L(16);L.d(R,"mix",function(){return Le.a}),L.d(R,"assign",function(){return Le.a});var Me=L(103);L.d(R,"get",function(){return Me.a});var qe=L(104);L.d(R,"set",function(){return qe.a});var br=L(105);L.d(R,"pick",function(){return br.a});var xr=L(106);L.d(R,"throttle",function(){return xr.a});var sn=L(107);L.d(R,"toArray",function(){return sn.a});var Rn=L(10);L.d(R,"toString",function(){return Rn.a});var tr=L(108);L.d(R,"uniqueId",function(){return tr.a});var Sr=L(109);L.d(R,"noop",function(){return Sr.a});var jr=L(110);L.d(R,"identity",function(){return jr.a});var Nn=L(111);L.d(R,"size",function(){return Nn.a});var gn=L(112);L.d(R,"Cache",function(){return gn.a})},function(G,R,L){"use strict";var z=L(14),F=L(12),I=function(k,D){return D===void 0&&(D=[]),Object(z.a)(k,function(b){return!Object(F.a)(D,b)})};R.a=I},function(G,R,L){"use strict";var z=L(3),F=L(19),I=L(0),k=L(9);function D(b,E){if(!Object(I.a)(b))return null;var p;if(Object(z.a)(E)&&(p=E),Object(k.a)(E)&&(p=function(g){return Object(F.a)(g,E)}),p){for(var y=0;y<b.length;y+=1)if(p(b[y]))return b[y]}return null}R.a=D},function(G,R,L){"use strict";function z(F,I,k){k===void 0&&(k=0);for(var D=k;D<F.length;D++)if(I(F[D],D))return D;return-1}R.a=z},function(G,R,L){"use strict";var z=L(6),F=L(0),I=function(k,D){for(var b=null,E=0;E<k.length;E++){var p=k[E],y=p[D];if(!Object(z.a)(y)){Object(F.a)(y)?b=y[0]:b=y;break}}return b};R.a=I},function(G,R,L){"use strict";var z=L(0),F=function(I){if(!Object(z.a)(I))return[];for(var k=[],D=0;D<I.length;D++)k=k.concat(I[D]);return k};R.a=F},function(G,R,L){"use strict";var z=L(0),F=function(I,k){if(k===void 0&&(k=[]),!Object(z.a)(I))k.push(I);else for(var D=0;D<I.length;D+=1)F(I[D],k);return k};R.a=F},function(G,R,L){"use strict";var z=L(0),F=L(14),I=function(k){if(k=Object(F.a)(k,function(y){return!isNaN(y)}),!k.length)return{min:0,max:0};if(Object(z.a)(k[0])){for(var D=[],b=0;b<k.length;b++)D=D.concat(k[b]);k=D}var E=Math.max.apply(null,k),p=Math.min.apply(null,k);return{min:p,max:E}};R.a=I},function(G,R,L){"use strict";var z=Array.prototype,F=z.splice,I=z.indexOf,k=function(D){for(var b=[],E=1;E<arguments.length;E++)b[E-1]=arguments[E];for(var p=0;p<b.length;p++)for(var y=b[p],g=-1;(g=I.call(D,y))>-1;)F.call(D,g,1);return D};R.a=k},function(G,R,L){"use strict";var z=L(2),F=L(0),I=L(9),k=function(D,b,E){if(!Object(F.a)(D)&&!Object(I.a)(D))return D;var p=E;return Object(z.a)(D,function(y,g){p=b(p,y,g)}),p};R.a=k},function(G,R,L){"use strict";var z=L(1),F=L(21),I=function(k,D){var b=[];if(!Object(z.a)(k))return b;for(var E=-1,p=[],y=k.length;++E<y;){var g=k[E];D(g,E,k)&&(b.push(g),p.push(E))}return Object(F.a)(k,p),b};R.a=I},function(G,R,L){"use strict";var z=L(0),F=L(8),I=L(3);function k(D,b){var E;if(Object(I.a)(b))E=function(y,g){return b(y)-b(g)};else{var p=[];Object(F.a)(b)?p.push(b):Object(z.a)(b)&&(p=b),E=function(y,g){for(var T=0;T<p.length;T+=1){var x=p[T];if(y[x]>g[x])return 1;if(y[x]<g[x])return-1}return 0}}return D.sort(E),D}R.a=k},function(G,R,L){"use strict";var z=L(22),F=function(){for(var I=[],k=0;k<arguments.length;k++)I[k]=arguments[k];return Object(z.a)([].concat.apply([],I))};R.a=F},function(G,R,L){"use strict";var z=L(2),F=L(0),I=L(6);R.a=function(k,D){var b=[],E={};return k.forEach(function(p){var y=p[D];Object(I.a)(y)||(Object(F.a)(y)||(y=[y]),Object(z.a)(y,function(g){E[g]||(b.push(g),E[g]=!0)}))}),b}},function(G,R,L){"use strict";R.a=F;var z=L(1);function F(I){if(Object(z.a)(I))return I[0]}},function(G,R,L){"use strict";R.a=F;var z=L(1);function F(I){if(Object(z.a)(I)){var k=I;return k[k.length-1]}}},function(G,R,L){"use strict";var z=L(0),F=L(8);function I(k,D){return Object(z.a)(k)||Object(F.a)(k)?k[0]===D:!1}R.a=I},function(G,R,L){"use strict";var z=L(0),F=L(8);function I(k,D){return Object(z.a)(k)||Object(F.a)(k)?k[k.length-1]===D:!1}R.a=I},function(G,R,L){"use strict";var z=function(F,I){for(var k=0;k<F.length;k++)if(!I(F[k],k))return!1;return!0};R.a=z},function(G,R,L){"use strict";var z=function(F,I){for(var k=0;k<F.length;k++)if(I(F[k],k))return!0;return!1};R.a=z},function(G,R,L){"use strict";var z=L(23);R.a=function(F,I){if(!I)return[F];var k=Object(z.a)(F,I),D=[];for(var b in k)D.push(k[b]);return D}},function(G,R,L){"use strict";function z(F,I){return F["_wrap_"+I]}R.a=z},function(G,R,L){"use strict";function z(F,I){if(F["_wrap_"+I])return F["_wrap_"+I];var k=function(D){F[I](D)};return F["_wrap_"+I]=k,k}R.a=z},function(G,R,L){"use strict";var z={};function F(I){var k=z[I];if(!k){for(var D=I.toString(16),b=D.length;b<6;b++)D="0"+D;k="#"+D,z[I]=k}return k}R.a=F},function(G,R,L){"use strict";var z=L(0);function F(I){var k=0,D=0,b=0,E=0;return Object(z.a)(I)?I.length===1?k=D=b=E=I[0]:I.length===2?(k=b=I[0],D=E=I[1]):I.length===3?(k=I[0],D=E=I[1],b=I[2]):(k=I[0],D=I[1],b=I[2],E=I[3]):k=D=b=E=I,{r1:k,r2:D,r3:b,r4:E}}R.a=F},function(G,R,L){"use strict";var z=function(F,I,k){return F<I?I:F>k?k:F};R.a=z},function(G,R,L){"use strict";var z=function(F,I){var k=I.toString(),D=k.indexOf(".");if(D===-1)return Math.round(F);var b=k.substr(D+1).length;return b>20&&(b=20),parseFloat(F.toFixed(b))};R.a=z},function(G,R,L){"use strict";var z=L(5),F=function(I){return Object(z.a)(I)&&I%1!=0};R.a=F},function(G,R,L){"use strict";var z=L(5),F=function(I){return Object(z.a)(I)&&I%2==0};R.a=F},function(G,R,L){"use strict";var z=L(5),F=Number.isInteger?Number.isInteger:function(I){return Object(z.a)(I)&&I%1==0};R.a=F},function(G,R,L){"use strict";var z=L(5),F=function(I){return Object(z.a)(I)&&I<0};R.a=F},function(G,R,L){"use strict";R.a=F;var z=1e-5;function F(I,k,D){return D===void 0&&(D=z),Math.abs(I-k)<D}},function(G,R,L){"use strict";var z=L(5),F=function(I){return Object(z.a)(I)&&I%2!=0};R.a=F},function(G,R,L){"use strict";var z=L(5),F=function(I){return Object(z.a)(I)&&I>0};R.a=F},function(G,R,L){"use strict";var z=L(2),F=L(0),I=L(3);R.a=function(k,D){if(!!Object(F.a)(k)){var b=k[0],E;Object(I.a)(D)?E=D(k[0]):E=k[0][D];var p;return Object(z.a)(k,function(y){Object(I.a)(D)?p=D(y):p=y[D],p>E&&(b=y,E=p)}),b}}},function(G,R,L){"use strict";var z=L(2),F=L(0),I=L(3);R.a=function(k,D){if(!!Object(F.a)(k)){var b=k[0],E;Object(I.a)(D)?E=D(k[0]):E=k[0][D];var p;return Object(z.a)(k,function(y){Object(I.a)(D)?p=D(y):p=y[D],p<E&&(b=y,E=p)}),b}}},function(G,R,L){"use strict";var z=function(F,I){return(F%I+I)%I};R.a=z},function(G,R,L){"use strict";var z=180/Math.PI,F=function(I){return z*I};R.a=F},function(G,R,L){"use strict";R.a=parseInt},function(G,R,L){"use strict";var z=Math.PI/180,F=function(I){return z*I};R.a=F},function(G,R,L){"use strict";var z=L(2);R.a=z.a},function(G,R,L){"use strict";var z=L(25);R.a=z.a},function(G,R,L){"use strict";var z=L(12),F=L(26);R.a=function(I,k){return Object(z.a)(Object(F.a)(I),k)}},function(G,R,L){"use strict";var z=L(10),F=function(I){return Object(z.a)(I).toLowerCase()};R.a=F},function(G,R,L){"use strict";var z=L(10),F=function(I){var k=Object(z.a)(I);return k.charAt(0).toLowerCase()+k.substring(1)};R.a=F},function(G,R,L){"use strict";function z(F,I){return!F||!I?F:F.replace(/\\?\{([^{}]+)\}/g,function(k,D){return k.charAt(0)==="\\"?k.slice(1):I[D]===void 0?"":I[D]})}R.a=z},function(G,R,L){"use strict";var z=L(10),F=function(I){return Object(z.a)(I).toUpperCase()};R.a=F},function(G,R,L){"use strict";var z=L(10),F=function(I){var k=Object(z.a)(I);return k.charAt(0).toUpperCase()+k.substring(1)};R.a=F},function(G,R,L){"use strict";var z=L(4),F=function(I){return Object(z.a)(I,"Arguments")};R.a=F},function(G,R,L){"use strict";var z=L(4),F=function(I){return Object(z.a)(I,"Boolean")};R.a=F},function(G,R,L){"use strict";var z=L(4),F=function(I){return Object(z.a)(I,"Date")};R.a=F},function(G,R,L){"use strict";var z=L(4),F=function(I){return Object(z.a)(I,"Error")};R.a=F},function(G,R,L){"use strict";var z=L(5);R.a=function(F){return Object(z.a)(F)&&isFinite(F)}},function(G,R,L){"use strict";var z=function(F){return F===null};R.a=z},function(G,R,L){"use strict";var z=L(4),F=function(I){return Object(z.a)(I,"RegExp")};R.a=F},function(G,R,L){"use strict";var z=function(F){return F===void 0};R.a=z},function(G,R,L){"use strict";var z=function(F){return F instanceof Element||F instanceof HTMLDocument};R.a=z},function(G,R,L){"use strict";R.a=z;function z(F){var I=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(k){return setTimeout(k,16)};return I(F)}},function(G,R,L){"use strict";R.a=z;function z(F){var I=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;I(F)}},function(G,R,L){"use strict";var z=L(16),F=L(3),I=function(){for(var k=[],D=0;D<arguments.length;D++)k[D]=arguments[D];for(var b=k[0],E=1;E<k.length;E++){var p=k[E];Object(F.a)(p)&&(p=p.prototype),Object(z.a)(b.prototype,p)}};R.a=I},function(G,R,L){"use strict";var z=L(0),F=function(I){if(typeof I!="object"||I===null)return I;var k;if(Object(z.a)(I)){k=[];for(var D=0,b=I.length;D<b;D++)typeof I[D]=="object"&&I[D]!=null?k[D]=F(I[D]):k[D]=I[D]}else{k={};for(var E in I)typeof I[E]=="object"&&I[E]!=null?k[E]=F(I[E]):k[E]=I[E]}return k};R.a=F},function(G,R,L){"use strict";function z(F,I,k){var D;return function(){var b=this,E=arguments,p=function(){D=null,k||F.apply(b,E)},y=k&&!D;clearTimeout(D),D=setTimeout(p,I),y&&F.apply(b,E)}}R.a=z},function(G,R,L){"use strict";var z=L(3);R.a=function(F,I){if(!Object(z.a)(F))throw new TypeError("Expected a function");var k=function(){for(var D=[],b=0;b<arguments.length;b++)D[b]=arguments[b];var E=I?I.apply(this,D):D[0],p=k.cache;if(p.has(E))return p.get(E);var y=F.apply(this,D);return p.set(E,y),y};return k.cache=new Map,k}},function(G,R,L){"use strict";var z=L(0),F=L(9),I=5;function k(b,E,p,y){p=p||0,y=y||I;for(var g in E)if(E.hasOwnProperty(g)){var T=E[g];T!==null&&Object(F.a)(T)?(Object(F.a)(b[g])||(b[g]={}),p<y?k(b[g],T,p+1,y):b[g]=E[g]):Object(z.a)(T)?(b[g]=[],b[g]=b[g].concat(T)):T!==void 0&&(b[g]=T)}}var D=function(b){for(var E=[],p=1;p<arguments.length;p++)E[p-1]=arguments[p];for(var y=0;y<E.length;y+=1)k(b,E[y]);return b};R.a=D},function(G,R,L){"use strict";var z=L(16),F=L(3),I=function(k,D,b,E){Object(F.a)(D)||(b=D,D=k,k=function(){});var p=Object.create?function(g,T){return Object.create(g,{constructor:{value:T}})}:function(g,T){function x(){}x.prototype=g;var S=new x;return S.constructor=T,S},y=p(D.prototype,k);return k.prototype=Object(z.a)(y,k.prototype),k.superclass=p(D.prototype,D),Object(z.a)(y,b),Object(z.a)(k,E),k};R.a=I},function(G,R,L){"use strict";var z=L(1),F=function(I,k){if(!Object(z.a)(I))return-1;var D=Array.prototype.indexOf;if(D)return D.call(I,k);for(var b=-1,E=0;E<I.length;E++)if(I[E]===k){b=E;break}return b};R.a=F},function(G,R,L){"use strict";var z=L(6),F=L(1),I=L(27),k=L(28),D=Object.prototype.hasOwnProperty;function b(E){if(Object(z.a)(E))return!0;if(Object(F.a)(E))return!E.length;var p=Object(I.a)(E);if(p==="Map"||p==="Set")return!E.size;if(Object(k.a)(E))return!Object.keys(E).length;for(var y in E)if(D.call(E,y))return!1;return!0}R.a=b},function(G,R,L){"use strict";var z=L(3),F=L(29);R.a=function(I,k,D){return Object(z.a)(D)?!!D(I,k):Object(F.a)(I,k)}},function(G,R,L){"use strict";var z=L(2),F=L(1),I=function(k,D){if(!Object(F.a)(k))return k;var b=[];return Object(z.a)(k,function(E,p){b.push(D(E,p))}),b};R.a=I},function(G,R,L){"use strict";var z=L(6),F=L(13),I=function(k){return k};R.a=function(k,D){D===void 0&&(D=I);var b={};return Object(F.a)(k)&&!Object(z.a)(k)&&Object.keys(k).forEach(function(E){b[E]=D(k[E],E)}),b}},function(G,R,L){"use strict";var z=L(8);R.a=function(F,I,k){for(var D=0,b=Object(z.a)(I)?I.split("."):I;F&&D<b.length;)F=F[b[D++]];return F===void 0||D<b.length?k:F}},function(G,R,L){"use strict";var z=L(13),F=L(8),I=L(5);R.a=function(k,D,b){var E=k,p=Object(F.a)(D)?D.split("."):D;return p.forEach(function(y,g){g<p.length-1?(Object(z.a)(E[y])||(E[y]=Object(I.a)(p[g+1])?[]:{}),E=E[y]):E[y]=b}),k}},function(G,R,L){"use strict";var z=L(2),F=L(9),I=Object.prototype.hasOwnProperty;R.a=function(k,D){if(k===null||!Object(F.a)(k))return{};var b={};return Object(z.a)(D,function(E){I.call(k,E)&&(b[E]=k[E])}),b}},function(G,R,L){"use strict";R.a=function(z,F,I){var k,D,b,E,p=0;I||(I={});var y=function(){p=I.leading===!1?0:Date.now(),k=null,E=z.apply(D,b),k||(D=b=null)},g=function(){var T=Date.now();!p&&I.leading===!1&&(p=T);var x=F-(T-p);return D=this,b=arguments,x<=0||x>F?(k&&(clearTimeout(k),k=null),p=T,E=z.apply(D,b),k||(D=b=null)):!k&&I.trailing!==!1&&(k=setTimeout(y,x)),E};return g.cancel=function(){clearTimeout(k),p=0,k=D=b=null},g}},function(G,R,L){"use strict";var z=L(1);R.a=function(F){return Object(z.a)(F)?Array.prototype.slice.call(F):[]}},function(G,R,L){"use strict";var z={};R.a=function(F){return F=F||"g",z[F]?z[F]+=1:z[F]=1,F+z[F]}},function(G,R,L){"use strict";R.a=function(){}},function(G,R,L){"use strict";R.a=function(z){return z}},function(G,R,L){"use strict";R.a=I;var z=L(6),F=L(1);function I(k){return Object(z.a)(k)?0:Object(F.a)(k)?k.length:Object.keys(k).length}},function(G,R,L){"use strict";var z=function(){function F(){this.map={}}return F.prototype.has=function(I){return this.map[I]!==void 0},F.prototype.get=function(I,k){var D=this.map[I];return D===void 0?k:D},F.prototype.set=function(I,k){this.map[I]=k},F.prototype.clear=function(){this.map={}},F.prototype.delete=function(I){delete this.map[I]},F.prototype.size=function(){return Object.keys(this.map).length},F}();R.a=z},function(G,R){function L(b,E,p,y){y===void 0&&(y=[]);var g=this;g.w=b||0,g.h=E||0,g.y=p||0,g.x=0,g.c=y||[],g.cs=y.length,g.prelim=0,g.mod=0,g.shift=0,g.change=0,g.tl=null,g.tr=null,g.el=null,g.er=null,g.msel=0,g.mser=0}L.fromNode=function(b,E){if(!b)return null;var p=[];return b.children.forEach(function(y){p.push(L.fromNode(y,E))}),E?new L(b.height,b.width,b.x,p):new L(b.width,b.height,b.y,p)};function z(b,E,p){p?b.y+=E:b.x+=E,b.children.forEach(function(y){z(y,E,p)})}function F(b,E){var p=E?b.y:b.x;return b.children.forEach(function(y){p=Math.min(F(y,E),p)}),p}function I(b,E){var p=F(b,E);z(b,-p,E)}function k(b,E,p){p?E.y=b.x:E.x=b.x,b.c.forEach(function(y,g){k(y,E.children[g],p)})}function D(b,E,p){p===void 0&&(p=0),E?(b.x=p,p+=b.width):(b.y=p,p+=b.height),b.children.forEach(function(y){D(y,E,p)})}G.exports=function(b,E){E===void 0&&(E={});var p=E.isHorizontal;function y(tt){if(tt.cs===0){g(tt);return}y(tt.c[0]);for(var nt=J(m(tt.c[0].el),0,null),lt=1;lt<tt.cs;++lt){y(tt.c[lt]);var xt=m(tt.c[lt].er);T(tt,lt,nt),nt=J(xt,lt,nt)}Q(tt),g(tt)}function g(tt){tt.cs===0?(tt.el=tt,tt.er=tt,tt.msel=tt.mser=0):(tt.el=tt.c[0].el,tt.msel=tt.c[0].msel,tt.er=tt.c[tt.cs-1].er,tt.mser=tt.c[tt.cs-1].mser)}function T(tt,nt,lt){for(var xt=tt.c[nt-1],jt=xt.mod,Dt=tt.c[nt],Zt=Dt.mod;xt!==null&&Dt!==null;){m(xt)>lt.low&&(lt=lt.nxt);var Vt=jt+xt.prelim+xt.w-(Zt+Dt.prelim);Vt>0&&(Zt+=Vt,x(tt,nt,lt.index,Vt));var ue=m(xt),dt=m(Dt);ue<=dt&&(xt=N(xt),xt!==null&&(jt+=xt.mod)),ue>=dt&&(Dt=S(Dt),Dt!==null&&(Zt+=Dt.mod))}!xt&&!!Dt?d(tt,nt,Dt,Zt):!!xt&&!Dt&&V(tt,nt,xt,jt)}function x(tt,nt,lt,xt){tt.c[nt].mod+=xt,tt.c[nt].msel+=xt,tt.c[nt].mser+=xt,X(tt,nt,lt,xt)}function S(tt){return tt.cs===0?tt.tl:tt.c[0]}function N(tt){return tt.cs===0?tt.tr:tt.c[tt.cs-1]}function m(tt){return tt.y+tt.h}function d(tt,nt,lt,xt){var jt=tt.c[0].el;jt.tl=lt;var Dt=xt-lt.mod-tt.c[0].msel;jt.mod+=Dt,jt.prelim-=Dt,tt.c[0].el=tt.c[nt].el,tt.c[0].msel=tt.c[nt].msel}function V(tt,nt,lt,xt){var jt=tt.c[nt].er;jt.tr=lt;var Dt=xt-lt.mod-tt.c[nt].mser;jt.mod+=Dt,jt.prelim-=Dt,tt.c[nt].er=tt.c[nt-1].er,tt.c[nt].mser=tt.c[nt-1].mser}function Q(tt){tt.prelim=(tt.c[0].prelim+tt.c[0].mod+tt.c[tt.cs-1].mod+tt.c[tt.cs-1].prelim+tt.c[tt.cs-1].w)/2-tt.w/2}function j(tt,nt){nt+=tt.mod,tt.x=tt.prelim+nt,K(tt);for(var lt=0;lt<tt.cs;lt++)j(tt.c[lt],nt)}function X(tt,nt,lt,xt){if(lt!==nt-1){var jt=nt-lt;tt.c[lt+1].shift+=xt/jt,tt.c[nt].shift-=xt/jt,tt.c[nt].change-=xt-xt/jt}}function K(tt){for(var nt=0,lt=0,xt=0;xt<tt.cs;xt++)nt+=tt.c[xt].shift,lt+=nt+tt.c[xt].change,tt.c[xt].mod+=lt}function J(tt,nt,lt){for(;lt!==null&&tt>=lt.low;)lt=lt.nxt;return{low:tt,index:nt,nxt:lt}}D(b,p);var rt=L.fromNode(b,p);return y(rt),j(rt,0),k(rt,b,p),I(b,p),b}},function(G,R,L){function z(y,g){y.prototype=Object.create(g.prototype),y.prototype.constructor=y,y.__proto__=g}var F=L(11),I=L(115),k=L(17),D=L(7),b=function(y){z(g,y);function g(){return y.apply(this,arguments)||this}var T=g.prototype;return T.execute=function(){var S=this;return S.rootNode.width=0,k(S.rootNode,S.options,I)},g}(F),E={};function p(y,g){return g=D.assign({},E,g),new b(y,g).execute()}G.exports=p},function(G,R,L){var z=L(7);function F(D,b){D===void 0&&(D=0),b===void 0&&(b=[]);var E=this;E.x=E.y=0,E.leftChild=E.rightChild=null,E.height=0,E.children=b}var I={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function k(D,b,E){E?(b.x=D.x,b.y=D.y):(b.x=D.y,b.y=D.x),D.children.forEach(function(p,y){k(p,b.children[y],E)})}G.exports=function(D,b){b===void 0&&(b={}),b=z.assign({},I,b);var E=0;function p(S){if(!S)return null;S.width=0,S.depth&&S.depth>E&&(E=S.depth);var N=S.children,m=N.length,d=new F(S.height,[]);return N.forEach(function(V,Q){var j=p(V);d.children.push(j),Q===0&&(d.leftChild=j),Q===m-1&&(d.rightChild=j)}),d.originNode=S,d.isLeaf=S.isLeaf(),d}function y(S){if(S.isLeaf||S.children.length===0)S.drawingDepth=E;else{var N=S.children.map(function(d){return y(d)}),m=Math.min.apply(null,N);S.drawingDepth=m-1}return S.drawingDepth}var g;function T(S){S.x=S.drawingDepth*b.rankSep,S.isLeaf?(S.y=0,g&&(S.y=g.y+g.height+b.nodeSep,S.originNode.parent!==g.originNode.parent&&(S.y+=b.subTreeSep)),g=S):(S.children.forEach(function(N){T(N)}),S.y=(S.leftChild.y+S.rightChild.y)/2)}var x=p(D);return y(x),T(x),k(x,D,b.isHorizontal),D}},function(G,R,L){function z(T,x){T.prototype=Object.create(x.prototype),T.prototype.constructor=T,T.__proto__=x}var F=L(11),I=L(117),k=L(30),D=L(7),b=["LR","RL","H"],E=b[0],p=function(T){z(x,T);function x(){return T.apply(this,arguments)||this}var S=x.prototype;return S.execute=function(){var m=this,d=m.options,V=m.rootNode;d.isHorizontal=!0;var Q=d.indent,j=Q===void 0?20:Q,X=d.dropCap,K=X===void 0?!0:X,J=d.direction||E;if(J&&b.indexOf(J)===-1)throw new TypeError("Invalid direction: "+J);if(J===b[0])I(V,j,K);else if(J===b[1])I(V,j,K),V.right2left();else if(J===b[2]){var rt=k(V,d),tt=rt.left,nt=rt.right;I(tt,j,K),tt.right2left(),I(nt,j,K);var lt=tt.getBoundingBox();nt.translate(lt.width,0),V.x=nt.x-V.width/2}return V},x}(F),y={};function g(T,x){return x=D.assign({},y,x),new p(T,x).execute()}G.exports=g},function(G,R){function L(z,F,I,k){var D=typeof I=="function"?I(z):I*z.depth;if(!k)try{if(z.id===z.parent.children[0].id){z.x+=D,z.y=F?F.y:0;return}}catch(b){}z.x+=D,z.y=F?F.y+F.height:0}G.exports=function(z,F,I){var k=null;z.eachNode(function(D){L(D,k,F,I),k=D})}},function(G,R,L){function z(y,g){y.prototype=Object.create(g.prototype),y.prototype.constructor=y,y.__proto__=g}var F=L(11),I=L(119),k=L(17),D=L(7),b=function(y){z(g,y);function g(){return y.apply(this,arguments)||this}var T=g.prototype;return T.execute=function(){var S=this;return k(S.rootNode,S.options,I)},g}(F),E={};function p(y,g){return g=D.assign({},E,g),new b(y,g).execute()}G.exports=p},function(G,R,L){var z=L(7);function F(D,b){var E=0;return D.children.length?D.children.forEach(function(p){E+=F(p,b)}):E=D.height,D._subTreeSep=b.getSubTreeSep(D.data),D.totalHeight=Math.max(D.height,E)+2*D._subTreeSep,D.totalHeight}function I(D){var b=D.children,E=b.length;if(E){b.forEach(function(S){I(S)});var p=b[0],y=b[E-1],g=y.y-p.y+y.height,T=0;if(b.forEach(function(S){T+=S.totalHeight}),g>D.height)D.y=p.y+g/2-D.height/2;else if(b.length!==1||D.height>T){var x=D.y+(D.height-g)/2-p.y;b.forEach(function(S){S.translate(0,x)})}else D.y=(p.y+p.height/2+y.y+y.height/2)/2-D.height/2}}var k={getSubTreeSep:function(){return 0}};G.exports=function(D,b){b===void 0&&(b={}),b=z.assign({},k,b),D.parent={x:0,width:0,height:0,y:0},D.BFTraverse(function(E){E.x=E.parent.x+E.parent.width}),D.parent=null,F(D,b),D.startY=0,D.y=D.totalHeight/2-D.height/2,D.eachNode(function(E){var p=E.children,y=p.length;if(y){var g=p[0];if(g.startY=E.startY+E._subTreeSep,y===1)g.y=E.y+E.height/2-g.height/2;else{g.y=g.startY+g.totalHeight/2-g.height/2;for(var T=1;T<y;T++){var x=p[T];x.startY=p[T-1].startY+p[T-1].totalHeight,x.y=x.startY+x.totalHeight/2-x.height/2}}}}),I(D)}}])})},83360:function(Mr,G,R){"use strict";var L=this&&this.__createBinding||(Object.create?function(I,k,D,b){b===void 0&&(b=D);var E=Object.getOwnPropertyDescriptor(k,D);(!E||("get"in E?!k.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return k[D]}}),Object.defineProperty(I,b,E)}:function(I,k,D,b){b===void 0&&(b=D),I[b]=k[D]}),z=this&&this.__exportStar||function(I,k){for(var D in I)D!=="default"&&!Object.prototype.hasOwnProperty.call(k,D)&&L(k,I,D)};Object.defineProperty(G,"__esModule",{value:!0}),G.getLayoutByName=G.unRegisterLayout=G.registerLayout=void 0;var F=R(95326);Object.defineProperty(G,"registerLayout",{enumerable:!0,get:function(){return F.registerLayout}}),Object.defineProperty(G,"unRegisterLayout",{enumerable:!0,get:function(){return F.unRegisterLayout}}),Object.defineProperty(G,"getLayoutByName",{enumerable:!0,get:function(){return F.getLayoutByName}}),z(R(2584),G)},62329:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.Base=void 0;var R=function(){function L(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return L.prototype.layout=function(z){return this.init(z),this.execute(!0)},L.prototype.init=function(z){this.nodes=z.nodes||[],this.edges=z.edges||[],this.combos=z.combos||[],this.comboEdges=z.comboEdges||[],this.hiddenNodes=z.hiddenNodes||[],this.hiddenEdges=z.hiddenEdges||[],this.hiddenCombos=z.hiddenCombos||[],this.vedges=z.vedges||[]},L.prototype.execute=function(z){},L.prototype.executeWithWorker=function(){},L.prototype.getDefaultCfg=function(){return{}},L.prototype.updateCfg=function(z){z&&Object.assign(this,z)},L.prototype.getType=function(){return"base"},L.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},L}();G.Base=R},64885:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var E=function(p,y){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var x in T)Object.prototype.hasOwnProperty.call(T,x)&&(g[x]=T[x])},E(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");E(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.CircularLayout=void 0;var z=R(62329),F=R(49784);function I(E,p,y,g){E.forEach(function(T,x){E[x].children=[],E[x].parent=[]}),g?p.forEach(function(T){var x=(0,F.getEdgeTerminal)(T,"source"),S=(0,F.getEdgeTerminal)(T,"target"),N=0;x&&(N=y[x]);var m=0;S&&(m=y[S]);var d=E[N].children,V=E[m].parent;d.push(E[m].id),V.push(E[N].id)}):p.forEach(function(T){var x=(0,F.getEdgeTerminal)(T,"source"),S=(0,F.getEdgeTerminal)(T,"target"),N=0;x&&(N=y[x]);var m=0;S&&(m=y[S]);var d=E[N].children,V=E[m].children;d.push(E[m].id),V.push(E[N].id)})}function k(E,p,y){for(var g=y.length,T=0;T<g;T++){var x=(0,F.getEdgeTerminal)(y[T],"source"),S=(0,F.getEdgeTerminal)(y[T],"target");if(E.id===x&&p.id===S||p.id===x&&E.id===S)return!0}return!1}function D(E,p){var y=E.degree,g=p.degree;return y<g?-1:y>g?1:0}var b=function(E){L(p,E);function p(y){var g=E.call(this)||this;return g.radius=null,g.nodeSize=void 0,g.startRadius=null,g.endRadius=null,g.startAngle=0,g.endAngle=2*Math.PI,g.clockwise=!0,g.divisions=1,g.ordering=null,g.angleRatio=1,g.nodes=[],g.edges=[],g.nodeMap={},g.degrees=[],g.width=300,g.height=300,g.updateCfg(y),g}return p.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},p.prototype.execute=function(){var y,g=this,T=g.nodes,x=g.edges,S=T.length;if(S===0){g.onLayoutEnd&&g.onLayoutEnd();return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var N=g.center;if(S===1){T[0].x=N[0],T[0].y=N[1],g.onLayoutEnd&&g.onLayoutEnd();return}var m=g.radius,d=g.startRadius,V=g.endRadius,Q=g.divisions,j=g.startAngle,X=g.endAngle,K=g.angleRatio,J=g.ordering,rt=g.clockwise,tt=g.nodeSpacing,nt=g.nodeSize,lt=(X-j)/S,xt={};T.forEach(function(Be,Ke){xt[Be.id]=Ke}),g.nodeMap=xt;var jt=(0,F.getDegree)(T.length,xt,x);if(g.degrees=jt,tt){var Dt=(0,F.getFuncByUnknownType)(10,tt),Zt=(0,F.getFuncByUnknownType)(10,nt),Vt=-Infinity;T.forEach(function(Be){var Ke=Zt(Be);Vt<Ke&&(Vt=Ke)});var ue=0;T.forEach(function(Be,Ke){Ke===0?ue+=Vt||10:ue+=(Dt(Be)||0)+(Vt||10)}),m=ue/(2*Math.PI)}else!m&&!d&&!V?m=g.height>g.width?g.width/2:g.height/2:!d&&V?d=V:d&&!V&&(V=d);var dt=lt*K,Ot=[];J==="topology"?Ot=g.topologyOrdering():J==="topology-directed"?Ot=g.topologyOrdering(!0):J==="degree"?Ot=g.degreeOrdering():Ot=T;for(var ee=Math.ceil(S/Q),Re=0;Re<S;++Re){var me=m;!me&&d!==null&&V!==null&&(me=d+Re*(V-d)/(S-1)),me||(me=10+Re*100/(S-1));var Ae=j+Re%ee*dt+2*Math.PI/Q*Math.floor(Re/ee);rt||(Ae=X-Re%ee*dt-2*Math.PI/Q*Math.floor(Re/ee)),Ot[Re].x=N[0]+Math.cos(Ae)*me,Ot[Re].y=N[1]+Math.sin(Ae)*me,Ot[Re].weight=jt[Re].all}return(y=g.onLayoutEnd)===null||y===void 0||y.call(g),{nodes:Ot,edges:this.edges}},p.prototype.topologyOrdering=function(y){y===void 0&&(y=!1);var g=this,T=g.degrees,x=g.edges,S=g.nodes,N=(0,F.clone)(S),m=g.nodeMap,d=[N[0]],V=[S[0]],Q=[],j=S.length;Q[0]=!0,I(N,x,m,y);var X=0;return N.forEach(function(K,J){if(J!==0)if((J===j-1||T[J].all!==T[J+1].all||k(d[X],K,x))&&!Q[J])d.push(K),V.push(S[m[K.id]]),Q[J]=!0,X++;else{for(var rt=d[X].children,tt=!1,nt=0;nt<rt.length;nt++){var lt=m[rt[nt]];if(T[lt].all===T[J].all&&!Q[lt]){d.push(N[lt]),V.push(S[m[N[lt].id]]),Q[lt]=!0,tt=!0;break}}for(var xt=0;!tt&&(Q[xt]||(d.push(N[xt]),V.push(S[m[N[xt].id]]),Q[xt]=!0,tt=!0),xt++,xt!==j););}}),V},p.prototype.degreeOrdering=function(){var y=this,g=y.nodes,T=[],x=y.degrees;return g.forEach(function(S,N){S.degree=x[N].all,T.push(S)}),T.sort(D),T},p.prototype.getType=function(){return"circular"},p}(z.Base);G.CircularLayout=b},63861:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var E=function(p,y){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var x in T)Object.prototype.hasOwnProperty.call(T,x)&&(g[x]=T[x])},E(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");E(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),z=this&&this.__assign||function(){return z=Object.assign||function(E){for(var p,y=1,g=arguments.length;y<g;y++){p=arguments[y];for(var T in p)Object.prototype.hasOwnProperty.call(p,T)&&(E[T]=p[T])}return E},z.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.ComboCombinedLayout=void 0;var F=R(16470),I=R(62329),k=R(49784),D=R(2584),b=function(E){L(p,E);function p(y){var g=E.call(this)||this;return g.center=[0,0],g.nodes=[],g.edges=[],g.combos=[],g.comboEdges=[],g.comboPadding=10,g.comboTrees=[],g.updateCfg(y),g}return p.prototype.getDefaultCfg=function(){return{}},p.prototype.execute=function(){var y=this,g=y.nodes,T=y.center;if(!g||g.length===0){y.onLayoutEnd&&y.onLayoutEnd();return}if(g.length===1){g[0].x=T[0],g[0].y=T[1],y.onLayoutEnd&&y.onLayoutEnd();return}y.initVals(),y.run(),y.onLayoutEnd&&y.onLayoutEnd()},p.prototype.run=function(){var y,g=this,T=g.nodes,x=g.edges,S=g.combos,N=g.comboEdges,m=g.center,d={};T.forEach(function(Vt){d[Vt.id]=Vt});var V={};S.forEach(function(Vt){V[Vt.id]=Vt});var Q=g.getInnerGraphs(d),j=[],X=[],K={},J=!0;this.comboTrees.forEach(function(Vt){var ue=Q[Vt.id],dt=z(z({},Vt),{x:ue.x||V[Vt.id].x,y:ue.y||V[Vt.id].y,fx:ue.fx||V[Vt.id].fx,fy:ue.fy||V[Vt.id].fy,mass:ue.mass||V[Vt.id].mass,size:ue.size});X.push(dt),!isNaN(dt.x)&&dt.x!==0&&!isNaN(dt.y)&&dt.y!==0?J=!1:(dt.x=Math.random()*100,dt.y=Math.random()*100),j.push(Vt.id),(0,k.traverseTreeUp)(Vt,function(Ot){return Ot.id!==Vt.id&&(K[Ot.id]=Vt.id),!0})}),T.forEach(function(Vt){if(!(Vt.comboId&&V[Vt.comboId])){var ue=z({},Vt);X.push(ue),!isNaN(ue.x)&&ue.x!==0&&!isNaN(ue.y)&&ue.y!==0?J=!1:(ue.x=Math.random()*100,ue.y=Math.random()*100),j.push(Vt.id)}});var rt=[];if(x.concat(N).forEach(function(Vt){var ue=K[Vt.source]||Vt.source,dt=K[Vt.target]||Vt.target;ue!==dt&&j.includes(ue)&&j.includes(dt)&&rt.push({source:ue,target:dt})}),X==null?void 0:X.length){if(X.length===1)X[0].x=m[0],X[0].y=m[1];else{var tt={nodes:X,edges:rt},nt=this.outerLayout||new D.GForceLayout({gravity:1,factor:4,linkDistance:function(Vt,ue,dt){var Ot,ee,Re=((((Ot=ue.size)===null||Ot===void 0?void 0:Ot[0])||30)+(((ee=dt.size)===null||ee===void 0?void 0:ee[0])||30))/2;return Math.min(Re*1.5,700)}}),lt=(y=nt.getType)===null||y===void 0?void 0:y.call(nt);if(nt.updateCfg({center:m,kg:5,preventOverlap:!0,animate:!1}),J&&F.FORCE_LAYOUT_TYPE_MAP[lt]){var xt=X.length<100?new D.MDSLayout:new D.GridLayout;xt.layout(tt)}nt.layout(tt)}X.forEach(function(Vt){var ue=Q[Vt.id];if(!ue){var dt=d[Vt.id];dt&&(dt.x=Vt.x,dt.y=Vt.y);return}ue.visited=!0,ue.x=Vt.x,ue.y=Vt.y,ue.nodes.forEach(function(Ot){Ot.x+=Vt.x,Ot.y+=Vt.y})})}for(var jt=Object.keys(Q),Dt=function(Vt){var ue=jt[Vt],dt=Q[ue];if(!dt)return"continue";dt.nodes.forEach(function(Ot){dt.visited||(Ot.x+=dt.x||0,Ot.y+=dt.y||0),d[Ot.id]&&(d[Ot.id].x=Ot.x,d[Ot.id].y=Ot.y)}),V[ue]&&(V[ue].x=dt.x,V[ue].y=dt.y)},Zt=jt.length-1;Zt>=0;Zt--)Dt(Zt);return{nodes:T,edges:x,combos:S,comboEdges:N}},p.prototype.getInnerGraphs=function(y){var g=this,T=g.comboTrees,x=g.nodeSize,S=g.edges,N=g.comboPadding,m=g.spacing,d={},V=this.innerLayout||new D.ConcentricLayout({sortBy:"id"});return V.center=[0,0],V.preventOverlap=!0,V.nodeSpacing=m,(T||[]).forEach(function(Q){(0,k.traverseTreeUp)(Q,function(j){var X,K=(N==null?void 0:N(j))||10;if((0,k.isArray)(K)&&(K=Math.max.apply(Math,K)),(X=j.children)===null||X===void 0?void 0:X.length){var rt=j.children.map(function(Ot){if(Ot.itemType==="combo")return d[Ot.id];var ee=y[Ot.id]||{};return z(z({},ee),Ot)}),tt=rt.map(function(Ot){return Ot.id}),nt={nodes:rt,edges:S.filter(function(Ot){return tt.includes(Ot.source)&&tt.includes(Ot.target)})},lt=Infinity;rt.forEach(function(Ot){var ee;Ot.size||(Ot.size=((ee=d[Ot.id])===null||ee===void 0?void 0:ee.size)||(x==null?void 0:x(Ot))||[30,30]),(0,k.isNumber)(Ot.size)&&(Ot.size=[Ot.size,Ot.size]),lt>Ot.size[0]&&(lt=Ot.size[0]),lt>Ot.size[1]&&(lt=Ot.size[1])}),V.layout(nt);var xt=(0,k.getLayoutBBox)(rt),jt=xt.minX,Dt=xt.minY,Zt=xt.maxX,Vt=xt.maxY,ue={x:(Zt+jt)/2,y:(Vt+Dt)/2};nt.nodes.forEach(function(Ot){Ot.x-=ue.x,Ot.y-=ue.y});var dt=Math.max(Zt-jt,Vt-Dt,lt)+K*2;d[j.id]={id:j.id,nodes:rt,size:[dt,dt]}}else if(j.itemType==="combo"){var J=K?[K*2,K*2]:[30,30];d[j.id]={id:j.id,nodes:[],size:J}}return!0})}),d},p.prototype.initVals=function(){var y=this,g=y.nodeSize,T=y.spacing,x,S;if((0,k.isNumber)(T)?S=function(){return T}:(0,k.isFunction)(T)?S=T:S=function(){return 0},this.spacing=S,!g)x=function(j){var X=S(j);if(j.size){if((0,k.isArray)(j.size)){var K=j.size[0]>j.size[1]?j.size[0]:j.size[1];return(K+X)/2}if((0,k.isObject)(j.size)){var K=j.size.width>j.size.height?j.size.width:j.size.height;return(K+X)/2}return(j.size+X)/2}return 10+X/2};else if((0,k.isFunction)(g))x=function(j){var X=g(j),K=S(j);if((0,k.isArray)(j.size)){var J=j.size[0]>j.size[1]?j.size[0]:j.size[1];return(J+K)/2}return((X||10)+K)/2};else if((0,k.isArray)(g)){var N=g[0]>g[1]?g[0]:g[1],m=N/2;x=function(j){return m+S(j)/2}}else{var d=g/2;x=function(j){return d+S(j)/2}}this.nodeSize=x;var V=y.comboPadding,Q;(0,k.isNumber)(V)?Q=function(){return V}:(0,k.isArray)(V)?Q=function(){return Math.max.apply(null,V)}:(0,k.isFunction)(V)?Q=V:Q=function(){return 0},this.comboPadding=Q},p.prototype.getType=function(){return"comboCombined"},p}(I.Base);G.ComboCombinedLayout=b},66590:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var k=function(D,b){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,p){E.__proto__=p}||function(E,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(E[y]=p[y])},k(D,b)};return function(D,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");k(D,b);function E(){this.constructor=D}D.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.ComboForceLayout=void 0;var z=R(62329),F=R(49784),I=function(k){L(D,k);function D(b){var E=k.call(this)||this;return E.center=[0,0],E.maxIteration=100,E.gravity=10,E.comboGravity=10,E.linkDistance=10,E.alpha=1,E.alphaMin=.001,E.alphaDecay=1-Math.pow(E.alphaMin,1/300),E.alphaTarget=0,E.velocityDecay=.6,E.edgeStrength=.6,E.nodeStrength=30,E.preventOverlap=!1,E.preventNodeOverlap=!1,E.preventComboOverlap=!1,E.collideStrength=void 0,E.nodeCollideStrength=.5,E.comboCollideStrength=.5,E.comboSpacing=20,E.comboPadding=10,E.optimizeRangeFactor=1,E.onTick=function(){},E.onLayoutEnd=function(){},E.depthAttractiveForceScale=1,E.depthRepulsiveForceScale=2,E.nodes=[],E.edges=[],E.combos=[],E.comboTrees=[],E.width=300,E.height=300,E.bias=[],E.nodeMap={},E.oriComboMap={},E.indexMap={},E.comboMap={},E.previousLayouted=!1,E.updateCfg(b),E}return D.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},D.prototype.execute=function(){var b=this,E=b.nodes,p=b.center;if(b.comboTree={id:"comboTreeRoot",depth:-1,children:b.comboTrees},!E||E.length===0){b.onLayoutEnd&&b.onLayoutEnd();return}if(E.length===1){E[0].x=p[0],E[0].y=p[1],b.onLayoutEnd&&b.onLayoutEnd();return}b.initVals(),b.run(),b.onLayoutEnd&&b.onLayoutEnd()},D.prototype.run=function(){var b=this,E=b.nodes,p=b.previousLayouted?b.maxIteration/5:b.maxIteration;!b.width&&typeof window!="undefined"&&(b.width=window.innerWidth),!b.height&&typeof window!="undefined"&&(b.height=window.innerHeight);var y=b.center,g=b.velocityDecay,T=b.comboMap;b.previousLayouted||b.initPos(T);for(var x=function(d){var V=[];E.forEach(function(Q,j){V[j]={x:0,y:0}}),b.applyCalculate(V),b.applyComboCenterForce(V),E.forEach(function(Q,j){!(0,F.isNumber)(Q.x)||!(0,F.isNumber)(Q.y)||(Q.x+=V[j].x*g,Q.y+=V[j].y*g)}),b.alpha+=(b.alphaTarget-b.alpha)*b.alphaDecay,b.onTick()},S=0;S<p;S++)x(S);var N=[0,0];E.forEach(function(d){!(0,F.isNumber)(d.x)||!(0,F.isNumber)(d.y)||(N[0]+=d.x,N[1]+=d.y)}),N[0]/=E.length,N[1]/=E.length;var m=[y[0]-N[0],y[1]-N[1]];E.forEach(function(d,V){!(0,F.isNumber)(d.x)||!(0,F.isNumber)(d.y)||(d.x+=m[0],d.y+=m[1])}),b.combos.forEach(function(d){var V=T[d.id];V&&V.empty&&(d.x=V.cx||d.x,d.y=V.cy||d.y)}),b.previousLayouted=!0},D.prototype.initVals=function(){var b=this,E=b.edges,p=b.nodes,y=b.combos,g={},T={},x={};p.forEach(function(me,Ae){T[me.id]=me,x[me.id]=Ae}),b.nodeMap=T,b.indexMap=x;var S={};y.forEach(function(me){S[me.id]=me}),b.oriComboMap=S,b.comboMap=b.getComboMap();var N=b.preventOverlap;b.preventComboOverlap=b.preventComboOverlap||N,b.preventNodeOverlap=b.preventNodeOverlap||N;var m=b.collideStrength;m&&(b.comboCollideStrength=m,b.nodeCollideStrength=m),b.comboCollideStrength=b.comboCollideStrength?b.comboCollideStrength:0,b.nodeCollideStrength=b.nodeCollideStrength?b.nodeCollideStrength:0;for(var d=0;d<E.length;++d){var V=(0,F.getEdgeTerminal)(E[d],"source"),Q=(0,F.getEdgeTerminal)(E[d],"target");g[V]?g[V]++:g[V]=1,g[Q]?g[Q]++:g[Q]=1}for(var j=[],d=0;d<E.length;++d){var V=(0,F.getEdgeTerminal)(E[d],"source"),Q=(0,F.getEdgeTerminal)(E[d],"target");j[d]=g[V]/(g[V]+g[Q])}this.bias=j;var X=b.nodeSize,K=b.nodeSpacing,J,rt;if((0,F.isNumber)(K)?rt=function(){return K}:(0,F.isFunction)(K)?rt=K:rt=function(){return 0},this.nodeSpacing=rt,!X)J=function(me){if(me.size){if((0,F.isArray)(me.size)){var Ae=me.size[0]>me.size[1]?me.size[0]:me.size[1];return Ae/2}if((0,F.isObject)(me.size)){var Ae=me.size.width>me.size.height?me.size.width:me.size.height;return Ae/2}return me.size/2}return 10};else if((0,F.isFunction)(X))J=function(me){return X(me)};else if((0,F.isArray)(X)){var tt=X[0]>X[1]?X[0]:X[1],nt=tt/2;J=function(me){return nt}}else{var lt=X/2;J=function(me){return lt}}this.nodeSize=J;var xt=b.comboSpacing,jt;(0,F.isNumber)(xt)?jt=function(){return xt}:(0,F.isFunction)(xt)?jt=xt:jt=function(){return 0},this.comboSpacing=jt;var Dt=b.comboPadding,Zt;(0,F.isNumber)(Dt)?Zt=function(){return Dt}:(0,F.isArray)(Dt)?Zt=function(){return Math.max.apply(null,Dt)}:(0,F.isFunction)(Dt)?Zt=Dt:Zt=function(){return 0},this.comboPadding=Zt;var Vt=this.linkDistance,ue;Vt||(Vt=10),(0,F.isNumber)(Vt)?ue=function(me){return Vt}:ue=Vt,this.linkDistance=ue;var dt=this.edgeStrength,Ot;dt||(dt=1),(0,F.isNumber)(dt)?Ot=function(me){return dt}:Ot=dt,this.edgeStrength=Ot;var ee=this.nodeStrength,Re;ee||(ee=30),(0,F.isNumber)(ee)?Re=function(me){return ee}:Re=ee,this.nodeStrength=Re},D.prototype.initPos=function(b){var E=this,p=E.nodes;p.forEach(function(y,g){var T=y.comboId,x=b[T];T&&x?(y.x=x.cx+100/(g+1),y.y=x.cy+100/(g+1)):(y.x=100/(g+1),y.y=100/(g+1))})},D.prototype.getComboMap=function(){var b=this,E=b.nodeMap,p=b.comboTrees,y=b.oriComboMap,g={};return(p||[]).forEach(function(T){var x=[];(0,F.traverseTreeUp)(T,function(S){if(S.itemType==="node"||!y[S.id])return!0;if(g[S.id]===void 0){var N={id:S.id,name:S.id,cx:0,cy:0,count:0,depth:b.oriComboMap[S.id].depth||0,children:[]};g[S.id]=N}var m=S.children;m&&m.forEach(function(Q){if(!g[Q.id]&&!E[Q.id])return!0;x.push(Q)});var d=g[S.id];if(d.cx=0,d.cy=0,x.length===0){d.empty=!0;var V=y[S.id];d.cx=V.x,d.cy=V.y}return x.forEach(function(Q){if(d.count++,Q.itemType!=="node"){var j=g[Q.id];(0,F.isNumber)(j.cx)&&(d.cx+=j.cx),(0,F.isNumber)(j.cy)&&(d.cy+=j.cy);return}var X=E[Q.id];!X||((0,F.isNumber)(X.x)&&(d.cx+=X.x),(0,F.isNumber)(X.y)&&(d.cy+=X.y))}),d.cx/=d.count||1,d.cy/=d.count||1,d.children=x,!0})}),g},D.prototype.applyComboCenterForce=function(b){var E=this,p=E.gravity,y=E.comboGravity||p,g=this.alpha,T=E.comboTrees,x=E.indexMap,S=E.nodeMap,N=E.comboMap;(T||[]).forEach(function(m){(0,F.traverseTreeUp)(m,function(d){if(d.itemType==="node")return!0;var V=N[d.id];if(!V)return!0;var Q=N[d.id],j=(Q.depth+1)/10*.5,X=Q.cx,K=Q.cy;return Q.cx=0,Q.cy=0,Q.children.forEach(function(J){if(J.itemType!=="node"){var rt=N[J.id];rt&&(0,F.isNumber)(rt.cx)&&(Q.cx+=rt.cx),rt&&(0,F.isNumber)(rt.cy)&&(Q.cy+=rt.cy);return}var tt=S[J.id],nt=tt.x-X||.005,lt=tt.y-K||.005,xt=Math.sqrt(nt*nt+lt*lt),jt=x[tt.id],Dt=y*g/xt*j;b[jt].x-=nt*Dt,b[jt].y-=lt*Dt,(0,F.isNumber)(tt.x)&&(Q.cx+=tt.x),(0,F.isNumber)(tt.y)&&(Q.cy+=tt.y)}),Q.cx/=Q.count||1,Q.cy/=Q.count||1,!0})})},D.prototype.applyCalculate=function(b){var E=this,p=E.comboMap,y=E.nodes,g={};y.forEach(function(x,S){y.forEach(function(N,m){if(!(S<m)){var d=x.x-N.x||.005,V=x.y-N.y||.005,Q=d*d+V*V,j=Math.sqrt(Q);Q<1&&(Q=j),g["".concat(x.id,"-").concat(N.id)]={vx:d,vy:V,vl2:Q,vl:j},g["".concat(N.id,"-").concat(x.id)]={vl2:Q,vl:j,vx:-d,vy:-V}}})}),E.updateComboSizes(p),E.calRepulsive(b,g),E.calAttractive(b,g);var T=E.preventComboOverlap;T&&E.comboNonOverlapping(b,p)},D.prototype.updateComboSizes=function(b){var E=this,p=E.comboTrees,y=E.nodeMap,g=E.nodeSize,T=E.comboSpacing,x=E.comboPadding;(p||[]).forEach(function(S){var N=[];(0,F.traverseTreeUp)(S,function(m){if(m.itemType==="node")return!0;var d=b[m.id];if(!d)return!1;var V=m.children;V&&V.forEach(function(X){!b[X.id]&&!y[X.id]||N.push(X)}),d.minX=Infinity,d.minY=Infinity,d.maxX=-Infinity,d.maxY=-Infinity,N.forEach(function(X){if(X.itemType!=="node")return!0;var K=y[X.id];if(!K)return!0;var J=g(K),rt=K.x-J,tt=K.y-J,nt=K.x+J,lt=K.y+J;d.minX>rt&&(d.minX=rt),d.minY>tt&&(d.minY=tt),d.maxX<nt&&(d.maxX=nt),d.maxY<lt&&(d.maxY=lt)});var Q=E.oriComboMap[m.id].size||10;(0,F.isArray)(Q)&&(Q=Q[0]);var j=Math.max(d.maxX-d.minX,d.maxY-d.minY,Q);return d.r=j/2+T(d)/2+x(d),!0})})},D.prototype.comboNonOverlapping=function(b,E){var p=this,y=p.comboTree,g=p.comboCollideStrength,T=p.indexMap,x=p.nodeMap;(0,F.traverseTreeUp)(y,function(S){if(!E[S.id]&&!x[S.id]&&S.id!=="comboTreeRoot")return!1;var N=S.children;return N&&N.length>1&&N.forEach(function(m,d){if(m.itemType==="node")return!1;var V=E[m.id];!V||N.forEach(function(Q,j){if(d<=j||Q.itemType==="node")return!1;var X=E[Q.id];if(!X)return!1;var K=V.cx-X.cx||.005,J=V.cy-X.cy||.005,rt=K*K+J*J,tt=V.r||1,nt=X.r||1,lt=tt+nt,xt=nt*nt,jt=tt*tt;if(rt<lt*lt){var Dt=m.children;if(!Dt||Dt.length===0)return!1;var Zt=Q.children;if(!Zt||Zt.length===0)return!1;var Vt=Math.sqrt(rt),ue=(lt-Vt)/Vt*g,dt=K*ue,Ot=J*ue,ee=xt/(jt+xt),Re=1-ee;Dt.forEach(function(me){if(me.itemType!=="node")return!1;if(!!x[me.id]){var Ae=T[me.id];Zt.forEach(function(Be){if(Be.itemType!=="node"||!x[Be.id])return!1;var Ke=T[Be.id];b[Ae].x+=dt*ee,b[Ae].y+=Ot*ee,b[Ke].x-=dt*Re,b[Ke].y-=Ot*Re})}})}})}),!0})},D.prototype.calRepulsive=function(b,E){var p=this,y=p.nodes,g=p.width*p.optimizeRangeFactor,T=p.nodeStrength,x=p.alpha,S=p.nodeCollideStrength,N=p.preventNodeOverlap,m=p.nodeSize,d=p.nodeSpacing,V=p.depthRepulsiveForceScale,Q=p.center;y.forEach(function(j,X){if(!(!j.x||!j.y)){if(Q){var K=p.gravity,J=j.x-Q[0]||.005,rt=j.y-Q[1]||.005,tt=Math.sqrt(J*J+rt*rt);b[X].x-=J*K*x/tt,b[X].y-=rt*K*x/tt}y.forEach(function(nt,lt){if(X!==lt&&!(!nt.x||!nt.y)){var xt=E["".concat(j.id,"-").concat(nt.id)],jt=xt.vl2,Dt=xt.vl;if(!(Dt>g)){var Zt=E["".concat(j.id,"-").concat(nt.id)],Vt=Zt.vx,ue=Zt.vy,dt=Math.log(Math.abs(nt.depth-j.depth)/10)+1||1;dt=dt<1?1:dt,nt.comboId!==j.comboId&&(dt+=1);var Ot=dt?Math.pow(V,dt):1,ee=T(nt)*x/jt*Ot;if(b[X].x+=Vt*ee,b[X].y+=ue*ee,X<lt&&N){var Re=m(j)+d(j)||1,me=m(nt)+d(nt)||1,Ae=Re+me;if(jt<Ae*Ae){var Be=(Ae-Dt)/Dt*S,Ke=me*me,$t=Ke/(Re*Re+Ke),ce=Vt*Be,we=ue*Be;b[X].x+=ce*$t,b[X].y+=we*$t,$t=1-$t,b[lt].x-=ce*$t,b[lt].y-=we*$t}}}}})}})},D.prototype.calAttractive=function(b,E){var p=this,y=p.edges,g=p.linkDistance,T=p.alpha,x=p.edgeStrength,S=p.bias,N=p.depthAttractiveForceScale;y.forEach(function(m,d){var V=(0,F.getEdgeTerminal)(m,"source"),Q=(0,F.getEdgeTerminal)(m,"target");if(!(!V||!Q||V===Q)){var j=p.indexMap[V],X=p.indexMap[Q],K=p.nodeMap[V],J=p.nodeMap[Q];if(!(!K||!J)){var rt=K.depth===J.depth?0:Math.log(Math.abs(K.depth-J.depth)/10);K.comboId===J.comboId&&(rt=rt/2);var tt=rt?Math.pow(N,rt):1;if(K.comboId!==J.comboId&&tt===1?tt=N/2:K.comboId===J.comboId&&(tt=2),!(!(0,F.isNumber)(J.x)||!(0,F.isNumber)(K.x)||!(0,F.isNumber)(J.y)||!(0,F.isNumber)(K.y))){var nt=E["".concat(Q,"-").concat(V)],lt=nt.vl,xt=nt.vx,jt=nt.vy,Dt=(lt-g(m))/lt*T*x(m)*tt,Zt=xt*Dt,Vt=jt*Dt,ue=S[d];b[X].x-=Zt*ue,b[X].y-=Vt*ue,b[j].x+=Zt*(1-ue),b[j].y+=Vt*(1-ue)}}}})},D.prototype.getType=function(){return"comboForce"},D}(z.Base);G.ComboForceLayout=I},43281:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var k=function(D,b){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,p){E.__proto__=p}||function(E,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(E[y]=p[y])},k(D,b)};return function(D,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");k(D,b);function E(){this.constructor=D}D.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.ConcentricLayout=void 0;var z=R(49784),F=R(62329),I=function(k){L(D,k);function D(b){var E=k.call(this)||this;return E.nodeSize=30,E.minNodeSpacing=10,E.nodeSpacing=10,E.preventOverlap=!1,E.equidistant=!1,E.startAngle=3/2*Math.PI,E.clockwise=!0,E.sortBy="degree",E.nodes=[],E.edges=[],E.width=300,E.height=300,E.onLayoutEnd=function(){},E.updateCfg(b),E}return D.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},D.prototype.execute=function(){var b,E,p=this,y=p.nodes,g=p.edges,T=y.length;if(T===0){(b=p.onLayoutEnd)===null||b===void 0||b.call(p);return}!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight),p.center||(p.center=[p.width/2,p.height/2]);var x=p.center;if(T===1){y[0].x=x[0],y[0].y=x[1],(E=p.onLayoutEnd)===null||E===void 0||E.call(p);return}var S=p.nodeSize,N=p.nodeSpacing,m=[],d,V=0;(0,z.isArray)(S)?d=Math.max(S[0],S[1]):d=S,(0,z.isArray)(N)?V=Math.max(N[0],N[1]):(0,z.isNumber)(N)&&(V=N),y.forEach(function(dt){m.push(dt);var Ot=d;(0,z.isArray)(dt.size)?Ot=Math.max(dt.size[0],dt.size[1]):(0,z.isNumber)(dt.size)?Ot=dt.size:(0,z.isObject)(dt.size)&&(Ot=Math.max(dt.size.width,dt.size.height)),d=Math.max(d,Ot),(0,z.isFunction)(N)&&(V=Math.max(N(dt),V))}),p.clockwise=p.counterclockwise!==void 0?!p.counterclockwise:p.clockwise;var Q={},j={};if(m.forEach(function(dt,Ot){Q[dt.id]=dt,j[dt.id]=Ot}),(p.sortBy==="degree"||!(0,z.isString)(p.sortBy)||m[0][p.sortBy]===void 0)&&(p.sortBy="degree",!(0,z.isNumber)(y[0].degree))){var X=(0,z.getDegree)(y.length,j,g);m.forEach(function(dt,Ot){dt.degree=X[Ot].all})}m.sort(function(dt,Ot){return Ot[p.sortBy]-dt[p.sortBy]}),p.maxValueNode=m[0],p.maxLevelDiff=p.maxLevelDiff||p.maxValueNode[p.sortBy]/4;var K=[[]],J=K[0];m.forEach(function(dt){if(J.length>0){var Ot=Math.abs(J[0][p.sortBy]-dt[p.sortBy]);p.maxLevelDiff&&Ot>=p.maxLevelDiff&&(J=[],K.push(J))}J.push(dt)});var rt=d+(V||p.minNodeSpacing);if(!p.preventOverlap){var tt=K.length>0&&K[0].length>1,nt=Math.min(p.width,p.height)/2-rt,lt=nt/(K.length+(tt?1:0));rt=Math.min(rt,lt)}var xt=0;if(K.forEach(function(dt){var Ot=p.sweep;Ot===void 0&&(Ot=2*Math.PI-2*Math.PI/dt.length);var ee=dt.dTheta=Ot/Math.max(1,dt.length-1);if(dt.length>1&&p.preventOverlap){var Re=Math.cos(ee)-Math.cos(0),me=Math.sin(ee)-Math.sin(0),Ae=Math.sqrt(rt*rt/(Re*Re+me*me));xt=Math.max(Ae,xt)}dt.r=xt,xt+=rt}),p.equidistant){for(var jt=0,Dt=0,Zt=0;Zt<K.length;Zt++){var Vt=K[Zt],ue=Vt.r-Dt;jt=Math.max(jt,ue)}Dt=0,K.forEach(function(dt,Ot){Ot===0&&(Dt=dt.r),dt.r=Dt,Dt+=jt})}return K.forEach(function(dt){var Ot=dt.dTheta,ee=dt.r;dt.forEach(function(Re,me){var Ae=p.startAngle+(p.clockwise?1:-1)*Ot*me;Re.x=x[0]+ee*Math.cos(Ae),Re.y=x[1]+ee*Math.sin(Ae)})}),p.onLayoutEnd&&p.onLayoutEnd(),{nodes:y,edges:g}},D.prototype.getType=function(){return"concentric"},D}(F.Base);G.ConcentricLayout=I},16470:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.FORCE_LAYOUT_TYPE_MAP=G.LAYOUT_MESSAGE=void 0,G.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},G.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},20171:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var E=function(p,y){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var x in T)Object.prototype.hasOwnProperty.call(T,x)&&(g[x]=T[x])},E(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");E(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),z=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(G,"__esModule",{value:!0}),G.DagreLayout=void 0;var F=z(R(41106)),I=R(49784),k=R(62329),D=R(27652),b=function(E){L(p,E);function p(y){var g=E.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.ranksep=50,g.controlPoints=!1,g.sortByCombo=!1,g.edgeLabelSpace=!0,g.radial=!1,g.nodes=[],g.edges=[],g.onLayoutEnd=function(){},g.layoutNode=function(T){var x=g,S=x.nodes,N=S.find(function(d){return d.id===T});if(N){var m=N.layout!==!1;return m}return!0},g.updateCfg(y),g}return p.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},p.prototype.execute=function(){var y=this,g,T,x,S=this,N=S.nodes,m=S.nodeSize,d=S.rankdir,V=S.combos,Q=S.begin,j=S.radial,X=S.comboEdges,K=X===void 0?[]:X,J=S.vedges,rt=J===void 0?[]:J;if(!!N){var tt=S.edges||[],nt=new D.Graph({multigraph:!0,compound:!0}),lt={};N.forEach(function(Ne){!Ne.comboId||(lt[Ne.comboId]=lt[Ne.comboId]||[],lt[Ne.comboId].push(Ne.id))});var xt;m?(0,I.isArray)(m)?xt=function(){return m}:xt=function(){return[m,m]}:xt=function(Ne){return Ne.size?(0,I.isArray)(Ne.size)?Ne.size:(0,I.isObject)(Ne.size)?[Ne.size.width||40,Ne.size.height||40]:[Ne.size,Ne.size]:[40,40]};var jt=(0,I.getFunc)(S.ranksep,50,S.ranksepFunc),Dt=(0,I.getFunc)(S.nodesep,50,S.nodesepFunc),Zt=Dt,Vt=jt;(d==="LR"||d==="RL")&&(Zt=jt,Vt=Dt),nt.setDefaultEdgeLabel(function(){return{}}),nt.setGraph(S);var ue={};this.sortByCombo&&V&&V.forEach(function(Ne){if(ue[Ne.id]=Ne,Ne.collapsed){var Xe=xt(Ne),Dr=Vt(Ne),ur=Zt(Ne),Or=Xe[0]+2*ur,ln=Xe[1]+2*Dr;nt.setNode(Ne.id,{width:Or,height:ln})}!Ne.parentId||(ue[Ne.parentId]||nt.setNode(Ne.parentId,{}),nt.setParent(Ne.id,Ne.parentId))}),N.filter(function(Ne){return Ne.layout!==!1}).forEach(function(Ne){var Xe=xt(Ne),Dr=Vt(Ne),ur=Zt(Ne),Or=Xe[0]+2*ur,ln=Xe[1]+2*Dr,fn=Ne.layer;(0,I.isNumber)(fn)?nt.setNode(Ne.id,{width:Or,height:ln,layer:fn}):nt.setNode(Ne.id,{width:Or,height:ln}),y.sortByCombo&&Ne.comboId&&(ue[Ne.comboId]||(ue[Ne.comboId]={id:Ne.comboId},nt.setNode(Ne.comboId,{})),nt.setParent(Ne.id,Ne.comboId))}),tt.forEach(function(Ne){var Xe=(0,I.getEdgeTerminal)(Ne,"source"),Dr=(0,I.getEdgeTerminal)(Ne,"target");y.layoutNode(Xe)&&y.layoutNode(Dr)&&nt.setEdge(Xe,Dr,{weight:Ne.weight||1})}),(g=K==null?void 0:K.concat(rt||[]))===null||g===void 0||g.forEach(function(Ne){var Xe,Dr,ur=Ne.source,Or=Ne.target,ln=((Xe=ue[ur])===null||Xe===void 0?void 0:Xe.collapsed)?[ur]:lt[ur]||[ur],fn=((Dr=ue[Or])===null||Dr===void 0?void 0:Dr.collapsed)?[Or]:lt[Or]||[Or];ln.forEach(function(Xr){fn.forEach(function(Cn){nt.setEdge(Xr,Cn,{weight:Ne.weight||1})})})});var dt=void 0;((T=S.preset)===null||T===void 0?void 0:T.nodes)&&(dt=new D.Graph({multigraph:!0,compound:!0}),S.preset.nodes.forEach(function(Ne){dt==null||dt.setNode(Ne.id,Ne)})),F.default.layout(nt,{prevGraph:dt,edgeLabelSpace:S.edgeLabelSpace,keepNodeOrder:Boolean(!!S.nodeOrder),nodeOrder:S.nodeOrder});var Ot=[0,0];if(Q){var ee=Infinity,Re=Infinity;nt.nodes().forEach(function(Ne){var Xe=nt.node(Ne);ee>Xe.x&&(ee=Xe.x),Re>Xe.y&&(Re=Xe.y)}),nt.edges().forEach(function(Ne){var Xe,Dr=nt.edge(Ne);(Xe=Dr.points)===null||Xe===void 0||Xe.forEach(function(ur){ee>ur.x&&(ee=ur.x),Re>ur.y&&(Re=ur.y)})}),Ot[0]=Q[0]-ee,Ot[1]=Q[1]-Re}if(j){var me=this,Ae=me.focusNode,Be=me.ranksep,Ke=me.getRadialPos,$t=(0,I.isString)(Ae)?Ae:Ae==null?void 0:Ae.id,ce=$t?(x=nt.node($t))===null||x===void 0?void 0:x._rank:0,we=[],Pe=d==="LR"||d==="RL",ye=Pe?"y":"x",Bt=Pe?"height":"width",re=Infinity,Ee=-Infinity;nt.nodes().forEach(function(Ne){var Xe=nt.node(Ne),Dr=N.findIndex(function(Cn){return Cn.id===Ne});if(!!N[Dr]){var ur=Dt(N[Dr]);if(ce===0)we[Xe._rank]||(we[Xe._rank]={nodes:[],totalWidth:0,maxSize:-Infinity}),we[Xe._rank].nodes.push(Ne),we[Xe._rank].totalWidth+=ur*2+Xe[Bt],we[Xe._rank].maxSize<Math.max(Xe.width,Xe.height)&&(we[Xe._rank].maxSize=Math.max(Xe.width,Xe.height));else{var Or=Xe._rank-ce;if(Or===0)we[Or]||(we[Or]={nodes:[],totalWidth:0,maxSize:-Infinity}),we[Or].nodes.push(Ne),we[Or].totalWidth+=ur*2+Xe[Bt],we[Or].maxSize<Math.max(Xe.width,Xe.height)&&(we[Or].maxSize=Math.max(Xe.width,Xe.height));else{var ln=Math.abs(Or);we[ln]||(we[ln]={left:[],right:[],totalWidth:0,maxSize:-Infinity}),we[ln].totalWidth+=ur*2+Xe[Bt],we[ln].maxSize<Math.max(Xe.width,Xe.height)&&(we[ln].maxSize=Math.max(Xe.width,Xe.height)),Or<0?we[ln].left.push(Ne):we[ln].right.push(Ne)}}var fn=Xe[ye]-Xe[Bt]/2-ur,Xr=Xe[ye]+Xe[Bt]/2+ur;fn<re&&(re=fn),Xr>Ee&&(Ee=Xr)}});var It=Be||50,Et={},Wt=(Ee-re)/.9,fe=[(re+Ee-Wt)*.5,(re+Ee+Wt)*.5],Fe=function(Ne,Xe,Dr,ur){Dr===void 0&&(Dr=-Infinity),ur===void 0&&(ur=[0,1]);var Or=Dr;return Ne.forEach(function(ln){var fn=nt.node(ln);Et[ln]=Xe;var Xr=Ke(fn[ye],fe,Wt,Xe,ur),Cn=Xr.x,Qr=Xr.y,Gr=N.findIndex(function(sr){return sr.id===ln});if(!!N[Gr]){N[Gr].x=Cn+Ot[0],N[Gr].y=Qr+Ot[1],N[Gr]._order=fn._order;var on=jt(N[Gr]);Or<on&&(Or=on)}}),Or},$e=!0,Lt=0;we.forEach(function(Ne){var Xe,Dr,ur,Or,ln,fn,Xr;if(!(!((Xe=Ne==null?void 0:Ne.nodes)===null||Xe===void 0?void 0:Xe.length)&&!((Dr=Ne==null?void 0:Ne.left)===null||Dr===void 0?void 0:Dr.length)&&!((ur=Ne==null?void 0:Ne.right)===null||ur===void 0?void 0:ur.length))){if($e&&Ne.nodes.length===1){var Cn=N.findIndex(function(on){return on.id===Ne.nodes[0]});if(Cn<=-1)return;N[Cn].x=Ot[0],N[Cn].y=Ot[1],Et[Ne.nodes[0]]=0,It=jt(N[Cn]),$e=!1;return}It=Math.max(It,Ne.totalWidth/(2*Math.PI));var Qr=-Infinity;if(ce===0||((Or=Ne.nodes)===null||Or===void 0?void 0:Or.length))Qr=Fe(Ne.nodes,It,Qr,[0,1]);else{var Gr=((ln=Ne.left)===null||ln===void 0?void 0:ln.length)/(((fn=Ne.left)===null||fn===void 0?void 0:fn.length)+((Xr=Ne.right)===null||Xr===void 0?void 0:Xr.length));Qr=Fe(Ne.left,It,Qr,[0,Gr]),Qr=Fe(Ne.right,It,Qr,[Gr+.05,1])}It+=Qr,$e=!1,Lt-Ne.maxSize}}),nt.edges().forEach(function(Ne){var Xe,Dr,ur,Or=nt.edge(Ne),ln=tt.findIndex(function(lr){var Qe=(0,I.getEdgeTerminal)(lr,"source"),$r=(0,I.getEdgeTerminal)(lr,"target");return Qe===Ne.v&&$r===Ne.w});if(!(ln<=-1)&&S.edgeLabelSpace&&S.controlPoints&&tt[ln].type!=="loop"){var fn=ye==="x"?"y":"x",Xr=(Xe=Or==null?void 0:Or.points)===null||Xe===void 0?void 0:Xe.slice(1,Or.points.length-1),Cn=[],Qr=(Dr=nt.node(Ne.v))===null||Dr===void 0?void 0:Dr[fn],Gr=Qr-((ur=nt.node(Ne.w))===null||ur===void 0?void 0:ur[fn]),on=Et[Ne.v],sr=on-Et[Ne.w];Xr==null||Xr.forEach(function(lr){var Qe=(lr[fn]-Qr)/Gr*sr+on,$r=Ke(lr[ye],fe,Wt,Qe);Cn.push({x:$r.x+Ot[0],y:$r.y+Ot[1]})}),tt[ln].controlPoints=Cn}})}else nt.nodes().forEach(function(Ne){var Xe=nt.node(Ne);if(!!Xe){var Dr=N.find(function(ur){return ur.id===Ne});Dr||(Dr=V==null?void 0:V.find(function(ur){return ur.id===Ne})),!!Dr&&(Dr.x=Xe.x+Ot[0],Dr.y=Xe.y+Ot[1],Dr._order=Xe._order)}}),nt.edges().forEach(function(Ne){var Xe,Dr=nt.edge(Ne),ur=tt.findIndex(function(Or){var ln=(0,I.getEdgeTerminal)(Or,"source"),fn=(0,I.getEdgeTerminal)(Or,"target");return ln===Ne.v&&fn===Ne.w});ur<=-1||S.edgeLabelSpace&&S.controlPoints&&tt[ur].type!=="loop"&&(tt[ur].controlPoints=(Xe=Dr==null?void 0:Dr.points)===null||Xe===void 0?void 0:Xe.slice(1,Dr.points.length-1),tt[ur].controlPoints.forEach(function(Or){Or.x+=Ot[0],Or.y+=Ot[1]}))});return S.onLayoutEnd&&S.onLayoutEnd(),{nodes:N,edges:tt}}},p.prototype.getRadialPos=function(y,g,T,x,S){S===void 0&&(S=[0,1]);var N=(y-g[0])/T;N=N*(S[1]-S[0])+S[0];var m=N*2*Math.PI;return{x:Math.cos(m)*x,y:Math.sin(m)*x}},p.prototype.getType=function(){return"dagre"},p}(k.Base);G.DagreLayout=b},27652:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var I=function(k,D){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,E){b.__proto__=E}||function(b,E){for(var p in E)Object.prototype.hasOwnProperty.call(E,p)&&(b[p]=E[p])},I(k,D)};return function(k,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");I(k,D);function b(){this.constructor=k}k.prototype=D===null?Object.create(D):(b.prototype=D.prototype,new b)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.Graph=void 0;var z=R(69787),F=function(I){L(k,I);function k(){return I!==null&&I.apply(this,arguments)||this}return k}(z.Graph);G.Graph=F},41106:function(Mr,G,R){"use strict";var L=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(G,"__esModule",{value:!0});var z=L(R(65236)),F=R(69209);G.default={layout:z.default,util:{time:F.time,notime:F.notime}}},78029:function(Mr,G,R){"use strict";var L=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(G,"__esModule",{value:!0});var z=L(R(40773)),F=function(D){var b=function(p){return function(y){var g;return((g=p.edge(y))===null||g===void 0?void 0:g.weight)||1}},E=D.graph().acyclicer==="greedy"?(0,z.default)(D,b(D)):I(D);E==null||E.forEach(function(p){var y=D.edge(p);D.removeEdgeObj(p),y.forwardName=p.name,y.reversed=!0,D.setEdge(p.w,p.v,y,"rev-".concat(Math.random()))})},I=function(D){var b=[],E={},p={},y=function(g){var T;p[g]||(p[g]=!0,E[g]=!0,(T=D.outEdges(g))===null||T===void 0||T.forEach(function(x){E[x.w]?b.push(x):y(x.w)}),delete E[g])};return D.nodes().forEach(y),b},k=function(D){D.edges().forEach(function(b){var E=D.edge(b);if(E.reversed){D.removeEdgeObj(b);var p=E.forwardName;delete E.reversed,delete E.forwardName,D.setEdge(b.w,b.v,E,p)}})};G.default={run:F,undo:k}},11500:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L=R(69209),z=function(I){var k,D=function(b){var E=I.children(b),p=I.node(b);if((E==null?void 0:E.length)&&E.forEach(function(T){return D(T)}),p.hasOwnProperty("minRank")){p.borderLeft=[],p.borderRight=[];for(var y=p.minRank,g=p.maxRank+1;y<g;y+=1)F(I,"borderLeft","_bl",b,p,y),F(I,"borderRight","_br",b,p,y)}};(k=I.children())===null||k===void 0||k.forEach(function(b){return D(b)})},F=function(I,k,D,b,E,p){var y={rank:p,borderType:k,width:0,height:0},g=E[k][p-1],T=(0,L.addDummyNode)(I,"border",y,D);E[k][p]=T,I.setParent(T,b),g&&I.setEdge(g,T,{weight:1})};G.default=z},35279:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=function(E){var p,y=(p=E.graph().rankdir)===null||p===void 0?void 0:p.toLowerCase();(y==="lr"||y==="rl")&&z(E)},L=function(E){var p,y=(p=E.graph().rankdir)===null||p===void 0?void 0:p.toLowerCase();(y==="bt"||y==="rl")&&I(E),(y==="lr"||y==="rl")&&(D(E),z(E))},z=function(E){E.nodes().forEach(function(p){F(E.node(p))}),E.edges().forEach(function(p){F(E.edge(p))})},F=function(E){var p=E.width;E.width=E.height,E.height=p},I=function(E){E.nodes().forEach(function(p){k(E.node(p))}),E.edges().forEach(function(p){var y,g=E.edge(p);(y=g.points)===null||y===void 0||y.forEach(function(T){return k(T)}),g.hasOwnProperty("y")&&k(g)})},k=function(E){(E==null?void 0:E.y)&&(E.y=-E.y)},D=function(E){E.nodes().forEach(function(p){b(E.node(p))}),E.edges().forEach(function(p){var y,g=E.edge(p);(y=g.points)===null||y===void 0||y.forEach(function(T){return b(T)}),g.hasOwnProperty("x")&&b(g)})},b=function(E){var p=E.x;E.x=E.y,E.y=p};G.default={adjust:R,undo:L}},55532:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=function(F,I){if(F!=="next"&&F!=="prev")return I},L=function(F){F.prev.next=F.next,F.next.prev=F.prev,delete F.next,delete F.prev},z=function(){function F(){var I={};I.prev=I,I.next=I.prev,this.shortcut=I}return F.prototype.dequeue=function(){var I=this.shortcut,k=I.prev;if(k&&k!==I)return L(k),k},F.prototype.enqueue=function(I){var k=this.shortcut;I.prev&&I.next&&L(I),I.next=k.next,k.next.prev=I,k.next=I,I.prev=k},F.prototype.toString=function(){for(var I=[],k=this.shortcut,D=k.prev;D!==k;)I.push(JSON.stringify(D,R)),D=D==null?void 0:D.prev;return"[".concat(I.join(", "),"]")},F}();G.default=z},40773:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var x=function(S,N){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,d){m.__proto__=d}||function(m,d){for(var V in d)Object.prototype.hasOwnProperty.call(d,V)&&(m[V]=d[V])},x(S,N)};return function(S,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");x(S,N);function m(){this.constructor=S}S.prototype=N===null?Object.create(N):(m.prototype=N.prototype,new m)}}(),z=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(G,"__esModule",{value:!0});var F=z(R(55532)),I=R(69787),k=function(x){L(S,x);function S(){return x!==null&&x.apply(this,arguments)||this}return S}(F.default),D=function(x){L(S,x);function S(){return x!==null&&x.apply(this,arguments)||this}return S}(I.Graph),b=function(){return 1},E=function(x,S){var N;if(x.nodeCount()<=1)return[];var m=g(x,S||b),d=p(m.graph,m.buckets,m.zeroIdx);return(N=d.map(function(V){return x.outEdges(V.v,V.w)}))===null||N===void 0?void 0:N.flat()},p=function(x,S,N){for(var m=[],d=S[S.length-1],V=S[0],Q;x.nodeCount();){for(;Q=V.dequeue();)y(x,S,N,Q);for(;Q=d.dequeue();)y(x,S,N,Q);if(x.nodeCount()){for(var j=S.length-2;j>0;--j)if(Q=S[j].dequeue(),Q){m=m.concat(y(x,S,N,Q,!0));break}}}return m},y=function(x,S,N,m,d){var V,Q,j=[];return(V=x.inEdges(m.v))===null||V===void 0||V.forEach(function(X){var K=x.edge(X),J=x.node(X.v);d&&j.push({v:X.v,w:X.w,in:0,out:0}),J.out===void 0&&(J.out=0),J.out-=K,T(S,N,J)}),(Q=x.outEdges(m.v))===null||Q===void 0||Q.forEach(function(X){var K=x.edge(X),J=X.w,rt=x.node(J);rt.in===void 0&&(rt.in=0),rt.in-=K,T(S,N,rt)}),x.removeNode(m.v),d?j:void 0},g=function(x,S){var N=new D,m=0,d=0;x.nodes().forEach(function(K){N.setNode(K,{v:K,in:0,out:0})}),x.edges().forEach(function(K){var J=N.edge(K)||0,rt=(S==null?void 0:S(K))||1,tt=J+rt;N.setEdge(K.v,K.w,tt),d=Math.max(d,N.node(K.v).out+=rt),m=Math.max(m,N.node(K.w).in+=rt)});for(var V=[],Q=d+m+3,j=0;j<Q;j++)V.push(new k);var X=m+1;return N.nodes().forEach(function(K){T(V,X,N.node(K))}),{buckets:V,zeroIdx:X,graph:N}},T=function(x,S,N){N.out?N.in?x[N.out-N.in+S].enqueue(N):x[x.length-1].enqueue(N):x[0].enqueue(N)};G.default=E},65236:function(Mr,G,R){"use strict";var L=this&&this.__assign||function(){return L=Object.assign||function($t){for(var ce,we=1,Pe=arguments.length;we<Pe;we++){ce=arguments[we];for(var ye in ce)Object.prototype.hasOwnProperty.call(ce,ye)&&($t[ye]=ce[ye])}return $t},L.apply(this,arguments)},z=this&&this.__importDefault||function($t){return $t&&$t.__esModule?$t:{default:$t}};Object.defineProperty(G,"__esModule",{value:!0});var F=z(R(78029)),I=z(R(46171)),k=z(R(76827)),D=R(69209),b=z(R(33562)),E=z(R(59596)),p=z(R(11500)),y=z(R(35279)),g=z(R(19597)),T=z(R(95)),x=z(R(24956)),S=R(27652),N=function($t,ce){var we=ce&&ce.debugTiming?D.time:D.notime;we("layout",function(){ce&&!ce.keepNodeOrder&&ce.prevGraph&&we("  inheritOrder",function(){d($t,ce.prevGraph)});var Pe=we("  buildLayoutGraph",function(){return lt($t)});ce&&ce.edgeLabelSpace===!1||we("  makeSpaceForEdgeLabels",function(){xt(Pe)});try{we("  runLayout",function(){m(Pe,we,ce)})}catch(ye){if(ye.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,ye);return}throw ye}we("  updateInputGraph",function(){V($t,Pe)})})},m=function($t,ce,we){ce("    removeSelfEdges",function(){Re($t)}),ce("    acyclic",function(){F.default.run($t)}),ce("    nestingGraph.run",function(){E.default.run($t)}),ce("    rank",function(){(0,k.default)((0,D.asNonCompoundGraph)($t))}),ce("    injectEdgeLabelProxies",function(){jt($t)}),ce("    removeEmptyRanks",function(){(0,D.removeEmptyRanks)($t)}),ce("    nestingGraph.cleanup",function(){E.default.cleanup($t)}),ce("    normalizeRanks",function(){(0,D.normalizeRanks)($t)}),ce("    assignRankMinMax",function(){Dt($t)}),ce("    removeEdgeLabelProxies",function(){Zt($t)}),ce("    normalize.run",function(){I.default.run($t)}),ce("    parentDummyChains",function(){(0,b.default)($t)}),ce("    addBorderSegments",function(){(0,p.default)($t)}),we&&we.keepNodeOrder&&ce("    initDataOrder",function(){(0,x.default)($t,we.nodeOrder)}),ce("    order",function(){(0,g.default)($t)}),ce("    insertSelfEdges",function(){me($t)}),ce("    adjustCoordinateSystem",function(){y.default.adjust($t)}),ce("    position",function(){(0,T.default)($t)}),ce("    positionSelfEdges",function(){Ae($t)}),ce("    removeBorderNodes",function(){ee($t)}),ce("    normalize.undo",function(){I.default.undo($t)}),ce("    fixupEdgeLabelCoords",function(){dt($t)}),ce("    undoCoordinateSystem",function(){y.default.undo($t)}),ce("    translateGraph",function(){Vt($t)}),ce("    assignNodeIntersects",function(){ue($t)}),ce("    reversePoints",function(){Ot($t)}),ce("    acyclic.undo",function(){F.default.undo($t)})},d=function($t,ce){$t.nodes().forEach(function(we){var Pe=$t.node(we),ye=ce.node(we);ye!==void 0?(Pe.fixorder=ye._order,delete ye._order):delete Pe.fixorder})},V=function($t,ce){$t.nodes().forEach(function(we){var Pe,ye=$t.node(we);if(ye){var Bt=ce.node(we);ye.x=Bt.x,ye.y=Bt.y,ye._order=Bt.order,ye._rank=Bt.rank,((Pe=ce.children(we))===null||Pe===void 0?void 0:Pe.length)&&(ye.width=Bt.width,ye.height=Bt.height)}}),$t.edges().forEach(function(we){var Pe=$t.edge(we),ye=ce.edge(we);Pe.points=ye?ye.points:[],ye&&ye.hasOwnProperty("x")&&(Pe.x=ye.x,Pe.y=ye.y)}),$t.graph().width=ce.graph().width,$t.graph().height=ce.graph().height},Q=["nodesep","edgesep","ranksep","marginx","marginy"],j={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},X=["acyclicer","ranker","rankdir","align"],K=["width","height","layer","fixorder"],J={width:0,height:0},rt=["minlen","weight","width","height","labeloffset"],tt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},nt=["labelpos"],lt=function($t){var ce=new S.Graph({multigraph:!0,compound:!0}),we=Ke($t.graph()),Pe={};return X==null||X.forEach(function(ye){we[ye]!==void 0&&(Pe[ye]=we[ye])}),ce.setGraph(Object.assign({},j,Be(we,Q),Pe)),$t.nodes().forEach(function(ye){var Bt=Ke($t.node(ye)),re=L(L({},J),Bt),Ee=Be(re,K);ce.setNode(ye,Ee),ce.setParent(ye,$t.parent(ye))}),$t.edges().forEach(function(ye){var Bt=Ke($t.edge(ye)),re={};nt==null||nt.forEach(function(Ee){Bt[Ee]!==void 0&&(re[Ee]=Bt[Ee])}),ce.setEdgeObj(ye,Object.assign({},tt,Be(Bt,rt),re))}),ce},xt=function($t){var ce=$t.graph();ce.ranksep||(ce.ranksep=0),ce.ranksep/=2,$t.nodes().forEach(function(we){var Pe=$t.node(we);isNaN(Pe.layer)||Pe.layer||(Pe.layer=0)}),$t.edges().forEach(function(we){var Pe,ye=$t.edge(we);ye.minlen*=2,((Pe=ye.labelpos)===null||Pe===void 0?void 0:Pe.toLowerCase())!=="c"&&(ce.rankdir==="TB"||ce.rankdir==="BT"?ye.width+=ye.labeloffset:ye.height+=ye.labeloffset)})},jt=function($t){$t.edges().forEach(function(ce){var we=$t.edge(ce);if(we.width&&we.height){var Pe=$t.node(ce.v),ye=$t.node(ce.w),Bt={e:ce,rank:(ye.rank-Pe.rank)/2+Pe.rank};(0,D.addDummyNode)($t,"edge-proxy",Bt,"_ep")}})},Dt=function($t){var ce=0;$t.nodes().forEach(function(we){var Pe,ye,Bt=$t.node(we);Bt.borderTop&&(Bt.minRank=(Pe=$t.node(Bt.borderTop))===null||Pe===void 0?void 0:Pe.rank,Bt.maxRank=(ye=$t.node(Bt.borderBottom))===null||ye===void 0?void 0:ye.rank,ce=Math.max(ce,Bt.maxRank||-Infinity))}),$t.graph().maxRank=ce},Zt=function($t){$t.nodes().forEach(function(ce){var we=$t.node(ce);we.dummy==="edge-proxy"&&($t.edge(we.e).labelRank=we.rank,$t.removeNode(ce))})},Vt=function($t){var ce,we=0,Pe,ye=0,Bt=$t.graph(),re=Bt.marginx||0,Ee=Bt.marginy||0,It=function(Et){if(!!Et){var Wt=Et.x,fe=Et.y,Fe=Et.width,$e=Et.height;!isNaN(Wt)&&!isNaN(Fe)&&(ce===void 0&&(ce=Wt-Fe/2),ce=Math.min(ce,Wt-Fe/2),we=Math.max(we,Wt+Fe/2)),!isNaN(fe)&&!isNaN($e)&&(Pe===void 0&&(Pe=fe-$e/2),Pe=Math.min(Pe,fe-$e/2),ye=Math.max(ye,fe+$e/2))}};$t.nodes().forEach(function(Et){It($t.node(Et))}),$t.edges().forEach(function(Et){var Wt=$t.edge(Et);(Wt==null?void 0:Wt.hasOwnProperty("x"))&&It(Wt)}),ce-=re,Pe-=Ee,$t.nodes().forEach(function(Et){var Wt=$t.node(Et);Wt&&(Wt.x-=ce,Wt.y-=Pe)}),$t.edges().forEach(function(Et){var Wt,fe=$t.edge(Et);(Wt=fe.points)===null||Wt===void 0||Wt.forEach(function(Fe){Fe.x-=ce,Fe.y-=Pe}),fe.hasOwnProperty("x")&&(fe.x-=ce),fe.hasOwnProperty("y")&&(fe.y-=Pe)}),Bt.width=we-ce+re,Bt.height=ye-Pe+Ee},ue=function($t){$t.edges().forEach(function(ce){var we=$t.edge(ce),Pe=$t.node(ce.v),ye=$t.node(ce.w),Bt,re;we.points?(Bt=we.points[0],re=we.points[we.points.length-1]):(we.points=[],Bt=ye,re=Pe),we.points.unshift((0,D.intersectRect)(Pe,Bt)),we.points.push((0,D.intersectRect)(ye,re))})},dt=function($t){$t.edges().forEach(function(ce){var we=$t.edge(ce);if(we==null?void 0:we.hasOwnProperty("x"))switch((we.labelpos==="l"||we.labelpos==="r")&&(we.width-=we.labeloffset),we.labelpos){case"l":we.x-=we.width/2+we.labeloffset;break;case"r":we.x+=we.width/2+we.labeloffset;break}})},Ot=function($t){$t.edges().forEach(function(ce){var we,Pe=$t.edge(ce);Pe.reversed&&((we=Pe.points)===null||we===void 0||we.reverse())})},ee=function($t){$t.nodes().forEach(function(ce){var we,Pe,ye;if((we=$t.children(ce))===null||we===void 0?void 0:we.length){var Bt=$t.node(ce),re=$t.node(Bt.borderTop),Ee=$t.node(Bt.borderBottom),It=$t.node(Bt.borderLeft[((Pe=Bt.borderLeft)===null||Pe===void 0?void 0:Pe.length)-1]),Et=$t.node(Bt.borderRight[((ye=Bt.borderRight)===null||ye===void 0?void 0:ye.length)-1]);Bt.width=Math.abs((Et==null?void 0:Et.x)-(It==null?void 0:It.x))||10,Bt.height=Math.abs((Ee==null?void 0:Ee.y)-(re==null?void 0:re.y))||10,Bt.x=((It==null?void 0:It.x)||0)+Bt.width/2,Bt.y=((re==null?void 0:re.y)||0)+Bt.height/2}}),$t.nodes().forEach(function(ce){var we;((we=$t.node(ce))===null||we===void 0?void 0:we.dummy)==="border"&&$t.removeNode(ce)})},Re=function($t){$t.edges().forEach(function(ce){if(ce.v===ce.w){var we=$t.node(ce.v);we.selfEdges||(we.selfEdges=[]),we.selfEdges.push({e:ce,label:$t.edge(ce)}),$t.removeEdgeObj(ce)}})},me=function($t){var ce=(0,D.buildLayerMatrix)($t);ce==null||ce.forEach(function(we){var Pe=0;we==null||we.forEach(function(ye,Bt){var re,Ee=$t.node(ye);Ee.order=Bt+Pe,(re=Ee.selfEdges)===null||re===void 0||re.forEach(function(It){(0,D.addDummyNode)($t,"selfedge",{width:It.label.width,height:It.label.height,rank:Ee.rank,order:Bt+ ++Pe,e:It.e,label:It.label},"_se")}),delete Ee.selfEdges})})},Ae=function($t){$t.nodes().forEach(function(ce){var we=$t.node(ce);if(we.dummy==="selfedge"){var Pe=$t.node(we.e.v),ye=Pe.x+Pe.width/2,Bt=Pe.y,re=we.x-ye,Ee=Pe.height/2;$t.setEdgeObj(we.e,we.label),$t.removeNode(ce),we.label.points=[{x:ye+2*re/3,y:Bt-Ee},{x:ye+5*re/6,y:Bt-Ee},{y:Bt,x:ye+re},{x:ye+5*re/6,y:Bt+Ee},{x:ye+2*re/3,y:Bt+Ee}],we.label.x=we.x,we.label.y=we.y}})},Be=function($t,ce){var we={};return ce==null||ce.forEach(function(Pe){$t[Pe]!==void 0&&(we[Pe]=+$t[Pe])}),we},Ke=function($t){$t===void 0&&($t={});var ce={};return Object.keys($t).forEach(function(we){ce[we.toLowerCase()]=$t[we]}),ce};G.default=N},59596:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L=R(69209),z=function(b){var E,p=(0,L.addDummyNode)(b,"root",{},"_root"),y=I(b),g=Math.max.apply(Math,Object.values(y));Math.abs(g)===Infinity&&(g=1);var T=g-1,x=2*T+1;b.graph().nestingRoot=p,b.edges().forEach(function(N){b.edge(N).minlen*=x});var S=k(b)+1;(E=b.children())===null||E===void 0||E.forEach(function(N){F(b,p,x,S,T,y,N)}),b.graph().nodeRankFactor=x},F=function(b,E,p,y,g,T,x){var S=b.children(x);if(!(S==null?void 0:S.length)){x!==E&&b.setEdge(E,x,{weight:0,minlen:p});return}var N=(0,L.addBorderNode)(b,"_bt"),m=(0,L.addBorderNode)(b,"_bb"),d=b.node(x);b.setParent(N,x),d.borderTop=N,b.setParent(m,x),d.borderBottom=m,S==null||S.forEach(function(V){F(b,E,p,y,g,T,V);var Q=b.node(V),j=Q.borderTop?Q.borderTop:V,X=Q.borderBottom?Q.borderBottom:V,K=Q.borderTop?y:2*y,J=j!==X?1:g-T[x]+1;b.setEdge(N,j,{minlen:J,weight:K,nestingEdge:!0}),b.setEdge(X,m,{minlen:J,weight:K,nestingEdge:!0})}),b.parent(x)||b.setEdge(E,N,{weight:0,minlen:g+T[x]})},I=function(b){var E,p={},y=function(g,T){var x=b.children(g);x==null||x.forEach(function(S){return y(S,T+1)}),p[g]=T};return(E=b.children())===null||E===void 0||E.forEach(function(g){return y(g,1)}),p},k=function(b){var E=0;return b.edges().forEach(function(p){E+=b.edge(p).weight}),E},D=function(b){var E=b.graph();E.nestingRoot&&b.removeNode(E.nestingRoot),delete E.nestingRoot,b.edges().forEach(function(p){var y=b.edge(p);y.nestingEdge&&b.removeEdgeObj(p)})};G.default={run:z,cleanup:D}},46171:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L=R(69209),z=function(k){k.graph().dummyChains=[],k.edges().forEach(function(D){return F(k,D)})},F=function(k,D){var b=D.v,E=k.node(b).rank,p=D.w,y=k.node(p).rank,g=D.name,T=k.edge(D),x=T.labelRank;if(y!==E+1){k.removeEdgeObj(D);var S=k.graph(),N,m,d;for(d=0,++E;E<y;++d,++E)T.points=[],m={edgeLabel:T,width:0,height:0,edgeObj:D,rank:E},N=(0,L.addDummyNode)(k,"edge",m,"_d"),E===x&&(m.width=T.width,m.height=T.height,m.dummy="edge-label",m.labelpos=T.labelpos),k.setEdge(b,N,{weight:T.weight},g),d===0&&(S.dummyChains||(S.dummyChains=[]),S.dummyChains.push(N)),b=N;k.setEdge(b,p,{weight:T.weight},g)}},I=function(k){var D;(D=k.graph().dummyChains)===null||D===void 0||D.forEach(function(b){var E=k.node(b),p=E.edgeLabel,y;E.edgeObj&&k.setEdgeObj(E.edgeObj,p);for(var g=b;E.dummy;)y=k.successors(g)[0],k.removeNode(g),p.points.push({x:E.x,y:E.y}),E.dummy==="edge-label"&&(p.x=E.x,p.y=E.y,p.width=E.width,p.height=E.height),g=y,E=k.node(g)})};G.default={run:z,undo:I}},80314:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=function(L,z,F){var I={},k;F==null||F.forEach(function(D){for(var b=L.parent(D),E,p;b;){if(E=L.parent(b),E?(p=I[E],I[E]=b):(p=k,k=b),p&&p!==b){z.setEdge(p,b);return}b=E}})};G.default=R},89921:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=function(L,z){return z.map(function(F){var I=L.inEdges(F);if(!(I==null?void 0:I.length))return{v:F};{var k={sum:0,weight:0};return I==null||I.forEach(function(D){var b=L.edge(D),E=L.node(D.v);k.sum+=b.weight*E.order,k.weight+=b.weight}),{v:F,barycenter:k.sum/k.weight,weight:k.weight}}})};G.default=R},77006:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L=R(27652),z=function(I,k,D){var b=F(I),E=new L.Graph({compound:!0}).setGraph({root:b}).setDefaultNodeLabel(function(p){return I.node(p)});return I.nodes().forEach(function(p){var y,g=I.node(p),T=I.parent(p);(g.rank===k||g.minRank<=k&&k<=g.maxRank)&&(E.setNode(p),E.setParent(p,T||b),(y=I[D](p))===null||y===void 0||y.forEach(function(x){var S=x.v===p?x.w:x.v,N=E.edgeFromArgs(S,p),m=N!==void 0?N.weight:0;E.setEdge(S,p,{weight:I.edge(x).weight+m})}),g.hasOwnProperty("minRank")&&E.setNode(p,{borderLeft:g.borderLeft[k],borderRight:g.borderRight[k]}))}),E},F=function(I){for(var k;I.hasNode(k="_root".concat(Math.random())););return k};G.default=z},32957:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L=R(69209),z=function(I,k,D){for(var b=(0,L.zipObject)(D,D.map(function(S,N){return N})),E=k.map(function(S){var N,m=(N=I.outEdges(S))===null||N===void 0?void 0:N.map(function(d){return{pos:b[d.w]||0,weight:I.edge(d).weight}});return m==null?void 0:m.sort(function(d,V){return d.pos-V.pos})}),p=E.flat().filter(function(S){return S!==void 0}),y=1;y<D.length;)y<<=1;var g=2*y-1;y-=1;var T=Array(g).fill(0,0,g),x=0;return p==null||p.forEach(function(S){if(S){var N=S.pos+y;T[N]+=S.weight;for(var m=0;N>0;)N%2&&(m+=T[N+1]),N=N-1>>1,T[N]+=S.weight;x+=S.weight*m}}),x},F=function(I,k){for(var D=0,b=1;b<(k==null?void 0:k.length);b+=1)D+=z(I,k[b-1],k[b]);return D};G.default=F},19597:function(Mr,G,R){"use strict";var L=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(G,"__esModule",{value:!0});var z=L(R(15697)),F=L(R(32957)),I=L(R(77006)),k=L(R(80314)),D=L(R(99455)),b=R(49784),E=R(27652),p=R(69209),y=function(S){for(var N=(0,p.maxRank)(S),m=[],d=[],V=1;V<N+1;V++)m.push(V);for(var V=N-1;V>-1;V--)d.push(V);var Q=g(S,m,"inEdges"),j=g(S,d,"outEdges"),X=(0,z.default)(S);x(S,X);for(var K=Number.POSITIVE_INFINITY,J,V=0,rt=0;rt<4;++V,++rt){T(V%2?Q:j,V%4>=2),X=(0,p.buildLayerMatrix)(S);var tt=(0,F.default)(S,X);tt<K&&(rt=0,J=(0,b.clone)(X),K=tt)}X=(0,z.default)(S),x(S,X);for(var V=0,rt=0;rt<4;++V,++rt){T(V%2?Q:j,V%4>=2,!0),X=(0,p.buildLayerMatrix)(S);var tt=(0,F.default)(S,X);tt<K&&(rt=0,J=(0,b.clone)(X),K=tt)}x(S,J)},g=function(S,N,m){return N.map(function(d){return(0,I.default)(S,d,m)})},T=function(S,N,m){var d=new E.Graph;S==null||S.forEach(function(V){for(var Q,j=V.graph().root,X=(0,D.default)(V,j,d,N,m),K=0;K<((Q=X.vs)===null||Q===void 0?void 0:Q.length);K++){var J=V.node(X.vs[K]);J&&(J.order=K)}(0,k.default)(V,d,X.vs)})},x=function(S,N){N==null||N.forEach(function(m){m==null||m.forEach(function(d,V){S.node(d).order=V})})};G.default=y},24956:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=function(L,z){var F=L.nodes().filter(function(b){var E;return!((E=L.children(b))===null||E===void 0?void 0:E.length)}),I=F.map(function(b){return L.node(b).rank}),k=Math.max.apply(Math,I),D=Array(k+1).fill([]);z==null||z.forEach(function(b){var E=L.node(b);!E||(E==null?void 0:E.dummy)||isNaN(E.rank)||(E.fixorder=D[E.rank].length,D[E.rank].push(b))})};G.default=R},15697:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=function(L){for(var z={},F=L.nodes().filter(function(T){var x;return!((x=L.children(T))===null||x===void 0?void 0:x.length)}),I=F.map(function(T){return L.node(T).rank}),k=Math.max.apply(Math,I),D=[],b=0;b<k+1;b++)D.push([]);var E=function(T){var x;if(!z.hasOwnProperty(T)){z[T]=!0;var S=L.node(T);isNaN(S.rank)||D[S.rank].push(T),(x=L.successors(T))===null||x===void 0||x.forEach(function(N){return E(N)})}},p=F.sort(function(T,x){return L.node(T).rank-L.node(x).rank}),y=p.filter(function(T){return L.node(T).fixorder!==void 0}),g=y.sort(function(T,x){return L.node(T).fixorder-L.node(x).fixorder});return g==null||g.forEach(function(T){isNaN(L.node(T).rank)||D[L.node(T).rank].push(T),z[T]=!0}),p==null||p.forEach(E),D};G.default=R},7043:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=function(F,I){var k,D,b,E={};F==null||F.forEach(function(y,g){E[y.v]={i:g,indegree:0,in:[],out:[],vs:[y.v]};var T=E[y.v];y.barycenter!==void 0&&(T.barycenter=y.barycenter,T.weight=y.weight)}),(k=I.edges())===null||k===void 0||k.forEach(function(y){var g=E[y.v],T=E[y.w];g!==void 0&&T!==void 0&&(T.indegree++,g.out.push(E[y.w]))});var p=(b=(D=Object.values(E)).filter)===null||b===void 0?void 0:b.call(D,function(y){return!y.indegree});return L(p)},L=function(F){for(var I,k,D=[],b=function(T){return function(x){x.merged||(x.barycenter===void 0||T.barycenter===void 0||x.barycenter>=T.barycenter)&&z(T,x)}},E=function(T){return function(x){x.in.push(T),--x.indegree==0&&F.push(x)}},p=function(){var T=F.pop();D.push(T),(I=T.in.reverse())===null||I===void 0||I.forEach(function(x){return b(T)(x)}),(k=T.out)===null||k===void 0||k.forEach(function(x){return E(T)(x)})};F==null?void 0:F.length;)p();var y=D.filter(function(T){return!T.merged}),g=["vs","i","barycenter","weight"];return y.map(function(T){var x={};return g==null||g.forEach(function(S){T[S]!==void 0&&(x[S]=T[S])}),x})},z=function(F,I){var k,D=0,b=0;F.weight&&(D+=F.barycenter*F.weight,b+=F.weight),I.weight&&(D+=I.barycenter*I.weight,b+=I.weight),F.vs=(k=I.vs)===null||k===void 0?void 0:k.concat(F.vs),F.barycenter=D/b,F.weight=b,F.i=Math.min(I.i,F.i),I.merged=!0};G.default=R},99455:function(Mr,G,R){"use strict";var L=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(G,"__esModule",{value:!0});var z=L(R(89921)),F=L(R(7043)),I=L(R(21498)),k=function(E,p,y,g,T){var x,S,N,m,d=E.children(p),V=E.node(p),Q=V?V.borderLeft:void 0,j=V?V.borderRight:void 0,X={};Q&&(d=d==null?void 0:d.filter(function(lt){return lt!==Q&&lt!==j}));var K=(0,z.default)(E,d||[]);K==null||K.forEach(function(lt){var xt;if((xt=E.children(lt.v))===null||xt===void 0?void 0:xt.length){var jt=k(E,lt.v,y,g);X[lt.v]=jt,jt.hasOwnProperty("barycenter")&&b(lt,jt)}});var J=(0,F.default)(K,y);D(J,X),(x=J.filter(function(lt){return lt.vs.length>0}))===null||x===void 0||x.forEach(function(lt){var xt=E.node(lt.vs[0]);xt&&(lt.fixorder=xt.fixorder,lt.order=xt.order)});var rt=(0,I.default)(J,g,T);if(Q&&(rt.vs=[Q,rt.vs,j].flat(),(S=E.predecessors(Q))===null||S===void 0?void 0:S.length)){var tt=E.node(((N=E.predecessors(Q))===null||N===void 0?void 0:N[0])||""),nt=E.node(((m=E.predecessors(j))===null||m===void 0?void 0:m[0])||"");rt.hasOwnProperty("barycenter")||(rt.barycenter=0,rt.weight=0),rt.barycenter=(rt.barycenter*rt.weight+tt.order+nt.order)/(rt.weight+2),rt.weight+=2}return rt},D=function(E,p){E==null||E.forEach(function(y){var g,T=(g=y.vs)===null||g===void 0?void 0:g.map(function(x){return p[x]?p[x].vs:x});y.vs=T.flat()})},b=function(E,p){E.barycenter!==void 0?(E.barycenter=(E.barycenter*E.weight+p.barycenter*p.weight)/(E.weight+p.weight),E.weight+=p.weight):(E.barycenter=p.barycenter,E.weight=p.weight)};G.default=k},21498:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L=R(69209),z=function(k,D,b){var E=(0,L.partition)(k,function(m){return m.hasOwnProperty("fixorder")&&!isNaN(m.fixorder)||m.hasOwnProperty("barycenter")}),p=E.lhs,y=E.rhs.sort(function(m,d){return-m.i- -d.i}),g=[],T=0,x=0,S=0;p==null||p.sort(I(!!D,!!b)),S=F(g,y,S),p==null||p.forEach(function(m){var d;S+=(d=m.vs)===null||d===void 0?void 0:d.length,g.push(m.vs),T+=m.barycenter*m.weight,x+=m.weight,S=F(g,y,S)});var N={vs:g.flat()};return x&&(N.barycenter=T/x,N.weight=x),N},F=function(k,D,b){for(var E=b,p;D.length&&(p=D[D.length-1]).i<=E;)D.pop(),k==null||k.push(p.vs),E++;return E},I=function(k,D){return function(b,E){if(b.fixorder!==void 0&&E.fixorder!==void 0)return b.fixorder-E.fixorder;if(b.barycenter<E.barycenter)return-1;if(b.barycenter>E.barycenter)return 1;if(D&&b.order!==void 0&&E.order!==void 0){if(b.order<E.order)return-1;if(b.order>E.order)return 1}return k?E.i-b.i:b.i-E.i}};G.default=z},33562:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=function(F){var I,k={},D=0,b=function(E){var p,y=D;(p=F.children(E))===null||p===void 0||p.forEach(b),k[E]={low:y,lim:D++}};return(I=F.children())===null||I===void 0||I.forEach(b),k},L=function(F,I,k,D){var b=[],E=[],p=Math.min(I[k].low,I[D].low),y=Math.max(I[k].lim,I[D].lim),g,T;g=k;do g=F.parent(g),b.push(g);while(g&&(I[g].low>p||y>I[g].lim));for(T=g,g=D;g&&g!==T;)E.push(g),g=F.parent(g);return{lca:T,path:b.concat(E.reverse())}},z=function(F){var I,k=R(F);(I=F.graph().dummyChains)===null||I===void 0||I.forEach(function(D){var b,E,p=D,y=F.node(p),g=y.edgeObj;if(!!g)for(var T=L(F,k,g.v,g.w),x=T.path,S=T.lca,N=0,m=x[N],d=!0;p!==g.w;){if(y=F.node(p),d){for(;m!==S&&((b=F.node(m))===null||b===void 0?void 0:b.maxRank)<y.rank;)N++,m=x[N];m===S&&(d=!1)}if(!d){for(;N<x.length-1&&((E=F.node(x[N+1]))===null||E===void 0?void 0:E.minRank)<=y.rank;)N++;m=x[N]}F.setParent(p,m),p=F.successors(p)[0]}})};G.default=z},71963:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var Q=function(j,X){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,J){K.__proto__=J}||function(K,J){for(var rt in J)Object.prototype.hasOwnProperty.call(J,rt)&&(K[rt]=J[rt])},Q(j,X)};return function(j,X){if(typeof X!="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");Q(j,X);function K(){this.constructor=j}j.prototype=X===null?Object.create(X):(K.prototype=X.prototype,new K)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.width=G.sep=G.positionX=G.balance=G.alignCoordinates=G.findSmallestWidthAlignment=G.buildBlockGraph=G.horizontalCompaction=G.verticalAlignment=G.hasConflict=G.addConflict=G.findOtherInnerSegmentNode=G.findType2Conflicts=G.findType1Conflicts=void 0;var z=R(69787),F=R(69209),I=function(Q){L(j,Q);function j(){return Q!==null&&Q.apply(this,arguments)||this}return j}(z.Graph),k=function(Q,j){var X={},K=function(J,rt){var tt=0,nt=0,lt=J.length,xt=rt==null?void 0:rt[(rt==null?void 0:rt.length)-1];return rt==null||rt.forEach(function(jt,Dt){var Zt,Vt=(0,G.findOtherInnerSegmentNode)(Q,jt),ue=Vt?Q.node(Vt).order:lt;(Vt||jt===xt)&&((Zt=rt.slice(nt,Dt+1))===null||Zt===void 0||Zt.forEach(function(dt){var Ot;(Ot=Q.predecessors(dt))===null||Ot===void 0||Ot.forEach(function(ee){var Re,me=Q.node(ee),Ae=me.order;(Ae<tt||ue<Ae)&&!(me.dummy&&((Re=Q.node(dt))===null||Re===void 0?void 0:Re.dummy))&&(0,G.addConflict)(X,ee,dt)})}),nt=Dt+1,tt=ue)}),rt};return(j==null?void 0:j.length)&&j.reduce(K),X};G.findType1Conflicts=k;var D=function(Q,j){var X={},K=function(rt,tt,nt,lt,xt){for(var jt,Dt=[],Zt=tt;Zt<nt;Zt++)Dt.push(Zt);Dt.forEach(function(Vt){var ue,dt;jt=rt[Vt],((ue=Q.node(jt))===null||ue===void 0?void 0:ue.dummy)&&((dt=Q.predecessors(jt))===null||dt===void 0||dt.forEach(function(Ot){var ee=Q.node(Ot);ee.dummy&&(ee.order<lt||ee.order>xt)&&(0,G.addConflict)(X,Ot,jt)}))})},J=function(rt,tt){var nt=-1,lt,xt=0;return tt==null||tt.forEach(function(jt,Dt){var Zt;if(((Zt=Q.node(jt))===null||Zt===void 0?void 0:Zt.dummy)==="border"){var Vt=Q.predecessors(jt)||[];Vt.length&&(lt=Q.node(Vt[0]).order,K(tt,xt,Dt,nt,lt),xt=Dt,nt=lt)}K(tt,xt,tt.length,lt,rt.length)}),tt};return(j==null?void 0:j.length)&&j.reduce(J),X};G.findType2Conflicts=D;var b=function(Q,j){var X,K;if((X=Q.node(j))===null||X===void 0?void 0:X.dummy)return(K=Q.predecessors(j))===null||K===void 0?void 0:K.find(function(J){return Q.node(J).dummy})};G.findOtherInnerSegmentNode=b;var E=function(Q,j,X){var K=j,J=X;if(K>J){var rt=K;K=J,J=rt}var tt=Q[K];tt||(Q[K]=tt={}),tt[J]=!0};G.addConflict=E;var p=function(Q,j,X){var K=j,J=X;if(K>J){var rt=j;K=J,J=rt}return!!Q[K]};G.hasConflict=p;var y=function(Q,j,X,K){var J={},rt={},tt={};return j==null||j.forEach(function(nt){nt==null||nt.forEach(function(lt,xt){J[lt]=lt,rt[lt]=lt,tt[lt]=xt})}),j==null||j.forEach(function(nt){var lt=-1;nt==null||nt.forEach(function(xt){var jt=K(xt);if(jt.length){jt=jt.sort(function(dt,Ot){return tt[dt]-tt[Ot]});for(var Dt=(jt.length-1)/2,Zt=Math.floor(Dt),Vt=Math.ceil(Dt);Zt<=Vt;++Zt){var ue=jt[Zt];rt[xt]===xt&&lt<tt[ue]&&!(0,G.hasConflict)(X,xt,ue)&&(rt[ue]=xt,rt[xt]=J[xt]=J[ue],lt=tt[ue])}}})}),{root:J,align:rt}};G.verticalAlignment=y;var g=function(Q,j,X,K,J){var rt,tt={},nt=(0,G.buildBlockGraph)(Q,j,X,J),lt=J?"borderLeft":"borderRight",xt=function(Zt,Vt){for(var ue=nt.nodes(),dt=ue.pop(),Ot={};dt;)Ot[dt]?Zt(dt):(Ot[dt]=!0,ue.push(dt),ue=ue.concat(Vt(dt))),dt=ue.pop()},jt=function(Zt){tt[Zt]=(nt.inEdges(Zt)||[]).reduce(function(Vt,ue){return Math.max(Vt,(tt[ue.v]||0)+nt.edge(ue))},0)},Dt=function(Zt){var Vt=(nt.outEdges(Zt)||[]).reduce(function(dt,Ot){return Math.min(dt,(tt[Ot.w]||0)-nt.edge(Ot))},Number.POSITIVE_INFINITY),ue=Q.node(Zt);Vt!==Number.POSITIVE_INFINITY&&ue.borderType!==lt&&(tt[Zt]=Math.max(tt[Zt],Vt))};return xt(jt,nt.predecessors.bind(nt)),xt(Dt,nt.successors.bind(nt)),(rt=Object.values(K))===null||rt===void 0||rt.forEach(function(Zt){tt[Zt]=tt[X[Zt]]}),tt};G.horizontalCompaction=g;var T=function(Q,j,X,K){var J=new I,rt=Q.graph(),tt=(0,G.sep)(rt.nodesep,rt.edgesep,K);return j==null||j.forEach(function(nt){var lt;nt==null||nt.forEach(function(xt){var jt=X[xt];if(J.setNode(jt),lt){var Dt=X[lt],Zt=J.edgeFromArgs(Dt,jt);J.setEdge(Dt,jt,Math.max(tt(Q,xt,lt),Zt||0))}lt=xt})}),J};G.buildBlockGraph=T;var x=function(Q,j){return(0,F.minBy)(Object.values(j),function(X){var K,J=Number.NEGATIVE_INFINITY,rt=Number.POSITIVE_INFINITY;return(K=Object.keys(X))===null||K===void 0||K.forEach(function(tt){var nt=X[tt],lt=(0,G.width)(Q,tt)/2;J=Math.max(nt+lt,J),rt=Math.min(nt-lt,rt)}),J-rt})};G.findSmallestWidthAlignment=x;function S(Q,j){var X=Object.values(j),K=Math.min.apply(Math,X),J=Math.max.apply(Math,X);["u","d"].forEach(function(rt){["l","r"].forEach(function(tt){var nt=rt+tt,lt=Q[nt],xt;if(lt!==j){var jt=Object.values(lt);xt=tt==="l"?K-Math.min.apply(Math,jt):J-Math.max.apply(Math,jt),xt&&(Q[nt]={},Object.keys(lt).forEach(function(Dt){Q[nt][Dt]=lt[Dt]+xt}))}})})}G.alignCoordinates=S;var N=function(Q,j){var X={};return Object.keys(Q.ul).forEach(function(K){if(j)X[K]=Q[j.toLowerCase()][K];else{var J=Object.values(Q).map(function(rt){return rt[K]});X[K]=(J[0]+J[1])/2}}),X};G.balance=N;var m=function(Q){var j=(0,F.buildLayerMatrix)(Q),X=Object.assign((0,G.findType1Conflicts)(Q,j),(0,G.findType2Conflicts)(Q,j)),K={},J;["u","d"].forEach(function(tt){J=tt==="u"?j:Object.values(j).reverse(),["l","r"].forEach(function(nt){nt==="r"&&(J=J.map(function(Dt){return Object.values(Dt).reverse()}));var lt=(tt==="u"?Q.predecessors:Q.successors).bind(Q),xt=(0,G.verticalAlignment)(Q,J,X,lt),jt=(0,G.horizontalCompaction)(Q,J,xt.root,xt.align,nt==="r");nt==="r"&&Object.keys(jt).forEach(function(Dt){jt[Dt]=-jt[Dt]}),K[tt+nt]=jt})});var rt=(0,G.findSmallestWidthAlignment)(Q,K);return S(K,rt),(0,G.balance)(K,Q.graph().align)};G.positionX=m;var d=function(Q,j,X){return function(K,J,rt){var tt=K.node(J),nt=K.node(rt),lt=0,xt;if(lt+=tt.width/2,tt.hasOwnProperty("labelpos"))switch((tt.labelpos||"").toLowerCase()){case"l":xt=-tt.width/2;break;case"r":xt=tt.width/2;break}if(xt&&(lt+=X?xt:-xt),xt=0,lt+=(tt.dummy?j:Q)/2,lt+=(nt.dummy?j:Q)/2,lt+=nt.width/2,nt.labelpos)switch((nt.labelpos||"").toLowerCase()){case"l":xt=nt.width/2;break;case"r":xt=-nt.width/2;break}return xt&&(lt+=X?xt:-xt),xt=0,lt}};G.sep=d;var V=function(Q,j){return Q.node(j).width||0};G.width=V},95:function(Mr,G,R){"use strict";var L=this&&this.__spreadArray||function(b,E,p){if(p||arguments.length===2)for(var y=0,g=E.length,T;y<g;y++)(T||!(y in E))&&(T||(T=Array.prototype.slice.call(E,0,y)),T[y]=E[y]);return b.concat(T||Array.prototype.slice.call(E))};Object.defineProperty(G,"__esModule",{value:!0});var z=R(69209),F=R(71963),I=function(b){var E=(0,z.buildLayerMatrix)(b),p=b.graph().ranksep,y=0;E==null||E.forEach(function(g){var T=g.map(function(S){return b.node(S).height}),x=Math.max.apply(Math,L(L([],T,!1),[0],!1));g==null||g.forEach(function(S){b.node(S).y=y+x/2}),y+=x+p})},k=function(b){var E=(0,z.buildLayerMatrix)(b),p=Object.assign((0,F.findType1Conflicts)(b,E),(0,F.findType2Conflicts)(b,E)),y={},g=[];["u","d"].forEach(function(x){g=x==="u"?E:Object.values(E).reverse(),["l","r"].forEach(function(S){S==="r"&&(g=g.map(function(V){return Object.values(V).reverse()}));var N=(x==="u"?b.predecessors:b.successors).bind(b),m=(0,F.verticalAlignment)(b,g,p,N),d=(0,F.horizontalCompaction)(b,g,m.root,m.align,S==="r");S==="r"&&Object.keys(d).forEach(function(V){return d[V]=-d[V]}),y[x+S]=d})});var T=(0,F.findSmallestWidthAlignment)(b,y);return T&&(0,F.alignCoordinates)(y,T),(0,F.balance)(y,b.graph().align)},D=function(b){var E,p=(0,z.asNonCompoundGraph)(b);I(p);var y=k(p);(E=Object.keys(y))===null||E===void 0||E.forEach(function(g){p.node(g).x=y[g]})};G.default=D},13614:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.feasibleTreeWithLayer=G.feasibleTree=void 0;var L=R(37323),z=R(69209),F=R(27652),I=function(y){var g=new F.Graph({directed:!1}),T=y.nodes()[0],x=y.nodeCount();g.setNode(T,{});for(var S,N;k(g,y)<x;)S=E(g,y),N=g.hasNode(S.v)?(0,L.slack)(y,S):-(0,L.slack)(y,S),p(g,y,N);return g};G.feasibleTree=I;var k=function(y,g){var T=function(x){g.nodeEdges(x).forEach(function(S){var N=S.v,m=x===N?S.w:N;!y.hasNode(m)&&!(0,L.slack)(g,S)&&(y.setNode(m,{}),y.setEdge(x,m,{}),T(m))})};return y.nodes().forEach(T),y.nodeCount()},D=function(y){var g=new F.Graph({directed:!1}),T=y.nodes()[0],x=y.nodes().filter(function(m){return!!y.node(m)}).length;g.setNode(T,{});for(var S,N;b(g,y)<x;)S=E(g,y),N=g.hasNode(S.v)?(0,L.slack)(y,S):-(0,L.slack)(y,S),p(g,y,N);return g};G.feasibleTreeWithLayer=D;var b=function(y,g){var T=function(x){var S;(S=g.nodeEdges(x))===null||S===void 0||S.forEach(function(N){var m=N.v,d=x===m?N.w:m;!y.hasNode(d)&&(g.node(d).layer!==void 0||!(0,L.slack)(g,N))&&(y.setNode(d,{}),y.setEdge(x,d,{}),T(d))})};return y.nodes().forEach(T),y.nodeCount()},E=function(y,g){return(0,z.minBy)(g.edges(),function(T){return y.hasNode(T.v)!==y.hasNode(T.w)?(0,L.slack)(g,T):Infinity})},p=function(y,g,T){y.nodes().forEach(function(x){g.node(x).rank||(g.node(x).rank=0),g.node(x).rank+=T})};G.default={feasibleTree:I,feasibleTreeWithLayer:D}},76827:function(Mr,G,R){"use strict";var L=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(G,"__esModule",{value:!0});var z=R(37323),F=R(13614),I=L(R(32253)),k=function(p){switch(p.graph().ranker){case"network-simplex":E(p);break;case"tight-tree":b(p);break;case"longest-path":D(p);break;default:b(p)}},D=z.longestPath,b=function(p){(0,z.longestPathWithLayer)(p),(0,F.feasibleTreeWithLayer)(p)},E=function(p){(0,I.default)(p)};G.default=k},32253:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.exchangeEdges=G.enterEdge=G.leaveEdge=G.initLowLimValues=G.calcCutValue=G.initCutValues=void 0;var L=R(13614),z=R(37323),F=R(69209),I=R(69787),k=I.algorithm.preorder,D=I.algorithm.postorder,b=function(Q){var j=(0,F.simplify)(Q);(0,z.longestPath)(j);var X=(0,L.feasibleTree)(j);(0,G.initLowLimValues)(X),(0,G.initCutValues)(X,j);for(var K,J;K=(0,G.leaveEdge)(X);)J=(0,G.enterEdge)(X,j,K),(0,G.exchangeEdges)(X,j,K,J)},E=function(Q,j){var X=D(Q,Q.nodes());X=X==null?void 0:X.slice(0,(X==null?void 0:X.length)-1),X==null||X.forEach(function(K){p(Q,j,K)})};G.initCutValues=E;var p=function(Q,j,X){var K=Q.node(X),J=K.parent;Q.edgeFromArgs(X,J).cutvalue=(0,G.calcCutValue)(Q,j,X)},y=function(Q,j,X){var K,J=Q.node(X),rt=J.parent,tt=!0,nt=j.edgeFromArgs(X,rt),lt=0;return nt||(tt=!1,nt=j.edgeFromArgs(rt,X)),lt=nt.weight,(K=j.nodeEdges(X))===null||K===void 0||K.forEach(function(xt){var jt=xt.v===X,Dt=jt?xt.w:xt.v;if(Dt!==rt){var Zt=jt===tt,Vt=j.edge(xt).weight;if(lt+=Zt?Vt:-Vt,d(Q,X,Dt)){var ue=Q.edgeFromArgs(X,Dt).cutvalue;lt+=Zt?-ue:ue}}}),lt};G.calcCutValue=y;var g=function(Q,j){j===void 0&&(j=Q.nodes()[0]),T(Q,{},1,j)};G.initLowLimValues=g;var T=function(Q,j,X,K,J){var rt,tt=X,nt=X,lt=Q.node(K);return j[K]=!0,(rt=Q.neighbors(K))===null||rt===void 0||rt.forEach(function(xt){j[xt]||(nt=T(Q,j,nt,xt,K))}),lt.low=tt,lt.lim=nt++,J?lt.parent=J:delete lt.parent,nt},x=function(Q){return Q.edges().find(function(j){return Q.edge(j).cutvalue<0})};G.leaveEdge=x;var S=function(Q,j,X){var K=X.v,J=X.w;j.hasEdge(K,J)||(K=X.w,J=X.v);var rt=Q.node(K),tt=Q.node(J),nt=rt,lt=!1;rt.lim>tt.lim&&(nt=tt,lt=!0);var xt=j.edges().filter(function(jt){return lt===V(Q,Q.node(jt.v),nt)&&lt!==V(Q,Q.node(jt.w),nt)});return(0,F.minBy)(xt,function(jt){return(0,z.slack)(j,jt)})};G.enterEdge=S;var N=function(Q,j,X,K){var J=X.v,rt=X.w;Q.removeEdge(J,rt),Q.setEdge(K.v,K.w,{}),(0,G.initLowLimValues)(Q),(0,G.initCutValues)(Q,j),m(Q,j)};G.exchangeEdges=N;var m=function(Q,j){var X=Q.nodes().find(function(J){var rt;return!((rt=j.node(J))===null||rt===void 0?void 0:rt.parent)}),K=k(Q,X);K=K==null?void 0:K.slice(1),K==null||K.forEach(function(J){var rt=Q.node(J).parent,tt=j.edgeFromArgs(J,rt),nt=!1;tt||(tt=j.edgeFromArgs(rt,J),nt=!0),j.node(J).rank=j.node(rt).rank+(nt?tt.minlen:-tt.minlen)})},d=function(Q,j,X){return Q.hasEdge(j,X)},V=function(Q,j,X){return X.low<=j.lim&&j.lim<=X.lim};G.default=b},37323:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.slack=G.longestPathWithLayer=G.longestPath=void 0;var R=function(F){var I,k={},D=function(b){var E,p=F.node(b);if(!p)return 0;if(k[b])return p.rank;k[b]=!0;var y;return(E=F.outEdges(b))===null||E===void 0||E.forEach(function(g){var T=D(g.w),x=F.edge(g).minlen,S=T-x;S&&(y===void 0||S<y)&&(y=S)}),y||(y=0),p.rank=y,y};(I=F.sources())===null||I===void 0||I.forEach(function(b){return D(b)})};G.longestPath=R;var L=function(F){var I,k={},D,b=function(y){var g,T=F.node(y);if(!T)return 0;if(k[y])return T.rank;k[y]=!0;var x;return(g=F.outEdges(y))===null||g===void 0||g.forEach(function(S){var N=b(S.w),m=F.edge(S).minlen,d=N-m;d&&(x===void 0||d<x)&&(x=d)}),x||(x=0),(D===void 0||x<D)&&(D=x),T.rank=x,x};(I=F.sources())===null||I===void 0||I.forEach(function(y){F.node(y)&&b(y)}),D===void 0&&(D=0);var E={},p=function(y,g){var T,x=F.node(y),S=isNaN(x.layer)?g:x.layer;(x.rank===void 0||x.rank<S)&&(x.rank=S),!E[y]&&(E[y]=!0,(T=F.outEdges(y))===null||T===void 0||T.map(function(N){p(N.w,S+F.edge(N).minlen)}))};F.nodes().forEach(function(y){var g=F.node(y);!g||(isNaN(g.layer)?g.rank-=D:p(y,g.layer))})};G.longestPathWithLayer=L;var z=function(F,I){return F.node(I.w).rank-F.node(I.v).rank-F.edge(I).minlen};G.slack=z,G.default={longestPath:R,longestPathWithLayer:L,slack:z}},69209:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.minBy=G.notime=G.time=G.partition=G.maxRank=G.addBorderNode=G.removeEmptyRanks=G.normalizeRanks=G.buildLayerMatrix=G.intersectRect=G.predecessorWeights=G.successorWeights=G.zipObject=G.asNonCompoundGraph=G.simplify=G.addDummyNode=void 0;var L=R(49784),z=R(27652),F=function(j,X){return Number(j)-Number(X)},I=function(j,X,K,J){var rt;do rt="".concat(J).concat(Math.random());while(j.hasNode(rt));return K.dummy=X,j.setNode(rt,K),rt};G.addDummyNode=I;var k=function(j){var X=new z.Graph().setGraph(j.graph());return j.nodes().forEach(function(K){X.setNode(K,j.node(K))}),j.edges().forEach(function(K){var J=X.edgeFromArgs(K.v,K.w)||{weight:0,minlen:1},rt=j.edge(K);X.setEdge(K.v,K.w,{weight:J.weight+rt.weight,minlen:Math.max(J.minlen,rt.minlen)})}),X};G.simplify=k;var D=function(j){var X=new z.Graph({multigraph:j.isMultigraph()}).setGraph(j.graph());return j.nodes().forEach(function(K){var J;((J=j.children(K))===null||J===void 0?void 0:J.length)||X.setNode(K,j.node(K))}),j.edges().forEach(function(K){X.setEdgeObj(K,j.edge(K))}),X};G.asNonCompoundGraph=D;var b=function(j,X){return j==null?void 0:j.reduce(function(K,J,rt){return K[J]=X[rt],K},{})};G.zipObject=b;var E=function(j){var X={};return j.nodes().forEach(function(K){var J,rt={};(J=j.outEdges(K))===null||J===void 0||J.forEach(function(tt){var nt;rt[tt.w]=(rt[tt.w]||0)+(((nt=j.edge(tt))===null||nt===void 0?void 0:nt.weight)||0)}),X[K]=rt}),X};G.successorWeights=E;var p=function(j){var X=j.nodes(),K=X.map(function(J){var rt,tt={};return(rt=j.inEdges(J))===null||rt===void 0||rt.forEach(function(nt){tt[nt.v]=(tt[nt.v]||0)+j.edge(nt).weight}),tt});return(0,G.zipObject)(X,K)};G.predecessorWeights=p;var y=function(j,X){var K=Number(j.x),J=Number(j.y),rt=Number(X.x)-K,tt=Number(X.y)-J,nt=Number(j.width)/2,lt=Number(j.height)/2;if(!rt&&!tt)return{x:0,y:0};var xt,jt;return Math.abs(tt)*nt>Math.abs(rt)*lt?(tt<0&&(lt=-lt),xt=lt*rt/tt,jt=lt):(rt<0&&(nt=-nt),xt=nt,jt=nt*tt/rt),{x:K+xt,y:J+jt}};G.intersectRect=y;var g=function(j){for(var X=[],K=(0,G.maxRank)(j)+1,J=0;J<K;J++)X.push([]);j.nodes().forEach(function(rt){var tt=j.node(rt);if(!!tt){var nt=tt.rank;nt!==void 0&&X[nt]&&X[nt].push(rt)}});for(var J=0;J<K;J++)X[J]=X[J].sort(function(tt,nt){var lt,xt;return F((lt=j.node(tt))===null||lt===void 0?void 0:lt.order,(xt=j.node(nt))===null||xt===void 0?void 0:xt.order)});return X};G.buildLayerMatrix=g;var T=function(j){var X=j.nodes().filter(function(J){var rt;return((rt=j.node(J))===null||rt===void 0?void 0:rt.rank)!==void 0}).map(function(J){return j.node(J).rank}),K=Math.min.apply(Math,X);j.nodes().forEach(function(J){var rt=j.node(J);rt.hasOwnProperty("rank")&&K!==Infinity&&(rt.rank-=K)})};G.normalizeRanks=T;var x=function(j){var X=j.nodes(),K=X.filter(function(jt){var Dt;return((Dt=j.node(jt))===null||Dt===void 0?void 0:Dt.rank)!==void 0}).map(function(jt){return j.node(jt).rank}),J=Math.min.apply(Math,K),rt=[];X.forEach(function(jt){var Dt,Zt=(((Dt=j.node(jt))===null||Dt===void 0?void 0:Dt.rank)||0)-J;rt[Zt]||(rt[Zt]=[]),rt[Zt].push(jt)});for(var tt=0,nt=j.graph().nodeRankFactor||0,lt=0;lt<rt.length;lt++){var xt=rt[lt];xt===void 0?lt%nt!=0&&(tt-=1):tt&&(xt==null||xt.forEach(function(jt){var Dt=j.node(jt);Dt&&(Dt.rank=Dt.rank||0,Dt.rank+=tt)}))}};G.removeEmptyRanks=x;var S=function(j,X,K,J){var rt={width:0,height:0};return(0,L.isNumber)(K)&&(0,L.isNumber)(J)&&(rt.rank=K,rt.order=J),(0,G.addDummyNode)(j,"border",rt,X)};G.addBorderNode=S;var N=function(j){var X;return j.nodes().forEach(function(K){var J,rt=(J=j.node(K))===null||J===void 0?void 0:J.rank;rt!==void 0&&(X===void 0||rt>X)&&(X=rt)}),X||(X=0),X};G.maxRank=N;var m=function(j,X){var K={lhs:[],rhs:[]};return j==null||j.forEach(function(J){X(J)?K.lhs.push(J):K.rhs.push(J)}),K};G.partition=m;var d=function(j,X){var K=Date.now();try{return X()}finally{console.log("".concat(j," time: ").concat(Date.now()-K,"ms"))}};G.time=d;var V=function(j,X){return X()};G.notime=V;var Q=function(j,X){return j.reduce(function(K,J){var rt=X(K),tt=X(J);return rt>tt?J:K})};G.minBy=Q},77057:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var E=function(p,y){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var x in T)Object.prototype.hasOwnProperty.call(T,x)&&(g[x]=T[x])},E(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");E(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),z=this&&this.__assign||function(){return z=Object.assign||function(E){for(var p,y=1,g=arguments.length;y<g;y++){p=arguments[y];for(var T in p)Object.prototype.hasOwnProperty.call(p,T)&&(E[T]=p[T])}return E},z.apply(this,arguments)},F=this&&this.__spreadArray||function(E,p,y){if(y||arguments.length===2)for(var g=0,T=p.length,x;g<T;g++)(x||!(g in p))&&(x||(x=Array.prototype.slice.call(p,0,g)),x[g]=p[g]);return E.concat(x||Array.prototype.slice.call(p))};Object.defineProperty(G,"__esModule",{value:!0}),G.DagreCompoundLayout=void 0;var I=R(62329),k=R(31969),D=R(49784),b=function(E){L(p,E);function p(y){var g=E.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.edgesep=5,g.ranksep=50,g.controlPoints=!0,g.anchorPoint=!0,g.nodes=[],g.edges=[],g.combos=[],g.onLayoutEnd=function(){},g.updateCfg(y),g}return p.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},p.prototype.init=function(y){var g=y.hiddenNodes||[],T=y.hiddenEdges||[],x=y.hiddenCombos||[];this.nodes=this.getDataByOrder((y.nodes||[]).concat(g)),this.edges=this.getDataByOrder((y.edges||[]).concat(T)),this.combos=(y.combos||[]).concat(x.map(function(S){return z(z({},S),{collapsed:!0})}))},p.prototype.execute=function(){var y=this,g=y.nodes,T=y.edges;if(!!g){var x=y.getLayoutConfig(),S=x.graphDef,N=x.graphOption,m=x.graphSettings,d=(0,k.buildGraph)(S,N,m),V=(0,k.flatGraph)(d,!0);return this.updatePosition(V),y.onLayoutEnd&&y.onLayoutEnd(),{nodes:g,edges:T}}},p.prototype.getNodePath=function(y){var g=this,T=g.nodes,x=g.combos,S=T.find(function(m){return m.id===y}),N=function(m,d){d===void 0&&(d=[]);var V=x.find(function(Q){return Q.id===m});return V?(d.unshift(m),V.parentId?N(V.parentId,d):d):d};return S&&S.comboId?N(S.comboId,[y]):[y]},p.prototype.getLayoutConfig=function(){var y,g,T,x=this,S=x.nodes,N=x.edges,m=x.combos,d=x.nodeSize,V=x.rankdir,Q=x.align,j=x.edgesep,X=x.nodesep,K=x.ranksep,J=x.settings,rt=(m||[]).reduce(function(Be,Ke){var $t=S.filter(function(we){return we.comboId===Ke.id}).map(function(we){return we.id}),ce=(m||[]).filter(function(we){return we.parentId===Ke.id}).map(function(we){return we.id});return($t.length||ce.length)&&(Be[Ke.id]=F(F([],$t,!0),ce,!0)),Be},{}),tt;d?(0,D.isArray)(d)?tt=function(){return d}:tt=function(){return[d,d]}:tt=function(Be){return Be&&Be.size?(0,D.isArray)(Be.size)?Be.size:(0,D.isObject)(Be.size)?[Be.size.width||40,Be.size.height||40]:[Be.size,Be.size]:[40,40]};var nt=function(Be){return Be&&Be.size?(0,D.isArray)(Be.size)?Be.size:[Be.size,Be.size]:[80,40]},lt=nt(m==null?void 0:m[0]),xt=lt[0],jt=lt[1],Dt=(g=(y=x.graphSettings)===null||y===void 0?void 0:y.subScene)===null||g===void 0?void 0:g.meta,Zt=((T=m.find(function(Be){return!Be.collapsed}))===null||T===void 0?void 0:T.padding)||[20,20,20,20],Vt=Zt[0],ue=Zt[1],dt=Zt[2],Ot=Zt[3],ee={compound:rt,nodes:F([],(S||[]).map(function(Be){var Ke=tt(Be),$t=Ke[0],ce=Ke[1];return z(z({},Be),{width:$t,height:ce})}),!0),edges:F([],(N||[]).map(function(Be){return z(z({},Be),{v:Be.source,w:Be.target})}),!0)},Re={expanded:(m||[]).filter(function(Be){return!Be.collapsed}).map(function(Be){return Be.id})},me={graph:{meta:{align:Q,rankDir:V,nodeSep:X,edgeSep:j,rankSep:K}},subScene:{meta:{paddingTop:Vt||(Dt==null?void 0:Dt.paddingTop)||20,paddingRight:ue||(Dt==null?void 0:Dt.paddingRight)||20,paddingBottom:dt||(Dt==null?void 0:Dt.paddingBottom)||20,paddingLeft:Ot||(Dt==null?void 0:Dt.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:xt,height:jt}}},Ae=(0,k.mergeConfig)(J,z({},(0,k.mergeConfig)(me,k.LAYOUT_CONFIG)));return x.graphSettings=Ae,{graphDef:ee,graphOption:Re,graphSettings:Ae}},p.prototype.updatePosition=function(y){var g=y.nodes,T=y.edges;this.updateNodePosition(g,T),this.updateEdgePosition(g,T)},p.prototype.getBegin=function(y,g){var T=this,x=T.begin,S=[0,0];if(x){var N=Infinity,m=Infinity;y.forEach(function(d){N>d.x&&(N=d.x),m>d.y&&(m=d.y)}),g.forEach(function(d){d.points.forEach(function(V){N>V.x&&(N=V.x),m>V.y&&(m=V.y)})}),S[0]=x[0]-N,S[1]=x[1]-m}return S},p.prototype.updateNodePosition=function(y,g){var T=this,x=T.combos,S=T.nodes,N=T.edges,m=T.anchorPoint,d=T.graphSettings,V=this.getBegin(y,g);y.forEach(function(Q){var j,X=Q.x,K=Q.y,J=Q.id,rt=Q.type,tt=Q.coreBox;if(rt===k.HierarchyNodeType.META&&J!==k.ROOT_NAME){var nt=x.findIndex(function(Zt){return Zt.id===J}),lt=(j=d==null?void 0:d.subScene)===null||j===void 0?void 0:j.meta;x[nt].offsetX=X+V[0],x[nt].offsetY=K+V[1],x[nt].fixSize=[tt.width,tt.height],x[nt].fixCollapseSize=[tt.width,tt.height],Q.expanded?x[nt].padding=[lt==null?void 0:lt.paddingTop,lt==null?void 0:lt.paddingRight,lt==null?void 0:lt.paddingBottom,lt==null?void 0:lt.paddingLeft]:x[nt].padding=[0,0,0,0]}else if(rt===k.HierarchyNodeType.OP){var nt=S.findIndex(function(Vt){return Vt.id===J});if(S[nt].x=X+V[0],S[nt].y=K+V[1],m){var xt=[],jt=g.filter(function(Vt){return Vt.v===J}),Dt=g.filter(function(Vt){return Vt.w===J});jt.length>0&&jt.forEach(function(Vt){var ue=Vt.points[0],dt=(ue.x-X)/Q.width+.5,Ot=(ue.y-K)/Q.height+.5;xt.push([dt,Ot]),Vt.baseEdgeList.forEach(function(ee){var Re=N.find(function(me){return me.source===ee.v&&me.target===ee.w});Re&&(Re.sourceAnchor=xt.length-1)})}),Dt.length>0&&Dt.forEach(function(Vt){var ue=Vt.points[Vt.points.length-1],dt=(ue.x-X)/Q.width+.5,Ot=(ue.y-K)/Q.height+.5;xt.push([dt,Ot]),Vt.baseEdgeList.forEach(function(ee){var Re=N.find(function(me){return me.source===ee.v&&me.target===ee.w});Re&&(Re.targetAnchor=xt.length-1)})}),S[nt].anchorPoints=xt.length>0?xt:S[nt].anchorPoints||[]}}})},p.prototype.updateEdgePosition=function(y,g){var T=this,x=T.combos,S=T.edges,N=T.controlPoints,m=this.getBegin(y,g);N&&(x.forEach(function(d){d.inEdges=[],d.outEdges=[]}),S.forEach(function(d){var V,Q,j,X,K=y.find(function(Zt){return Zt.id===d.source}),J=y.find(function(Zt){return Zt.id===d.target}),rt=[],tt=[];if(K&&J)tt=(0,k.getEdges)(K==null?void 0:K.id,J==null?void 0:J.id,y);else if(!K||!J){var nt=T.getNodePath(d.source),lt=T.getNodePath(d.target),xt=nt.reverse().slice(K?0:1).find(function(Zt){return y.find(function(Vt){return Vt.id===Zt})}),jt=lt.reverse().slice(J?0:1).find(function(Zt){return y.find(function(Vt){return Vt.id===Zt})});K=y.find(function(Zt){return Zt.id===xt}),J=y.find(function(Zt){return Zt.id===jt}),tt=(0,k.getEdges)(K==null?void 0:K.id,J==null?void 0:J.id,y,{v:d.source,w:d.target})}if(rt=tt.reduce(function(Zt,Vt){return F(F([],Zt,!0),Vt.points.map(function(ue){return z(z({},ue),{x:ue.x+m[0],y:ue.y+m[1]})}),!0)},[]),rt=rt.slice(1,-1),d.controlPoints=rt,(J==null?void 0:J.type)===k.NodeType.META){var Dt=x.findIndex(function(Zt){return Zt.id===(J==null?void 0:J.id)});if(!x[Dt]||((V=x[Dt].inEdges)===null||V===void 0?void 0:V.some(function(Zt){return Zt.source===K.id&&Zt.target===J.id})))return;(Q=x[Dt].inEdges)===null||Q===void 0||Q.push({source:K.id,target:J.id,controlPoints:rt})}if((K==null?void 0:K.type)===k.NodeType.META){var Dt=x.findIndex(function(Vt){return Vt.id===(K==null?void 0:K.id)});if(!x[Dt]||((j=x[Dt].outEdges)===null||j===void 0?void 0:j.some(function(Vt){return Vt.source===K.id&&Vt.target===J.id})))return;(X=x[Dt].outEdges)===null||X===void 0||X.push({source:K.id,target:J.id,controlPoints:rt})}}))},p.prototype.getType=function(){return"dagreCompound"},p.prototype.getDataByOrder=function(y){return y.every(function(g){return g.layoutOrder!==void 0})||y.forEach(function(g,T){g.layoutOrder=T}),y.sort(function(g,T){return g.layoutOrder-T.layoutOrder})},p}(I.Base);G.DagreCompoundLayout=b},34015:function(Mr,G,R){"use strict";var L=this&&this.__assign||function(){return L=Object.assign||function(g){for(var T,x=1,S=arguments.length;x<S;x++){T=arguments[x];for(var N in T)Object.prototype.hasOwnProperty.call(T,N)&&(g[N]=T[N])}return g},L.apply(this,arguments)},z=this&&this.__createBinding||(Object.create?function(g,T,x,S){S===void 0&&(S=x);var N=Object.getOwnPropertyDescriptor(T,x);(!N||("get"in N?!T.__esModule:N.writable||N.configurable))&&(N={enumerable:!0,get:function(){return T[x]}}),Object.defineProperty(g,S,N)}:function(g,T,x,S){S===void 0&&(S=x),g[S]=T[x]}),F=this&&this.__setModuleDefault||(Object.create?function(g,T){Object.defineProperty(g,"default",{enumerable:!0,value:T})}:function(g,T){g.default=T}),I=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var T={};if(g!=null)for(var x in g)x!=="default"&&Object.prototype.hasOwnProperty.call(g,x)&&z(T,g,x);return F(T,g),T},k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(G,"__esModule",{value:!0});var D=I(R(76867)),b=k(R(88221)),E=k(R(87064)),p=R(20171);function y(g,T){var x=g.nodes,S=g.edges,N=T.width,m=T.height;if(!(x==null?void 0:x.length))return Promise.resolve();var d=[];x.forEach(function(tt){var nt=S.filter(function(xt){return xt.source===tt.id||xt.target===tt.id});if(nt.length>1){var lt=L({},tt);delete lt.size,d.push(lt)}});var V=[];S.forEach(function(tt){var nt=d.find(function(xt){return xt.id===tt.source}),lt=d.find(function(xt){return xt.id===tt.target});nt&&lt&&V.push(tt)});var Q=new p.DagreLayout({type:"dagre",ranksep:T.nodeMinGap,nodesep:T.nodeMinGap}),j=Q.layout({nodes:d,edges:V}).nodes;x.forEach(function(tt){var nt=(j||[]).find(function(lt){return lt.id===tt.id});tt.x=(nt==null?void 0:nt.x)||N/2,tt.y=(nt==null?void 0:nt.y)||m/2});var X=JSON.parse(JSON.stringify(x)),K=JSON.parse(JSON.stringify(S)),J=D.forceSimulation().nodes(X).force("link",D.forceLink(K).id(function(tt){return tt.id}).distance(function(tt){var nt=V.find(function(lt){return lt.source===tt.source&&lt.target===tt.target});return nt?30:20})).force("charge",D.forceManyBody()).force("center",D.forceCenter(N/2,m/2)).force("x",D.forceX(N/2)).force("y",D.forceY(m/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),rt=new Promise(function(tt){J.on("end",function(){x.forEach(function(Vt){var ue=X.find(function(dt){return dt.id===Vt.id});ue&&(Vt.x=ue.x,Vt.y=ue.y)});var nt=Math.min.apply(Math,x.map(function(Vt){return Vt.x})),lt=Math.max.apply(Math,x.map(function(Vt){return Vt.x})),xt=Math.min.apply(Math,x.map(function(Vt){return Vt.y})),jt=Math.max.apply(Math,x.map(function(Vt){return Vt.y})),Dt=N/(lt-nt),Zt=m/(jt-xt);x.forEach(function(Vt){Vt.x!==void 0&&Dt<1&&(Vt.x=(Vt.x-nt)*Dt),Vt.y!==void 0&&Zt<1&&(Vt.y=(Vt.y-xt)*Zt)}),x.forEach(function(Vt){Vt.sizeTemp=Vt.size,Vt.size=[10,10]}),(0,E.default)(x,S),x.forEach(function(Vt){Vt.size=Vt.sizeTemp||[],delete Vt.sizeTemp}),(0,b.default)({nodes:x,edges:S},T),tt()})});return rt}G.default=y},88221:function(Mr,G,R){"use strict";var L=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(G,"__esModule",{value:!0});var z=L(R(28611));function F(I,k){if(!I.nodes||I.nodes.length===0)return I;var D=k.width,b=k.height,E=k.nodeMinGap,p=1e4,y=1e4;I.nodes.forEach(function(K){var J=K.size[0]||50,rt=K.size[1]||50;p=Math.min(J,p),y=Math.min(rt,y)});var g=new z.default;g.init(D,b,{CELL_H:y,CELL_W:p}),I.nodes.forEach(function(K){var J=g.occupyNearest(K);J&&(J.node={id:K.id,size:K.size},K.x=J.x,K.y=J.y,K.dx=J.dx,K.dy=J.dy)});for(var T=0;T<I.nodes.length;T++){var x=I.nodes[T],S=g.findGridByNodeId(x.id);if(!S)throw new Error("can not find node cell");var N=S.column,m=S.row;if(x.size[0]+E>p){for(var d=Math.ceil((x.size[0]+E)/p)-1,V=d,Q=0;Q<d;Q++){var j=g.additionColumn.indexOf(N+Q+1)>-1;if(j&&!g.cells[N+Q+1][m].node)V--;else break}g.insertColumn(N,V)}if(x.size[1]+E>y){for(var d=Math.ceil((x.size[1]+E)/y)-1,V=d,Q=0;Q<d;Q++){var j=g.additionRow.indexOf(m+Q+1)>-1;if(j&&!g.cells[N][m+Q+1].node)V--;else break}g.insertRow(m,V)}}for(var T=0;T<g.columnNum;T++)for(var X=function(J){var rt=g.cells[T][J];if(rt.node){var tt=I.nodes.find(function(nt){var lt;return nt.id===((lt=rt==null?void 0:rt.node)===null||lt===void 0?void 0:lt.id)});tt&&(tt.x=rt.x+tt.size[0]/2,tt.y=rt.y+tt.size[1]/2)}},Q=0;Q<g.rowNum;Q++)X(Q)}G.default=F},28611:function(Mr,G){"use strict";var R=this&&this.__assign||function(){return R=Object.assign||function(z){for(var F,I=1,k=arguments.length;I<k;I++){F=arguments[I];for(var D in F)Object.prototype.hasOwnProperty.call(F,D)&&(z[D]=F[D])}return z},R.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0});var L=function(){function z(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return z.prototype.init=function(F,I,k){this.cells=[],this.CELL_W=k.CELL_W||z.DEFAULT_CELL_W,this.CELL_H=k.CELL_H||z.DEFAULT_CELL_H,this.columnNum=Math.ceil(F/this.CELL_W),this.rowNum=Math.ceil(I/this.CELL_H),z.MIN_DIST=Math.pow(F,2)+Math.pow(I,2);for(var D=0;D<this.columnNum;D++){for(var b=[],E=0;E<this.rowNum;E++){var p={dx:D,dy:E,x:D*this.CELL_W,y:E*this.CELL_H,occupied:!1};b.push(p)}this.cells.push(b)}},z.prototype.findGridByNodeId=function(F){for(var I,k,D=0;D<this.columnNum;D++)for(var b=0;b<this.rowNum;b++)if(this.cells[D][b].node&&((k=(I=this.cells[D][b])===null||I===void 0?void 0:I.node)===null||k===void 0?void 0:k.id)===F)return{column:D,row:b};return null},z.prototype.sqdist=function(F,I){return Math.pow(F.x-I.x,2)+Math.pow(F.y-I.y,2)},z.prototype.occupyNearest=function(F){for(var I=z.MIN_DIST,k,D=null,b=0;b<this.columnNum;b++)for(var E=0;E<this.rowNum;E++)!this.cells[b][E].occupied&&(k=this.sqdist(F,this.cells[b][E]))<I&&(I=k,D=this.cells[b][E]);return D&&(D.occupied=!0),D},z.prototype.insertColumn=function(F,I){if(!(I<=0)){for(var k=0;k<I;k++){this.cells[k+this.columnNum]=[];for(var D=0;D<this.rowNum;D++)this.cells[k+this.columnNum][D]={dx:k,dy:D,x:k*this.CELL_W,y:D*this.CELL_H,occupied:!1,node:null}}for(var k=this.columnNum-1;k>F;k--)for(var D=0;D<this.rowNum;D++)this.cells[k+I][D]=R(R({},this.cells[k][D]),{x:(k+I)*this.CELL_W,y:D*this.CELL_H}),this.cells[k][D]={x:k*this.CELL_W,y:D*this.CELL_H,occupied:!0,node:null};for(var D=0;D<this.additionColumn.length;D++)this.additionColumn[D]>=F&&(this.additionColumn[D]+=I);for(var k=0;k<I;k++)this.additionColumn.push(F+k+1);this.columnNum+=I}},z.prototype.insertRow=function(F,I){if(!(I<=0)){for(var k=0;k<I;k++)for(var D=0;D<this.columnNum;D++)this.cells[D][k+this.rowNum]={dx:D,dy:k,x:D*this.CELL_W,y:k*this.CELL_H,occupied:!1,node:null};for(var D=0;D<this.columnNum;D++)for(var k=this.rowNum-1;k>F;k--)this.cells[D][k+I]=R(R({},this.cells[D][k]),{dx:D,dy:k+I,x:D*this.CELL_W,y:(k+I)*this.CELL_H}),this.cells[D][k]={dx:D,dy:k,x:D*this.CELL_W,y:k*this.CELL_H,occupied:!1,node:null};for(var k=0;k<this.additionRow.length;k++)this.additionRow[k]>=F&&(this.additionRow[k]+=I);for(var D=0;D<I;D++)this.additionRow.push(F+D+1);this.rowNum+=I}},z.prototype.getNodes=function(){for(var F=[],I=0;I<this.columnNum;I++)for(var k=0;k<this.rowNum;k++)this.cells[I][k].node&&F.push(this.cells[I][k]);return F},z.MIN_DIST=50,z.DEFAULT_CELL_W=80,z.DEFAULT_CELL_H=80,z}();G.default=L},90441:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var D=function(b,E){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])},D(b,E)};return function(b,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");D(b,E);function p(){this.constructor=b}b.prototype=E===null?Object.create(E):(p.prototype=E.prototype,new p)}}(),z=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(G,"__esModule",{value:!0}),G.ERLayout=void 0;var F=R(62329),I=z(R(34015)),k=function(D){L(b,D);function b(E){var p=D.call(this)||this;return p.width=300,p.height=300,p.nodeMinGap=50,p.onLayoutEnd=function(){},E&&p.updateCfg(E),p}return b.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},b.prototype.execute=function(){var E=this,p=E.nodes,y=E.edges;return p==null||p.forEach(function(g){g.size||(g.size=[50,50])}),(0,I.default)({nodes:p,edges:y},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){E.onLayoutEnd&&E.onLayoutEnd()})},b.prototype.getType=function(){return"er"},b}(F.Base);G.ERLayout=k},87064:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=1200,L=800,z=1e7,F=10,I=3.141592653589793,k=1.5707963267948966,D=I*.375,b=I*.625,E=new Map,p=10,y=10,g=.8,T=.1,x=.5;function S(X,K,J){var rt=X.x-X.size[0]/2,tt=X.y-X.size[1]/2,nt=X.x+X.size[0]/2,lt=X.y+X.size[1]/2,xt=K.x-K.size[0]/2,jt=K.y-K.size[1]/2,Dt=K.x+K.size[0]/2,Zt=K.y+K.size[1]/2,Vt=X.x,ue=X.y,dt=K.x,Ot=K.y,ee=dt-Vt,Re=Math.atan2(ee,Ot-ue),me=0,Ae=0,Be=0,Ke=0;Re>k?(Ae=tt-Zt,me=xt-nt,Be=parseFloat(Ae?(Ae/Math.cos(Re)).toFixed(2):me.toFixed(2)),Ke=parseFloat(me?(me/Math.sin(Re)).toFixed(2):Ae.toFixed(2))):0<Re&&Re<=k?(Ae=jt-lt,me=xt-nt,Ae>me?Be=Ke=parseFloat(Ae?(Ae/Math.cos(Re)).toFixed(2):me.toFixed(2)):Be=Ke=parseFloat(me?(me/Math.sin(Re)).toFixed(2):Ae.toFixed(2))):Re<-k?(Ae=tt-Zt,me=-(Dt-rt),Ae>me?Be=Ke=parseFloat(Ae?(Ae/Math.cos(Re)).toFixed(2):me.toFixed(2)):Be=Ke=parseFloat(me?(me/Math.sin(Re)).toFixed(2):Ae.toFixed(2))):(Ae=jt-lt,Math.abs(ee)>(nt-rt)/2?me=rt-Dt:me=ee,Ae>me?Be=Ke=parseFloat(Ae?(Ae/Math.cos(Re)).toFixed(2):me.toFixed(2)):Be=Ke=parseFloat(me&&Re!==0?(me/Math.sin(Re)).toFixed(2):Ae.toFixed(2)));var $t=parseFloat(Re.toFixed(2)),ce=J;return J&&(ce=D<$t&&$t<b),{distance:Math.abs(Be<Ke?Be:Ke),isHoriz:ce}}function N(X,K){var J=E.get(X.id)||[],rt=J.find(function(fe){return fe.source===K.id||fe.target===K.id}),tt=X.size[0]*X.size[1],nt=K.size[0]*K.size[1],lt=tt>nt?K:X,xt=tt>nt?X:K,jt=lt.x-lt.size[0]/2,Dt=lt.y-lt.size[1]/2,Zt=lt.x+lt.size[0]/2,Vt=lt.y+lt.size[1]/2,ue=xt.x-xt.size[0]/2,dt=xt.y-xt.size[1]/2,Ot=xt.x+xt.size[0]/2,ee=xt.y+xt.size[1]/2,Re=lt.x,me=lt.y,Ae=xt.x,Be=xt.y,Ke=Zt>=ue&&Ot>=jt&&Vt>=dt&&ee>=Dt,$t=0,ce=0;if(Ke){ce=Math.sqrt(Math.pow(Ae-Re,2)+Math.pow(Be-me,2));var we=jt>ue?jt:ue,Pe=Dt>dt?Dt:dt,ye=Zt<Ot?Zt:Ot,Bt=Vt<ee?Vt:ee,re=ye-we,Ee=Bt-Pe,It=re*Ee;ce===0&&(ce=1e-7),$t=F*1/ce*100+It,$t*=z}else{var Et=!1,Wt=S(lt,xt,Et);ce=Wt.distance,Et=Wt.isHoriz,ce<=F?ce!==0?rt?$t+=F+z*1/ce:$t+=F+z*F/ce:$t+=z:($t+=ce,rt&&($t+=ce*ce))}return $t}function m(X){for(var K=0,J=0;J<X.length;J++){var rt=X[J];(rt.x<0||rt.y<0||rt.x>R||rt.y>L)&&(K+=1e12);for(var tt=J+1;tt<X.length;tt++)K+=N(rt,X[tt])}return K}function d(X,K,J,rt){var tt=new Map;J.forEach(function(Re,me){tt.set(Re.id,Re)});var nt=rt.filter(function(Re){return Re.source===X.id||Re.target===X.id})||[],lt=[];nt.forEach(function(Re){var me=Re.source===X.id?Re.target:Re.source,Ae=tt.get(me);Ae&&lt.push(Ae)});for(var xt=!0,jt=0;jt<lt.length;jt++){var Dt=lt[jt],Zt=Math.atan((X.y-Dt.y)/(Dt.x-X.y))*180,Vt=Math.atan((K.y-Dt.y)/(Dt.x-K.y))*180,ue=Zt<30||Zt>150,dt=Vt<30||Vt>150,Ot=Zt>70&&Zt<110,ee=Vt>70&&Vt<110;if(ue&&!dt||Zt*Vt<0){xt=!1;break}else if(Ot&&!ee||Zt*Vt<0){xt=!1;break}else if((Dt.x-X.x)*(Dt.x-K.x)<0){xt=!1;break}else if((Dt.y-X.y)*(Dt.y-K.y)<0){xt=!1;break}}return xt}function V(X,K){for(var J=!1,rt=1,tt=p*rt,nt=y*rt,lt=[tt,-tt,0,0],xt=[0,0,nt,-nt],jt=0;jt<X.length;++jt)for(var Dt=X[jt],Zt=Q(Dt,X),Vt=0;Vt<lt.length;Vt++){var ue=d(Dt,{x:Dt.x+lt[Vt],y:Dt.y+xt[Vt]},X,K);if(ue){Dt.x+=lt[Vt],Dt.y+=xt[Vt];var dt=Q(Dt,X),Ot=Math.random();dt<Zt||Ot<g&&Ot>T?(Zt=dt,J=!0):(Dt.x-=lt[Vt],Dt.y-=xt[Vt])}}return g>T&&(g*=x),J?m(X):0}function Q(X,K){var J=0;(X.x<0||X.y<0||X.x+X.size[0]+20>R||X.y+X.size[1]+20>L)&&(J+=1e12);for(var rt=0;rt<K.length;++rt)X.id!==K[rt].id&&(J+=N(X,K[rt]));return J}function j(X,K){if(X.length===0)return{nodes:X,edges:K};X.forEach(function(Dt){var Zt=K.filter(function(Vt){return Vt.source===Dt.id||Vt.target===Dt.id});E.set(Dt,Zt)}),X.sort(function(Dt,Zt){var Vt,ue;return((Vt=E.get(Dt.id))===null||Vt===void 0?void 0:Vt.length)-((ue=E.get(Zt.id))===null||ue===void 0?void 0:ue.length)});for(var J=m(X),rt=20,tt=1,nt=0,lt=50,xt=0;rt>0&&(xt++,!(xt>=lt));){var jt=V(X,K);jt!==0&&(nt=jt),tt=nt-J,J=nt,tt===0?--rt:rt=20}return X.forEach(function(Dt){Dt.x=Dt.x-Dt.size[0]/2,Dt.y=Dt.y-Dt.size[1]/2}),{nodes:X,edges:K}}G.default=j},89806:function(Mr,G,R){"use strict";var L=this&&this.__createBinding||(Object.create?function(b,E,p,y){y===void 0&&(y=p);var g=Object.getOwnPropertyDescriptor(E,p);(!g||("get"in g?!E.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return E[p]}}),Object.defineProperty(b,y,g)}:function(b,E,p,y){y===void 0&&(y=p),b[y]=E[p]}),z=this&&this.__setModuleDefault||(Object.create?function(b,E){Object.defineProperty(b,"default",{enumerable:!0,value:E})}:function(b,E){b.default=E}),F=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var E={};if(b!=null)for(var p in b)p!=="default"&&Object.prototype.hasOwnProperty.call(b,p)&&L(E,b,p);return z(E,b),E};Object.defineProperty(G,"__esModule",{value:!0});var I=F(R(76867)),k=R(49784);function D(){function b(Bt){return function(){return Bt}}var E=function(Bt){return Bt.cluster},p=b(1),y=b(-1),g=b(100),T=b(.1),x=[0,0],S=[],N={},m=[],d=100,V=100,Q={none:{x:0,y:0}},j=[],X,K="force",J=!0,rt=.1;function tt(Bt){if(!J)return tt;X.tick(),Zt();for(var re=0,Ee=S.length,It=void 0,Et=Bt*rt;re<Ee;++re)It=S[re],It.vx+=(Q[E(It)].x-It.x)*Et,It.vy+=(Q[E(It)].y-It.y)*Et}function nt(){!S||lt()}function lt(){if(!(!S||!S.length)){if(E(S[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Bt=xt();X=I.forceSimulation(Bt.nodes).force("x",I.forceX(d).strength(.1)).force("y",I.forceY(V).strength(.1)).force("collide",I.forceCollide(function(re){return re.r}).iterations(4)).force("charge",I.forceManyBody().strength(y)).force("links",I.forceLink(Bt.nodes.length?Bt.links:[]).distance(g).strength(T)),j=X.nodes(),Zt()}}function xt(){var Bt=[],re=[],Ee={},It=[],Et={},Wt=[];return Et=jt(S),Wt=Dt(m),It=Object.keys(Et),It.forEach(function(fe,Fe){var $e=Et[fe];Bt.push({id:fe,size:$e.count,r:Math.sqrt($e.sumforceNodeSize/Math.PI)}),Ee[fe]=Fe}),Wt.forEach(function(fe){var Fe=(0,k.getEdgeTerminal)(fe,"source"),$e=(0,k.getEdgeTerminal)(fe,"target"),Lt=Ee[Fe],Ne=Ee[$e];Lt!==void 0&&Ne!==void 0&&re.push({source:Lt,target:Ne,count:fe.count})}),{nodes:Bt,links:re}}function jt(Bt){var re={};return Bt.forEach(function(Ee){var It=E(Ee);re[It]||(re[It]={count:0,sumforceNodeSize:0})}),Bt.forEach(function(Ee){var It=E(Ee),Et=p(Ee),Wt=re[It];Wt.count=Wt.count+1,Wt.sumforceNodeSize=Wt.sumforceNodeSize+Math.PI*(Et*Et)*1.3,re[It]=Wt}),re}function Dt(Bt){var re={},Ee=[];Bt.forEach(function(Et){var Wt=Vt(Et),fe=0;re[Wt]!==void 0&&(fe=re[Wt]),fe+=1,re[Wt]=fe});var It=Object.entries(re);return It.forEach(function(Et){var Wt=Et[0],fe=Et[1],Fe=Wt.split("~")[0],$e=Wt.split("~")[1];Fe!==void 0&&$e!==void 0&&Ee.push({source:Fe,target:$e,count:fe})}),Ee}function Zt(){return Q={none:{x:0,y:0}},j.forEach(function(Bt){Q[Bt.id]={x:Bt.x-x[0],y:Bt.y-x[1]}}),Q}function Vt(Bt){var re=(0,k.getEdgeTerminal)(Bt,"source"),Ee=(0,k.getEdgeTerminal)(Bt,"target"),It=E(N[re]),Et=E(N[Ee]);return It<=Et?"".concat(It,"~").concat(Et):"".concat(Et,"~").concat(It)}function ue(Bt){N={},Bt.forEach(function(re){N[re.id]=re})}function dt(Bt){return arguments.length?(K=Bt,nt(),tt):K}function Ot(Bt){return arguments.length?typeof Bt=="string"?(E=function(re){return re[Bt]},tt):(E=Bt,tt):E}function ee(Bt){return arguments.length?(J=Bt,tt):J}function Re(Bt){return arguments.length?(rt=Bt,tt):rt}function me(Bt){return arguments.length?(d=Bt,tt):d}function Ae(Bt){return arguments.length?(V=Bt,tt):V}function Be(Bt){return arguments.length?(ue(Bt||[]),S=Bt||[],tt):S}function Ke(Bt){return arguments.length?(m=Bt||[],nt(),tt):m}function $t(Bt){return arguments.length?(typeof Bt=="function"?p=Bt:p=b(+Bt),nt(),tt):p}function ce(Bt){return arguments.length?(typeof Bt=="function"?y=Bt:y=b(+Bt),nt(),tt):y}function we(Bt){return arguments.length?(typeof Bt=="function"?g=Bt:g=b(+Bt),nt(),tt):g}function Pe(Bt){return arguments.length?(typeof Bt=="function"?T=Bt:T=b(+Bt),nt(),tt):T}function ye(Bt){return arguments.length?(x=Bt,tt):x}return tt.initialize=function(Bt){S=Bt,nt()},tt.template=dt,tt.groupBy=Ot,tt.enableGrouping=ee,tt.strength=Re,tt.centerX=me,tt.centerY=Ae,tt.nodes=Be,tt.links=Ke,tt.forceNodeSize=$t,tt.nodeSize=tt.forceNodeSize,tt.forceCharge=ce,tt.forceLinkDistance=we,tt.forceLinkStrength=Pe,tt.offset=ye,tt.getFocis=Zt,tt}G.default=D},8810:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var S=function(N,m){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,V){d.__proto__=V}||function(d,V){for(var Q in V)Object.prototype.hasOwnProperty.call(V,Q)&&(d[Q]=V[Q])},S(N,m)};return function(N,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");S(N,m);function d(){this.constructor=N}N.prototype=m===null?Object.create(m):(d.prototype=m.prototype,new d)}}(),z=this&&this.__createBinding||(Object.create?function(S,N,m,d){d===void 0&&(d=m);var V=Object.getOwnPropertyDescriptor(N,m);(!V||("get"in V?!N.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return N[m]}}),Object.defineProperty(S,d,V)}:function(S,N,m,d){d===void 0&&(d=m),S[d]=N[m]}),F=this&&this.__setModuleDefault||(Object.create?function(S,N){Object.defineProperty(S,"default",{enumerable:!0,value:N})}:function(S,N){S.default=N}),I=this&&this.__importStar||function(S){if(S&&S.__esModule)return S;var N={};if(S!=null)for(var m in S)m!=="default"&&Object.prototype.hasOwnProperty.call(S,m)&&z(N,S,m);return F(N,S),N},k=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(G,"__esModule",{value:!0}),G.ForceLayout=void 0;var D=I(R(76867)),b=k(R(89806)),E=R(49784),p=R(62329),y=R(16470),g=function(S){L(N,S);function N(m){var d=S.call(this)||this;return d.center=[0,0],d.nodeStrength=null,d.edgeStrength=null,d.preventOverlap=!1,d.clusterNodeStrength=null,d.clusterEdgeStrength=null,d.clusterEdgeDistance=null,d.clusterNodeSize=null,d.clusterFociStrength=null,d.linkDistance=50,d.alphaDecay=.028,d.alphaMin=.001,d.alpha=.3,d.collideStrength=1,d.workerEnabled=!1,d.tick=function(){},d.onLayoutEnd=function(){},d.ticking=void 0,m&&d.updateCfg(m),d}return N.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},N.prototype.init=function(m){var d=this;d.nodes=m.nodes||[];var V=m.edges||[];d.edges=V.map(function(Q){var j={},X=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(Q).forEach(function(K){X.indexOf(K)>-1||(j[K]=Q[K])}),j}),d.ticking=!1},N.prototype.execute=function(m){var d=this,V=d.nodes,Q=d.edges;if(!d.ticking){var j=d.forceSimulation,X=d.alphaMin,K=d.alphaDecay,J=d.alpha;if(j){if(m){if(d.clustering&&d.clusterForce&&(d.clusterForce.nodes(V),d.clusterForce.links(Q)),j.nodes(V),Q&&d.edgeForce)d.edgeForce.links(Q);else if(Q&&!d.edgeForce){var nt=D.forceLink().id(function(Dt){return Dt.id}).links(Q);d.edgeStrength&&nt.strength(d.edgeStrength),d.linkDistance&&nt.distance(d.linkDistance),d.edgeForce=nt,j.force("link",nt)}}d.preventOverlap&&d.overlapProcess(j),j.alpha(J).restart(),this.ticking=!0}else try{var rt=D.forceManyBody();if(d.nodeStrength&&rt.strength(d.nodeStrength),j=D.forceSimulation().nodes(V),d.clustering){var tt=(0,b.default)();tt.centerX(d.center[0]).centerY(d.center[1]).template("force").strength(d.clusterFociStrength),Q&&tt.links(Q),V&&tt.nodes(V),tt.forceLinkDistance(d.clusterEdgeDistance).forceLinkStrength(d.clusterEdgeStrength).forceCharge(d.clusterNodeStrength).forceNodeSize(d.clusterNodeSize),d.clusterForce=tt,j.force("group",tt)}if(j.force("center",D.forceCenter(d.center[0],d.center[1])).force("charge",rt).alpha(J).alphaDecay(K).alphaMin(X),d.preventOverlap&&d.overlapProcess(j),Q){var nt=D.forceLink().id(function(jt){return jt.id}).links(Q);d.edgeStrength&&nt.strength(d.edgeStrength),d.linkDistance&&nt.distance(d.linkDistance),d.edgeForce=nt,j.force("link",nt)}if(d.workerEnabled&&!x()&&(d.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!d.workerEnabled)j.on("tick",function(){d.tick()}).on("end",function(){d.ticking=!1,d.onLayoutEnd&&d.onLayoutEnd()}),d.ticking=!0;else{j.stop();for(var lt=T(j),xt=1;xt<=lt;xt++)j.tick(),postMessage({nodes:V,currentTick:xt,totalTicks:lt,type:y.LAYOUT_MESSAGE.TICK},void 0);d.ticking=!1}d.forceSimulation=j,d.ticking=!0}catch(jt){d.ticking=!1,console.warn(jt)}}},N.prototype.overlapProcess=function(m){var d=this,V=d.nodeSize,Q=d.nodeSpacing,j,X,K=d.collideStrength;if((0,E.isNumber)(Q)?X=function(){return Q}:(0,E.isFunction)(Q)?X=Q:X=function(){return 0},!V)j=function(nt){if(nt.size){if((0,E.isArray)(nt.size)){var lt=nt.size[0]>nt.size[1]?nt.size[0]:nt.size[1];return lt/2+X(nt)}if((0,E.isObject)(nt.size)){var lt=nt.size.width>nt.size.height?nt.size.width:nt.size.height;return lt/2+X(nt)}return nt.size/2+X(nt)}return 10+X(nt)};else if((0,E.isFunction)(V))j=function(nt){var lt=V(nt);return lt+X(nt)};else if((0,E.isArray)(V)){var J=V[0]>V[1]?V[0]:V[1],rt=J/2;j=function(nt){return rt+X(nt)}}else if((0,E.isNumber)(V)){var tt=V/2;j=function(nt){return tt+X(nt)}}else j=function(){return 10};m.force("collisionForce",D.forceCollide(j).strength(K))},N.prototype.updateCfg=function(m){var d=this;d.ticking&&(d.forceSimulation.stop(),d.ticking=!1),d.forceSimulation=null,Object.assign(d,m)},N.prototype.destroy=function(){var m=this;m.ticking&&(m.forceSimulation.stop(),m.ticking=!1),m.nodes=null,m.edges=null,m.destroyed=!0},N}(p.Base);G.ForceLayout=g;function T(S){var N=S.alphaMin(),m=S.alphaTarget(),d=S.alpha(),V=Math.log((N-m)/(d-m))/Math.log(1-S.alphaDecay()),Q=Math.ceil(V);return Q}function x(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},85717:function(Mr,G,R){"use strict";var L=this&&this.__createBinding||(Object.create?function(F,I,k,D){D===void 0&&(D=k);var b=Object.getOwnPropertyDescriptor(I,k);(!b||("get"in b?!I.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return I[k]}}),Object.defineProperty(F,D,b)}:function(F,I,k,D){D===void 0&&(D=k),F[D]=I[k]}),z=this&&this.__exportStar||function(F,I){for(var k in F)k!=="default"&&!Object.prototype.hasOwnProperty.call(I,k)&&L(I,F,k)};Object.defineProperty(G,"__esModule",{value:!0}),z(R(8810),G)},91019:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.forceNBody=void 0;var L=R(71829),z=.81,F=.1;function I(E,p,y,g,T){var x=y/g,S=E.map(function(m,d){var V=p[m.id],Q=V.data,j=V.x,X=V.y,K=V.size,J=Q.layout.force.nodeStrength;return{x:j,y:X,size:K,index:d,vx:0,vy:0,weight:x*J}}),N=(0,L.quadtree)(S,function(m){return m.x},function(m){return m.y}).visitAfter(k);return S.forEach(function(m){b(m,N)}),S.map(function(m,d){var V=p[E[d].id],Q=V.data.layout.force.mass,j=Q===void 0?1:Q;T[2*d]=m.vx/j,T[2*d+1]=m.vy/j}),T}G.forceNBody=I;function k(E){var p=0,y=0,g=0;if(E.length){for(var T=0;T<4;T++){var x=E[T];x&&x.weight&&(p+=x.weight,y+=x.x*x.weight,g+=x.y*x.weight)}E.x=y/p,E.y=g/p,E.weight=p}else{var x=E;E.x=x.data.x,E.y=x.data.y,E.weight=x.data.weight}}var D=function(E,p,y,g,T,x){var S=x.x-E.x||F,N=x.y-E.y||F,m=g-p,d=S*S+N*N,V=Math.sqrt(d)*d;if(m*m*z<d){var Q=E.weight/V;return x.vx+=S*Q,x.vy+=N*Q,!0}if(E.length)return!1;if(E.data!==x){var Q=E.data.weight/V;x.vx+=S*Q,x.vy+=N*Q}};function b(E,p){p.visit(function(y,g,T,x,S){return D(y,g,T,x,S,E)})}},6740:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var E=function(p,y){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var x in T)Object.prototype.hasOwnProperty.call(T,x)&&(g[x]=T[x])},E(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");E(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),z=this&&this.__assign||function(){return z=Object.assign||function(E){for(var p,y=1,g=arguments.length;y<g;y++){p=arguments[y];for(var T in p)Object.prototype.hasOwnProperty.call(p,T)&&(E[T]=p[T])}return E},z.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.Force2Layout=void 0;var F=R(62329),I=R(49784),k=R(91019),D=function(E,p){var y;return E?(0,I.isNumber)(E)?y=function(g){return E}:y=E:y=function(g){return p||1},y},b=function(E){L(p,E);function p(y){var g=E.call(this)||this;g.maxIteration=1e3,g.workerEnabled=!1,g.edgeStrength=200,g.nodeStrength=1e3,g.coulombDisScale=.005,g.damping=.9,g.maxSpeed=500,g.minMovement=.4,g.interval=.02,g.factor=1,g.linkDistance=200,g.gravity=0,g.clusterNodeStrength=20,g.preventOverlap=!0,g.distanceThresholdMode="mean",g.tick=function(){},g.nodes=[],g.edges=[],g.width=300,g.height=300,g.nodeMap={},g.nodeIdxMap={},g.judgingDistance=0,g.centripetalOptions={leaf:2,single:2,others:1,center:function(x){return{x:g.width/2,y:g.height/2}}};var T=y.getMass;return g.propsGetMass=T,g.updateCfg(y),g}return p.prototype.getCentripetalOptions=function(){var y=this,g=y.leafCluster,T=y.clustering,x=y.nodeClusterBy,S=y.nodes,N=y.nodeMap,m=y.clusterNodeStrength,d=function(lt){return typeof m=="function"?m(lt):m},V={},Q;if(g){Q=this.getSameTypeLeafMap()||{};var j=Array.from(new Set(S==null?void 0:S.map(function(lt){return lt[x]})))||[];V={single:100,leaf:function(lt,xt,jt){var Dt=Q[lt.id]||{},Zt=Dt.relativeLeafNodes,Vt=Dt.sameTypeLeafNodes;return(Vt==null?void 0:Vt.length)===(Zt==null?void 0:Zt.length)||(j==null?void 0:j.length)===1?1:d(lt)},others:1,center:function(lt,xt,jt){var Dt,Zt=(((Dt=lt.data)===null||Dt===void 0?void 0:Dt.layout)||{}).degree;if(!Zt)return{x:100,y:100};var Vt;if(Zt===1){var ue=(Q[lt.id]||{}).sameTypeLeafNodes,dt=ue===void 0?[]:ue;dt.length===1?Vt=void 0:dt.length>1&&(Vt=(0,I.getAvgNodePosition)(dt))}else Vt=void 0;return{x:Vt==null?void 0:Vt.x,y:Vt==null?void 0:Vt.y}}}}if(T){Q||(Q=this.getSameTypeLeafMap());var X=Array.from(new Set(S.map(function(lt,xt){return lt[x]}))).filter(function(lt){return lt!==void 0}),K={};X.forEach(function(lt){var xt=S.filter(function(jt){return jt[x]===lt}).map(function(jt){return N[jt.id]});K[lt]=(0,I.getAvgNodePosition)(xt)}),V={single:function(lt){return d(lt)},leaf:function(lt){return d(lt)},others:function(lt){return d(lt)},center:function(lt,xt,jt){var Dt=K[lt[x]];return{x:Dt==null?void 0:Dt.x,y:Dt==null?void 0:Dt.y}}}}this.centripetalOptions=z(z({},this.centripetalOptions),V);var J=this.centripetalOptions,rt=J.leaf,tt=J.single,nt=J.others;rt&&typeof rt!="function"&&(this.centripetalOptions.leaf=function(){return rt}),tt&&typeof tt!="function"&&(this.centripetalOptions.single=function(){return tt}),nt&&typeof nt!="function"&&(this.centripetalOptions.others=function(){return nt})},p.prototype.updateCfg=function(y){y&&Object.assign(this,y)},p.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},p.prototype.execute=function(){var y=this;y.stop();var g=y.nodes,T=y.edges,x=y.defSpringLen;if(y.judgingDistance=0,!g||g.length===0){y.onLayoutEnd([]);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var S=y.center;if(g.length===1){g[0].x=S[0],g[0].y=S[1],y.onLayoutEnd([z({},g[0])]);return}y.degreesMap=(0,I.getDegreeMap)(g,T),y.propsGetMass?y.getMass=y.propsGetMass:y.getMass=function(X){var K=1;(0,I.isNumber)(X.mass)&&(K=X.mass);var J=y.degreesMap[X.id].all;return!J||J<5?K:J*5*K};var N=y.nodeSize,m;if(y.preventOverlap){var d=y.nodeSpacing,V;(0,I.isNumber)(d)?V=function(){return d}:(0,I.isFunction)(d)?V=d:V=function(){return 0},N?(0,I.isArray)(N)?m=function(X){return Math.max(N[0],N[1])+V(X)}:m=function(X){return N+V(X)}:m=function(X){return X.size?(0,I.isArray)(X.size)?Math.max(X.size[0],X.size[1])+V(X):(0,I.isObject)(X.size)?Math.max(X.size.width,X.size.height)+V(X):X.size+V(X):10+V(X)}}y.nodeSize=m,y.linkDistance=D(y.linkDistance,1),y.nodeStrength=D(y.nodeStrength,1),y.edgeStrength=D(y.edgeStrength,1);var Q={},j={};g.forEach(function(X,K){(0,I.isNumber)(X.x)||(X.x=Math.random()*y.width),(0,I.isNumber)(X.y)||(X.y=Math.random()*y.height);var J=y.degreesMap[X.id];Q[X.id]=z(z({},X),{data:z(z({},X.data),{size:y.nodeSize(X)||30,layout:{inDegree:J.in,outDegree:J.out,degree:J.all,tDegree:J.in,sDegree:J.out,force:{mass:y.getMass(X),nodeStrength:y.nodeStrength(X)}}})}),j[X.id]=K}),y.nodeMap=Q,y.nodeIdxMap=j,y.edgeInfos=[],T==null||T.forEach(function(X){var K=Q[X.source],J=Q[X.target];!K||!J?elf.edgeInfos.push({}):y.edgeInfos.push({edgeStrength:y.edgeStrength(X),linkDistance:x?x(z(z({},X),{source:K,target:J}),K,J):y.linkDistance(X,K,J)||1+(N(K)+N(K)||0)/2})}),this.getCentripetalOptions(),y.onLayoutEnd=y.onLayoutEnd||function(){},y.run()},p.prototype.run=function(){var y=this,g=y.maxIteration,T=y.nodes,x=y.workerEnabled,S=y.minMovement,N=y.animate,m=y.nodeMap;if(!!T){var d=[];T.forEach(function(J,rt){d[2*rt]=0,d[2*rt+1]=0});var V=g,Q=!N;if(x||Q){for(var j=0,X=0;(y.judgingDistance>S||X<1)&&X<V;X++)j=X,y.runOneStep(X,d);y.onLayoutEnd(Object.values(m))}else{if(typeof window=="undefined")return;var K=0;this.timeInterval=window.setInterval(function(){!T||(y.runOneStep(K,d),K++,(K>=V||y.judgingDistance<S)&&(y.onLayoutEnd(Object.values(m)),window.clearInterval(y.timeInterval)))},0)}}},p.prototype.runOneStep=function(y,g){var T,x=this,S=x.nodes,N=x.edges,m=x.nodeMap,d=x.monitor,V=[];if(!!(S==null?void 0:S.length)){x.calRepulsive(V),N&&x.calAttractive(V),x.calGravity(V);var Q=x.interval;if(x.updateVelocity(V,g,Q),x.updatePosition(g,Q),(T=x.tick)===null||T===void 0||T.call(x),d){var j=this.calTotalEnergy(V);d({energy:j,nodes:S,edges:N,iterations:y})}}},p.prototype.calTotalEnergy=function(y){var g=this,T=g.nodes,x=g.nodeMap;if(!(T==null?void 0:T.length))return 0;var S=0;return T.forEach(function(N,m){var d=y[2*m],V=y[2*m+1],Q=d*d+V*V,j=x[N.id].data.layout.force.mass,X=j===void 0?1:j;S+=X*Q*.5}),S},p.prototype.calRepulsive=function(y){var g=this,T=g.nodes,x=g.nodeMap,S=g.factor,N=g.coulombDisScale,m=g.nodeSize;(0,k.forceNBody)(T,x,S,N*N,y)},p.prototype.calAttractive=function(y){var g=this,T=g.edges,x=g.nodeMap,S=g.nodeIdxMap,N=g.edgeInfos,m=g.nodeSize;T.forEach(function(d,V){var Q=(0,I.getEdgeTerminal)(d,"source"),j=(0,I.getEdgeTerminal)(d,"target"),X=x[Q],K=x[j];if(!(!X||!K)){var J=K.x-X.x,rt=K.y-X.y;!J&&!rt&&(J=Math.random()*.01,rt=Math.random()*.01);var tt=Math.sqrt(J*J+rt*rt),nt=J/tt,lt=rt/tt,xt=N[V]||{},jt=xt.linkDistance,Dt=jt===void 0?200:jt,Zt=xt.edgeStrength,Vt=Zt===void 0?200:Zt,ue=Dt-tt,dt=ue*Vt,Ot=X.data.layout.force.mass||1,ee=K.data.layout.force.mass||1,Re=1/Ot,me=1/ee,Ae=nt*dt,Be=lt*dt,Ke=2*S[Q],$t=2*S[j];y[Ke]-=Ae*Re,y[Ke+1]-=Be*Re,y[$t]+=Ae*me,y[$t+1]+=Be*me}})},p.prototype.calGravity=function(y){var g,T=this,x=T.nodes,S=T.edges,N=S===void 0?[]:S,m=T.nodeMap,d=T.width,V=T.height,Q=T.center,j=T.gravity,X=T.degreesMap,K=T.centripetalOptions;if(!!x)for(var J=x.length,rt=0;rt<J;rt++){var tt=2*rt,nt=m[x[rt].id],lt=nt.data.layout.force.mass,xt=lt===void 0?1:lt,jt=0,Dt=0,Zt=j,Vt=X[nt.id],ue=Vt.in,dt=Vt.out,Ot=Vt.all,ee=(g=T.getCenter)===null||g===void 0?void 0:g.call(T,nt,Ot);if(ee){var Re=ee[0],me=ee[1],Ae=ee[2];jt=nt.x-Re,Dt=nt.y-me,Zt=Ae}else jt=nt.x-Q[0],Dt=nt.y-Q[1];if(Zt&&(y[tt]-=Zt*jt/xt,y[tt+1]-=Zt*Dt/xt),K){var Be=K.leaf,Ke=K.single,$t=K.others,ce=K.center,we=(ce==null?void 0:ce(nt,x,N,d,V))||{x:0,y:0,centerStrength:0},Pe=we.x,ye=we.y,Bt=we.centerStrength;if(!(0,I.isNumber)(Pe)||!(0,I.isNumber)(ye))continue;var re=(nt.x-Pe)/xt,Ee=(nt.y-ye)/xt;if(Bt&&(y[tt]-=Bt*re,y[tt+1]-=Bt*Ee),Ot===0){var It=Ke(nt);if(!It)continue;y[tt]-=It*re,y[tt+1]-=It*Ee;continue}if(ue===0||dt===0){var Et=Be(nt,x,N);if(!Et)continue;y[tt]-=Et*re,y[tt+1]-=Et*Ee;continue}var Wt=$t(nt);if(!Wt)continue;y[tt]-=Wt*re,y[tt+1]-=Wt*Ee}}},p.prototype.updateVelocity=function(y,g,T){var x=this,S=x.nodes,N=x.damping,m=x.maxSpeed;!(S==null?void 0:S.length)||S.forEach(function(d,V){var Q=(g[2*V]+y[2*V]*T)*N||.01,j=(g[2*V+1]+y[2*V+1]*T)*N||.01,X=Math.sqrt(Q*Q+j*j);if(X>m){var K=m/X;Q=K*Q,j=K*j}g[2*V]=Q,g[2*V+1]=j})},p.prototype.updatePosition=function(y,g){var T=this,x=T.nodes,S=T.distanceThresholdMode,N=T.nodeMap;if(!(x==null?void 0:x.length)){this.judgingDistance=0;return}var m=0;S==="max"?T.judgingDistance=-Infinity:S==="min"&&(T.judgingDistance=Infinity),x.forEach(function(d,V){var Q=N[d.id];if((0,I.isNumber)(d.fx)&&(0,I.isNumber)(d.fy)){d.x=d.fx,d.y=d.fy,Q.x=d.x,Q.y=d.y;return}var j=y[2*V]*g,X=y[2*V+1]*g;d.x+=j,d.y+=X,Q.x=d.x,Q.y=d.y;var K=Math.sqrt(j*j+X*X);switch(S){case"max":T.judgingDistance<K&&(T.judgingDistance=K);break;case"min":T.judgingDistance>K&&(T.judgingDistance=K);break;default:m=m+K;break}}),(!S||S==="mean")&&(T.judgingDistance=m/x.length)},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},p.prototype.getType=function(){return"force2"},p.prototype.getSameTypeLeafMap=function(){var y=this,g=y.nodeClusterBy,T=y.nodes,x=y.edges,S=y.nodeMap,N=y.degreesMap;if(!!(T==null?void 0:T.length)){var m={};return T.forEach(function(d,V){var Q=N[d.id].all;Q===1&&(m[d.id]=(0,I.getCoreNodeAndRelativeLeafNodes)("leaf",d,x,g,N,S))}),m}},p}(F.Base);G.Force2Layout=b},19712:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=function(){function L(z){this.id=z.id||0,this.rx=z.rx,this.ry=z.ry,this.fx=0,this.fy=0,this.mass=z.mass,this.degree=z.degree,this.g=z.g||0}return L.prototype.distanceTo=function(z){var F=this.rx-z.rx,I=this.ry-z.ry;return Math.hypot(F,I)},L.prototype.setPos=function(z,F){this.rx=z,this.ry=F},L.prototype.resetForce=function(){this.fx=0,this.fy=0},L.prototype.addForce=function(z){var F=z.rx-this.rx,I=z.ry-this.ry,k=Math.hypot(F,I);k=k<1e-4?1e-4:k;var D=this.g*(this.degree+1)*(z.degree+1)/k;this.fx+=D*F/k,this.fy+=D*I/k},L.prototype.in=function(z){return z.contains(this.rx,this.ry)},L.prototype.add=function(z){var F=this.mass+z.mass,I=(this.rx*this.mass+z.rx*z.mass)/F,k=(this.ry*this.mass+z.ry*z.mass)/F,D=this.degree+z.degree,b={rx:I,ry:k,mass:F,degree:D};return new L(b)},L}();G.default=R},48564:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var p=function(y,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,x){T.__proto__=x}||function(T,x){for(var S in x)Object.prototype.hasOwnProperty.call(x,S)&&(T[S]=x[S])},p(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(y,g);function T(){this.constructor=y}y.prototype=g===null?Object.create(g):(T.prototype=g.prototype,new T)}}(),z=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(G,"__esModule",{value:!0}),G.ForceAtlas2Layout=void 0;var F=R(62329),I=R(49784),k=z(R(19712)),D=z(R(51638)),b=z(R(62732)),E=function(p){L(y,p);function y(g){var T=p.call(this)||this;return T.center=[0,0],T.width=300,T.height=300,T.nodes=[],T.edges=[],T.kr=5,T.kg=1,T.mode="normal",T.preventOverlap=!1,T.dissuadeHubs=!1,T.barnesHut=void 0,T.maxIteration=0,T.ks=.1,T.ksmax=10,T.tao=.1,T.onLayoutEnd=function(){},T.prune=void 0,T.updateCfg(g),T}return y.prototype.getDefaultCfg=function(){return{}},y.prototype.execute=function(){var g=this,T=g.nodes,x=g.onLayoutEnd,S=g.prune,N=g.maxIteration;!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight);for(var m=[],d=T.length,V=0;V<d;V+=1){var Q=T[V],j=10,X=10;(0,I.isNumber)(Q.size)&&(j=Q.size,X=Q.size),(0,I.isArray)(Q.size)?(isNaN(Q.size[0])||(j=Q.size[0]),isNaN(Q.size[1])||(X=Q.size[1])):(0,I.isObject)(Q.size)&&(j=Q.size.width,X=Q.size.height),g.getWidth&&!isNaN(g.getWidth(Q))&&(X=g.getWidth(Q)),g.getHeight&&!isNaN(g.getHeight(Q))&&(j=g.getHeight(Q));var K=Math.max(j,X);m.push(K)}g.barnesHut===void 0&&d>250&&(g.barnesHut=!0),g.prune===void 0&&d>100&&(g.prune=!0),this.maxIteration===0&&!g.prune?(N=250,d<=200&&d>100?N=1e3:d>200&&(N=1200),this.maxIteration=N):this.maxIteration===0&&S&&(N=100,d<=200&&d>100?N=500:d>200&&(N=950),this.maxIteration=N),g.kr||(g.kr=50,d>100&&d<=500?g.kr=20:d>500&&(g.kr=1)),g.kg||(g.kg=20,d>100&&d<=500?g.kg=10:d>500&&(g.kg=1)),this.nodes=g.updateNodesByForces(m),x()},y.prototype.updateNodesByForces=function(g){for(var T=this,x=T.edges,S=T.maxIteration,N=T.nodes,m=x.filter(function(Vt){var ue=(0,I.getEdgeTerminal)(Vt,"source"),dt=(0,I.getEdgeTerminal)(Vt,"target");return ue!==dt}),d=N.length,V=m.length,Q=[],j={},X={},K=[],J=0;J<d;J+=1)j[N[J].id]=J,Q[J]=0,(N[J].x===void 0||isNaN(N[J].x))&&(N[J].x=Math.random()*1e3),(N[J].y===void 0||isNaN(N[J].y))&&(N[J].y=Math.random()*1e3),K.push({x:N[J].x,y:N[J].y});for(var J=0;J<V;J+=1){for(var rt=void 0,tt=void 0,nt=0,lt=0,xt=0;xt<d;xt+=1){var jt=(0,I.getEdgeTerminal)(m[J],"source"),Dt=(0,I.getEdgeTerminal)(m[J],"target");N[xt].id===jt?(rt=N[xt],nt=xt):N[xt].id===Dt&&(tt=N[xt],lt=xt),X[J]={sourceIdx:nt,targetIdx:lt}}rt&&(Q[j[rt.id]]+=1),tt&&(Q[j[tt.id]]+=1)}var Zt=S;if(N=this.iterate(Zt,j,X,V,Q,g),T.prune){for(var xt=0;xt<V;xt+=1)Q[X[xt].sourceIdx]<=1?(N[X[xt].sourceIdx].x=N[X[xt].targetIdx].x,N[X[xt].sourceIdx].y=N[X[xt].targetIdx].y):Q[X[xt].targetIdx]<=1&&(N[X[xt].targetIdx].x=N[X[xt].sourceIdx].x,N[X[xt].targetIdx].y=N[X[xt].sourceIdx].y);T.prune=!1,T.barnesHut=!1,Zt=100,N=this.iterate(Zt,j,X,V,Q,g)}return N},y.prototype.iterate=function(g,T,x,S,N,m){for(var d=this,V=d.nodes,Q=d.kr,j=d.preventOverlap,X=d.barnesHut,K=V.length,J=0,rt=100,tt=g,nt=50,lt=[],xt=[],jt=[],Dt=0;Dt<K;Dt+=1)if(lt[2*Dt]=0,lt[2*Dt+1]=0,X){var Zt={id:Dt,rx:V[Dt].x,ry:V[Dt].y,mass:1,g:Q,degree:N[Dt]};jt[Dt]=new k.default(Zt)}for(;tt>0;){for(var Dt=0;Dt<K;Dt+=1)xt[2*Dt]=lt[2*Dt],xt[2*Dt+1]=lt[2*Dt+1],lt[2*Dt]=0,lt[2*Dt+1]=0;lt=this.getAttrForces(tt,nt,S,T,x,N,m,lt),X&&(j&&tt>nt||!j)?lt=this.getOptRepGraForces(lt,jt,N):lt=this.getRepGraForces(tt,nt,lt,rt,m,N);var Vt=this.updatePos(lt,xt,J,N);V=Vt.nodes,J=Vt.sg,tt--,d.tick&&d.tick()}return V},y.prototype.getAttrForces=function(g,T,x,S,N,m,d,V){for(var Q=this,j=Q.nodes,X=Q.preventOverlap,K=Q.dissuadeHubs,J=Q.mode,rt=Q.prune,tt=0;tt<x;tt+=1){var nt=j[N[tt].sourceIdx],lt=N[tt].sourceIdx,xt=j[N[tt].targetIdx],jt=N[tt].targetIdx;if(!(rt&&(m[lt]<=1||m[jt]<=1))){var Dt=[xt.x-nt.x,xt.y-nt.y],Zt=Math.hypot(Dt[0],Dt[1]);Zt=Zt<1e-4?1e-4:Zt,Dt[0]=Dt[0]/Zt,Dt[1]=Dt[1]/Zt,X&&g<T&&(Zt=Zt-d[lt]-d[jt]);var Vt=Zt,ue=Vt;J==="linlog"&&(Vt=Math.log(1+Zt),ue=Vt),K&&(Vt=Zt/m[lt],ue=Zt/m[jt]),X&&g<T&&Zt<=0?(Vt=0,ue=0):X&&g<T&&Zt>0&&(Vt=Zt,ue=Zt),V[2*S[nt.id]]+=Vt*Dt[0],V[2*S[xt.id]]-=ue*Dt[0],V[2*S[nt.id]+1]+=Vt*Dt[1],V[2*S[xt.id]+1]-=ue*Dt[1]}}return V},y.prototype.getRepGraForces=function(g,T,x,S,N,m){for(var d=this,V=d.nodes,Q=d.preventOverlap,j=d.kr,X=d.kg,K=d.center,J=d.prune,rt=V.length,tt=0;tt<rt;tt+=1){for(var nt=tt+1;nt<rt;nt+=1)if(!(J&&(m[tt]<=1||m[nt]<=1))){var lt=[V[nt].x-V[tt].x,V[nt].y-V[tt].y],xt=Math.hypot(lt[0],lt[1]);xt=xt<1e-4?1e-4:xt,lt[0]=lt[0]/xt,lt[1]=lt[1]/xt,Q&&g<T&&(xt=xt-N[tt]-N[nt]);var jt=j*(m[tt]+1)*(m[nt]+1)/xt;Q&&g<T&&xt<0?jt=S*(m[tt]+1)*(m[nt]+1):Q&&g<T&&xt===0?jt=0:Q&&g<T&&xt>0&&(jt=j*(m[tt]+1)*(m[nt]+1)/xt),x[2*tt]-=jt*lt[0],x[2*nt]+=jt*lt[0],x[2*tt+1]-=jt*lt[1],x[2*nt+1]+=jt*lt[1]}var Dt=[V[tt].x-K[0],V[tt].y-K[1]],Zt=Math.hypot(Dt[0],Dt[1]);Dt[0]=Dt[0]/Zt,Dt[1]=Dt[1]/Zt;var Vt=X*(m[tt]+1);x[2*tt]-=Vt*Dt[0],x[2*tt+1]-=Vt*Dt[1]}return x},y.prototype.getOptRepGraForces=function(g,T,x){for(var S=this,N=S.nodes,m=S.kg,d=S.center,V=S.prune,Q=N.length,j=9e10,X=-9e10,K=9e10,J=-9e10,rt=0;rt<Q;rt+=1)V&&x[rt]<=1||(T[rt].setPos(N[rt].x,N[rt].y),N[rt].x>=X&&(X=N[rt].x),N[rt].x<=j&&(j=N[rt].x),N[rt].y>=J&&(J=N[rt].y),N[rt].y<=K&&(K=N[rt].y));for(var tt=Math.max(X-j,J-K),nt={xmid:(X+j)/2,ymid:(J+K)/2,length:tt,massCenter:d,mass:Q},lt=new D.default(nt),xt=new b.default(lt),rt=0;rt<Q;rt+=1)V&&x[rt]<=1||T[rt].in(lt)&&xt.insert(T[rt]);for(var rt=0;rt<Q;rt+=1)if(!(V&&x[rt]<=1)){T[rt].resetForce(),xt.updateForce(T[rt]),g[2*rt]-=T[rt].fx,g[2*rt+1]-=T[rt].fy;var jt=[N[rt].x-d[0],N[rt].y-d[1]],Dt=Math.hypot(jt[0],jt[1]);Dt=Dt<1e-4?1e-4:Dt,jt[0]=jt[0]/Dt,jt[1]=jt[1]/Dt;var Zt=m*(x[rt]+1);g[2*rt]-=Zt*jt[0],g[2*rt+1]-=Zt*jt[1]}return g},y.prototype.updatePos=function(g,T,x,S){for(var N=this,m=N.nodes,d=N.ks,V=N.tao,Q=N.prune,j=N.ksmax,X=m.length,K=[],J=[],rt=0,tt=0,nt=0;nt<X;nt+=1)if(!(Q&&S[nt]<=1)){var lt=[g[2*nt]-T[2*nt],g[2*nt+1]-T[2*nt+1]],xt=Math.hypot(lt[0],lt[1]),jt=[g[2*nt]+T[2*nt],g[2*nt+1]+T[2*nt+1]],Dt=Math.hypot(jt[0],jt[1]);K[nt]=xt,J[nt]=Dt/2,rt+=(S[nt]+1)*K[nt],tt+=(S[nt]+1)*J[nt]}var Zt=x;x=V*tt/rt,Zt!==0&&(x=x>1.5*Zt?1.5*Zt:x);for(var nt=0;nt<X;nt+=1)if(!(Q&&S[nt]<=1)&&!((0,I.isNumber)(m[nt].fx)&&(0,I.isNumber)(m[nt].fy))){var Vt=d*x/(1+x*Math.sqrt(K[nt])),ue=Math.hypot(g[2*nt],g[2*nt+1]);ue=ue<1e-4?1e-4:ue;var dt=j/ue;Vt=Vt>dt?dt:Vt;var Ot=Vt*g[2*nt],ee=Vt*g[2*nt+1];m[nt].x+=Ot,m[nt].y+=ee}return{nodes:m,sg:x}},y}(F.Base);G.ForceAtlas2Layout=E},51638:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=function(){function L(z){this.xmid=z.xmid,this.ymid=z.ymid,this.length=z.length,this.massCenter=z.massCenter||[0,0],this.mass=z.mass||1}return L.prototype.getLength=function(){return this.length},L.prototype.contains=function(z,F){var I=this.length/2;return z<=this.xmid+I&&z>=this.xmid-I&&F<=this.ymid+I&&F>=this.ymid-I},L.prototype.NW=function(){var z=this.xmid-this.length/4,F=this.ymid+this.length/4,I=this.length/2,k={xmid:z,ymid:F,length:I},D=new L(k);return D},L.prototype.NE=function(){var z=this.xmid+this.length/4,F=this.ymid+this.length/4,I=this.length/2,k={xmid:z,ymid:F,length:I},D=new L(k);return D},L.prototype.SW=function(){var z=this.xmid-this.length/4,F=this.ymid-this.length/4,I=this.length/2,k={xmid:z,ymid:F,length:I},D=new L(k);return D},L.prototype.SE=function(){var z=this.xmid+this.length/4,F=this.ymid-this.length/4,I=this.length/2,k={xmid:z,ymid:F,length:I},D=new L(k);return D},L}();G.default=R},62732:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=function(){function L(z){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,z!=null&&(this.quad=z)}return L.prototype.insert=function(z){if(this.body==null){this.body=z;return}this._isExternal()?(this.quad&&(this.NW=new L(this.quad.NW()),this.NE=new L(this.quad.NE()),this.SW=new L(this.quad.SW()),this.SE=new L(this.quad.SE())),this._putBody(this.body),this._putBody(z),this.body=this.body.add(z)):(this.body=this.body.add(z),this._putBody(z))},L.prototype._putBody=function(z){!this.quad||(z.in(this.quad.NW())&&this.NW?this.NW.insert(z):z.in(this.quad.NE())&&this.NE?this.NE.insert(z):z.in(this.quad.SW())&&this.SW?this.SW.insert(z):z.in(this.quad.SE())&&this.SE&&this.SE.insert(z))},L.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},L.prototype.updateForce=function(z){if(!(this.body==null||z===this.body))if(this._isExternal())z.addForce(this.body);else{var F=this.quad?this.quad.getLength():0,I=this.body.distanceTo(z);F/I<this.theta?z.addForce(this.body):(this.NW&&this.NW.updateForce(z),this.NE&&this.NE.updateForce(z),this.SW&&this.SW.updateForce(z),this.SE&&this.SE.updateForce(z))}},L}();G.default=R},80374:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var D=function(b,E){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])},D(b,E)};return function(b,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");D(b,E);function p(){this.constructor=b}b.prototype=E===null?Object.create(E):(p.prototype=E.prototype,new p)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.FruchtermanLayout=void 0;var z=R(62329),F=R(49784),I=800,k=function(D){L(b,D);function b(E){var p=D.call(this)||this;return p.maxIteration=1e3,p.workerEnabled=!1,p.gravity=10,p.speed=5,p.clustering=!1,p.clusterGravity=10,p.nodes=[],p.edges=[],p.width=300,p.height=300,p.nodeMap={},p.nodeIdxMap={},p.onLayoutEnd=function(){},p.tick=function(){},p.animate=!0,p.updateCfg(E),p}return b.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},b.prototype.execute=function(){var E=this,p,y,g=this,T=g.nodes;if(g.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(g.timeInterval),!T||T.length===0){(p=g.onLayoutEnd)===null||p===void 0||p.call(g);return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var x=g.center;if(T.length===1){T[0].x=x[0],T[0].y=x[1],(y=g.onLayoutEnd)===null||y===void 0||y.call(g);return}var S={},N={};return T.forEach(function(m,d){(0,F.isNumber)(m.x)||(m.x=Math.random()*E.width),(0,F.isNumber)(m.y)||(m.y=Math.random()*E.height),S[m.id]=m,N[m.id]=d}),g.nodeMap=S,g.nodeIdxMap=N,g.run()},b.prototype.run=function(){var E,p=this,y=p.nodes;if(!!y){var g=p.edges,T=p.maxIteration,x=p.workerEnabled,S=p.clustering,N=p.animate,m={};if(S&&y.forEach(function(Q){m[Q.cluster]===void 0&&(m[Q.cluster]={name:Q.cluster,cx:0,cy:0,count:0})}),x||!N){for(var d=0;d<T;d++)p.runOneStep(m);(E=p.onLayoutEnd)===null||E===void 0||E.call(p)}else{if(typeof window=="undefined")return;var V=0;this.timeInterval=window.setInterval(function(){var Q;p.runOneStep(m),V++,V>=T&&((Q=p.onLayoutEnd)===null||Q===void 0||Q.call(p),window.clearInterval(p.timeInterval))},0)}return{nodes:y,edges:g}}},b.prototype.runOneStep=function(E){var p,y=this,g=y.nodes;if(!!g){var T=y.edges,x=y.center,S=y.gravity,N=y.speed,m=y.clustering,d=y.height*y.width,V=Math.sqrt(d)/10,Q=d/(g.length+1),j=Math.sqrt(Q),X=[];if(g.forEach(function(rt,tt){X[tt]={x:0,y:0}}),y.applyCalculate(g,T,X,j,Q),m){for(var K in E)E[K].cx=0,E[K].cy=0,E[K].count=0;g.forEach(function(rt){var tt=E[rt.cluster];(0,F.isNumber)(rt.x)&&(tt.cx+=rt.x),(0,F.isNumber)(rt.y)&&(tt.cy+=rt.y),tt.count++});for(var K in E)E[K].cx/=E[K].count,E[K].cy/=E[K].count;var J=y.clusterGravity||S;g.forEach(function(rt,tt){if(!(!(0,F.isNumber)(rt.x)||!(0,F.isNumber)(rt.y))){var nt=E[rt.cluster],lt=Math.sqrt((rt.x-nt.cx)*(rt.x-nt.cx)+(rt.y-nt.cy)*(rt.y-nt.cy)),xt=j*J;X[tt].x-=xt*(rt.x-nt.cx)/lt,X[tt].y-=xt*(rt.y-nt.cy)/lt}})}g.forEach(function(rt,tt){if(!(!(0,F.isNumber)(rt.x)||!(0,F.isNumber)(rt.y))){var nt=.01*j*S;X[tt].x-=nt*(rt.x-x[0]),X[tt].y-=nt*(rt.y-x[1])}}),g.forEach(function(rt,tt){if((0,F.isNumber)(rt.fx)&&(0,F.isNumber)(rt.fy)){rt.x=rt.fx,rt.y=rt.fy;return}if(!(!(0,F.isNumber)(rt.x)||!(0,F.isNumber)(rt.y))){var nt=Math.sqrt(X[tt].x*X[tt].x+X[tt].y*X[tt].y);if(nt>0){var lt=Math.min(V*(N/I),nt);rt.x+=X[tt].x/nt*lt,rt.y+=X[tt].y/nt*lt}}}),(p=y.tick)===null||p===void 0||p.call(y)}},b.prototype.applyCalculate=function(E,p,y,g,T){var x=this;x.calRepulsive(E,y,T),p&&x.calAttractive(p,y,g)},b.prototype.calRepulsive=function(E,p,y){E.forEach(function(g,T){p[T]={x:0,y:0},E.forEach(function(x,S){if(T!==S&&!(!(0,F.isNumber)(g.x)||!(0,F.isNumber)(x.x)||!(0,F.isNumber)(g.y)||!(0,F.isNumber)(x.y))){var N=g.x-x.x,m=g.y-x.y,d=N*N+m*m;if(d===0){d=1;var V=T>S?1:-1;N=.01*V,m=.01*V}var Q=y/d;p[T].x+=N*Q,p[T].y+=m*Q}})})},b.prototype.calAttractive=function(E,p,y){var g=this;E.forEach(function(T){var x=(0,F.getEdgeTerminal)(T,"source"),S=(0,F.getEdgeTerminal)(T,"target");if(!(!x||!S)){var N=g.nodeIdxMap[x],m=g.nodeIdxMap[S];if(N!==m){var d=g.nodeMap[x],V=g.nodeMap[S];if(!(!(0,F.isNumber)(V.x)||!(0,F.isNumber)(d.x)||!(0,F.isNumber)(V.y)||!(0,F.isNumber)(d.y))){var Q=V.x-d.x,j=V.y-d.y,X=Math.sqrt(Q*Q+j*j),K=X*X/y;p[m].x-=Q/X*K,p[m].y-=j/X*K,p[N].x+=Q/X*K,p[N].y+=j/X*K}}}})},b.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},b.prototype.destroy=function(){var E=this;E.stop(),E.tick=null,E.nodes=null,E.edges=null,E.destroyed=!0},b.prototype.getType=function(){return"fruchterman"},b}(z.Base);G.FruchtermanLayout=k},13653:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var D=function(b,E){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])},D(b,E)};return function(b,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");D(b,E);function p(){this.constructor=b}b.prototype=E===null?Object.create(E):(p.prototype=E.prototype,new p)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.GForceLayout=void 0;var z=R(62329),F=R(49784),I=function(D,b){var E;return D?(0,F.isNumber)(D)?E=function(p){return D}:E=D:E=function(p){return b||1},E},k=function(D){L(b,D);function b(E){var p=D.call(this)||this;return p.maxIteration=500,p.workerEnabled=!1,p.edgeStrength=200,p.nodeStrength=1e3,p.coulombDisScale=.005,p.damping=.9,p.maxSpeed=1e3,p.minMovement=.5,p.interval=.02,p.factor=1,p.linkDistance=1,p.gravity=10,p.preventOverlap=!0,p.collideStrength=1,p.tick=function(){},p.nodes=[],p.edges=[],p.width=300,p.height=300,p.nodeMap={},p.nodeIdxMap={},p.animate=!0,p.updateCfg(E),p}return b.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},b.prototype.execute=function(){var E,p,y=this,g=y.nodes;if(y.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(y.timeInterval),!g||g.length===0){(E=y.onLayoutEnd)===null||E===void 0||E.call(y);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var T=y.center;if(g.length===1){g[0].x=T[0],g[0].y=T[1],(p=y.onLayoutEnd)===null||p===void 0||p.call(y);return}var x={},S={};g.forEach(function(j,X){(0,F.isNumber)(j.x)||(j.x=Math.random()*y.width),(0,F.isNumber)(j.y)||(j.y=Math.random()*y.height),x[j.id]=j,S[j.id]=X}),y.nodeMap=x,y.nodeIdxMap=S,y.linkDistance=I(y.linkDistance,1),y.nodeStrength=I(y.nodeStrength,1),y.edgeStrength=I(y.edgeStrength,1);var N=y.nodeSize,m;if(y.preventOverlap){var d=y.nodeSpacing,V;(0,F.isNumber)(d)?V=function(){return d}:(0,F.isFunction)(d)?V=d:V=function(){return 0},N?(0,F.isArray)(N)?m=function(j){return Math.max(N[0],N[1])+V(j)}:m=function(j){return N+V(j)}:m=function(j){return j.size?(0,F.isArray)(j.size)?Math.max(j.size[0],j.size[1])+V(j):(0,F.isObject)(j.size)?Math.max(j.size.width,j.size.height)+V(j):j.size+V(j):10+V(j)}}y.nodeSize=m;var Q=y.edges;y.degrees=(0,F.getDegree)(g.length,y.nodeIdxMap,Q),y.getMass||(y.getMass=function(j){var X=j.mass||y.degrees[y.nodeIdxMap[j.id]].all||1;return X}),y.run()},b.prototype.run=function(){var E,p=this,y=p.maxIteration,g=p.nodes,T=p.workerEnabled,x=p.minMovement,S=p.animate;if(!!g)if(T||!S){for(var N=0;N<y;N++){var m=p.runOneStep(N);if(p.reachMoveThreshold(g,m,x))break}(E=p.onLayoutEnd)===null||E===void 0||E.call(p)}else{if(typeof window=="undefined")return;var d=0;this.timeInterval=window.setInterval(function(){var V,Q;if(!!g){var j=p.runOneStep(d)||[];p.reachMoveThreshold(g,j,x)&&((V=p.onLayoutEnd)===null||V===void 0||V.call(p),window.clearInterval(p.timeInterval)),d++,d>=y&&((Q=p.onLayoutEnd)===null||Q===void 0||Q.call(p),window.clearInterval(p.timeInterval))}},0)}},b.prototype.reachMoveThreshold=function(E,p,y){var g=0;return E.forEach(function(T,x){var S=T.x-p[x].x,N=T.y-p[x].y;g+=Math.sqrt(S*S+N*N)}),g/=E.length,g<y},b.prototype.runOneStep=function(E){var p,y=this,g=y.nodes,T=y.edges,x=[],S=[];if(!!g){g.forEach(function(d,V){x[2*V]=0,x[2*V+1]=0,S[2*V]=0,S[2*V+1]=0}),y.calRepulsive(x,g),T&&y.calAttractive(x,T),y.calGravity(x,g);var N=Math.max(.02,y.interval-E*.002);y.updateVelocity(x,S,N,g);var m=[];return g.forEach(function(d){m.push({x:d.x,y:d.y})}),y.updatePosition(S,N,g),(p=y.tick)===null||p===void 0||p.call(y),m}},b.prototype.calRepulsive=function(E,p){var y=this,g=y.getMass,T=y.factor,x=y.coulombDisScale,S=y.preventOverlap,N=y.collideStrength,m=N===void 0?1:N,d=y.nodeStrength,V=y.nodeSize;p.forEach(function(Q,j){var X=g?g(Q):1;p.forEach(function(K,J){if(!(j>=J)){var rt=Q.x-K.x,tt=Q.y-K.y;rt===0&&tt===0&&(rt=Math.random()*.01,tt=Math.random()*.01);var nt=rt*rt+tt*tt,lt=Math.sqrt(nt),xt=(lt+.1)*x,jt=rt/lt,Dt=tt/lt,Zt=(d(Q)+d(K))*.5*T/(xt*xt),Vt=g?g(K):1;if(E[2*j]+=jt*Zt,E[2*j+1]+=Dt*Zt,E[2*J]-=jt*Zt,E[2*J+1]-=Dt*Zt,S&&(V(Q)+V(K))/2>lt){var ue=m*(d(Q)+d(K))*.5/nt;E[2*j]+=jt*ue/X,E[2*j+1]+=Dt*ue/X,E[2*J]-=jt*ue/Vt,E[2*J+1]-=Dt*ue/Vt}}})})},b.prototype.calAttractive=function(E,p){var y=this,g=y.nodeMap,T=y.nodeIdxMap,x=y.linkDistance,S=y.edgeStrength,N=y.nodeSize,m=y.getMass;p.forEach(function(d,V){var Q=(0,F.getEdgeTerminal)(d,"source"),j=(0,F.getEdgeTerminal)(d,"target"),X=g[Q],K=g[j],J=K.x-X.x,rt=K.y-X.y;J===0&&rt===0&&(J=Math.random()*.01,rt=Math.random()*.01);var tt=Math.sqrt(J*J+rt*rt),nt=J/tt,lt=rt/tt,xt=x(d,X,K)||1+(N(X)+N(K)||0)/2,jt=xt-tt,Dt=jt*S(d),Zt=T[Q],Vt=T[j],ue=m?m(X):1,dt=m?m(K):1;E[2*Zt]-=nt*Dt/ue,E[2*Zt+1]-=lt*Dt/ue,E[2*Vt]+=nt*Dt/dt,E[2*Vt+1]+=lt*Dt/dt})},b.prototype.calGravity=function(E,p){for(var y=this,g=y.center,T=y.gravity,x=y.degrees,S=p.length,N=0;N<S;N++){var m=p[N],d=m.x-g[0],V=m.y-g[1],Q=T;if(y.getCenter){var j=y.getCenter(m,x[N].all);j&&(0,F.isNumber)(j[0])&&(0,F.isNumber)(j[1])&&(0,F.isNumber)(j[2])&&(d=m.x-j[0],V=m.y-j[1],Q=j[2])}!Q||(E[2*N]-=Q*d,E[2*N+1]-=Q*V)}},b.prototype.updateVelocity=function(E,p,y,g){var T=this,x=y*T.damping;g.forEach(function(S,N){var m=E[2*N]*x||.01,d=E[2*N+1]*x||.01,V=Math.sqrt(m*m+d*d);if(V>T.maxSpeed){var Q=T.maxSpeed/V;m=Q*m,d=Q*d}p[2*N]=m,p[2*N+1]=d})},b.prototype.updatePosition=function(E,p,y){y.forEach(function(g,T){if((0,F.isNumber)(g.fx)&&(0,F.isNumber)(g.fy)){g.x=g.fx,g.y=g.fy;return}var x=E[2*T]*p,S=E[2*T+1]*p;g.x+=x,g.y+=S})},b.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},b.prototype.destroy=function(){var E=this;E.stop(),E.tick=null,E.nodes=null,E.edges=null,E.destroyed=!0},b.prototype.getType=function(){return"gForce"},b}(z.Base);G.GForceLayout=k},87745:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var g=function(T,x){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,N){S.__proto__=N}||function(S,N){for(var m in N)Object.prototype.hasOwnProperty.call(N,m)&&(S[m]=N[m])},g(T,x)};return function(T,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");g(T,x);function S(){this.constructor=T}T.prototype=x===null?Object.create(x):(S.prototype=x.prototype,new S)}}(),z=this&&this.__awaiter||function(g,T,x,S){function N(m){return m instanceof x?m:new x(function(d){d(m)})}return new(x||(x=Promise))(function(m,d){function V(X){try{j(S.next(X))}catch(K){d(K)}}function Q(X){try{j(S.throw(X))}catch(K){d(K)}}function j(X){X.done?m(X.value):N(X.value).then(V,Q)}j((S=S.apply(g,T||[])).next())})},F=this&&this.__generator||function(g,T){var x={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},S,N,m,d;return d={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function V(j){return function(X){return Q([j,X])}}function Q(j){if(S)throw new TypeError("Generator is already executing.");for(;d&&(d=0,j[0]&&(x=0)),x;)try{if(S=1,N&&(m=j[0]&2?N.return:j[0]?N.throw||((m=N.return)&&m.call(N),0):N.next)&&!(m=m.call(N,j[1])).done)return m;switch(N=0,m&&(j=[j[0]&2,m.value]),j[0]){case 0:case 1:m=j;break;case 4:return x.label++,{value:j[1],done:!1};case 5:x.label++,N=j[1],j=[0];continue;case 7:j=x.ops.pop(),x.trys.pop();continue;default:if(m=x.trys,!(m=m.length>0&&m[m.length-1])&&(j[0]===6||j[0]===2)){x=0;continue}if(j[0]===3&&(!m||j[1]>m[0]&&j[1]<m[3])){x.label=j[1];break}if(j[0]===6&&x.label<m[1]){x.label=m[1],m=j;break}if(m&&x.label<m[2]){x.label=m[2],x.ops.push(j);break}m[2]&&x.ops.pop(),x.trys.pop();continue}j=T.call(g,x)}catch(X){j=[6,X],N=0}finally{S=m=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}};Object.defineProperty(G,"__esModule",{value:!0}),G.FruchtermanGPULayout=void 0;var I=R(62329),k=R(49784),D=R(79984),b=R(48835),E=R(8574),p=R(16470),y=function(g){L(T,g);function T(x){var S=g.call(this)||this;return S.maxIteration=1e3,S.gravity=10,S.speed=1,S.clustering=!1,S.clusterField="cluster",S.clusterGravity=10,S.workerEnabled=!1,S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.updateCfg(x),S}return T.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},T.prototype.execute=function(){return z(this,void 0,void 0,function(){var x,S,N,m,d,V=this;return F(this,function(Q){switch(Q.label){case 0:return x=this,S=x.nodes,!S||S.length===0?(x.onLayoutEnd&&x.onLayoutEnd(),[2]):(!x.width&&typeof window!="undefined"&&(x.width=window.innerWidth),!x.height&&typeof window!="undefined"&&(x.height=window.innerHeight),x.center||(x.center=[x.width/2,x.height/2]),N=x.center,S.length===1?(S[0].x=N[0],S[0].y=N[1],x.onLayoutEnd&&x.onLayoutEnd(),[2]):(m={},d={},S.forEach(function(j,X){(0,k.isNumber)(j.x)||(j.x=Math.random()*V.width),(0,k.isNumber)(j.y)||(j.y=Math.random()*V.height),m[j.id]=j,d[j.id]=X}),x.nodeMap=m,x.nodeIdxMap=d,[4,x.run()]));case 1:return Q.sent(),[2]}})})},T.prototype.executeWithWorker=function(x,S){return z(this,void 0,void 0,function(){var N,m,d,V,Q,j=this;return F(this,function(X){switch(X.label){case 0:return N=this,m=N.nodes,d=N.center,!m||m.length===0?[2]:m.length===1?(m[0].x=d[0],m[0].y=d[1],[2]):(V={},Q={},m.forEach(function(K,J){(0,k.isNumber)(K.x)||(K.x=Math.random()*j.width),(0,k.isNumber)(K.y)||(K.y=Math.random()*j.height),V[K.id]=K,Q[K.id]=J}),N.nodeMap=V,N.nodeIdxMap=Q,[4,N.run(x,S)]);case 1:return X.sent(),[2]}})})},T.prototype.run=function(x,S){return z(this,void 0,void 0,function(){var N,m,d,V,Q,j,X,K,J,rt,tt,nt,lt,xt,jt,Dt,Zt,Vt,ue,dt,Ot,ee,Re,me,Ae,Be,Ke=this;return F(this,function($t){switch($t.label){case 0:for(N=this,m=N.nodes,d=N.edges,V=N.maxIteration,Q=N.center,j=N.height*N.width,X=Math.sqrt(j)/10,K=j/(m.length+1),J=Math.sqrt(K),rt=N.speed,tt=N.clustering,nt=(0,b.attributesToTextureData)([N.clusterField],m),lt=nt.array,xt=nt.count,m.forEach(function(ce,we){var Pe=0,ye=0;(0,k.isNumber)(ce.fx)&&(0,k.isNumber)(ce.fy)&&(Pe=ce.fx||.001,ye=ce.fy||.001),lt[4*we+1]=Pe,lt[4*we+2]=ye}),jt=m.length,Dt=(0,b.buildTextureData)(m,d),Zt=Dt.maxEdgePerVetex,Vt=Dt.array,ue=N.workerEnabled,ue?dt=D.World.create({canvas:x,engineOptions:{supportCompute:!0}}):dt=D.World.create({engineOptions:{supportCompute:!0}}),Ot=N.onLayoutEnd,ee=[],Re=0;Re<xt;Re++)ee.push(0,0,0,0);return me=dt.createKernel(E.fruchtermanBundle).setDispatch([jt,1,1]).setBinding({u_Data:Vt,u_K:J,u_K2:K,u_Gravity:N.gravity,u_ClusterGravity:N.clusterGravity||N.gravity||1,u_Speed:rt,u_MaxDisplace:X,u_Clustering:tt?1:0,u_Center:Q,u_AttributeArray:lt,u_ClusterCenters:ee,MAX_EDGE_PER_VERTEX:Zt,VERTEX_COUNT:jt}),tt&&(Ae=dt.createKernel(E.clusterBundle).setDispatch([xt,1,1]).setBinding({u_Data:Vt,u_NodeAttributes:lt,u_ClusterCenters:ee,VERTEX_COUNT:jt,CLUSTER_COUNT:xt})),Be=function(){return z(Ke,void 0,void 0,function(){var ce,we;return F(this,function(Pe){switch(Pe.label){case 0:ce=0,Pe.label=1;case 1:return ce<V?[4,me.execute()]:[3,6];case 2:return Pe.sent(),tt?(Ae.setBinding({u_Data:me}),[4,Ae.execute()]):[3,4];case 3:Pe.sent(),me.setBinding({u_ClusterCenters:Ae}),Pe.label=4;case 4:me.setBinding({u_MaxDisplace:X*=.99}),Pe.label=5;case 5:return ce++,[3,1];case 6:return[4,me.getOutput()];case 7:return we=Pe.sent(),x?S.postMessage({type:p.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:we}):m.forEach(function(ye,Bt){var re=we[4*Bt],Ee=we[4*Bt+1];ye.x=re,ye.y=Ee}),Ot&&Ot(),[2]}})})},[4,Be()];case 1:return $t.sent(),[2]}})})},T.prototype.getType=function(){return"fruchterman-gpu"},T}(I.Base);G.FruchtermanGPULayout=y},8574:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.clusterBundle=G.clusterCode=G.fruchtermanBundle=G.fruchtermanCode=void 0,G.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,G.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',G.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,G.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},85194:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var T=function(x,S){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,m){N.__proto__=m}||function(N,m){for(var d in m)Object.prototype.hasOwnProperty.call(m,d)&&(N[d]=m[d])},T(x,S)};return function(x,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");T(x,S);function N(){this.constructor=x}x.prototype=S===null?Object.create(S):(N.prototype=S.prototype,new N)}}(),z=this&&this.__awaiter||function(T,x,S,N){function m(d){return d instanceof S?d:new S(function(V){V(d)})}return new(S||(S=Promise))(function(d,V){function Q(K){try{X(N.next(K))}catch(J){V(J)}}function j(K){try{X(N.throw(K))}catch(J){V(J)}}function X(K){K.done?d(K.value):m(K.value).then(Q,j)}X((N=N.apply(T,x||[])).next())})},F=this&&this.__generator||function(T,x){var S={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},N,m,d,V;return V={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(V[Symbol.iterator]=function(){return this}),V;function Q(X){return function(K){return j([X,K])}}function j(X){if(N)throw new TypeError("Generator is already executing.");for(;V&&(V=0,X[0]&&(S=0)),S;)try{if(N=1,m&&(d=X[0]&2?m.return:X[0]?m.throw||((d=m.return)&&d.call(m),0):m.next)&&!(d=d.call(m,X[1])).done)return d;switch(m=0,d&&(X=[X[0]&2,d.value]),X[0]){case 0:case 1:d=X;break;case 4:return S.label++,{value:X[1],done:!1};case 5:S.label++,m=X[1],X=[0];continue;case 7:X=S.ops.pop(),S.trys.pop();continue;default:if(d=S.trys,!(d=d.length>0&&d[d.length-1])&&(X[0]===6||X[0]===2)){S=0;continue}if(X[0]===3&&(!d||X[1]>d[0]&&X[1]<d[3])){S.label=X[1];break}if(X[0]===6&&S.label<d[1]){S.label=d[1],d=X;break}if(d&&S.label<d[2]){S.label=d[2],S.ops.push(X);break}d[2]&&S.ops.pop(),S.trys.pop();continue}X=x.call(T,S)}catch(K){X=[6,K],m=0}finally{N=d=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}};Object.defineProperty(G,"__esModule",{value:!0}),G.GForceGPULayout=void 0;var I=R(62329),k=R(49784),D=R(79984),b=R(48835),E=R(80628),p=R(49762),y=R(16470),g=function(T){L(x,T);function x(S){var N=T.call(this)||this;return N.maxIteration=1e3,N.edgeStrength=200,N.nodeStrength=1e3,N.coulombDisScale=.005,N.damping=.9,N.maxSpeed=1e3,N.minMovement=.5,N.interval=.02,N.factor=1,N.linkDistance=1,N.gravity=10,N.workerEnabled=!1,N.nodes=[],N.edges=[],N.width=300,N.height=300,N.nodeMap={},N.nodeIdxMap={},N.updateCfg(S),N}return x.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},x.prototype.execute=function(){return z(this,void 0,void 0,function(){var S,N,m,d,V;return F(this,function(Q){switch(Q.label){case 0:return S=this,N=S.nodes,!N||N.length===0?(S.onLayoutEnd&&S.onLayoutEnd(),[2]):(!S.width&&typeof window!="undefined"&&(S.width=window.innerWidth),!S.height&&typeof window!="undefined"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]),m=S.center,N.length===1?(N[0].x=m[0],N[0].y=m[1],S.onLayoutEnd&&S.onLayoutEnd(),[2]):(d={},V={},N.forEach(function(j,X){(0,k.isNumber)(j.x)||(j.x=Math.random()*S.width),(0,k.isNumber)(j.y)||(j.y=Math.random()*S.height),d[j.id]=j,V[j.id]=X}),S.nodeMap=d,S.nodeIdxMap=V,S.nodeStrength=(0,b.proccessToFunc)(S.nodeStrength,1),S.edgeStrength=(0,b.proccessToFunc)(S.edgeStrength,1),[4,S.run()]));case 1:return Q.sent(),[2]}})})},x.prototype.executeWithWorker=function(S,N){var m=this,d=m.nodes,V=m.center;if(!(!d||d.length===0)){if(d.length===1){d[0].x=V[0],d[0].y=V[1];return}var Q={},j={};d.forEach(function(X,K){(0,k.isNumber)(X.x)||(X.x=Math.random()*m.width),(0,k.isNumber)(X.y)||(X.y=Math.random()*m.height),Q[X.id]=X,j[X.id]=K}),m.nodeMap=Q,m.nodeIdxMap=j,m.nodeStrength=(0,b.proccessToFunc)(m.nodeStrength,1),m.edgeStrength=(0,b.proccessToFunc)(m.edgeStrength,1),m.run(S,N)}},x.prototype.run=function(S,N){return z(this,void 0,void 0,function(){var m,d,V,Q,j,X,K,J,rt,tt,nt,lt,xt,jt,Dt,Zt,Vt,ue,dt,Ot,ee,Re,me,Ae,Be,Ke,$t,ce=this;return F(this,function(we){switch(we.label){case 0:for(m=this,d=m.nodes,V=m.edges,Q=m.maxIteration,!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight),j=d.length,m.linkDistance=(0,b.proccessToFunc)(m.linkDistance),m.edgeStrength=(0,b.proccessToFunc)(m.edgeStrength),X=(0,b.buildTextureDataWithTwoEdgeAttr)(d,V,m.linkDistance,m.edgeStrength),K=X.maxEdgePerVetex,J=X.array,m.degrees=(0,E.getDegree)(d.length,m.nodeIdxMap,V).map(function(Pe){return Pe.all}),rt=[],tt=[],nt=[],lt=[],xt=[],jt=[],Dt=[],m.getMass||(m.getMass=function(Pe){return m.degrees[m.nodeIdxMap[Pe.id]]||1}),Zt=m.gravity,Vt=m.center,d.forEach(function(Pe,ye){rt.push(m.getMass(Pe)),tt.push(m.nodeStrength(Pe)),m.degrees[ye]||(m.degrees[ye]=0);var Bt=[Vt[0],Vt[1],Zt];if(m.getCenter){var re=m.getCenter(Pe,m.degrees[ye]);re&&(0,k.isNumber)(re[0])&&(0,k.isNumber)(re[1])&&(0,k.isNumber)(re[2])&&(Bt=re)}nt.push(Bt[0]),lt.push(Bt[1]),xt.push(Bt[2]),(0,k.isNumber)(Pe.fx)&&(0,k.isNumber)(Pe.fy)?(jt.push(Pe.fx||.001),Dt.push(Pe.fy||.001)):(jt.push(0),Dt.push(0))}),ue=(0,b.arrayToTextureData)([rt,m.degrees,tt,jt]),dt=(0,b.arrayToTextureData)([nt,lt,xt,Dt]),Ot=m.workerEnabled,Ot?ee=D.World.create({canvas:S,engineOptions:{supportCompute:!0}}):ee=D.World.create({engineOptions:{supportCompute:!0}}),Re=m.onLayoutEnd,me=[],J.forEach(function(Pe){me.push(Pe)}),Ae=0;Ae<4;Ae++)me.push(0);return Be=ee.createKernel(p.gForceBundle).setDispatch([j,1,1]).setBinding({u_Data:J,u_damping:m.damping,u_maxSpeed:m.maxSpeed,u_minMovement:m.minMovement,u_coulombDisScale:m.coulombDisScale,u_factor:m.factor,u_NodeAttributeArray1:ue,u_NodeAttributeArray2:dt,MAX_EDGE_PER_VERTEX:K,VERTEX_COUNT:j,u_AveMovement:me,u_interval:m.interval}),Ke=ee.createKernel(p.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:J,VERTEX_COUNT:j,u_AveMovement:[0,0,0,0]}),$t=function(){return z(ce,void 0,void 0,function(){var Pe,ye,Bt;return F(this,function(re){switch(re.label){case 0:Pe=0,re.label=1;case 1:return Pe<Q?[4,Be.execute()]:[3,5];case 2:return re.sent(),Ke.setBinding({u_Data:Be}),[4,Ke.execute()];case 3:re.sent(),ye=Math.max(.02,m.interval-Pe*.002),Be.setBinding({u_interval:ye,u_AveMovement:Ke}),re.label=4;case 4:return Pe++,[3,1];case 5:return[4,Be.getOutput()];case 6:return Bt=re.sent(),S?N.postMessage({type:y.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Bt}):d.forEach(function(Ee,It){var Et=Bt[4*It],Wt=Bt[4*It+1];Ee.x=Et,Ee.y=Wt}),Re&&Re(),[2]}})})},[4,$t()];case 1:return we.sent(),[2]}})})},x.prototype.getType=function(){return"gForce-gpu"},x}(I.Base);G.GForceGPULayout=g},49762:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.aveMovementBundle=G.aveMovementCode=G.gForceBundle=G.gForceCode=void 0,G.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,G.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',G.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,G.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},94414:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var k=function(D,b){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,p){E.__proto__=p}||function(E,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(E[y]=p[y])},k(D,b)};return function(D,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");k(D,b);function E(){this.constructor=D}D.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.GridLayout=void 0;var z=R(49784),F=R(62329),I=function(k){L(D,k);function D(b){var E=k.call(this)||this;return E.begin=[0,0],E.preventOverlap=!0,E.preventOverlapPadding=10,E.condense=!1,E.sortBy="degree",E.nodes=[],E.edges=[],E.width=300,E.height=300,E.row=0,E.col=0,E.cellWidth=0,E.cellHeight=0,E.cellUsed={},E.id2manPos={},E.onLayoutEnd=function(){},E.updateCfg(b),E}return D.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},D.prototype.execute=function(){var b=this,E=b.nodes,p=b.edges,y=b.begin,g=E.length;if(g===0)return b.onLayoutEnd&&b.onLayoutEnd(),{nodes:E,edges:p};if(g===1)return E[0].x=y[0],E[0].y=y[1],b.onLayoutEnd&&b.onLayoutEnd(),{nodes:E,edges:p};var T=b.sortBy,x=b.width,S=b.height,N=b.condense,m=b.preventOverlapPadding,d=b.preventOverlap,V=b.nodeSpacing,Q=b.nodeSize,j=[];E.forEach(function(ue){j.push(ue)});var X={};if(j.forEach(function(ue,dt){X[ue.id]=dt}),(T==="degree"||!(0,z.isString)(T)||j[0][T]===void 0)&&(T="degree",(0,z.isNaN)(E[0].degree))){var K=(0,z.getDegree)(j.length,X,p);j.forEach(function(ue,dt){ue.degree=K[dt].all})}j.sort(function(ue,dt){return dt[T]-ue[T]}),!x&&typeof window!="undefined"&&(x=window.innerWidth),!S&&typeof window!="undefined"&&(S=window.innerHeight);var J=b.rows,rt=b.cols!=null?b.cols:b.columns;if(b.cells=g,J!=null&&rt!=null?(b.rows=J,b.cols=rt):J!=null&&rt==null?(b.rows=J,b.cols=Math.ceil(b.cells/b.rows)):J==null&&rt!=null?(b.cols=rt,b.rows=Math.ceil(b.cells/b.cols)):(b.splits=Math.sqrt(b.cells*b.height/b.width),b.rows=Math.round(b.splits),b.cols=Math.round(b.width/b.height*b.splits)),b.rows=Math.max(b.rows,1),b.cols=Math.max(b.cols,1),b.cols*b.rows>b.cells){var tt=b.small(),nt=b.large();(tt-1)*nt>=b.cells?b.small(tt-1):(nt-1)*tt>=b.cells&&b.large(nt-1)}else for(;b.cols*b.rows<b.cells;){var tt=b.small(),nt=b.large();(nt+1)*tt>=b.cells?b.large(nt+1):b.small(tt+1)}if(b.cellWidth=x/b.cols,b.cellHeight=S/b.rows,N&&(b.cellWidth=0,b.cellHeight=0),d||V){var lt=(0,z.getFuncByUnknownType)(10,V),xt=(0,z.getFuncByUnknownType)(30,Q,!1);j.forEach(function(ue){(!ue.x||!ue.y)&&(ue.x=0,ue.y=0);var dt=xt(ue)||30,Ot,ee;(0,z.isArray)(dt)?(Ot=dt[0],ee=dt[1]):(Ot=dt,ee=dt);var Re=lt!==void 0?lt(ue):m,me=Ot+Re,Ae=ee+Re;b.cellWidth=Math.max(b.cellWidth,me),b.cellHeight=Math.max(b.cellHeight,Ae)})}b.cellUsed={},b.row=0,b.col=0,b.id2manPos={};for(var jt=0;jt<j.length;jt++){var Dt=j[jt],Zt=void 0;if(b.position&&(Zt=b.position(Dt)),Zt&&(Zt.row!==void 0||Zt.col!==void 0)){var Vt={row:Zt.row,col:Zt.col};if(Vt.col===void 0)for(Vt.col=0;b.used(Vt.row,Vt.col);)Vt.col++;else if(Vt.row===void 0)for(Vt.row=0;b.used(Vt.row,Vt.col);)Vt.row++;b.id2manPos[Dt.id]=Vt,b.use(Vt.row,Vt.col)}b.getPos(Dt)}return b.onLayoutEnd&&b.onLayoutEnd(),{edges:p,nodes:j}},D.prototype.small=function(b){var E=this,p,y=E.rows||5,g=E.cols||5;if(b==null)p=Math.min(y,g);else{var T=Math.min(y,g);T===E.rows?E.rows=b:E.cols=b}return p},D.prototype.large=function(b){var E=this,p,y=E.rows||5,g=E.cols||5;if(b==null)p=Math.max(y,g);else{var T=Math.max(y,g);T===E.rows?E.rows=b:E.cols=b}return p},D.prototype.used=function(b,E){var p=this;return p.cellUsed["c-".concat(b,"-").concat(E)]||!1},D.prototype.use=function(b,E){var p=this;p.cellUsed["c-".concat(b,"-").concat(E)]=!0},D.prototype.moveToNextCell=function(){var b=this,E=b.cols||5;b.col++,b.col>=E&&(b.col=0,b.row++)},D.prototype.getPos=function(b){var E=this,p=E.begin,y=E.cellWidth,g=E.cellHeight,T,x,S=E.id2manPos[b.id];if(S)T=S.col*y+y/2+p[0],x=S.row*g+g/2+p[1];else{for(;E.used(E.row,E.col);)E.moveToNextCell();T=E.col*y+y/2+p[0],x=E.row*g+g/2+p[1],E.use(E.row,E.col),E.moveToNextCell()}b.x=T,b.y=x},D.prototype.getType=function(){return"grid"},D}(F.Base);G.GridLayout=I},2584:function(Mr,G,R){"use strict";var L=this&&this.__createBinding||(Object.create?function(K,J,rt,tt){tt===void 0&&(tt=rt);var nt=Object.getOwnPropertyDescriptor(J,rt);(!nt||("get"in nt?!J.__esModule:nt.writable||nt.configurable))&&(nt={enumerable:!0,get:function(){return J[rt]}}),Object.defineProperty(K,tt,nt)}:function(K,J,rt,tt){tt===void 0&&(tt=rt),K[tt]=J[rt]}),z=this&&this.__exportStar||function(K,J){for(var rt in K)rt!=="default"&&!Object.prototype.hasOwnProperty.call(J,rt)&&L(J,K,rt)};Object.defineProperty(G,"__esModule",{value:!0}),G.ERLayout=G.ForceAtlas2Layout=G.ComboCombinedLayout=G.ComboForceLayout=G.GForceGPULayout=G.FruchtermanGPULayout=G.FruchtermanLayout=G.MDSLayout=G.ConcentricLayout=G.RadialLayout=G.DagreCompoundLayout=G.DagreLayout=G.CircularLayout=G.ForceLayout=G.Force2Layout=G.GForceLayout=G.RandomLayout=G.GridLayout=G.Layouts=G.Layout=void 0;var F=R(94414);Object.defineProperty(G,"GridLayout",{enumerable:!0,get:function(){return F.GridLayout}});var I=R(39711);Object.defineProperty(G,"RandomLayout",{enumerable:!0,get:function(){return I.RandomLayout}});var k=R(13653);Object.defineProperty(G,"GForceLayout",{enumerable:!0,get:function(){return k.GForceLayout}});var D=R(6740);Object.defineProperty(G,"Force2Layout",{enumerable:!0,get:function(){return D.Force2Layout}});var b=R(85717);Object.defineProperty(G,"ForceLayout",{enumerable:!0,get:function(){return b.ForceLayout}});var E=R(64885);Object.defineProperty(G,"CircularLayout",{enumerable:!0,get:function(){return E.CircularLayout}});var p=R(20171);Object.defineProperty(G,"DagreLayout",{enumerable:!0,get:function(){return p.DagreLayout}});var y=R(77057);Object.defineProperty(G,"DagreCompoundLayout",{enumerable:!0,get:function(){return y.DagreCompoundLayout}});var g=R(47944);Object.defineProperty(G,"RadialLayout",{enumerable:!0,get:function(){return g.RadialLayout}});var T=R(43281);Object.defineProperty(G,"ConcentricLayout",{enumerable:!0,get:function(){return T.ConcentricLayout}});var x=R(52899);Object.defineProperty(G,"MDSLayout",{enumerable:!0,get:function(){return x.MDSLayout}});var S=R(80374);Object.defineProperty(G,"FruchtermanLayout",{enumerable:!0,get:function(){return S.FruchtermanLayout}});var N=R(87745);Object.defineProperty(G,"FruchtermanGPULayout",{enumerable:!0,get:function(){return N.FruchtermanGPULayout}});var m=R(85194);Object.defineProperty(G,"GForceGPULayout",{enumerable:!0,get:function(){return m.GForceGPULayout}});var d=R(66590);Object.defineProperty(G,"ComboForceLayout",{enumerable:!0,get:function(){return d.ComboForceLayout}});var V=R(63861);Object.defineProperty(G,"ComboCombinedLayout",{enumerable:!0,get:function(){return V.ComboCombinedLayout}});var Q=R(48564);Object.defineProperty(G,"ForceAtlas2Layout",{enumerable:!0,get:function(){return Q.ForceAtlas2Layout}});var j=R(90441);Object.defineProperty(G,"ERLayout",{enumerable:!0,get:function(){return j.ERLayout}});var X=R(42875);Object.defineProperty(G,"Layout",{enumerable:!0,get:function(){return X.Layout}}),Object.defineProperty(G,"Layouts",{enumerable:!0,get:function(){return X.Layouts}}),z(R(32867),G)},42875:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.Layouts=G.Layout=void 0;var L=R(95326),z=R(94414),F=R(39711),I=R(6740),k=R(13653),D=R(85717),b=R(64885),E=R(20171),p=R(47944),y=R(43281),g=R(52899),T=R(80374),x=R(87745),S=R(85194),N=R(66590),m=R(63861),d=R(48564),V=R(90441),Q=R(77057),j=R(49784),X=function(){function K(J){var rt=(0,L.getLayoutByName)(J.type);this.layoutInstance=new rt(J)}return K.prototype.layout=function(J){return this.layoutInstance.layout(J)},K.prototype.updateCfg=function(J){this.layoutInstance.updateCfg(J)},K.prototype.init=function(J){this.correctLayers(J.nodes),this.layoutInstance.init(J)},K.prototype.correctLayers=function(J){if(!!(J==null?void 0:J.length)){var rt=Infinity,tt=[];if(J.forEach(function(lt){(0,j.isString)(lt.layer)&&(lt.layer=parseInt(lt.layer,10)),!(lt.layer===void 0||isNaN(lt.layer))&&(tt.push(lt),lt.layer<rt&&(rt=lt.layer))}),rt<=0){var nt=Math.abs(rt)+1;tt.forEach(function(lt){return lt.layer+=nt})}}},K.prototype.execute=function(){this.layoutInstance.execute()},K.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},K.prototype.destroy=function(){return this.layoutInstance.destroy()},K}();G.Layout=X,G.Layouts={force:D.ForceLayout,fruchterman:T.FruchtermanLayout,forceAtlas2:d.ForceAtlas2Layout,gForce:k.GForceLayout,force2:I.Force2Layout,dagre:E.DagreLayout,dagreCompound:Q.DagreCompoundLayout,circular:b.CircularLayout,radial:p.RadialLayout,concentric:y.ConcentricLayout,grid:z.GridLayout,mds:g.MDSLayout,comboForce:N.ComboForceLayout,comboCombined:m.ComboCombinedLayout,random:F.RandomLayout,"gForce-gpu":S.GForceGPULayout,"fruchterman-gpu":x.FruchtermanGPULayout,er:V.ERLayout}},52899:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var D=function(b,E){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(p[g]=y[g])},D(b,E)};return function(b,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");D(b,E);function p(){this.constructor=b}b.prototype=E===null?Object.create(E):(p.prototype=E.prototype,new p)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.MDSLayout=void 0;var z=R(52710),F=R(49784),I=R(62329),k=function(D){L(b,D);function b(E){var p=D.call(this)||this;return p.center=[0,0],p.linkDistance=50,p.nodes=[],p.edges=[],p.onLayoutEnd=function(){},p.updateCfg(E),p}return b.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},b.prototype.execute=function(){var E=this,p=E.nodes,y=E.edges,g=y===void 0?[]:y,T=E.center;if(!p||p.length===0){E.onLayoutEnd&&E.onLayoutEnd();return}if(p.length===1){p[0].x=T[0],p[0].y=T[1],E.onLayoutEnd&&E.onLayoutEnd();return}var x=E.linkDistance,S=(0,F.getAdjMatrix)({nodes:p,edges:g},!1),N=(0,F.floydWarshall)(S);E.handleInfinity(N);var m=(0,F.scaleMatrix)(N,x);E.scaledDistances=m;var d=E.runMDS();return E.positions=d,d.forEach(function(V,Q){p[Q].x=V[0]+T[0],p[Q].y=V[1]+T[1]}),E.onLayoutEnd&&E.onLayoutEnd(),{nodes:p,edges:g}},b.prototype.runMDS=function(){var E=this,p=2,y=E.scaledDistances,g=z.Matrix.mul(z.Matrix.pow(y,2),-.5),T=g.mean("row"),x=g.mean("column"),S=g.mean();g.add(S).subRowVector(T).subColumnVector(x);var N=new z.SingularValueDecomposition(g),m=z.Matrix.sqrt(N.diagonalMatrix).diagonal();return N.leftSingularVectors.toJSON().map(function(d){return z.Matrix.mul([d],[m]).toJSON()[0].splice(0,p)})},b.prototype.handleInfinity=function(E){var p=-999999;E.forEach(function(y){y.forEach(function(g){g!==Infinity&&p<g&&(p=g)})}),E.forEach(function(y,g){y.forEach(function(T,x){T===Infinity&&(E[g][x]=p)})})},b.prototype.getType=function(){return"mds"},b}(I.Base);G.MDSLayout=k},47944:function(Mr,G,R){"use strict";var L=this&&this.__createBinding||(Object.create?function(F,I,k,D){D===void 0&&(D=k);var b=Object.getOwnPropertyDescriptor(I,k);(!b||("get"in b?!I.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return I[k]}}),Object.defineProperty(F,D,b)}:function(F,I,k,D){D===void 0&&(D=k),F[D]=I[k]}),z=this&&this.__exportStar||function(F,I){for(var k in F)k!=="default"&&!Object.prototype.hasOwnProperty.call(I,k)&&L(I,F,k)};Object.defineProperty(G,"__esModule",{value:!0}),z(R(55974),G)},66082:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var L=R(52710),z=function(){function F(I){this.distances=I.distances,this.dimension=I.dimension||2,this.linkDistance=I.linkDistance}return F.prototype.layout=function(){var I=this,k=I.dimension,D=I.distances,b=I.linkDistance;try{var E=L.Matrix.mul(L.Matrix.pow(D,2),-.5),p=E.mean("row"),y=E.mean("column"),g=E.mean();E.add(g).subRowVector(p).subColumnVector(y);var T=new L.SingularValueDecomposition(E),x=L.Matrix.sqrt(T.diagonalMatrix).diagonal();return T.leftSingularVectors.toJSON().map(function(V){return L.Matrix.mul([V],[x]).toJSON()[0].splice(0,k)})}catch(V){for(var S=[],N=0;N<D.length;N++){var m=Math.random()*b,d=Math.random()*b;S.push([m,d])}return S}},F}();G.default=z},55974:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var g=function(T,x){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,N){S.__proto__=N}||function(S,N){for(var m in N)Object.prototype.hasOwnProperty.call(N,m)&&(S[m]=N[m])},g(T,x)};return function(T,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");g(T,x);function S(){this.constructor=T}T.prototype=x===null?Object.create(x):(S.prototype=x.prototype,new S)}}(),z=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(G,"__esModule",{value:!0}),G.RadialLayout=void 0;var F=R(49784),I=R(62329),k=z(R(66082)),D=z(R(6290));function b(g){for(var T=g.length,x=g[0].length,S=[],N=0;N<T;N++){for(var m=[],d=0;d<x;d++)g[N][d]!==0?m.push(1/(g[N][d]*g[N][d])):m.push(0);S.push(m)}return S}function E(g,T){var x=-1;return g.forEach(function(S,N){S.id===T&&(x=N)}),x}function p(g,T){return Math.sqrt((g[0]-T[0])*(g[0]-T[0])+(g[1]-T[1])*(g[1]-T[1]))}var y=function(g){L(T,g);function T(x){var S=g.call(this)||this;return S.maxIteration=1e3,S.focusNode=null,S.unitRadius=null,S.linkDistance=50,S.preventOverlap=!1,S.strictRadial=!0,S.maxPreventOverlapIteration=200,S.sortStrength=10,S.nodes=[],S.edges=[],S.updateCfg(x),S}return T.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},T.prototype.execute=function(){var x=this,S=x.nodes,N=x.edges||[];if(!S||S.length===0){x.onLayoutEnd&&x.onLayoutEnd();return}!x.width&&typeof window!="undefined"&&(x.width=window.innerWidth),!x.height&&typeof window!="undefined"&&(x.height=window.innerHeight),x.center||(x.center=[x.width/2,x.height/2]);var m=x.center;if(S.length===1){S[0].x=m[0],S[0].y=m[1],x.onLayoutEnd&&x.onLayoutEnd();return}var d=x.linkDistance,V=null;if((0,F.isString)(x.focusNode)){for(var Q=!1,j=0;j<S.length;j++)S[j].id===x.focusNode&&(V=S[j],x.focusNode=V,Q=!0,j=S.length);Q||(V=null)}else V=x.focusNode;V||(V=S[0],x.focusNode=V);var X=E(S,V.id);X<0&&(X=0),x.focusIndex=X;var K=(0,F.getAdjMatrix)({nodes:S,edges:N},!1),J=(0,F.floydWarshall)(K),rt=x.maxToFocus(J,X);x.handleInfinity(J,X,rt+1),x.distances=J;var tt=J[X],nt=x.width||500,lt=x.height||500,xt=nt-m[0]>m[0]?m[0]:nt-m[0],jt=lt-m[1]>m[1]?m[1]:lt-m[1];xt===0&&(xt=nt/2),jt===0&&(jt=lt/2);var Dt=jt>xt?xt:jt,Zt=Math.max.apply(Math,tt),Vt=[];tt.forEach(function(Pe,ye){x.unitRadius||(x.unitRadius=Dt/Zt),Vt[ye]=Pe*x.unitRadius}),x.radii=Vt;var ue=x.eIdealDisMatrix();x.eIdealDistances=ue;var dt=b(ue);x.weights=dt;var Ot=new k.default({linkDistance:d,distances:ue}),ee=Ot.layout();ee.forEach(function(Pe){(0,F.isNaN)(Pe[0])&&(Pe[0]=Math.random()*d),(0,F.isNaN)(Pe[1])&&(Pe[1]=Math.random()*d)}),x.positions=ee,ee.forEach(function(Pe,ye){S[ye].x=Pe[0]+m[0],S[ye].y=Pe[1]+m[1]}),ee.forEach(function(Pe){Pe[0]-=ee[X][0],Pe[1]-=ee[X][1]}),x.run();var Re=x.preventOverlap,me=x.nodeSize,Ae,Be=x.strictRadial;if(Re){var Ke=x.nodeSpacing,$t;(0,F.isNumber)(Ke)?$t=function(){return Ke}:(0,F.isFunction)(Ke)?$t=Ke:$t=function(){return 0},me?(0,F.isArray)(me)?Ae=function(Pe){var ye=me[0]>me[1]?me[0]:me[1];return ye+$t(Pe)}:Ae=function(Pe){return me+$t(Pe)}:Ae=function(Pe){if(Pe.size){if((0,F.isArray)(Pe.size)){var ye=Pe.size[0]>Pe.size[1]?Pe.size[0]:Pe.size[1];return ye+$t(Pe)}if((0,F.isObject)(Pe.size)){var ye=Pe.size.width>Pe.size.height?Pe.size.width:Pe.size.height;return ye+$t(Pe)}return Pe.size+$t(Pe)}return 10+$t(Pe)};var ce={nodes:S,nodeSizeFunc:Ae,adjMatrix:K,positions:ee,radii:Vt,height:lt,width:nt,strictRadial:Be,focusID:X,iterations:x.maxPreventOverlapIteration||200,k:ee.length/4.5},we=new D.default(ce);ee=we.layout()}return ee.forEach(function(Pe,ye){S[ye].x=Pe[0]+m[0],S[ye].y=Pe[1]+m[1]}),x.onLayoutEnd&&x.onLayoutEnd(),{nodes:S,edges:N}},T.prototype.run=function(){for(var x=this,S=x.maxIteration,N=x.positions||[],m=x.weights||[],d=x.eIdealDistances||[],V=x.radii||[],Q=0;Q<=S;Q++){var j=Q/S;x.oneIteration(j,N,V,d,m)}},T.prototype.oneIteration=function(x,S,N,m,d){var V=this,Q=1-x,j=V.focusIndex;S.forEach(function(X,K){var J=p(X,[0,0]),rt=J===0?0:1/J;if(K!==j){var tt=0,nt=0,lt=0;S.forEach(function(jt,Dt){if(K!==Dt){var Zt=p(X,jt),Vt=Zt===0?0:1/Zt,ue=m[Dt][K];lt+=d[K][Dt],tt+=d[K][Dt]*(jt[0]+ue*(X[0]-jt[0])*Vt),nt+=d[K][Dt]*(jt[1]+ue*(X[1]-jt[1])*Vt)}});var xt=N[K]===0?0:1/N[K];lt*=Q,lt+=x*xt*xt,tt*=Q,tt+=x*xt*X[0]*rt,X[0]=tt/lt,nt*=Q,nt+=x*xt*X[1]*rt,X[1]=nt/lt}})},T.prototype.eIdealDisMatrix=function(){var x=this,S=x.nodes;if(!S)return[];var N=x.distances,m=x.linkDistance,d=x.radii||[],V=x.unitRadius||50,Q=[];return N&&N.forEach(function(j,X){var K=[];j.forEach(function(J,rt){if(X===rt)K.push(0);else if(d[X]===d[rt])if(x.sortBy==="data")K.push(J*(Math.abs(X-rt)*x.sortStrength)/(d[X]/V));else if(x.sortBy){var tt=S[X][x.sortBy]||0,nt=S[rt][x.sortBy]||0;(0,F.isString)(tt)&&(tt=tt.charCodeAt(0)),(0,F.isString)(nt)&&(nt=nt.charCodeAt(0)),K.push(J*(Math.abs(tt-nt)*x.sortStrength)/(d[X]/V))}else K.push(J*m/(d[X]/V));else{var lt=(m+V)/2;K.push(J*lt)}}),Q.push(K)}),Q},T.prototype.handleInfinity=function(x,S,N){for(var m=x.length,d=0;d<m;d++)if(x[S][d]===Infinity){x[S][d]=N,x[d][S]=N;for(var V=0;V<m;V++)x[d][V]!==Infinity&&x[S][V]===Infinity&&(x[S][V]=N+x[d][V],x[V][S]=N+x[d][V])}for(var d=0;d<m;d++)if(d!==S){for(var V=0;V<m;V++)if(x[d][V]===Infinity){var Q=Math.abs(x[S][d]-x[S][V]);Q=Q===0?1:Q,x[d][V]=Q}}},T.prototype.maxToFocus=function(x,S){for(var N=0,m=0;m<x[S].length;m++)x[S][m]!==Infinity&&(N=x[S][m]>N?x[S][m]:N);return N},T.prototype.getType=function(){return"radial"},T}(I.Base);G.RadialLayout=y},6290:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var R=800,L=function(){function z(F){this.disp=[],this.positions=F.positions,this.adjMatrix=F.adjMatrix,this.focusID=F.focusID,this.radii=F.radii,this.iterations=F.iterations||10,this.height=F.height||10,this.width=F.width||10,this.speed=F.speed||100,this.gravity=F.gravity||10,this.nodeSizeFunc=F.nodeSizeFunc,this.k=F.k||5,this.strictRadial=F.strictRadial,this.nodes=F.nodes}return z.prototype.layout=function(){var F=this,I=F.positions,k=[],D=F.iterations,b=F.width/10;F.maxDisplace=b,F.disp=k;for(var E=0;E<D;E++)I.forEach(function(p,y){k[y]={x:0,y:0}}),F.getRepulsion(),F.updatePositions();return I},z.prototype.getRepulsion=function(){var F=this,I=F.positions,k=F.nodes,D=F.disp,b=F.k,E=F.radii||[];I.forEach(function(p,y){D[y]={x:0,y:0},I.forEach(function(g,T){if(y!==T&&E[y]===E[T]){var x=p[0]-g[0],S=p[1]-g[1],N=Math.sqrt(x*x+S*S);if(N===0){N=1;var m=y>T?1:-1;x=.01*m,S=.01*m}if(N<F.nodeSizeFunc(k[y])/2+F.nodeSizeFunc(k[T])/2){var d=b*b/N;D[y].x+=x/N*d,D[y].y+=S/N*d}}})})},z.prototype.updatePositions=function(){var F=this,I=F.positions,k=F.disp,D=F.speed,b=F.strictRadial,E=F.focusID,p=F.maxDisplace||F.width/10;b&&k.forEach(function(g,T){var x=I[T][0]-I[E][0],S=I[T][1]-I[E][1],N=Math.sqrt(x*x+S*S),m=S/N,d=-x/N,V=Math.sqrt(g.x*g.x+g.y*g.y),Q=Math.acos((m*g.x+d*g.y)/V);Q>Math.PI/2&&(Q-=Math.PI/2,m*=-1,d*=-1);var j=Math.cos(Q)*V;g.x=m*j,g.y=d*j});var y=F.radii;I.forEach(function(g,T){if(T!==E){var x=Math.sqrt(k[T].x*k[T].x+k[T].y*k[T].y);if(x>0&&T!==E){var S=Math.min(p*(D/R),x);if(g[0]+=k[T].x/x*S,g[1]+=k[T].y/x*S,b){var N=g[0]-I[E][0],m=g[1]-I[E][1],d=Math.sqrt(N*N+m*m);N=N/d*y[T],m=m/d*y[T],g[0]=I[E][0]+N,g[1]=I[E][1]+m}}}})},z}();G.default=L},39711:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var I=function(k,D){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,E){b.__proto__=E}||function(b,E){for(var p in E)Object.prototype.hasOwnProperty.call(E,p)&&(b[p]=E[p])},I(k,D)};return function(k,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");I(k,D);function b(){this.constructor=k}k.prototype=D===null?Object.create(D):(b.prototype=D.prototype,new b)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.RandomLayout=void 0;var z=R(62329),F=function(I){L(k,I);function k(D){var b=I.call(this)||this;return b.center=[0,0],b.width=300,b.height=300,b.nodes=[],b.edges=[],b.onLayoutEnd=function(){},b.updateCfg(D),b}return k.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},k.prototype.execute=function(){var D=this,b=D.nodes,E=.9,p=D.center;return!D.width&&typeof window!="undefined"&&(D.width=window.innerWidth),!D.height&&typeof window!="undefined"&&(D.height=window.innerHeight),b&&b.forEach(function(y){y.x=(Math.random()-.5)*E*D.width+p[0],y.y=(Math.random()-.5)*E*D.height+p[1]}),D.onLayoutEnd&&D.onLayoutEnd(),{nodes:b,edges:this.edges}},k.prototype.getType=function(){return"random"},k}(z.Base);G.RandomLayout=F},32867:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0})},95326:function(Mr,G,R){"use strict";var L=this&&this.__extends||function(){var E=function(p,y){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var x in T)Object.prototype.hasOwnProperty.call(T,x)&&(g[x]=T[x])},E(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");E(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.getLayoutByName=G.unRegisterLayout=G.registerLayout=void 0;var z=R(62329),F=R(49784),I=new Map,k=function(E,p){if(I.get(E)&&console.warn("The layout with the name ".concat(E," exists already, it will be overridden")),(0,F.isObject)(p)){var y=function(g){L(T,g);function T(x){var S=g.call(this)||this,N=S,m={},d=N.getDefaultCfg();return Object.assign(m,d,p,x),Object.keys(m).forEach(function(V){var Q=m[V];N[V]=Q}),S}return T}(z.Base);I.set(E,y)}else I.set(E,p);return I.get(E)};G.registerLayout=k;var D=function(E){I.has(E)&&I.delete(E)};G.unRegisterLayout=D;var b=function(E){return I.has(E)?I.get(E):null};G.getLayoutByName=b},85087:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.isArray=void 0,G.isArray=Array.isArray},78732:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getFuncByUnknownType=G.getFunc=G.isFunction=void 0;var L=R(49784),z=R(30627),F=function(D){return typeof D=="function"};G.isFunction=F;var I=function(D,b,E){var p;return E?p=E:(0,z.isNumber)(D)?p=function(){return D}:p=function(){return b},p};G.getFunc=I;var k=function(D,b,E){return E===void 0&&(E=!0),!b&&b!==0?function(p){return p.size?(0,L.isArray)(p.size)?p.size[0]>p.size[1]?p.size[0]:p.size[1]:(0,L.isObject)(p.size)?p.size.width>p.size.height?p.size.width:p.size.height:p.size:D}:(0,G.isFunction)(b)?b:(0,z.isNumber)(b)?function(){return b}:(0,L.isArray)(b)?function(){if(E){var p=Math.max.apply(Math,b);return isNaN(p)?D:p}return b}:(0,L.isObject)(b)?function(){if(E){var p=Math.max(b.width,b.height);return isNaN(p)?D:p}return[b.width,b.height]}:function(){return D}};G.getFuncByUnknownType=k},48835:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.arrayToTextureData=G.attributesToTextureData=G.buildTextureDataWithTwoEdgeAttr=G.buildTextureData=G.proccessToFunc=void 0;var L=R(49784),z=R(80628),F=function(E,p){var y;return E?(0,L.isNumber)(E)?y=function(){return E}:y=E:y=function(){return p||1},y};G.proccessToFunc=F;var I=function(E,p){var y=[],g=[],T={},x=0;for(x=0;x<E.length;x++){var S=E[x];T[S.id]=x,y.push(S.x),y.push(S.y),y.push(0),y.push(0),g.push([])}for(x=0;x<p.length;x++){var N=p[x],m=(0,z.getEdgeTerminal)(N,"source"),d=(0,z.getEdgeTerminal)(N,"target");!isNaN(T[m])&&!isNaN(T[d])&&(g[T[m]].push(T[d]),g[T[d]].push(T[m]))}var V=0;for(x=0;x<E.length;x++){var Q=y.length,j=g[x],X=j.length;y[x*4+2]=Q,y[x*4+3]=X,V=Math.max(V,X);for(var K=0;K<X;++K){var J=j[K];y.push(+J)}}for(;y.length%4!=0;)y.push(0);return{maxEdgePerVetex:V,array:new Float32Array(y)}};G.buildTextureData=I;var k=function(E,p,y,g){var T=[],x=[],S={},N=0;for(N=0;N<E.length;N++){var m=E[N];S[m.id]=N,T.push(m.x),T.push(m.y),T.push(0),T.push(0),x.push([])}for(N=0;N<p.length;N++){var d=p[N],V=(0,z.getEdgeTerminal)(d,"source"),Q=(0,z.getEdgeTerminal)(d,"target");x[S[V]].push(S[Q]),x[S[V]].push(y(d)),x[S[V]].push(g(d)),x[S[V]].push(0),x[S[Q]].push(S[V]),x[S[Q]].push(y(d)),x[S[Q]].push(g(d)),x[S[Q]].push(0)}var j=0;for(N=0;N<E.length;N++){var X=T.length,K=x[N],J=K.length;T[N*4+2]=X+1048576*J/4,T[N*4+3]=0,j=Math.max(j,J/4);for(var rt=0;rt<J;++rt){var tt=K[rt];T.push(+tt)}}for(;T.length%4!=0;)T.push(0);return{maxEdgePerVetex:j,array:new Float32Array(T)}};G.buildTextureDataWithTwoEdgeAttr=k;var D=function(E,p){var y=[],g=E.length,T={};return p.forEach(function(x){E.forEach(function(S,N){if(T[x[S]]===void 0&&(T[x[S]]=Object.keys(T).length),y.push(T[x[S]]),N===g-1)for(;y.length%4!=0;)y.push(0)})}),{array:new Float32Array(y),count:Object.keys(T).length}};G.attributesToTextureData=D;var b=function(E){for(var p=[],y=E.length,g=E[0].length,T=function(S){E.forEach(function(N,m){if(p.push(N[S]),m===y-1)for(;p.length%4!=0;)p.push(0)})},x=0;x<g;x++)T(x);return new Float32Array(p)};G.arrayToTextureData=b},49784:function(Mr,G,R){"use strict";var L=this&&this.__createBinding||(Object.create?function(F,I,k,D){D===void 0&&(D=k);var b=Object.getOwnPropertyDescriptor(I,k);(!b||("get"in b?!I.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return I[k]}}),Object.defineProperty(F,D,b)}:function(F,I,k,D){D===void 0&&(D=k),F[D]=I[k]}),z=this&&this.__exportStar||function(F,I){for(var k in F)k!=="default"&&!Object.prototype.hasOwnProperty.call(I,k)&&L(I,F,k)};Object.defineProperty(G,"__esModule",{value:!0}),z(R(8055),G),z(R(85087),G),z(R(30627),G),z(R(80628),G),z(R(98130),G),z(R(78732),G)},80628:function(Mr,G,R){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getCoreNodeAndRelativeLeafNodes=G.getAvgNodePosition=G.getLayoutBBox=G.traverseTreeUp=G.scaleMatrix=G.getAdjMatrix=G.floydWarshall=G.getDegreeMap=G.getDegree=G.getEdgeTerminal=void 0;var L=R(85087),z=R(30627),F=R(98130),I=function(V,Q){var j=V[Q];return(0,F.isObject)(j)?j.cell:j};G.getEdgeTerminal=I;var k=function(V,Q,j){for(var X=[],K=0;K<V;K++)X[K]={in:0,out:0,all:0};return j&&j.forEach(function(J){var rt=(0,G.getEdgeTerminal)(J,"source"),tt=(0,G.getEdgeTerminal)(J,"target");rt&&X[Q[rt]]&&(X[Q[rt]].out+=1,X[Q[rt]].all+=1),tt&&X[Q[tt]]&&(X[Q[tt]].in+=1,X[Q[tt]].all+=1)}),X};G.getDegree=k;var D=function(V,Q){var j={};return V.forEach(function(X){j[X.id]={in:0,out:0,all:0}}),Q&&Q.forEach(function(X){var K=(0,G.getEdgeTerminal)(X,"source"),J=(0,G.getEdgeTerminal)(X,"target");K&&(j[K].out+=1,j[K].all+=1),J&&(j[J].in+=1,j[J].all+=1)}),j};G.getDegreeMap=D;var b=function(V){for(var Q=[],j=V.length,X=0;X<j;X+=1){Q[X]=[];for(var K=0;K<j;K+=1)X===K?Q[X][K]=0:V[X][K]===0||!V[X][K]?Q[X][K]=Infinity:Q[X][K]=V[X][K]}for(var J=0;J<j;J+=1)for(var X=0;X<j;X+=1)for(var K=0;K<j;K+=1)Q[X][K]>Q[X][J]+Q[J][K]&&(Q[X][K]=Q[X][J]+Q[J][K]);return Q};G.floydWarshall=b;var E=function(V,Q){var j=V.nodes,X=V.edges,K=[],J={};if(!j)throw new Error("invalid nodes data!");return j&&j.forEach(function(rt,tt){J[rt.id]=tt;var nt=[];K.push(nt)}),X==null||X.forEach(function(rt){var tt=(0,G.getEdgeTerminal)(rt,"source"),nt=(0,G.getEdgeTerminal)(rt,"target"),lt=J[tt],xt=J[nt];lt===void 0||xt===void 0||(K[lt][xt]=1,Q||(K[xt][lt]=1))}),K};G.getAdjMatrix=E;var p=function(V,Q){var j=[];return V.forEach(function(X){var K=[];X.forEach(function(J){K.push(J*Q)}),j.push(K)}),j};G.scaleMatrix=p;var y=function(V,Q){if(V&&V.children){for(var j=V.children.length-1;j>=0;j--)if(!y(V.children[j],Q))return}return!!Q(V)},g=function(V,Q){typeof Q=="function"&&y(V,Q)};G.traverseTreeUp=g;var T=function(V){var Q=Infinity,j=Infinity,X=-Infinity,K=-Infinity;return V.forEach(function(J){var rt=J.size;(0,L.isArray)(rt)?rt.length===1&&(rt=[rt[0],rt[0]]):(0,z.isNumber)(rt)?rt=[rt,rt]:(rt===void 0||isNaN(rt))&&(rt=[30,30]);var tt=[rt[0]/2,rt[1]/2],nt=J.x-tt[0],lt=J.x+tt[0],xt=J.y-tt[1],jt=J.y+tt[1];Q>nt&&(Q=nt),j>xt&&(j=xt),X<lt&&(X=lt),K<jt&&(K=jt)}),{minX:Q,minY:j,maxX:X,maxY:K}};G.getLayoutBBox=T;var x=function(V){var Q={x:0,y:0};V.forEach(function(X){Q.x+=X.x||0,Q.y+=X.y||0});var j=V.length||1;return{x:Q.x/j,y:Q.y/j}};G.getAvgNodePosition=x;var S=function(V,Q,j){var X,K;return V==="source"?((X=j==null?void 0:j.find(function(J){return J.target===Q.id}))===null||X===void 0?void 0:X.source)||{}:((K=j==null?void 0:j.find(function(J){return J.source===Q.id}))===null||K===void 0?void 0:K.target)||{}},N=function(V,Q,j){var X=[];switch(V){case"source":X=j==null?void 0:j.filter(function(J){return J.source===Q.id}).map(function(J){return J.target});break;case"target":X=j==null?void 0:j.filter(function(J){return J.target===Q.id}).map(function(J){return J.source});break;case"both":X=j==null?void 0:j.filter(function(J){return J.source===Q.id}).map(function(J){return J.target}).concat(j==null?void 0:j.filter(function(J){return J.target===Q.id}).map(function(J){return J.source}));break;default:break}var K=new Set(X);return Array.from(K)},m=function(V,Q,j,X,K){var J=j[Q]||"",rt=(X==null?void 0:X.filter(function(tt){return tt[Q]===J}))||[];return V==="leaf"&&(rt=rt.filter(function(tt){var nt,lt;return((nt=K[tt.id])===null||nt===void 0?void 0:nt.in)===0||((lt=K[tt.id])===null||lt===void 0?void 0:lt.out)===0})),rt},d=function(V,Q,j,X,K,J){var rt=K[Q.id],tt=rt.in,nt=rt.out,lt=Q,xt=[];tt===0?(lt=S("source",Q,j),xt=N("both",lt,j).map(function(Dt){return J[Dt]})):nt===0&&(lt=S("target",Q,j),xt=N("both",lt,j).map(function(Dt){return J[Dt]})),xt=xt.filter(function(Dt){return K[Dt.id]&&(K[Dt.id].in===0||K[Dt.id].out===0)});var jt=m(V,X,Q,xt,K);return{coreNode:lt,relativeLeafNodes:xt,sameTypeLeafNodes:jt}};G.getCoreNodeAndRelativeLeafNodes=d},30627:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.toNumber=G.isNaN=G.isNumber=void 0;var R=function(F){return typeof F=="number"};G.isNumber=R;var L=function(F){return Number.isNaN(Number(F))};G.isNaN=L;var z=function(F){var I=parseFloat(F);return(0,G.isNaN)(I)?F:I};G.toNumber=z},98130:function(Mr,G){"use strict";var R=this&&this.__assign||function(){return R=Object.assign||function(F){for(var I,k=1,D=arguments.length;k<D;k++){I=arguments[k];for(var b in I)Object.prototype.hasOwnProperty.call(I,b)&&(F[b]=I[b])}return F},R.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.clone=G.isObject=void 0;var L=function(F){return F!==null&&typeof F=="object"};G.isObject=L;var z=function(F){if(F===null)return F;if(F instanceof Date)return new Date(F.getTime());if(F instanceof Array){var I=[];return F.forEach(function(D){I.push(D)}),I.map(function(D){return(0,G.clone)(D)})}if(typeof F=="object"&&Object.keys(F).length){var k=R({},F);return Object.keys(k).forEach(function(D){k[D]=(0,G.clone)(k[D])}),k}return F};G.clone=z},8055:function(Mr,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.camelize=G.isString=void 0;var R=function(F){return typeof F=="string"};G.isString=R;var L=function(F){var I=Object.create(null);return function(k){var D=I[k];return D||(I[k]=F(k))}},z=/-(\w)/g;G.camelize=L(function(F){return F.replace(z,function(I,k){return k?k.toUpperCase():""})})},31278:function(Mr,G,R){"use strict";var L;L={value:!0};var z=R(64530);function F(g,T,x){var S=[0,0,0,0,0,0,0,0,0];return z.mat3.fromTranslation(S,x),z.mat3.multiply(g,S,T)}L=F;function I(g,T,x){var S=[0,0,0,0,0,0,0,0,0];return z.mat3.fromRotation(S,x),z.mat3.multiply(g,S,T)}L=I;function k(g,T,x){var S=[0,0,0,0,0,0,0,0,0];return z.mat3.fromScaling(S,x),z.mat3.multiply(g,S,T)}L=k;function D(g,T,x){return z.mat3.multiply(g,x,T)}function b(g,T){for(var x=g?[].concat(g):[1,0,0,0,1,0,0,0,1],S=0,N=T.length;S<N;S++){var m=T[S];switch(m[0]){case"t":F(x,x,[m[1],m[2]]);break;case"s":k(x,x,[m[1],m[2]]);break;case"r":I(x,x,m[1]);break;case"m":D(x,x,m[1]);break;default:break}}return x}G.vs=b;function E(g,T){return g[0]*T[1]-T[0]*g[1]}L=E;function p(g,T,x){var S=z.vec2.angle(g,T),N=E(g,T)>=0;return x?N?Math.PI*2-S:S:N?S:Math.PI*2-S}L=p;function y(g,T,x){return x?(g[0]=T[1],g[1]=-1*T[0]):(g[0]=-1*T[1],g[1]=T[0]),g}L=y},49242:function(Mr,G,R){"use strict";R.r(G),R.d(G,{Cache:function(){return Tt},assign:function(){return de},augment:function(){return qr},clamp:function(){return it},clearAnimationFrame:function(){return Li},clone:function(){return Sa},contains:function(){return I},debounce:function(){return _i},deepMix:function(){return Yo},difference:function(){return E},each:function(){return V},endsWith:function(){return Cn},every:function(){return Gr},extend:function(){return no},filter:function(){return D},find:function(){return xt},findIndex:function(){return Dt},firstValue:function(){return Vt},fixedBase:function(){return B},flatten:function(){return dt},flattenDeep:function(){return ee},forIn:function(){return le},get:function(){return Fi},getEllipsisText:function(){return yr},getRange:function(){return Be},getType:function(){return qi},getWrapBehavior:function(){return Tr},group:function(){return bn},groupBy:function(){return $r},groupToMap:function(){return an},has:function(){return ze},hasKey:function(){return Ie},hasValue:function(){return nn},head:function(){return ur},identity:function(){return yt},includes:function(){return I},indexOf:function(){return Vi},isArguments:function(){return ji},isArray:function(){return N},isArrayLike:function(){return z},isBoolean:function(){return ri},isDate:function(){return Po},isDecimal:function(){return pt},isElement:function(){return ko},isEmpty:function(){return yo},isEqual:function(){return ma},isEqualWith:function(){return qa},isError:function(){return ho},isEven:function(){return Mt},isFinite:function(){return Ji},isFunction:function(){return T},isInteger:function(){return Le},isMatch:function(){return K},isNegative:function(){return qe},isNil:function(){return S},isNull:function(){return Ri},isNumber:function(){return C},isNumberEqual:function(){return xr},isObject:function(){return m},isObjectLike:function(){return rt},isOdd:function(){return Rn},isPlainObject:function(){return nt},isPositive:function(){return Sr},isPrototype:function(){return to},isRegExp:function(){return un},isString:function(){return fe},isType:function(){return g},isUndefined:function(){return Fo},keys:function(){return j},last:function(){return Or},lowerCase:function(){return jn},lowerFirst:function(){return va},map:function(){return pi},mapValues:function(){return Zi},max:function(){return Re},maxBy:function(){return jr},measureTextWidth:function(){return er},memoize:function(){return li},min:function(){return me},minBy:function(){return Nn},mix:function(){return de},mod:function(){return ea},noop:function(){return ut},number2color:function(){return kr},omit:function(){return La},parseRadius:function(){return Te},pick:function(){return bo},pull:function(){return Pe},pullAt:function(){return re},reduce:function(){return It},remove:function(){return Wt},requestAnimationFrame:function(){return go},set:function(){return mo},size:function(){return Ct},some:function(){return sr},sortBy:function(){return $e},startsWith:function(){return fn},substitute:function(){return fi},throttle:function(){return ds},toArray:function(){return os},toDegree:function(){return na},toInteger:function(){return da},toRadian:function(){return Ut},toString:function(){return pn},union:function(){return Xe},uniq:function(){return Lt},uniqueId:function(){return At},upperCase:function(){return Wa},upperFirst:function(){return vi},values:function(){return _r},valuesOfKey:function(){return Dr},wrapBehavior:function(){return vr}});var L=function(H){return H!==null&&typeof H!="function"&&isFinite(H.length)},z=L,F=function(H,gt){return z(H)?H.indexOf(gt)>-1:!1},I=F,k=function(H,gt){if(!z(H))return H;for(var Rt=[],te=0;te<H.length;te++){var De=H[te];gt(De,te)&&Rt.push(De)}return Rt},D=k,b=function(H,gt){return gt===void 0&&(gt=[]),D(H,function(Rt){return!I(gt,Rt)})},E=b,p={}.toString,y=function(H,gt){return p.call(H)==="[object "+gt+"]"},g=y,T=function(H){return g(H,"Function")},x=function(H){return H==null},S=x,N=function(H){return Array.isArray?Array.isArray(H):g(H,"Array")},m=function(H){var gt=typeof H;return H!==null&&gt==="object"||gt==="function"};function d(H,gt){if(!!H){var Rt;if(N(H))for(var te=0,De=H.length;te<De&&(Rt=gt(H[te],te),Rt!==!1);te++);else if(m(H)){for(var rr in H)if(H.hasOwnProperty(rr)&&(Rt=gt(H[rr],rr),Rt===!1))break}}}var V=d,Q=Object.keys?function(H){return Object.keys(H)}:function(H){var gt=[];return V(H,function(Rt,te){T(H)&&te==="prototype"||gt.push(te)}),gt},j=Q;function X(H,gt){var Rt=j(gt),te=Rt.length;if(S(H))return!te;for(var De=0;De<te;De+=1){var rr=Rt[De];if(gt[rr]!==H[rr]||!(rr in H))return!1}return!0}var K=X,J=function(H){return typeof H=="object"&&H!==null},rt=J,tt=function(H){if(!rt(H)||!g(H,"Object"))return!1;if(Object.getPrototypeOf(H)===null)return!0;for(var gt=H;Object.getPrototypeOf(gt)!==null;)gt=Object.getPrototypeOf(gt);return Object.getPrototypeOf(H)===gt},nt=tt;function lt(H,gt){if(!N(H))return null;var Rt;if(T(gt)&&(Rt=gt),nt(gt)&&(Rt=function(De){return K(De,gt)}),Rt){for(var te=0;te<H.length;te+=1)if(Rt(H[te]))return H[te]}return null}var xt=lt;function jt(H,gt,Rt){Rt===void 0&&(Rt=0);for(var te=Rt;te<H.length;te++)if(gt(H[te],te))return te;return-1}var Dt=jt,Zt=function(H,gt){for(var Rt=null,te=0;te<H.length;te++){var De=H[te],rr=De[gt];if(!S(rr)){N(rr)?Rt=rr[0]:Rt=rr;break}}return Rt},Vt=Zt,ue=function(H){if(!N(H))return[];for(var gt=[],Rt=0;Rt<H.length;Rt++)gt=gt.concat(H[Rt]);return gt},dt=ue,Ot=function(H,gt){if(gt===void 0&&(gt=[]),!N(H))gt.push(H);else for(var Rt=0;Rt<H.length;Rt+=1)Ot(H[Rt],gt);return gt},ee=Ot,Re=function(H){if(!!N(H))return H.reduce(function(gt,Rt){return Math.max(gt,Rt)},H[0])},me=function(H){if(!!N(H))return H.reduce(function(gt,Rt){return Math.min(gt,Rt)},H[0])},Ae=function(H){var gt=H.filter(function(Er){return!isNaN(Er)});if(!gt.length)return{min:0,max:0};if(N(H[0])){for(var Rt=[],te=0;te<H.length;te++)Rt=Rt.concat(H[te]);gt=Rt}var De=Re(gt),rr=me(gt);return{min:rr,max:De}},Be=Ae,Ke=Array.prototype,$t=Ke.splice,ce=Ke.indexOf,we=function(H){for(var gt=[],Rt=1;Rt<arguments.length;Rt++)gt[Rt-1]=arguments[Rt];for(var te=0;te<gt.length;te++)for(var De=gt[te],rr=-1;(rr=ce.call(H,De))>-1;)$t.call(H,rr,1);return H},Pe=we,ye=Array.prototype.splice,Bt=function(gt,Rt){if(!z(gt))return[];for(var te=gt?Rt.length:0,De=te-1;te--;){var rr=void 0,Er=Rt[te];(te===De||Er!==rr)&&(rr=Er,ye.call(gt,Er,1))}return gt},re=Bt,Ee=function(H,gt,Rt){if(!N(H)&&!nt(H))return H;var te=Rt;return V(H,function(De,rr){te=gt(te,De,rr)}),te},It=Ee,Et=function(H,gt){var Rt=[];if(!z(H))return Rt;for(var te=-1,De=[],rr=H.length;++te<rr;){var Er=H[te];gt(Er,te,H)&&(Rt.push(Er),De.push(te))}return re(H,De),Rt},Wt=Et,fe=function(H){return g(H,"String")};function Fe(H,gt){var Rt;if(T(gt))Rt=function(De,rr){return gt(De)-gt(rr)};else{var te=[];fe(gt)?te.push(gt):N(gt)&&(te=gt),Rt=function(De,rr){for(var Er=0;Er<te.length;Er+=1){var yn=te[Er];if(De[yn]>rr[yn])return 1;if(De[yn]<rr[yn])return-1}return 0}}return H.sort(Rt),H}var $e=Fe;function Lt(H,gt){gt===void 0&&(gt=new Map);var Rt=[];if(Array.isArray(H))for(var te=0,De=H.length;te<De;te++){var rr=H[te];gt.has(rr)||(Rt.push(rr),gt.set(rr,!0))}return Rt}var Ne=function(){for(var H=[],gt=0;gt<arguments.length;gt++)H[gt]=arguments[gt];return Lt([].concat.apply([],H))},Xe=Ne,Dr=function(H,gt){for(var Rt=[],te={},De=0;De<H.length;De++){var rr=H[De],Er=rr[gt];if(!S(Er)){N(Er)||(Er=[Er]);for(var yn=0;yn<Er.length;yn++){var en=Er[yn];te[en]||(Rt.push(en),te[en]=!0)}}}return Rt};function ur(H){if(z(H))return H[0]}function Or(H){if(z(H)){var gt=H;return gt[gt.length-1]}}function ln(H,gt){return N(H)||fe(H)?H[0]===gt:!1}var fn=ln;function Xr(H,gt){return N(H)||fe(H)?H[H.length-1]===gt:!1}var Cn=Xr,Qr=function(H,gt){for(var Rt=0;Rt<H.length;Rt++)if(!gt(H[Rt],Rt))return!1;return!0},Gr=Qr,on=function(H,gt){for(var Rt=0;Rt<H.length;Rt++)if(gt(H[Rt],Rt))return!0;return!1},sr=on,lr=Object.prototype.hasOwnProperty;function Qe(H,gt){if(!gt||!N(H))return{};for(var Rt={},te=T(gt)?gt:function(yn){return yn[gt]},De,rr=0;rr<H.length;rr++){var Er=H[rr];De=te(Er),lr.call(Rt,De)?Rt[De].push(Er):Rt[De]=[Er]}return Rt}var $r=Qe;function an(H,gt){if(!gt)return{0:H};if(!T(gt)){var Rt=N(gt)?gt:gt.replace(/\s+/g,"").split("*");gt=function(te){for(var De="_",rr=0,Er=Rt.length;rr<Er;rr++)De+=te[Rt[rr]]&&te[Rt[rr]].toString();return De}}return $r(H,gt)}var bn=function(H,gt){if(!gt)return[H];var Rt=an(H,gt),te=[];for(var De in Rt)te.push(Rt[De]);return te};function nr(H,gt){return H["_wrap_"+gt]}var Tr=nr;function ar(H,gt){if(H["_wrap_"+gt])return H["_wrap_"+gt];var Rt=function(te){H[gt](te)};return H["_wrap_"+gt]=Rt,Rt}var vr=ar,Br={};function Fr(H){var gt=Br[H];if(!gt){for(var Rt=H.toString(16),te=Rt.length;te<6;te++)Rt="0"+Rt;gt="#"+Rt,Br[H]=gt}return gt}var kr=Fr;function Z(H){var gt=0,Rt=0,te=0,De=0;return N(H)?H.length===1?gt=Rt=te=De=H[0]:H.length===2?(gt=te=H[0],Rt=De=H[1]):H.length===3?(gt=H[0],Rt=De=H[1],te=H[2]):(gt=H[0],Rt=H[1],te=H[2],De=H[3]):gt=Rt=te=De=H,{r1:gt,r2:Rt,r3:te,r4:De}}var Te=Z,ne=function(H,gt,Rt){return H<gt?gt:H>Rt?Rt:H},it=ne,ot=function(H,gt){var Rt=gt.toString(),te=Rt.indexOf(".");if(te===-1)return Math.round(H);var De=Rt.substr(te+1).length;return De>20&&(De=20),parseFloat(H.toFixed(De))},B=ot,_=function(H){return g(H,"Number")},C=_,Y=function(H){return C(H)&&H%1!=0},pt=Y,_t=function(H){return C(H)&&H%2==0},Mt=_t,zt=Number.isInteger?Number.isInteger:function(H){return C(H)&&H%1==0},Le=zt,Me=function(H){return C(H)&&H<0},qe=Me,br=1e-5;function xr(H,gt,Rt){return Rt===void 0&&(Rt=br),Math.abs(H-gt)<Rt}var sn=function(H){return C(H)&&H%2!=0},Rn=sn,tr=function(H){return C(H)&&H>0},Sr=tr,jr=function(H,gt){if(!!N(H)){for(var Rt,te=-Infinity,De=0;De<H.length;De++){var rr=H[De],Er=T(gt)?gt(rr):rr[gt];Er>te&&(Rt=rr,te=Er)}return Rt}},Nn=function(H,gt){if(!!N(H)){for(var Rt,te=Infinity,De=0;De<H.length;De++){var rr=H[De],Er=T(gt)?gt(rr):rr[gt];Er<te&&(Rt=rr,te=Er)}return Rt}},gn=function(H,gt){return(H%gt+gt)%gt},ea=gn,ha=180/Math.PI,Zn=function(H){return ha*H},na=Zn,da=parseInt,Vn=Math.PI/180,se=function(H){return Vn*H},Ut=se,le=V,ze=function(H,gt){return H.hasOwnProperty(gt)},Ie=ze,We=Object.values?function(H){return Object.values(H)}:function(H){var gt=[];return V(H,function(Rt,te){T(H)&&te==="prototype"||gt.push(Rt)}),gt},_r=We,nn=function(H,gt){return I(_r(H),gt)},pn=function(H){return S(H)?"":H.toString()},Gn=function(H){return pn(H).toLowerCase()},jn=Gn,oa=function(H){var gt=pn(H);return gt.charAt(0).toLowerCase()+gt.substring(1)},va=oa;function _a(H,gt){return!H||!gt?H:H.replace(/\\?\{([^{}]+)\}/g,function(Rt,te){return Rt.charAt(0)==="\\"?Rt.slice(1):gt[te]===void 0?"":gt[te]})}var fi=_a,Ba=function(H){return pn(H).toUpperCase()},Wa=Ba,wa=function(H){var gt=pn(H);return gt.charAt(0).toUpperCase()+gt.substring(1)},vi=wa,ti={}.toString,Ia=function(H){return ti.call(H).replace(/^\[object /,"").replace(/]$/,"")},qi=Ia,gi=function(H){return g(H,"Arguments")},ji=gi,Ti=function(H){return g(H,"Boolean")},ri=Ti,No=function(H){return g(H,"Date")},Po=No,Ii=function(H){return g(H,"Error")},ho=Ii;function Ji(H){return C(H)&&isFinite(H)}var Xi=function(H){return H===null},Ri=Xi,Oi=Object.prototype,Io=function(H){var gt=H&&H.constructor,Rt=typeof gt=="function"&&gt.prototype||Oi;return H===Rt},to=Io,Yi=function(H){return g(H,"RegExp")},un=Yi,vo=function(H){return H===void 0},Fo=vo,Qa=function(H){return H instanceof Element||H instanceof HTMLDocument},ko=Qa;function go(H){var gt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Rt){return setTimeout(Rt,16)};return gt(H)}function Li(H){var gt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;gt(H)}function eo(H,gt){for(var Rt in gt)gt.hasOwnProperty(Rt)&&Rt!=="constructor"&&gt[Rt]!==void 0&&(H[Rt]=gt[Rt])}function de(H,gt,Rt,te){return gt&&eo(H,gt),Rt&&eo(H,Rt),te&&eo(H,te),H}var Ar=function(){for(var H=[],gt=0;gt<arguments.length;gt++)H[gt]=arguments[gt];for(var Rt=H[0],te=1;te<H.length;te++){var De=H[te];T(De)&&(De=De.prototype),de(Rt.prototype,De)}},qr=Ar,Bn=function(H){if(typeof H!="object"||H===null)return H;var gt;if(N(H)){gt=[];for(var Rt=0,te=H.length;Rt<te;Rt++)typeof H[Rt]=="object"&&H[Rt]!=null?gt[Rt]=Bn(H[Rt]):gt[Rt]=H[Rt]}else{gt={};for(var De in H)typeof H[De]=="object"&&H[De]!=null?gt[De]=Bn(H[De]):gt[De]=H[De]}return gt},Sa=Bn;function ci(H,gt,Rt){var te;return function(){var De=this,rr=arguments,Er=function(){te=null,Rt||H.apply(De,rr)},yn=Rt&&!te;clearTimeout(te),te=setTimeout(Er,gt),yn&&H.apply(De,rr)}}var _i=ci,li=function(H,gt){if(!T(H))throw new TypeError("Expected a function");var Rt=function(){for(var te=[],De=0;De<arguments.length;De++)te[De]=arguments[De];var rr=gt?gt.apply(this,te):te[0],Er=Rt.cache;if(Er.has(rr))return Er.get(rr);var yn=H.apply(this,te);return Er.set(rr,yn),yn};return Rt.cache=new Map,Rt},Ai=5;function Ea(H,gt,Rt,te){Rt=Rt||0,te=te||Ai;for(var De in gt)if(gt.hasOwnProperty(De)){var rr=gt[De];rr!==null&&nt(rr)?(nt(H[De])||(H[De]={}),Rt<te?Ea(H[De],rr,Rt+1,te):H[De]=gt[De]):N(rr)?(H[De]=[],H[De]=H[De].concat(rr)):rr!==void 0&&(H[De]=rr)}}var ro=function(H){for(var gt=[],Rt=1;Rt<arguments.length;Rt++)gt[Rt-1]=arguments[Rt];for(var te=0;te<gt.length;te+=1)Ea(H,gt[te]);return H},Yo=ro,Bi=function(H,gt,Rt,te){T(gt)||(Rt=gt,gt=H,H=function(){});var De=Object.create?function(Er,yn){return Object.create(Er,{constructor:{value:yn}})}:function(Er,yn){function en(){}en.prototype=Er;var hn=new en;return hn.constructor=yn,hn},rr=De(gt.prototype,H);return H.prototype=de(rr,H.prototype),H.superclass=De(gt.prototype,gt),de(rr,Rt),de(H,te),H},no=Bi,Oo=function(H,gt){if(!z(H))return-1;var Rt=Array.prototype.indexOf;if(Rt)return Rt.call(H,gt);for(var te=-1,De=0;De<H.length;De++)if(H[De]===gt){te=De;break}return te},Vi=Oo,po=Object.prototype.hasOwnProperty;function Ei(H){if(S(H))return!0;if(z(H))return!H.length;var gt=qi(H);if(gt==="Map"||gt==="Set")return!H.size;if(to(H))return!Object.keys(H).length;for(var Rt in H)if(po.call(H,Rt))return!1;return!0}var yo=Ei,Hi=function(H,gt){if(H===gt)return!0;if(!H||!gt||fe(H)||fe(gt))return!1;if(z(H)||z(gt)){if(H.length!==gt.length)return!1;for(var Rt=!0,te=0;te<H.length&&(Rt=Hi(H[te],gt[te]),!!Rt);te++);return Rt}if(rt(H)||rt(gt)){var De=Object.keys(H),rr=Object.keys(gt);if(De.length!==rr.length)return!1;for(var Rt=!0,te=0;te<De.length&&(Rt=Hi(H[De[te]],gt[De[te]]),!!Rt);te++);return Rt}return!1},ma=Hi,qa=function(H,gt,Rt){return T(Rt)?!!Rt(H,gt):ma(H,gt)},Mi=function(H,gt){if(!z(H))return H;for(var Rt=[],te=0;te<H.length;te++){var De=H[te];Rt.push(gt(De,te))}return Rt},pi=Mi,so=function(H){return H},Zi=function(H,gt){gt===void 0&&(gt=so);var Rt={};return m(H)&&!S(H)&&Object.keys(H).forEach(function(te){Rt[te]=gt(H[te],te)}),Rt},Fi=function(H,gt,Rt){for(var te=0,De=fe(gt)?gt.split("."):gt;H&&te<De.length;)H=H[De[te++]];return H===void 0||te<De.length?Rt:H},mo=function(H,gt,Rt){var te=H,De=fe(gt)?gt.split("."):gt;return De.forEach(function(rr,Er){Er<De.length-1?(m(te[rr])||(te[rr]=C(De[Er+1])?[]:{}),te=te[rr]):te[rr]=Rt}),H},uo=Object.prototype.hasOwnProperty,bo=function(H,gt){if(H===null||!nt(H))return{};var Rt={};return V(gt,function(te){uo.call(H,te)&&(Rt[te]=H[te])}),Rt},La=function(H,gt){return It(H,function(Rt,te,De){return gt.includes(De)||(Rt[De]=te),Rt},{})},ds=function(H,gt,Rt){var te,De,rr,Er,yn=0;Rt||(Rt={});var en=function(){yn=Rt.leading===!1?0:Date.now(),te=null,Er=H.apply(De,rr),te||(De=rr=null)},hn=function(){var Qn=Date.now();!yn&&Rt.leading===!1&&(yn=Qn);var fa=gt-(Qn-yn);return De=this,rr=arguments,fa<=0||fa>gt?(te&&(clearTimeout(te),te=null),yn=Qn,Er=H.apply(De,rr),te||(De=rr=null)):!te&&Rt.trailing!==!1&&(te=setTimeout(en,fa)),Er};return hn.cancel=function(){clearTimeout(te),yn=0,te=De=rr=null},hn},os=function(H){return z(H)?Array.prototype.slice.call(H):[]},Nt={},At=function(H){return H=H||"g",Nt[H]?Nt[H]+=1:Nt[H]=1,H+Nt[H]},ut=function(){},yt=function(H){return H};function Ct(H){return S(H)?0:z(H)?H.length:Object.keys(H).length}var ve=R(70655),ke,er=li(function(H,gt){gt===void 0&&(gt={});var Rt=gt.fontSize,te=gt.fontFamily,De=gt.fontWeight,rr=gt.fontStyle,Er=gt.fontVariant;return ke||(ke=document.createElement("canvas").getContext("2d")),ke.font=[rr,Er,De,Rt+"px",te].join(" "),ke.measureText(fe(H)?H:"").width},function(H,gt){return gt===void 0&&(gt={}),(0,ve.__spreadArrays)([H],_r(gt)).join("")}),yr=function(H,gt,Rt,te){te===void 0&&(te="...");var De=16,rr=er(te,Rt),Er=fe(H)?H:pn(H),yn=gt,en=[],hn,Qn;if(er(H,Rt)<=gt)return H;for(;hn=Er.substr(0,De),Qn=er(hn,Rt),!(Qn+rr>yn&&Qn>yn);)if(en.push(hn),yn-=Qn,Er=Er.substr(De),!Er)return en.join("");for(;hn=Er.substr(0,1),Qn=er(hn,Rt),!(Qn+rr>yn);)if(en.push(hn),yn-=Qn,Er=Er.substr(1),!Er)return en.join("");return""+en.join("")+te},Pt=function(){function H(){this.map={}}return H.prototype.has=function(gt){return this.map[gt]!==void 0},H.prototype.get=function(gt,Rt){var te=this.map[gt];return te===void 0?Rt:te},H.prototype.set=function(gt,Rt){this.map[gt]=Rt},H.prototype.clear=function(){this.map={}},H.prototype.delete=function(gt){delete this.map[gt]},H.prototype.size=function(){return Object.keys(this.map).length},H}(),Tt=Pt},87757:function(Mr,G,R){var L=R(59591)();Mr.exports=L;try{regeneratorRuntime=L}catch(z){typeof globalThis=="object"?globalThis.regeneratorRuntime=L:Function("r","regeneratorRuntime = r")(L)}},90314:function(){},94635:function(){},81355:function(){},50596:function(){},76867:function(Mr,G,R){"use strict";R.r(G),R.d(G,{forceCenter:function(){return L},forceCollide:function(){return b},forceLink:function(){return y},forceManyBody:function(){return Bt},forceRadial:function(){return re},forceSimulation:function(){return ye},forceX:function(){return Ee},forceY:function(){return It}});function L(Et,Wt){var fe,Fe=1;Et==null&&(Et=0),Wt==null&&(Wt=0);function $e(){var Lt,Ne=fe.length,Xe,Dr=0,ur=0;for(Lt=0;Lt<Ne;++Lt)Xe=fe[Lt],Dr+=Xe.x,ur+=Xe.y;for(Dr=(Dr/Ne-Et)*Fe,ur=(ur/Ne-Wt)*Fe,Lt=0;Lt<Ne;++Lt)Xe=fe[Lt],Xe.x-=Dr,Xe.y-=ur}return $e.initialize=function(Lt){fe=Lt},$e.x=function(Lt){return arguments.length?(Et=+Lt,$e):Et},$e.y=function(Lt){return arguments.length?(Wt=+Lt,$e):Wt},$e.strength=function(Lt){return arguments.length?(Fe=+Lt,$e):Fe},$e}var z=R(28833);function F(Et){return function(){return Et}}function I(Et){return(Et()-.5)*1e-6}function k(Et){return Et.x+Et.vx}function D(Et){return Et.y+Et.vy}function b(Et){var Wt,fe,Fe,$e=1,Lt=1;typeof Et!="function"&&(Et=F(Et==null?1:+Et));function Ne(){for(var ur,Or=Wt.length,ln,fn,Xr,Cn,Qr,Gr,on=0;on<Lt;++on)for(ln=(0,z.Z)(Wt,k,D).visitAfter(Xe),ur=0;ur<Or;++ur)fn=Wt[ur],Qr=fe[fn.index],Gr=Qr*Qr,Xr=fn.x+fn.vx,Cn=fn.y+fn.vy,ln.visit(sr);function sr(lr,Qe,$r,an,bn){var nr=lr.data,Tr=lr.r,ar=Qr+Tr;if(nr){if(nr.index>fn.index){var vr=Xr-nr.x-nr.vx,Br=Cn-nr.y-nr.vy,Fr=vr*vr+Br*Br;Fr<ar*ar&&(vr===0&&(vr=I(Fe),Fr+=vr*vr),Br===0&&(Br=I(Fe),Fr+=Br*Br),Fr=(ar-(Fr=Math.sqrt(Fr)))/Fr*$e,fn.vx+=(vr*=Fr)*(ar=(Tr*=Tr)/(Gr+Tr)),fn.vy+=(Br*=Fr)*ar,nr.vx-=vr*(ar=1-ar),nr.vy-=Br*ar)}return}return Qe>Xr+ar||an<Xr-ar||$r>Cn+ar||bn<Cn-ar}}function Xe(ur){if(ur.data)return ur.r=fe[ur.data.index];for(var Or=ur.r=0;Or<4;++Or)ur[Or]&&ur[Or].r>ur.r&&(ur.r=ur[Or].r)}function Dr(){if(!!Wt){var ur,Or=Wt.length,ln;for(fe=new Array(Or),ur=0;ur<Or;++ur)ln=Wt[ur],fe[ln.index]=+Et(ln,ur,Wt)}}return Ne.initialize=function(ur,Or){Wt=ur,Fe=Or,Dr()},Ne.iterations=function(ur){return arguments.length?(Lt=+ur,Ne):Lt},Ne.strength=function(ur){return arguments.length?($e=+ur,Ne):$e},Ne.radius=function(ur){return arguments.length?(Et=typeof ur=="function"?ur:F(+ur),Dr(),Ne):Et},Ne}function E(Et){return Et.index}function p(Et,Wt){var fe=Et.get(Wt);if(!fe)throw new Error("node not found: "+Wt);return fe}function y(Et){var Wt=E,fe=ln,Fe,$e=F(30),Lt,Ne,Xe,Dr,ur,Or=1;Et==null&&(Et=[]);function ln(Gr){return 1/Math.min(Xe[Gr.source.index],Xe[Gr.target.index])}function fn(Gr){for(var on=0,sr=Et.length;on<Or;++on)for(var lr=0,Qe,$r,an,bn,nr,Tr,ar;lr<sr;++lr)Qe=Et[lr],$r=Qe.source,an=Qe.target,bn=an.x+an.vx-$r.x-$r.vx||I(ur),nr=an.y+an.vy-$r.y-$r.vy||I(ur),Tr=Math.sqrt(bn*bn+nr*nr),Tr=(Tr-Lt[lr])/Tr*Gr*Fe[lr],bn*=Tr,nr*=Tr,an.vx-=bn*(ar=Dr[lr]),an.vy-=nr*ar,$r.vx+=bn*(ar=1-ar),$r.vy+=nr*ar}function Xr(){if(!!Ne){var Gr,on=Ne.length,sr=Et.length,lr=new Map(Ne.map(function($r,an){return[Wt($r,an,Ne),$r]})),Qe;for(Gr=0,Xe=new Array(on);Gr<sr;++Gr)Qe=Et[Gr],Qe.index=Gr,typeof Qe.source!="object"&&(Qe.source=p(lr,Qe.source)),typeof Qe.target!="object"&&(Qe.target=p(lr,Qe.target)),Xe[Qe.source.index]=(Xe[Qe.source.index]||0)+1,Xe[Qe.target.index]=(Xe[Qe.target.index]||0)+1;for(Gr=0,Dr=new Array(sr);Gr<sr;++Gr)Qe=Et[Gr],Dr[Gr]=Xe[Qe.source.index]/(Xe[Qe.source.index]+Xe[Qe.target.index]);Fe=new Array(sr),Cn(),Lt=new Array(sr),Qr()}}function Cn(){if(!!Ne)for(var Gr=0,on=Et.length;Gr<on;++Gr)Fe[Gr]=+fe(Et[Gr],Gr,Et)}function Qr(){if(!!Ne)for(var Gr=0,on=Et.length;Gr<on;++Gr)Lt[Gr]=+$e(Et[Gr],Gr,Et)}return fn.initialize=function(Gr,on){Ne=Gr,ur=on,Xr()},fn.links=function(Gr){return arguments.length?(Et=Gr,Xr(),fn):Et},fn.id=function(Gr){return arguments.length?(Wt=Gr,fn):Wt},fn.iterations=function(Gr){return arguments.length?(Or=+Gr,fn):Or},fn.strength=function(Gr){return arguments.length?(fe=typeof Gr=="function"?Gr:F(+Gr),Cn(),fn):fe},fn.distance=function(Gr){return arguments.length?($e=typeof Gr=="function"?Gr:F(+Gr),Qr(),fn):$e},fn}var g={value:function(){}};function T(){for(var Et=0,Wt=arguments.length,fe={},Fe;Et<Wt;++Et){if(!(Fe=arguments[Et]+"")||Fe in fe||/[\s.]/.test(Fe))throw new Error("illegal type: "+Fe);fe[Fe]=[]}return new x(fe)}function x(Et){this._=Et}function S(Et,Wt){return Et.trim().split(/^|\s+/).map(function(fe){var Fe="",$e=fe.indexOf(".");if($e>=0&&(Fe=fe.slice($e+1),fe=fe.slice(0,$e)),fe&&!Wt.hasOwnProperty(fe))throw new Error("unknown type: "+fe);return{type:fe,name:Fe}})}x.prototype=T.prototype={constructor:x,on:function(Wt,fe){var Fe=this._,$e=S(Wt+"",Fe),Lt,Ne=-1,Xe=$e.length;if(arguments.length<2){for(;++Ne<Xe;)if((Lt=(Wt=$e[Ne]).type)&&(Lt=N(Fe[Lt],Wt.name)))return Lt;return}if(fe!=null&&typeof fe!="function")throw new Error("invalid callback: "+fe);for(;++Ne<Xe;)if(Lt=(Wt=$e[Ne]).type)Fe[Lt]=m(Fe[Lt],Wt.name,fe);else if(fe==null)for(Lt in Fe)Fe[Lt]=m(Fe[Lt],Wt.name,null);return this},copy:function(){var Wt={},fe=this._;for(var Fe in fe)Wt[Fe]=fe[Fe].slice();return new x(Wt)},call:function(Wt,fe){if((Lt=arguments.length-2)>0)for(var Fe=new Array(Lt),$e=0,Lt,Ne;$e<Lt;++$e)Fe[$e]=arguments[$e+2];if(!this._.hasOwnProperty(Wt))throw new Error("unknown type: "+Wt);for(Ne=this._[Wt],$e=0,Lt=Ne.length;$e<Lt;++$e)Ne[$e].value.apply(fe,Fe)},apply:function(Wt,fe,Fe){if(!this._.hasOwnProperty(Wt))throw new Error("unknown type: "+Wt);for(var $e=this._[Wt],Lt=0,Ne=$e.length;Lt<Ne;++Lt)$e[Lt].value.apply(fe,Fe)}};function N(Et,Wt){for(var fe=0,Fe=Et.length,$e;fe<Fe;++fe)if(($e=Et[fe]).name===Wt)return $e.value}function m(Et,Wt,fe){for(var Fe=0,$e=Et.length;Fe<$e;++Fe)if(Et[Fe].name===Wt){Et[Fe]=g,Et=Et.slice(0,Fe).concat(Et.slice(Fe+1));break}return fe!=null&&Et.push({name:Wt,value:fe}),Et}var d=T,V=0,Q=0,j=0,X=1e3,K,J,rt=0,tt=0,nt=0,lt=typeof performance=="object"&&performance.now?performance:Date,xt=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Et){setTimeout(Et,17)};function jt(){return tt||(xt(Dt),tt=lt.now()+nt)}function Dt(){tt=0}function Zt(){this._call=this._time=this._next=null}Zt.prototype=Vt.prototype={constructor:Zt,restart:function(Et,Wt,fe){if(typeof Et!="function")throw new TypeError("callback is not a function");fe=(fe==null?jt():+fe)+(Wt==null?0:+Wt),!this._next&&J!==this&&(J?J._next=this:K=this,J=this),this._call=Et,this._time=fe,Re()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Re())}};function Vt(Et,Wt,fe){var Fe=new Zt;return Fe.restart(Et,Wt,fe),Fe}function ue(){jt(),++V;for(var Et=K,Wt;Et;)(Wt=tt-Et._time)>=0&&Et._call.call(null,Wt),Et=Et._next;--V}function dt(){tt=(rt=lt.now())+nt,V=Q=0;try{ue()}finally{V=0,ee(),tt=0}}function Ot(){var Et=lt.now(),Wt=Et-rt;Wt>X&&(nt-=Wt,rt=Et)}function ee(){for(var Et,Wt=K,fe,Fe=Infinity;Wt;)Wt._call?(Fe>Wt._time&&(Fe=Wt._time),Et=Wt,Wt=Wt._next):(fe=Wt._next,Wt._next=null,Wt=Et?Et._next=fe:K=fe);J=Et,Re(Fe)}function Re(Et){if(!V){Q&&(Q=clearTimeout(Q));var Wt=Et-tt;Wt>24?(Et<Infinity&&(Q=setTimeout(dt,Et-lt.now()-nt)),j&&(j=clearInterval(j))):(j||(rt=lt.now(),j=setInterval(Ot,X)),V=1,xt(dt))}}var me=1664525,Ae=1013904223,Be=4294967296;function Ke(){var Et=1;return function(){return(Et=(me*Et+Ae)%Be)/Be}}function $t(Et){return Et.x}function ce(Et){return Et.y}var we=10,Pe=Math.PI*(3-Math.sqrt(5));function ye(Et){var Wt,fe=1,Fe=.001,$e=1-Math.pow(Fe,1/300),Lt=0,Ne=.6,Xe=new Map,Dr=Vt(ln),ur=d("tick","end"),Or=Ke();Et==null&&(Et=[]);function ln(){fn(),ur.call("tick",Wt),fe<Fe&&(Dr.stop(),ur.call("end",Wt))}function fn(Qr){var Gr,on=Et.length,sr;Qr===void 0&&(Qr=1);for(var lr=0;lr<Qr;++lr)for(fe+=(Lt-fe)*$e,Xe.forEach(function(Qe){Qe(fe)}),Gr=0;Gr<on;++Gr)sr=Et[Gr],sr.fx==null?sr.x+=sr.vx*=Ne:(sr.x=sr.fx,sr.vx=0),sr.fy==null?sr.y+=sr.vy*=Ne:(sr.y=sr.fy,sr.vy=0);return Wt}function Xr(){for(var Qr=0,Gr=Et.length,on;Qr<Gr;++Qr){if(on=Et[Qr],on.index=Qr,on.fx!=null&&(on.x=on.fx),on.fy!=null&&(on.y=on.fy),isNaN(on.x)||isNaN(on.y)){var sr=we*Math.sqrt(.5+Qr),lr=Qr*Pe;on.x=sr*Math.cos(lr),on.y=sr*Math.sin(lr)}(isNaN(on.vx)||isNaN(on.vy))&&(on.vx=on.vy=0)}}function Cn(Qr){return Qr.initialize&&Qr.initialize(Et,Or),Qr}return Xr(),Wt={tick:fn,restart:function(){return Dr.restart(ln),Wt},stop:function(){return Dr.stop(),Wt},nodes:function(Gr){return arguments.length?(Et=Gr,Xr(),Xe.forEach(Cn),Wt):Et},alpha:function(Gr){return arguments.length?(fe=+Gr,Wt):fe},alphaMin:function(Gr){return arguments.length?(Fe=+Gr,Wt):Fe},alphaDecay:function(Gr){return arguments.length?($e=+Gr,Wt):+$e},alphaTarget:function(Gr){return arguments.length?(Lt=+Gr,Wt):Lt},velocityDecay:function(Gr){return arguments.length?(Ne=1-Gr,Wt):1-Ne},randomSource:function(Gr){return arguments.length?(Or=Gr,Xe.forEach(Cn),Wt):Or},force:function(Gr,on){return arguments.length>1?(on==null?Xe.delete(Gr):Xe.set(Gr,Cn(on)),Wt):Xe.get(Gr)},find:function(Gr,on,sr){var lr=0,Qe=Et.length,$r,an,bn,nr,Tr;for(sr==null?sr=Infinity:sr*=sr,lr=0;lr<Qe;++lr)nr=Et[lr],$r=Gr-nr.x,an=on-nr.y,bn=$r*$r+an*an,bn<sr&&(Tr=nr,sr=bn);return Tr},on:function(Gr,on){return arguments.length>1?(ur.on(Gr,on),Wt):ur.on(Gr)}}}function Bt(){var Et,Wt,fe,Fe,$e=F(-30),Lt,Ne=1,Xe=Infinity,Dr=.81;function ur(Xr){var Cn,Qr=Et.length,Gr=(0,z.Z)(Et,$t,ce).visitAfter(ln);for(Fe=Xr,Cn=0;Cn<Qr;++Cn)Wt=Et[Cn],Gr.visit(fn)}function Or(){if(!!Et){var Xr,Cn=Et.length,Qr;for(Lt=new Array(Cn),Xr=0;Xr<Cn;++Xr)Qr=Et[Xr],Lt[Qr.index]=+$e(Qr,Xr,Et)}}function ln(Xr){var Cn=0,Qr,Gr,on=0,sr,lr,Qe;if(Xr.length){for(sr=lr=Qe=0;Qe<4;++Qe)(Qr=Xr[Qe])&&(Gr=Math.abs(Qr.value))&&(Cn+=Qr.value,on+=Gr,sr+=Gr*Qr.x,lr+=Gr*Qr.y);Xr.x=sr/on,Xr.y=lr/on}else{Qr=Xr,Qr.x=Qr.data.x,Qr.y=Qr.data.y;do Cn+=Lt[Qr.data.index];while(Qr=Qr.next)}Xr.value=Cn}function fn(Xr,Cn,Qr,Gr){if(!Xr.value)return!0;var on=Xr.x-Wt.x,sr=Xr.y-Wt.y,lr=Gr-Cn,Qe=on*on+sr*sr;if(lr*lr/Dr<Qe)return Qe<Xe&&(on===0&&(on=I(fe),Qe+=on*on),sr===0&&(sr=I(fe),Qe+=sr*sr),Qe<Ne&&(Qe=Math.sqrt(Ne*Qe)),Wt.vx+=on*Xr.value*Fe/Qe,Wt.vy+=sr*Xr.value*Fe/Qe),!0;if(Xr.length||Qe>=Xe)return;(Xr.data!==Wt||Xr.next)&&(on===0&&(on=I(fe),Qe+=on*on),sr===0&&(sr=I(fe),Qe+=sr*sr),Qe<Ne&&(Qe=Math.sqrt(Ne*Qe)));do Xr.data!==Wt&&(lr=Lt[Xr.data.index]*Fe/Qe,Wt.vx+=on*lr,Wt.vy+=sr*lr);while(Xr=Xr.next)}return ur.initialize=function(Xr,Cn){Et=Xr,fe=Cn,Or()},ur.strength=function(Xr){return arguments.length?($e=typeof Xr=="function"?Xr:F(+Xr),Or(),ur):$e},ur.distanceMin=function(Xr){return arguments.length?(Ne=Xr*Xr,ur):Math.sqrt(Ne)},ur.distanceMax=function(Xr){return arguments.length?(Xe=Xr*Xr,ur):Math.sqrt(Xe)},ur.theta=function(Xr){return arguments.length?(Dr=Xr*Xr,ur):Math.sqrt(Dr)},ur}function re(Et,Wt,fe){var Fe,$e=F(.1),Lt,Ne;typeof Et!="function"&&(Et=F(+Et)),Wt==null&&(Wt=0),fe==null&&(fe=0);function Xe(ur){for(var Or=0,ln=Fe.length;Or<ln;++Or){var fn=Fe[Or],Xr=fn.x-Wt||1e-6,Cn=fn.y-fe||1e-6,Qr=Math.sqrt(Xr*Xr+Cn*Cn),Gr=(Ne[Or]-Qr)*Lt[Or]*ur/Qr;fn.vx+=Xr*Gr,fn.vy+=Cn*Gr}}function Dr(){if(!!Fe){var ur,Or=Fe.length;for(Lt=new Array(Or),Ne=new Array(Or),ur=0;ur<Or;++ur)Ne[ur]=+Et(Fe[ur],ur,Fe),Lt[ur]=isNaN(Ne[ur])?0:+$e(Fe[ur],ur,Fe)}}return Xe.initialize=function(ur){Fe=ur,Dr()},Xe.strength=function(ur){return arguments.length?($e=typeof ur=="function"?ur:F(+ur),Dr(),Xe):$e},Xe.radius=function(ur){return arguments.length?(Et=typeof ur=="function"?ur:F(+ur),Dr(),Xe):Et},Xe.x=function(ur){return arguments.length?(Wt=+ur,Xe):Wt},Xe.y=function(ur){return arguments.length?(fe=+ur,Xe):fe},Xe}function Ee(Et){var Wt=F(.1),fe,Fe,$e;typeof Et!="function"&&(Et=F(Et==null?0:+Et));function Lt(Xe){for(var Dr=0,ur=fe.length,Or;Dr<ur;++Dr)Or=fe[Dr],Or.vx+=($e[Dr]-Or.x)*Fe[Dr]*Xe}function Ne(){if(!!fe){var Xe,Dr=fe.length;for(Fe=new Array(Dr),$e=new Array(Dr),Xe=0;Xe<Dr;++Xe)Fe[Xe]=isNaN($e[Xe]=+Et(fe[Xe],Xe,fe))?0:+Wt(fe[Xe],Xe,fe)}}return Lt.initialize=function(Xe){fe=Xe,Ne()},Lt.strength=function(Xe){return arguments.length?(Wt=typeof Xe=="function"?Xe:F(+Xe),Ne(),Lt):Wt},Lt.x=function(Xe){return arguments.length?(Et=typeof Xe=="function"?Xe:F(+Xe),Ne(),Lt):Et},Lt}function It(Et){var Wt=F(.1),fe,Fe,$e;typeof Et!="function"&&(Et=F(Et==null?0:+Et));function Lt(Xe){for(var Dr=0,ur=fe.length,Or;Dr<ur;++Dr)Or=fe[Dr],Or.vy+=($e[Dr]-Or.y)*Fe[Dr]*Xe}function Ne(){if(!!fe){var Xe,Dr=fe.length;for(Fe=new Array(Dr),$e=new Array(Dr),Xe=0;Xe<Dr;++Xe)Fe[Xe]=isNaN($e[Xe]=+Et(fe[Xe],Xe,fe))?0:+Wt(fe[Xe],Xe,fe)}}return Lt.initialize=function(Xe){fe=Xe,Ne()},Lt.strength=function(Xe){return arguments.length?(Wt=typeof Xe=="function"?Xe:F(+Xe),Ne(),Lt):Wt},Lt.y=function(Xe){return arguments.length?(Et=typeof Xe=="function"?Xe:F(+Xe),Ne(),Lt):Et},Lt}},52710:function(Mr,G,R){"use strict";R.r(G),R.d(G,{AbstractMatrix:function(){return Bt},CHO:function(){return Te},CholeskyDecomposition:function(){return Te},EVD:function(){return ar},EigenvalueDecomposition:function(){return ar},LU:function(){return Xr},LuDecomposition:function(){return Xr},Matrix:function(){return It},MatrixColumnSelectionView:function(){return fe},MatrixColumnView:function(){return Wt},MatrixFlipColumnView:function(){return Fe},MatrixFlipRowView:function(){return $e},MatrixRowSelectionView:function(){return Ne},MatrixRowView:function(){return Lt},MatrixSelectionView:function(){return Xe},MatrixSubView:function(){return Dr},MatrixTransposeView:function(){return ur},NIPALS:function(){return ne},Nipals:function(){return ne},QR:function(){return Qr},QrDecomposition:function(){return Qr},SVD:function(){return Gr},SingularValueDecomposition:function(){return Gr},WrapperMatrix1D:function(){return Or},WrapperMatrix2D:function(){return ln},correlation:function(){return Tr},covariance:function(){return nr},default:function(){return It},determinant:function(){return lr},inverse:function(){return on},linearDependencies:function(){return an},pseudoInverse:function(){return bn},solve:function(){return sr},wrap:function(){return fn}});var L=R(79320),z=R(81306),F=R(59206),I=R(69610),k=R(54941);const D=Object.prototype.toString;function b(it){return D.call(it).endsWith("Array]")}function E(it){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!b(it))throw new TypeError("input must be an array");if(it.length===0)throw new TypeError("input must not be empty");var B=ot.fromIndex,_=B===void 0?0:B,C=ot.toIndex,Y=C===void 0?it.length:C;if(_<0||_>=it.length||!Number.isInteger(_))throw new Error("fromIndex must be a positive integer smaller than length");if(Y<=_||Y>it.length||!Number.isInteger(Y))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var pt=it[_],_t=_+1;_t<Y;_t++)it[_t]>pt&&(pt=it[_t]);return pt}function p(it){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!b(it))throw new TypeError("input must be an array");if(it.length===0)throw new TypeError("input must not be empty");var B=ot.fromIndex,_=B===void 0?0:B,C=ot.toIndex,Y=C===void 0?it.length:C;if(_<0||_>=it.length||!Number.isInteger(_))throw new Error("fromIndex must be a positive integer smaller than length");if(Y<=_||Y>it.length||!Number.isInteger(Y))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var pt=it[_],_t=_+1;_t<Y;_t++)it[_t]<pt&&(pt=it[_t]);return pt}function y(it){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b(it)){if(it.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var B;if(ot.output!==void 0){if(!b(ot.output))throw new TypeError("output option must be an array if specified");B=ot.output}else B=new Array(it.length);var _=p(it),C=E(it);if(_===C)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var Y=ot.min,pt=Y===void 0?ot.autoMinMax?_:0:Y,_t=ot.max,Mt=_t===void 0?ot.autoMinMax?C:1:_t;if(pt>=Mt)throw new RangeError("min option must be smaller than max option");for(var zt=(Mt-pt)/(C-_),Le=0;Le<it.length;Le++)B[Le]=(it[Le]-_)*zt+pt;return B}var g=" ".repeat(2),T=" ".repeat(4);function x(){return S(this)}function S(it){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=ot.maxRows,_=B===void 0?15:B,C=ot.maxColumns,Y=C===void 0?10:C,pt=ot.maxNumSize,_t=pt===void 0?8:pt,Mt=ot.padMinus,zt=Mt===void 0?"auto":Mt;return"".concat(it.constructor.name,` {
`).concat(g,`[
`).concat(T).concat(N(it,_,Y,_t,zt),`
`).concat(g,`]
`).concat(g,"rows: ").concat(it.rows,`
`).concat(g,"columns: ").concat(it.columns,`
}`)}function N(it,ot,B,_,C){var Y=it.rows,pt=it.columns,_t=Math.min(Y,ot),Mt=Math.min(pt,B),zt=[];if(C==="auto"){C=!1;t:for(var Le=0;Le<_t;Le++)for(var Me=0;Me<Mt;Me++)if(it.get(Le,Me)<0){C=!0;break t}}for(var qe=0;qe<_t;qe++){for(var br=[],xr=0;xr<Mt;xr++)br.push(m(it.get(qe,xr),_,C));zt.push("".concat(br.join(" ")))}return Mt!==pt&&(zt[zt.length-1]+=" ... ".concat(pt-B," more columns")),_t!==Y&&zt.push("... ".concat(Y-ot," more rows")),zt.join(`
`.concat(T))}function m(it,ot,B){return(it>=0&&B?" ".concat(d(it,ot-1)):d(it,ot)).padEnd(ot)}function d(it,ot){var B=it.toString();if(B.length<=ot)return B;var _=it.toFixed(ot);if(_.length>ot&&(_=it.toFixed(Math.max(0,ot-(_.length-ot)))),_.length<=ot&&!_.startsWith("0.000")&&!_.startsWith("-0.000"))return _;var C=it.toExponential(ot);return C.length>ot&&(C=it.toExponential(Math.max(0,ot-(C.length-ot)))),C.slice(0)}function V(it,ot){it.prototype.add=function(_){return typeof _=="number"?this.addS(_):this.addM(_)},it.prototype.addS=function(_){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)+_);return this},it.prototype.addM=function(_){if(_=ot.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)+_.get(C,Y));return this},it.add=function(_,C){var Y=new ot(_);return Y.add(C)},it.prototype.sub=function(_){return typeof _=="number"?this.subS(_):this.subM(_)},it.prototype.subS=function(_){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)-_);return this},it.prototype.subM=function(_){if(_=ot.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)-_.get(C,Y));return this},it.sub=function(_,C){var Y=new ot(_);return Y.sub(C)},it.prototype.subtract=it.prototype.sub,it.prototype.subtractS=it.prototype.subS,it.prototype.subtractM=it.prototype.subM,it.subtract=it.sub,it.prototype.mul=function(_){return typeof _=="number"?this.mulS(_):this.mulM(_)},it.prototype.mulS=function(_){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)*_);return this},it.prototype.mulM=function(_){if(_=ot.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)*_.get(C,Y));return this},it.mul=function(_,C){var Y=new ot(_);return Y.mul(C)},it.prototype.multiply=it.prototype.mul,it.prototype.multiplyS=it.prototype.mulS,it.prototype.multiplyM=it.prototype.mulM,it.multiply=it.mul,it.prototype.div=function(_){return typeof _=="number"?this.divS(_):this.divM(_)},it.prototype.divS=function(_){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)/_);return this},it.prototype.divM=function(_){if(_=ot.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)/_.get(C,Y));return this},it.div=function(_,C){var Y=new ot(_);return Y.div(C)},it.prototype.divide=it.prototype.div,it.prototype.divideS=it.prototype.divS,it.prototype.divideM=it.prototype.divM,it.divide=it.div,it.prototype.mod=function(_){return typeof _=="number"?this.modS(_):this.modM(_)},it.prototype.modS=function(_){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)%_);return this},it.prototype.modM=function(_){if(_=ot.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)%_.get(C,Y));return this},it.mod=function(_,C){var Y=new ot(_);return Y.mod(C)},it.prototype.modulus=it.prototype.mod,it.prototype.modulusS=it.prototype.modS,it.prototype.modulusM=it.prototype.modM,it.modulus=it.mod,it.prototype.and=function(_){return typeof _=="number"?this.andS(_):this.andM(_)},it.prototype.andS=function(_){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)&_);return this},it.prototype.andM=function(_){if(_=ot.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)&_.get(C,Y));return this},it.and=function(_,C){var Y=new ot(_);return Y.and(C)},it.prototype.or=function(_){return typeof _=="number"?this.orS(_):this.orM(_)},it.prototype.orS=function(_){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)|_);return this},it.prototype.orM=function(_){if(_=ot.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)|_.get(C,Y));return this},it.or=function(_,C){var Y=new ot(_);return Y.or(C)},it.prototype.xor=function(_){return typeof _=="number"?this.xorS(_):this.xorM(_)},it.prototype.xorS=function(_){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)^_);return this},it.prototype.xorM=function(_){if(_=ot.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)^_.get(C,Y));return this},it.xor=function(_,C){var Y=new ot(_);return Y.xor(C)},it.prototype.leftShift=function(_){return typeof _=="number"?this.leftShiftS(_):this.leftShiftM(_)},it.prototype.leftShiftS=function(_){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)<<_);return this},it.prototype.leftShiftM=function(_){if(_=ot.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)<<_.get(C,Y));return this},it.leftShift=function(_,C){var Y=new ot(_);return Y.leftShift(C)},it.prototype.signPropagatingRightShift=function(_){return typeof _=="number"?this.signPropagatingRightShiftS(_):this.signPropagatingRightShiftM(_)},it.prototype.signPropagatingRightShiftS=function(_){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)>>_);return this},it.prototype.signPropagatingRightShiftM=function(_){if(_=ot.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)>>_.get(C,Y));return this},it.signPropagatingRightShift=function(_,C){var Y=new ot(_);return Y.signPropagatingRightShift(C)},it.prototype.rightShift=function(_){return typeof _=="number"?this.rightShiftS(_):this.rightShiftM(_)},it.prototype.rightShiftS=function(_){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)>>>_);return this},it.prototype.rightShiftM=function(_){if(_=ot.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,this.get(C,Y)>>>_.get(C,Y));return this},it.rightShift=function(_,C){var Y=new ot(_);return Y.rightShift(C)},it.prototype.zeroFillRightShift=it.prototype.rightShift,it.prototype.zeroFillRightShiftS=it.prototype.rightShiftS,it.prototype.zeroFillRightShiftM=it.prototype.rightShiftM,it.zeroFillRightShift=it.rightShift,it.prototype.not=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,~this.get(_,C));return this},it.not=function(_){var C=new ot(_);return C.not()},it.prototype.abs=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.abs(this.get(_,C)));return this},it.abs=function(_){var C=new ot(_);return C.abs()},it.prototype.acos=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.acos(this.get(_,C)));return this},it.acos=function(_){var C=new ot(_);return C.acos()},it.prototype.acosh=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.acosh(this.get(_,C)));return this},it.acosh=function(_){var C=new ot(_);return C.acosh()},it.prototype.asin=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.asin(this.get(_,C)));return this},it.asin=function(_){var C=new ot(_);return C.asin()},it.prototype.asinh=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.asinh(this.get(_,C)));return this},it.asinh=function(_){var C=new ot(_);return C.asinh()},it.prototype.atan=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.atan(this.get(_,C)));return this},it.atan=function(_){var C=new ot(_);return C.atan()},it.prototype.atanh=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.atanh(this.get(_,C)));return this},it.atanh=function(_){var C=new ot(_);return C.atanh()},it.prototype.cbrt=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.cbrt(this.get(_,C)));return this},it.cbrt=function(_){var C=new ot(_);return C.cbrt()},it.prototype.ceil=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.ceil(this.get(_,C)));return this},it.ceil=function(_){var C=new ot(_);return C.ceil()},it.prototype.clz32=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.clz32(this.get(_,C)));return this},it.clz32=function(_){var C=new ot(_);return C.clz32()},it.prototype.cos=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.cos(this.get(_,C)));return this},it.cos=function(_){var C=new ot(_);return C.cos()},it.prototype.cosh=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.cosh(this.get(_,C)));return this},it.cosh=function(_){var C=new ot(_);return C.cosh()},it.prototype.exp=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.exp(this.get(_,C)));return this},it.exp=function(_){var C=new ot(_);return C.exp()},it.prototype.expm1=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.expm1(this.get(_,C)));return this},it.expm1=function(_){var C=new ot(_);return C.expm1()},it.prototype.floor=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.floor(this.get(_,C)));return this},it.floor=function(_){var C=new ot(_);return C.floor()},it.prototype.fround=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.fround(this.get(_,C)));return this},it.fround=function(_){var C=new ot(_);return C.fround()},it.prototype.log=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.log(this.get(_,C)));return this},it.log=function(_){var C=new ot(_);return C.log()},it.prototype.log1p=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.log1p(this.get(_,C)));return this},it.log1p=function(_){var C=new ot(_);return C.log1p()},it.prototype.log10=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.log10(this.get(_,C)));return this},it.log10=function(_){var C=new ot(_);return C.log10()},it.prototype.log2=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.log2(this.get(_,C)));return this},it.log2=function(_){var C=new ot(_);return C.log2()},it.prototype.round=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.round(this.get(_,C)));return this},it.round=function(_){var C=new ot(_);return C.round()},it.prototype.sign=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.sign(this.get(_,C)));return this},it.sign=function(_){var C=new ot(_);return C.sign()},it.prototype.sin=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.sin(this.get(_,C)));return this},it.sin=function(_){var C=new ot(_);return C.sin()},it.prototype.sinh=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.sinh(this.get(_,C)));return this},it.sinh=function(_){var C=new ot(_);return C.sinh()},it.prototype.sqrt=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.sqrt(this.get(_,C)));return this},it.sqrt=function(_){var C=new ot(_);return C.sqrt()},it.prototype.tan=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.tan(this.get(_,C)));return this},it.tan=function(_){var C=new ot(_);return C.tan()},it.prototype.tanh=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.tanh(this.get(_,C)));return this},it.tanh=function(_){var C=new ot(_);return C.tanh()},it.prototype.trunc=function(){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,Math.trunc(this.get(_,C)));return this},it.trunc=function(_){var C=new ot(_);return C.trunc()},it.pow=function(_,C){var Y=new ot(_);return Y.pow(C)},it.prototype.pow=function(_){return typeof _=="number"?this.powS(_):this.powM(_)},it.prototype.powS=function(_){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,Math.pow(this.get(C,Y),_));return this},it.prototype.powM=function(_){if(_=ot.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.set(C,Y,Math.pow(this.get(C,Y),_.get(C,Y)));return this}}function Q(it,ot,B){var _=B?it.rows:it.rows-1;if(ot<0||ot>_)throw new RangeError("Row index out of range")}function j(it,ot,B){var _=B?it.columns:it.columns-1;if(ot<0||ot>_)throw new RangeError("Column index out of range")}function X(it,ot){if(ot.to1DArray&&(ot=ot.to1DArray()),ot.length!==it.columns)throw new RangeError("vector size must be the same as the number of columns");return ot}function K(it,ot){if(ot.to1DArray&&(ot=ot.to1DArray()),ot.length!==it.rows)throw new RangeError("vector size must be the same as the number of rows");return ot}function J(it,ot){if(!b(ot))throw new TypeError("row indices must be an array");for(var B=0;B<ot.length;B++)if(ot[B]<0||ot[B]>=it.rows)throw new RangeError("row indices are out of range")}function rt(it,ot){if(!b(ot))throw new TypeError("column indices must be an array");for(var B=0;B<ot.length;B++)if(ot[B]<0||ot[B]>=it.columns)throw new RangeError("column indices are out of range")}function tt(it,ot,B,_,C){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(lt("startRow",ot),lt("endRow",B),lt("startColumn",_),lt("endColumn",C),ot>B||_>C||ot<0||ot>=it.rows||B<0||B>=it.rows||_<0||_>=it.columns||C<0||C>=it.columns)throw new RangeError("Submatrix indices are out of range")}function nt(it){for(var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=[],_=0;_<it;_++)B.push(ot);return B}function lt(it,ot){if(typeof ot!="number")throw new TypeError("".concat(it," must be a number"))}function xt(it){if(it.isEmpty())throw new Error("Empty matrix has no elements to index")}function jt(it){for(var ot=nt(it.rows),B=0;B<it.rows;++B)for(var _=0;_<it.columns;++_)ot[B]+=it.get(B,_);return ot}function Dt(it){for(var ot=nt(it.columns),B=0;B<it.rows;++B)for(var _=0;_<it.columns;++_)ot[_]+=it.get(B,_);return ot}function Zt(it){for(var ot=0,B=0;B<it.rows;B++)for(var _=0;_<it.columns;_++)ot+=it.get(B,_);return ot}function Vt(it){for(var ot=nt(it.rows,1),B=0;B<it.rows;++B)for(var _=0;_<it.columns;++_)ot[B]*=it.get(B,_);return ot}function ue(it){for(var ot=nt(it.columns,1),B=0;B<it.rows;++B)for(var _=0;_<it.columns;++_)ot[_]*=it.get(B,_);return ot}function dt(it){for(var ot=1,B=0;B<it.rows;B++)for(var _=0;_<it.columns;_++)ot*=it.get(B,_);return ot}function Ot(it,ot,B){for(var _=it.rows,C=it.columns,Y=[],pt=0;pt<_;pt++){for(var _t=0,Mt=0,zt=0,Le=0;Le<C;Le++)zt=it.get(pt,Le)-B[pt],_t+=zt,Mt+=zt*zt;ot?Y.push((Mt-_t*_t/C)/(C-1)):Y.push((Mt-_t*_t/C)/C)}return Y}function ee(it,ot,B){for(var _=it.rows,C=it.columns,Y=[],pt=0;pt<C;pt++){for(var _t=0,Mt=0,zt=0,Le=0;Le<_;Le++)zt=it.get(Le,pt)-B[pt],_t+=zt,Mt+=zt*zt;ot?Y.push((Mt-_t*_t/_)/(_-1)):Y.push((Mt-_t*_t/_)/_)}return Y}function Re(it,ot,B){for(var _=it.rows,C=it.columns,Y=_*C,pt=0,_t=0,Mt=0,zt=0;zt<_;zt++)for(var Le=0;Le<C;Le++)Mt=it.get(zt,Le)-B,pt+=Mt,_t+=Mt*Mt;return ot?(_t-pt*pt/Y)/(Y-1):(_t-pt*pt/Y)/Y}function me(it,ot){for(var B=0;B<it.rows;B++)for(var _=0;_<it.columns;_++)it.set(B,_,it.get(B,_)-ot[B])}function Ae(it,ot){for(var B=0;B<it.rows;B++)for(var _=0;_<it.columns;_++)it.set(B,_,it.get(B,_)-ot[_])}function Be(it,ot){for(var B=0;B<it.rows;B++)for(var _=0;_<it.columns;_++)it.set(B,_,it.get(B,_)-ot)}function Ke(it){for(var ot=[],B=0;B<it.rows;B++){for(var _=0,C=0;C<it.columns;C++)_+=Math.pow(it.get(B,C),2)/(it.columns-1);ot.push(Math.sqrt(_))}return ot}function $t(it,ot){for(var B=0;B<it.rows;B++)for(var _=0;_<it.columns;_++)it.set(B,_,it.get(B,_)/ot[B])}function ce(it){for(var ot=[],B=0;B<it.columns;B++){for(var _=0,C=0;C<it.rows;C++)_+=Math.pow(it.get(C,B),2)/(it.rows-1);ot.push(Math.sqrt(_))}return ot}function we(it,ot){for(var B=0;B<it.rows;B++)for(var _=0;_<it.columns;_++)it.set(B,_,it.get(B,_)/ot[_])}function Pe(it){for(var ot=it.size-1,B=0,_=0;_<it.columns;_++)for(var C=0;C<it.rows;C++)B+=Math.pow(it.get(C,_),2)/ot;return Math.sqrt(B)}function ye(it,ot){for(var B=0;B<it.rows;B++)for(var _=0;_<it.columns;_++)it.set(B,_,it.get(B,_)/ot)}var Bt=function(){function it(){(0,I.Z)(this,it)}return(0,k.Z)(it,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(B){if(typeof B!="function")throw new TypeError("callback must be a function");for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)B.call(this,_,C);return this}},{key:"to1DArray",value:function(){for(var B=[],_=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)B.push(this.get(_,C));return B}},{key:"to2DArray",value:function(){for(var B=[],_=0;_<this.rows;_++){B.push([]);for(var C=0;C<this.columns;C++)B[_].push(this.get(_,C))}return B}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var B=0;B<this.rows;B++)for(var _=0;_<=B;_++)if(this.get(B,_)!==this.get(_,B))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var B=0,_=0,C=-1,Y=!0,pt=!1;B<this.rows&&Y;){for(_=0,pt=!1;_<this.columns&&pt===!1;)this.get(B,_)===0?_++:this.get(B,_)===1&&_>C?(pt=!0,C=_):(Y=!1,pt=!0);B++}return Y}},{key:"isReducedEchelonForm",value:function(){for(var B=0,_=0,C=-1,Y=!0,pt=!1;B<this.rows&&Y;){for(_=0,pt=!1;_<this.columns&&pt===!1;)this.get(B,_)===0?_++:this.get(B,_)===1&&_>C?(pt=!0,C=_):(Y=!1,pt=!0);for(var _t=_+1;_t<this.rows;_t++)this.get(B,_t)!==0&&(Y=!1);B++}return Y}},{key:"echelonForm",value:function(){for(var B=this.clone(),_=0,C=0;_<B.rows&&C<B.columns;){for(var Y=_,pt=_;pt<B.rows;pt++)B.get(pt,C)>B.get(Y,C)&&(Y=pt);if(B.get(Y,C)===0)C++;else{B.swapRows(_,Y);for(var _t=B.get(_,C),Mt=C;Mt<B.columns;Mt++)B.set(_,Mt,B.get(_,Mt)/_t);for(var zt=_+1;zt<B.rows;zt++){var Le=B.get(zt,C)/B.get(_,C);B.set(zt,C,0);for(var Me=C+1;Me<B.columns;Me++)B.set(zt,Me,B.get(zt,Me)-B.get(_,Me)*Le)}_++,C++}}return B}},{key:"reducedEchelonForm",value:function(){for(var B=this.echelonForm(),_=B.columns,C=B.rows,Y=C-1;Y>=0;)if(B.maxRow(Y)===0)Y--;else{for(var pt=0,_t=!1;pt<C&&_t===!1;)B.get(Y,pt)===1?_t=!0:pt++;for(var Mt=0;Mt<Y;Mt++)for(var zt=B.get(Mt,pt),Le=pt;Le<_;Le++){var Me=B.get(Mt,Le)-zt*B.get(Y,Le);B.set(Mt,Le,Me)}Y--}return B}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof B!="object")throw new TypeError("options must be an object");var _=B.rows,C=_===void 0?1:_,Y=B.columns,pt=Y===void 0?1:Y;if(!Number.isInteger(C)||C<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(pt)||pt<=0)throw new TypeError("columns must be a positive integer");for(var _t=new It(this.rows*C,this.columns*pt),Mt=0;Mt<C;Mt++)for(var zt=0;zt<pt;zt++)_t.setSubMatrix(this,this.rows*Mt,this.columns*zt);return _t}},{key:"fill",value:function(B){for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,B);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(B){Q(this,B);for(var _=[],C=0;C<this.columns;C++)_.push(this.get(B,C));return _}},{key:"getRowVector",value:function(B){return It.rowVector(this.getRow(B))}},{key:"setRow",value:function(B,_){Q(this,B),_=X(this,_);for(var C=0;C<this.columns;C++)this.set(B,C,_[C]);return this}},{key:"swapRows",value:function(B,_){Q(this,B),Q(this,_);for(var C=0;C<this.columns;C++){var Y=this.get(B,C);this.set(B,C,this.get(_,C)),this.set(_,C,Y)}return this}},{key:"getColumn",value:function(B){j(this,B);for(var _=[],C=0;C<this.rows;C++)_.push(this.get(C,B));return _}},{key:"getColumnVector",value:function(B){return It.columnVector(this.getColumn(B))}},{key:"setColumn",value:function(B,_){j(this,B),_=K(this,_);for(var C=0;C<this.rows;C++)this.set(C,B,_[C]);return this}},{key:"swapColumns",value:function(B,_){j(this,B),j(this,_);for(var C=0;C<this.rows;C++){var Y=this.get(C,B);this.set(C,B,this.get(C,_)),this.set(C,_,Y)}return this}},{key:"addRowVector",value:function(B){B=X(this,B);for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,this.get(_,C)+B[C]);return this}},{key:"subRowVector",value:function(B){B=X(this,B);for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,this.get(_,C)-B[C]);return this}},{key:"mulRowVector",value:function(B){B=X(this,B);for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,this.get(_,C)*B[C]);return this}},{key:"divRowVector",value:function(B){B=X(this,B);for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,this.get(_,C)/B[C]);return this}},{key:"addColumnVector",value:function(B){B=K(this,B);for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,this.get(_,C)+B[_]);return this}},{key:"subColumnVector",value:function(B){B=K(this,B);for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,this.get(_,C)-B[_]);return this}},{key:"mulColumnVector",value:function(B){B=K(this,B);for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,this.get(_,C)*B[_]);return this}},{key:"divColumnVector",value:function(B){B=K(this,B);for(var _=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)this.set(_,C,this.get(_,C)/B[_]);return this}},{key:"mulRow",value:function(B,_){Q(this,B);for(var C=0;C<this.columns;C++)this.set(B,C,this.get(B,C)*_);return this}},{key:"mulColumn",value:function(B,_){j(this,B);for(var C=0;C<this.rows;C++)this.set(C,B,this.get(C,B)*_);return this}},{key:"max",value:function(B){if(this.isEmpty())return NaN;switch(B){case"row":{for(var _=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.get(C,Y)>_[C]&&(_[C]=this.get(C,Y));return _}case"column":{for(var pt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),_t=0;_t<this.rows;_t++)for(var Mt=0;Mt<this.columns;Mt++)this.get(_t,Mt)>pt[Mt]&&(pt[Mt]=this.get(_t,Mt));return pt}case void 0:{for(var zt=this.get(0,0),Le=0;Le<this.rows;Le++)for(var Me=0;Me<this.columns;Me++)this.get(Le,Me)>zt&&(zt=this.get(Le,Me));return zt}default:throw new Error("invalid option: ".concat(B))}}},{key:"maxIndex",value:function(){xt(this);for(var B=this.get(0,0),_=[0,0],C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.get(C,Y)>B&&(B=this.get(C,Y),_[0]=C,_[1]=Y);return _}},{key:"min",value:function(B){if(this.isEmpty())return NaN;switch(B){case"row":{for(var _=new Array(this.rows).fill(Number.POSITIVE_INFINITY),C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.get(C,Y)<_[C]&&(_[C]=this.get(C,Y));return _}case"column":{for(var pt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),_t=0;_t<this.rows;_t++)for(var Mt=0;Mt<this.columns;Mt++)this.get(_t,Mt)<pt[Mt]&&(pt[Mt]=this.get(_t,Mt));return pt}case void 0:{for(var zt=this.get(0,0),Le=0;Le<this.rows;Le++)for(var Me=0;Me<this.columns;Me++)this.get(Le,Me)<zt&&(zt=this.get(Le,Me));return zt}default:throw new Error("invalid option: ".concat(B))}}},{key:"minIndex",value:function(){xt(this);for(var B=this.get(0,0),_=[0,0],C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)this.get(C,Y)<B&&(B=this.get(C,Y),_[0]=C,_[1]=Y);return _}},{key:"maxRow",value:function(B){if(Q(this,B),this.isEmpty())return NaN;for(var _=this.get(B,0),C=1;C<this.columns;C++)this.get(B,C)>_&&(_=this.get(B,C));return _}},{key:"maxRowIndex",value:function(B){Q(this,B),xt(this);for(var _=this.get(B,0),C=[B,0],Y=1;Y<this.columns;Y++)this.get(B,Y)>_&&(_=this.get(B,Y),C[1]=Y);return C}},{key:"minRow",value:function(B){if(Q(this,B),this.isEmpty())return NaN;for(var _=this.get(B,0),C=1;C<this.columns;C++)this.get(B,C)<_&&(_=this.get(B,C));return _}},{key:"minRowIndex",value:function(B){Q(this,B),xt(this);for(var _=this.get(B,0),C=[B,0],Y=1;Y<this.columns;Y++)this.get(B,Y)<_&&(_=this.get(B,Y),C[1]=Y);return C}},{key:"maxColumn",value:function(B){if(j(this,B),this.isEmpty())return NaN;for(var _=this.get(0,B),C=1;C<this.rows;C++)this.get(C,B)>_&&(_=this.get(C,B));return _}},{key:"maxColumnIndex",value:function(B){j(this,B),xt(this);for(var _=this.get(0,B),C=[0,B],Y=1;Y<this.rows;Y++)this.get(Y,B)>_&&(_=this.get(Y,B),C[0]=Y);return C}},{key:"minColumn",value:function(B){if(j(this,B),this.isEmpty())return NaN;for(var _=this.get(0,B),C=1;C<this.rows;C++)this.get(C,B)<_&&(_=this.get(C,B));return _}},{key:"minColumnIndex",value:function(B){j(this,B),xt(this);for(var _=this.get(0,B),C=[0,B],Y=1;Y<this.rows;Y++)this.get(Y,B)<_&&(_=this.get(Y,B),C[0]=Y);return C}},{key:"diag",value:function(){for(var B=Math.min(this.rows,this.columns),_=[],C=0;C<B;C++)_.push(this.get(C,C));return _}},{key:"norm",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",_=0;if(B==="max")return this.max();if(B==="frobenius"){for(var C=0;C<this.rows;C++)for(var Y=0;Y<this.columns;Y++)_=_+this.get(C,Y)*this.get(C,Y);return Math.sqrt(_)}else throw new RangeError("unknown norm type: ".concat(B))}},{key:"cumulativeSum",value:function(){for(var B=0,_=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)B+=this.get(_,C),this.set(_,C,B);return this}},{key:"dot",value:function(B){it.isMatrix(B)&&(B=B.to1DArray());var _=this.to1DArray();if(_.length!==B.length)throw new RangeError("vectors do not have the same size");for(var C=0,Y=0;Y<_.length;Y++)C+=_[Y]*B[Y];return C}},{key:"mmul",value:function(B){B=It.checkMatrix(B);for(var _=this.rows,C=this.columns,Y=B.columns,pt=new It(_,Y),_t=new Float64Array(C),Mt=0;Mt<Y;Mt++){for(var zt=0;zt<C;zt++)_t[zt]=B.get(zt,Mt);for(var Le=0;Le<_;Le++){for(var Me=0,qe=0;qe<C;qe++)Me+=this.get(Le,qe)*_t[qe];pt.set(Le,Mt,Me)}}return pt}},{key:"strassen2x2",value:function(B){B=It.checkMatrix(B);var _=new It(2,2),C=this.get(0,0),Y=B.get(0,0),pt=this.get(0,1),_t=B.get(0,1),Mt=this.get(1,0),zt=B.get(1,0),Le=this.get(1,1),Me=B.get(1,1),qe=(C+Le)*(Y+Me),br=(Mt+Le)*Y,xr=C*(_t-Me),sn=Le*(zt-Y),Rn=(C+pt)*Me,tr=(Mt-C)*(Y+_t),Sr=(pt-Le)*(zt+Me),jr=qe+sn-Rn+Sr,Nn=xr+Rn,gn=br+sn,ea=qe-br+xr+tr;return _.set(0,0,jr),_.set(0,1,Nn),_.set(1,0,gn),_.set(1,1,ea),_}},{key:"strassen3x3",value:function(B){B=It.checkMatrix(B);var _=new It(3,3),C=this.get(0,0),Y=this.get(0,1),pt=this.get(0,2),_t=this.get(1,0),Mt=this.get(1,1),zt=this.get(1,2),Le=this.get(2,0),Me=this.get(2,1),qe=this.get(2,2),br=B.get(0,0),xr=B.get(0,1),sn=B.get(0,2),Rn=B.get(1,0),tr=B.get(1,1),Sr=B.get(1,2),jr=B.get(2,0),Nn=B.get(2,1),gn=B.get(2,2),ea=(C+Y+pt-_t-Mt-Me-qe)*tr,ha=(C-_t)*(-xr+tr),Zn=Mt*(-br+xr+Rn-tr-Sr-jr+gn),na=(-C+_t+Mt)*(br-xr+tr),da=(_t+Mt)*(-br+xr),Vn=C*br,se=(-C+Le+Me)*(br-sn+Sr),Ut=(-C+Le)*(sn-Sr),le=(Le+Me)*(-br+sn),ze=(C+Y+pt-Mt-zt-Le-Me)*Sr,Ie=Me*(-br+sn+Rn-tr-Sr-jr+Nn),We=(-pt+Me+qe)*(tr+jr-Nn),_r=(pt-qe)*(tr-Nn),nn=pt*jr,pn=(Me+qe)*(-jr+Nn),Gn=(-pt+Mt+zt)*(Sr+jr-gn),jn=(pt-zt)*(Sr-gn),oa=(Mt+zt)*(-jr+gn),va=Y*Rn,_a=zt*Nn,fi=_t*sn,Ba=Le*xr,Wa=qe*gn,wa=Vn+nn+va,vi=ea+na+da+Vn+We+nn+pn,ti=Vn+se+le+ze+nn+Gn+oa,Ia=ha+Zn+na+Vn+nn+Gn+jn,qi=ha+na+da+Vn+_a,gi=nn+Gn+jn+oa+fi,ji=Vn+se+Ut+Ie+We+_r+nn,Ti=We+_r+nn+pn+Ba,ri=Vn+se+Ut+le+Wa;return _.set(0,0,wa),_.set(0,1,vi),_.set(0,2,ti),_.set(1,0,Ia),_.set(1,1,qi),_.set(1,2,gi),_.set(2,0,ji),_.set(2,1,Ti),_.set(2,2,ri),_}},{key:"mmulStrassen",value:function(B){B=It.checkMatrix(B);var _=this.clone(),C=_.rows,Y=_.columns,pt=B.rows,_t=B.columns;Y!==pt&&console.warn("Multiplying ".concat(C," x ").concat(Y," and ").concat(pt," x ").concat(_t," matrix: dimensions do not match."));function Mt(qe,br,xr){var sn=qe.rows,Rn=qe.columns;if(sn===br&&Rn===xr)return qe;var tr=it.zeros(br,xr);return tr=tr.setSubMatrix(qe,0,0),tr}var zt=Math.max(C,pt),Le=Math.max(Y,_t);_=Mt(_,zt,Le),B=Mt(B,zt,Le);function Me(qe,br,xr,sn){if(xr<=512||sn<=512)return qe.mmul(br);xr%2==1&&sn%2==1?(qe=Mt(qe,xr+1,sn+1),br=Mt(br,xr+1,sn+1)):xr%2==1?(qe=Mt(qe,xr+1,sn),br=Mt(br,xr+1,sn)):sn%2==1&&(qe=Mt(qe,xr,sn+1),br=Mt(br,xr,sn+1));var Rn=parseInt(qe.rows/2,10),tr=parseInt(qe.columns/2,10),Sr=qe.subMatrix(0,Rn-1,0,tr-1),jr=br.subMatrix(0,Rn-1,0,tr-1),Nn=qe.subMatrix(0,Rn-1,tr,qe.columns-1),gn=br.subMatrix(0,Rn-1,tr,br.columns-1),ea=qe.subMatrix(Rn,qe.rows-1,0,tr-1),ha=br.subMatrix(Rn,br.rows-1,0,tr-1),Zn=qe.subMatrix(Rn,qe.rows-1,tr,qe.columns-1),na=br.subMatrix(Rn,br.rows-1,tr,br.columns-1),da=Me(it.add(Sr,Zn),it.add(jr,na),Rn,tr),Vn=Me(it.add(ea,Zn),jr,Rn,tr),se=Me(Sr,it.sub(gn,na),Rn,tr),Ut=Me(Zn,it.sub(ha,jr),Rn,tr),le=Me(it.add(Sr,Nn),na,Rn,tr),ze=Me(it.sub(ea,Sr),it.add(jr,gn),Rn,tr),Ie=Me(it.sub(Nn,Zn),it.add(ha,na),Rn,tr),We=it.add(da,Ut);We.sub(le),We.add(Ie);var _r=it.add(se,le),nn=it.add(Vn,Ut),pn=it.sub(da,Vn);pn.add(se),pn.add(ze);var Gn=it.zeros(2*We.rows,2*We.columns);return Gn=Gn.setSubMatrix(We,0,0),Gn=Gn.setSubMatrix(_r,We.rows,0),Gn=Gn.setSubMatrix(nn,0,We.columns),Gn=Gn.setSubMatrix(pn,We.rows,We.columns),Gn.subMatrix(0,xr-1,0,sn-1)}return Me(_,B,zt,Le)}},{key:"scaleRows",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof B!="object")throw new TypeError("options must be an object");var _=B.min,C=_===void 0?0:_,Y=B.max,pt=Y===void 0?1:Y;if(!Number.isFinite(C))throw new TypeError("min must be a number");if(!Number.isFinite(pt))throw new TypeError("max must be a number");if(C>=pt)throw new RangeError("min must be smaller than max");for(var _t=new It(this.rows,this.columns),Mt=0;Mt<this.rows;Mt++){var zt=this.getRow(Mt);zt.length>0&&y(zt,{min:C,max:pt,output:zt}),_t.setRow(Mt,zt)}return _t}},{key:"scaleColumns",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof B!="object")throw new TypeError("options must be an object");var _=B.min,C=_===void 0?0:_,Y=B.max,pt=Y===void 0?1:Y;if(!Number.isFinite(C))throw new TypeError("min must be a number");if(!Number.isFinite(pt))throw new TypeError("max must be a number");if(C>=pt)throw new RangeError("min must be smaller than max");for(var _t=new It(this.rows,this.columns),Mt=0;Mt<this.columns;Mt++){var zt=this.getColumn(Mt);zt.length&&y(zt,{min:C,max:pt,output:zt}),_t.setColumn(Mt,zt)}return _t}},{key:"flipRows",value:function(){for(var B=Math.ceil(this.columns/2),_=0;_<this.rows;_++)for(var C=0;C<B;C++){var Y=this.get(_,C),pt=this.get(_,this.columns-1-C);this.set(_,C,pt),this.set(_,this.columns-1-C,Y)}return this}},{key:"flipColumns",value:function(){for(var B=Math.ceil(this.rows/2),_=0;_<this.columns;_++)for(var C=0;C<B;C++){var Y=this.get(C,_),pt=this.get(this.rows-1-C,_);this.set(C,_,pt),this.set(this.rows-1-C,_,Y)}return this}},{key:"kroneckerProduct",value:function(B){B=It.checkMatrix(B);for(var _=this.rows,C=this.columns,Y=B.rows,pt=B.columns,_t=new It(_*Y,C*pt),Mt=0;Mt<_;Mt++)for(var zt=0;zt<C;zt++)for(var Le=0;Le<Y;Le++)for(var Me=0;Me<pt;Me++)_t.set(Y*Mt+Le,pt*zt+Me,this.get(Mt,zt)*B.get(Le,Me));return _t}},{key:"kroneckerSum",value:function(B){if(B=It.checkMatrix(B),!this.isSquare()||!B.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var _=this.rows,C=B.rows,Y=this.kroneckerProduct(It.eye(C,C)),pt=It.eye(_,_).kroneckerProduct(B);return Y.add(pt)}},{key:"transpose",value:function(){for(var B=new It(this.columns,this.rows),_=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)B.set(C,_,this.get(_,C));return B}},{key:"sortRows",value:function(){for(var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:re,_=0;_<this.rows;_++)this.setRow(_,this.getRow(_).sort(B));return this}},{key:"sortColumns",value:function(){for(var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:re,_=0;_<this.columns;_++)this.setColumn(_,this.getColumn(_).sort(B));return this}},{key:"subMatrix",value:function(B,_,C,Y){tt(this,B,_,C,Y);for(var pt=new It(_-B+1,Y-C+1),_t=B;_t<=_;_t++)for(var Mt=C;Mt<=Y;Mt++)pt.set(_t-B,Mt-C,this.get(_t,Mt));return pt}},{key:"subMatrixRow",value:function(B,_,C){if(_===void 0&&(_=0),C===void 0&&(C=this.columns-1),_>C||_<0||_>=this.columns||C<0||C>=this.columns)throw new RangeError("Argument out of range");for(var Y=new It(B.length,C-_+1),pt=0;pt<B.length;pt++)for(var _t=_;_t<=C;_t++){if(B[pt]<0||B[pt]>=this.rows)throw new RangeError("Row index out of range: ".concat(B[pt]));Y.set(pt,_t-_,this.get(B[pt],_t))}return Y}},{key:"subMatrixColumn",value:function(B,_,C){if(_===void 0&&(_=0),C===void 0&&(C=this.rows-1),_>C||_<0||_>=this.rows||C<0||C>=this.rows)throw new RangeError("Argument out of range");for(var Y=new It(C-_+1,B.length),pt=0;pt<B.length;pt++)for(var _t=_;_t<=C;_t++){if(B[pt]<0||B[pt]>=this.columns)throw new RangeError("Column index out of range: ".concat(B[pt]));Y.set(_t-_,pt,this.get(_t,B[pt]))}return Y}},{key:"setSubMatrix",value:function(B,_,C){if(B=It.checkMatrix(B),B.isEmpty())return this;var Y=_+B.rows-1,pt=C+B.columns-1;tt(this,_,Y,C,pt);for(var _t=0;_t<B.rows;_t++)for(var Mt=0;Mt<B.columns;Mt++)this.set(_+_t,C+Mt,B.get(_t,Mt));return this}},{key:"selection",value:function(B,_){J(this,B),rt(this,_);for(var C=new It(B.length,_.length),Y=0;Y<B.length;Y++)for(var pt=B[Y],_t=0;_t<_.length;_t++){var Mt=_[_t];C.set(Y,_t,this.get(pt,Mt))}return C}},{key:"trace",value:function(){for(var B=Math.min(this.rows,this.columns),_=0,C=0;C<B;C++)_+=this.get(C,C);return _}},{key:"clone",value:function(){for(var B=new It(this.rows,this.columns),_=0;_<this.rows;_++)for(var C=0;C<this.columns;C++)B.set(_,C,this.get(_,C));return B}},{key:"sum",value:function(B){switch(B){case"row":return jt(this);case"column":return Dt(this);case void 0:return Zt(this);default:throw new Error("invalid option: ".concat(B))}}},{key:"product",value:function(B){switch(B){case"row":return Vt(this);case"column":return ue(this);case void 0:return dt(this);default:throw new Error("invalid option: ".concat(B))}}},{key:"mean",value:function(B){var _=this.sum(B);switch(B){case"row":{for(var C=0;C<this.rows;C++)_[C]/=this.columns;return _}case"column":{for(var Y=0;Y<this.columns;Y++)_[Y]/=this.rows;return _}case void 0:return _/this.size;default:throw new Error("invalid option: ".concat(B))}}},{key:"variance",value:function(B){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof B=="object"&&(_=B,B=void 0),typeof _!="object")throw new TypeError("options must be an object");var C=_,Y=C.unbiased,pt=Y===void 0?!0:Y,_t=C.mean,Mt=_t===void 0?this.mean(B):_t;if(typeof pt!="boolean")throw new TypeError("unbiased must be a boolean");switch(B){case"row":{if(!b(Mt))throw new TypeError("mean must be an array");return Ot(this,pt,Mt)}case"column":{if(!b(Mt))throw new TypeError("mean must be an array");return ee(this,pt,Mt)}case void 0:{if(typeof Mt!="number")throw new TypeError("mean must be a number");return Re(this,pt,Mt)}default:throw new Error("invalid option: ".concat(B))}}},{key:"standardDeviation",value:function(B,_){typeof B=="object"&&(_=B,B=void 0);var C=this.variance(B,_);if(B===void 0)return Math.sqrt(C);for(var Y=0;Y<C.length;Y++)C[Y]=Math.sqrt(C[Y]);return C}},{key:"center",value:function(B){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof B=="object"&&(_=B,B=void 0),typeof _!="object")throw new TypeError("options must be an object");var C=_,Y=C.center,pt=Y===void 0?this.mean(B):Y;switch(B){case"row":{if(!b(pt))throw new TypeError("center must be an array");return me(this,pt),this}case"column":{if(!b(pt))throw new TypeError("center must be an array");return Ae(this,pt),this}case void 0:{if(typeof pt!="number")throw new TypeError("center must be a number");return Be(this,pt),this}default:throw new Error("invalid option: ".concat(B))}}},{key:"scale",value:function(B){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof B=="object"&&(_=B,B=void 0),typeof _!="object")throw new TypeError("options must be an object");var C=_.scale;switch(B){case"row":{if(C===void 0)C=Ke(this);else if(!b(C))throw new TypeError("scale must be an array");return $t(this,C),this}case"column":{if(C===void 0)C=ce(this);else if(!b(C))throw new TypeError("scale must be an array");return we(this,C),this}case void 0:{if(C===void 0)C=Pe(this);else if(typeof C!="number")throw new TypeError("scale must be a number");return ye(this,C),this}default:throw new Error("invalid option: ".concat(B))}}},{key:"toString",value:function(B){return S(this,B)}}],[{key:"from1DArray",value:function(B,_,C){var Y=B*_;if(Y!==C.length)throw new RangeError("data length does not match given dimensions");for(var pt=new It(B,_),_t=0;_t<B;_t++)for(var Mt=0;Mt<_;Mt++)pt.set(_t,Mt,C[_t*_+Mt]);return pt}},{key:"rowVector",value:function(B){for(var _=new It(1,B.length),C=0;C<B.length;C++)_.set(0,C,B[C]);return _}},{key:"columnVector",value:function(B){for(var _=new It(B.length,1),C=0;C<B.length;C++)_.set(C,0,B[C]);return _}},{key:"zeros",value:function(B,_){return new It(B,_)}},{key:"ones",value:function(B,_){return new It(B,_).fill(1)}},{key:"rand",value:function(B,_){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof C!="object")throw new TypeError("options must be an object");for(var Y=C.random,pt=Y===void 0?Math.random:Y,_t=new It(B,_),Mt=0;Mt<B;Mt++)for(var zt=0;zt<_;zt++)_t.set(Mt,zt,pt());return _t}},{key:"randInt",value:function(B,_){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof C!="object")throw new TypeError("options must be an object");var Y=C.min,pt=Y===void 0?0:Y,_t=C.max,Mt=_t===void 0?1e3:_t,zt=C.random,Le=zt===void 0?Math.random:zt;if(!Number.isInteger(pt))throw new TypeError("min must be an integer");if(!Number.isInteger(Mt))throw new TypeError("max must be an integer");if(pt>=Mt)throw new RangeError("min must be smaller than max");for(var Me=Mt-pt,qe=new It(B,_),br=0;br<B;br++)for(var xr=0;xr<_;xr++){var sn=pt+Math.round(Le()*Me);qe.set(br,xr,sn)}return qe}},{key:"eye",value:function(B,_,C){_===void 0&&(_=B),C===void 0&&(C=1);for(var Y=Math.min(B,_),pt=this.zeros(B,_),_t=0;_t<Y;_t++)pt.set(_t,_t,C);return pt}},{key:"diag",value:function(B,_,C){var Y=B.length;_===void 0&&(_=Y),C===void 0&&(C=_);for(var pt=Math.min(Y,_,C),_t=this.zeros(_,C),Mt=0;Mt<pt;Mt++)_t.set(Mt,Mt,B[Mt]);return _t}},{key:"min",value:function(B,_){B=this.checkMatrix(B),_=this.checkMatrix(_);for(var C=B.rows,Y=B.columns,pt=new It(C,Y),_t=0;_t<C;_t++)for(var Mt=0;Mt<Y;Mt++)pt.set(_t,Mt,Math.min(B.get(_t,Mt),_.get(_t,Mt)));return pt}},{key:"max",value:function(B,_){B=this.checkMatrix(B),_=this.checkMatrix(_);for(var C=B.rows,Y=B.columns,pt=new this(C,Y),_t=0;_t<C;_t++)for(var Mt=0;Mt<Y;Mt++)pt.set(_t,Mt,Math.max(B.get(_t,Mt),_.get(_t,Mt)));return pt}},{key:"checkMatrix",value:function(B){return it.isMatrix(B)?B:new It(B)}},{key:"isMatrix",value:function(B){return B!=null&&B.klass==="Matrix"}}]),it}();Bt.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Bt.prototype[Symbol.for("nodejs.util.inspect.custom")]=x);function re(it,ot){return it-ot}function Ee(it){return it.every(function(ot){return typeof ot=="number"})}Bt.random=Bt.rand,Bt.randomInt=Bt.randInt,Bt.diagonal=Bt.diag,Bt.prototype.diagonal=Bt.prototype.diag,Bt.identity=Bt.eye,Bt.prototype.negate=Bt.prototype.neg,Bt.prototype.tensorProduct=Bt.prototype.kroneckerProduct;var It=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_,C){var Y;if((0,I.Z)(this,B),Y=ot.call(this),B.isMatrix(_))return(0,L.Z)(Y,_.clone());if(Number.isInteger(_)&&_>=0)if(Y.data=[],Number.isInteger(C)&&C>=0)for(var pt=0;pt<_;pt++)Y.data.push(new Float64Array(C));else throw new TypeError("nColumns must be a positive integer");else if(b(_)){var _t=_;if(_=_t.length,C=_?_t[0].length:0,typeof C!="number")throw new TypeError("Data must be a 2D array with at least one element");Y.data=[];for(var Mt=0;Mt<_;Mt++){if(_t[Mt].length!==C)throw new RangeError("Inconsistent array dimensions");if(!Ee(_t[Mt]))throw new TypeError("Input data contains non-numeric values");Y.data.push(Float64Array.from(_t[Mt]))}}else throw new TypeError("First argument must be a positive number or an array");return Y.rows=_,Y.columns=C,Y}return(0,k.Z)(B,[{key:"set",value:function(C,Y,pt){return this.data[C][Y]=pt,this}},{key:"get",value:function(C,Y){return this.data[C][Y]}},{key:"removeRow",value:function(C){return Q(this,C),this.data.splice(C,1),this.rows-=1,this}},{key:"addRow",value:function(C,Y){return Y===void 0&&(Y=C,C=this.rows),Q(this,C,!0),Y=Float64Array.from(X(this,Y)),this.data.splice(C,0,Y),this.rows+=1,this}},{key:"removeColumn",value:function(C){j(this,C);for(var Y=0;Y<this.rows;Y++){for(var pt=new Float64Array(this.columns-1),_t=0;_t<C;_t++)pt[_t]=this.data[Y][_t];for(var Mt=C+1;Mt<this.columns;Mt++)pt[Mt-1]=this.data[Y][Mt];this.data[Y]=pt}return this.columns-=1,this}},{key:"addColumn",value:function(C,Y){typeof Y=="undefined"&&(Y=C,C=this.columns),j(this,C,!0),Y=K(this,Y);for(var pt=0;pt<this.rows;pt++){for(var _t=new Float64Array(this.columns+1),Mt=0;Mt<C;Mt++)_t[Mt]=this.data[pt][Mt];for(_t[Mt++]=Y[pt];Mt<this.columns+1;Mt++)_t[Mt]=this.data[pt][Mt-1];this.data[pt]=_t}return this.columns+=1,this}}]),B}(Bt);V(Bt,It);var Et=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_,C,Y){var pt;return(0,I.Z)(this,B),pt=ot.call(this),pt.matrix=_,pt.rows=C,pt.columns=Y,pt}return(0,k.Z)(B)}(Bt),Wt=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_,C){var Y;return(0,I.Z)(this,B),j(_,C),Y=ot.call(this,_,_.rows,1),Y.column=C,Y}return(0,k.Z)(B,[{key:"set",value:function(C,Y,pt){return this.matrix.set(C,this.column,pt),this}},{key:"get",value:function(C){return this.matrix.get(C,this.column)}}]),B}(Et),fe=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_,C){var Y;return(0,I.Z)(this,B),rt(_,C),Y=ot.call(this,_,_.rows,C.length),Y.columnIndices=C,Y}return(0,k.Z)(B,[{key:"set",value:function(C,Y,pt){return this.matrix.set(C,this.columnIndices[Y],pt),this}},{key:"get",value:function(C,Y){return this.matrix.get(C,this.columnIndices[Y])}}]),B}(Et),Fe=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_){return(0,I.Z)(this,B),ot.call(this,_,_.rows,_.columns)}return(0,k.Z)(B,[{key:"set",value:function(C,Y,pt){return this.matrix.set(C,this.columns-Y-1,pt),this}},{key:"get",value:function(C,Y){return this.matrix.get(C,this.columns-Y-1)}}]),B}(Et),$e=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_){return(0,I.Z)(this,B),ot.call(this,_,_.rows,_.columns)}return(0,k.Z)(B,[{key:"set",value:function(C,Y,pt){return this.matrix.set(this.rows-C-1,Y,pt),this}},{key:"get",value:function(C,Y){return this.matrix.get(this.rows-C-1,Y)}}]),B}(Et),Lt=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_,C){var Y;return(0,I.Z)(this,B),Q(_,C),Y=ot.call(this,_,1,_.columns),Y.row=C,Y}return(0,k.Z)(B,[{key:"set",value:function(C,Y,pt){return this.matrix.set(this.row,Y,pt),this}},{key:"get",value:function(C,Y){return this.matrix.get(this.row,Y)}}]),B}(Et),Ne=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_,C){var Y;return(0,I.Z)(this,B),J(_,C),Y=ot.call(this,_,C.length,_.columns),Y.rowIndices=C,Y}return(0,k.Z)(B,[{key:"set",value:function(C,Y,pt){return this.matrix.set(this.rowIndices[C],Y,pt),this}},{key:"get",value:function(C,Y){return this.matrix.get(this.rowIndices[C],Y)}}]),B}(Et),Xe=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_,C,Y){var pt;return(0,I.Z)(this,B),J(_,C),rt(_,Y),pt=ot.call(this,_,C.length,Y.length),pt.rowIndices=C,pt.columnIndices=Y,pt}return(0,k.Z)(B,[{key:"set",value:function(C,Y,pt){return this.matrix.set(this.rowIndices[C],this.columnIndices[Y],pt),this}},{key:"get",value:function(C,Y){return this.matrix.get(this.rowIndices[C],this.columnIndices[Y])}}]),B}(Et),Dr=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_,C,Y,pt,_t){var Mt;return(0,I.Z)(this,B),tt(_,C,Y,pt,_t),Mt=ot.call(this,_,Y-C+1,_t-pt+1),Mt.startRow=C,Mt.startColumn=pt,Mt}return(0,k.Z)(B,[{key:"set",value:function(C,Y,pt){return this.matrix.set(this.startRow+C,this.startColumn+Y,pt),this}},{key:"get",value:function(C,Y){return this.matrix.get(this.startRow+C,this.startColumn+Y)}}]),B}(Et),ur=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_){return(0,I.Z)(this,B),ot.call(this,_,_.columns,_.rows)}return(0,k.Z)(B,[{key:"set",value:function(C,Y,pt){return this.matrix.set(Y,C,pt),this}},{key:"get",value:function(C,Y){return this.matrix.get(Y,C)}}]),B}(Et),Or=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_){var C,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,I.Z)(this,B);var pt=Y.rows,_t=pt===void 0?1:pt;if(_.length%_t!=0)throw new Error("the data length is not divisible by the number of rows");return C=ot.call(this),C.rows=_t,C.columns=_.length/_t,C.data=_,C}return(0,k.Z)(B,[{key:"set",value:function(C,Y,pt){var _t=this._calculateIndex(C,Y);return this.data[_t]=pt,this}},{key:"get",value:function(C,Y){var pt=this._calculateIndex(C,Y);return this.data[pt]}},{key:"_calculateIndex",value:function(C,Y){return C*this.columns+Y}}]),B}(Bt),ln=function(it){(0,z.Z)(B,it);var ot=(0,F.Z)(B);function B(_){var C;return(0,I.Z)(this,B),C=ot.call(this),C.data=_,C.rows=_.length,C.columns=_[0].length,C}return(0,k.Z)(B,[{key:"set",value:function(C,Y,pt){return this.data[C][Y]=pt,this}},{key:"get",value:function(C,Y){return this.data[C][Y]}}]),B}(Bt);function fn(it,ot){if(b(it))return it[0]&&b(it[0])?new ln(it):new Or(it,ot);throw new Error("the argument is not an array")}var Xr=function(){function it(ot){(0,I.Z)(this,it),ot=ln.checkMatrix(ot);var B=ot.clone(),_=B.rows,C=B.columns,Y=new Float64Array(_),pt=1,_t,Mt,zt,Le,Me,qe,br,xr,sn;for(_t=0;_t<_;_t++)Y[_t]=_t;for(xr=new Float64Array(_),Mt=0;Mt<C;Mt++){for(_t=0;_t<_;_t++)xr[_t]=B.get(_t,Mt);for(_t=0;_t<_;_t++){for(sn=Math.min(_t,Mt),Me=0,zt=0;zt<sn;zt++)Me+=B.get(_t,zt)*xr[zt];xr[_t]-=Me,B.set(_t,Mt,xr[_t])}for(Le=Mt,_t=Mt+1;_t<_;_t++)Math.abs(xr[_t])>Math.abs(xr[Le])&&(Le=_t);if(Le!==Mt){for(zt=0;zt<C;zt++)qe=B.get(Le,zt),B.set(Le,zt,B.get(Mt,zt)),B.set(Mt,zt,qe);br=Y[Le],Y[Le]=Y[Mt],Y[Mt]=br,pt=-pt}if(Mt<_&&B.get(Mt,Mt)!==0)for(_t=Mt+1;_t<_;_t++)B.set(_t,Mt,B.get(_t,Mt)/B.get(Mt,Mt))}this.LU=B,this.pivotVector=Y,this.pivotSign=pt}return(0,k.Z)(it,[{key:"isSingular",value:function(){for(var B=this.LU,_=B.columns,C=0;C<_;C++)if(B.get(C,C)===0)return!0;return!1}},{key:"solve",value:function(B){B=It.checkMatrix(B);var _=this.LU,C=_.rows;if(C!==B.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var Y=B.columns,pt=B.subMatrixRow(this.pivotVector,0,Y-1),_t=_.columns,Mt,zt,Le;for(Le=0;Le<_t;Le++)for(Mt=Le+1;Mt<_t;Mt++)for(zt=0;zt<Y;zt++)pt.set(Mt,zt,pt.get(Mt,zt)-pt.get(Le,zt)*_.get(Mt,Le));for(Le=_t-1;Le>=0;Le--){for(zt=0;zt<Y;zt++)pt.set(Le,zt,pt.get(Le,zt)/_.get(Le,Le));for(Mt=0;Mt<Le;Mt++)for(zt=0;zt<Y;zt++)pt.set(Mt,zt,pt.get(Mt,zt)-pt.get(Le,zt)*_.get(Mt,Le))}return pt}},{key:"determinant",get:function(){var B=this.LU;if(!B.isSquare())throw new Error("Matrix must be square");for(var _=this.pivotSign,C=B.columns,Y=0;Y<C;Y++)_*=B.get(Y,Y);return _}},{key:"lowerTriangularMatrix",get:function(){for(var B=this.LU,_=B.rows,C=B.columns,Y=new It(_,C),pt=0;pt<_;pt++)for(var _t=0;_t<C;_t++)pt>_t?Y.set(pt,_t,B.get(pt,_t)):pt===_t?Y.set(pt,_t,1):Y.set(pt,_t,0);return Y}},{key:"upperTriangularMatrix",get:function(){for(var B=this.LU,_=B.rows,C=B.columns,Y=new It(_,C),pt=0;pt<_;pt++)for(var _t=0;_t<C;_t++)pt<=_t?Y.set(pt,_t,B.get(pt,_t)):Y.set(pt,_t,0);return Y}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),it}();function Cn(it,ot){var B=0;return Math.abs(it)>Math.abs(ot)?(B=ot/it,Math.abs(it)*Math.sqrt(1+B*B)):ot!==0?(B=it/ot,Math.abs(ot)*Math.sqrt(1+B*B)):0}var Qr=function(){function it(ot){(0,I.Z)(this,it),ot=ln.checkMatrix(ot);var B=ot.clone(),_=ot.rows,C=ot.columns,Y=new Float64Array(C),pt,_t,Mt,zt;for(Mt=0;Mt<C;Mt++){var Le=0;for(pt=Mt;pt<_;pt++)Le=Cn(Le,B.get(pt,Mt));if(Le!==0){for(B.get(Mt,Mt)<0&&(Le=-Le),pt=Mt;pt<_;pt++)B.set(pt,Mt,B.get(pt,Mt)/Le);for(B.set(Mt,Mt,B.get(Mt,Mt)+1),_t=Mt+1;_t<C;_t++){for(zt=0,pt=Mt;pt<_;pt++)zt+=B.get(pt,Mt)*B.get(pt,_t);for(zt=-zt/B.get(Mt,Mt),pt=Mt;pt<_;pt++)B.set(pt,_t,B.get(pt,_t)+zt*B.get(pt,Mt))}}Y[Mt]=-Le}this.QR=B,this.Rdiag=Y}return(0,k.Z)(it,[{key:"solve",value:function(B){B=It.checkMatrix(B);var _=this.QR,C=_.rows;if(B.rows!==C)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var Y=B.columns,pt=B.clone(),_t=_.columns,Mt,zt,Le,Me;for(Le=0;Le<_t;Le++)for(zt=0;zt<Y;zt++){for(Me=0,Mt=Le;Mt<C;Mt++)Me+=_.get(Mt,Le)*pt.get(Mt,zt);for(Me=-Me/_.get(Le,Le),Mt=Le;Mt<C;Mt++)pt.set(Mt,zt,pt.get(Mt,zt)+Me*_.get(Mt,Le))}for(Le=_t-1;Le>=0;Le--){for(zt=0;zt<Y;zt++)pt.set(Le,zt,pt.get(Le,zt)/this.Rdiag[Le]);for(Mt=0;Mt<Le;Mt++)for(zt=0;zt<Y;zt++)pt.set(Mt,zt,pt.get(Mt,zt)-pt.get(Le,zt)*_.get(Mt,Le))}return pt.subMatrix(0,_t-1,0,Y-1)}},{key:"isFullRank",value:function(){for(var B=this.QR.columns,_=0;_<B;_++)if(this.Rdiag[_]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var B=this.QR,_=B.columns,C=new It(_,_),Y,pt;for(Y=0;Y<_;Y++)for(pt=0;pt<_;pt++)Y<pt?C.set(Y,pt,B.get(Y,pt)):Y===pt?C.set(Y,pt,this.Rdiag[Y]):C.set(Y,pt,0);return C}},{key:"orthogonalMatrix",get:function(){var B=this.QR,_=B.rows,C=B.columns,Y=new It(_,C),pt,_t,Mt,zt;for(Mt=C-1;Mt>=0;Mt--){for(pt=0;pt<_;pt++)Y.set(pt,Mt,0);for(Y.set(Mt,Mt,1),_t=Mt;_t<C;_t++)if(B.get(Mt,Mt)!==0){for(zt=0,pt=Mt;pt<_;pt++)zt+=B.get(pt,Mt)*Y.get(pt,_t);for(zt=-zt/B.get(Mt,Mt),pt=Mt;pt<_;pt++)Y.set(pt,_t,Y.get(pt,_t)+zt*B.get(pt,Mt))}}return Y}}]),it}(),Gr=function(){function it(ot){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,I.Z)(this,it),ot=ln.checkMatrix(ot),ot.isEmpty())throw new Error("Matrix must be non-empty");var _=ot.rows,C=ot.columns,Y=B.computeLeftSingularVectors,pt=Y===void 0?!0:Y,_t=B.computeRightSingularVectors,Mt=_t===void 0?!0:_t,zt=B.autoTranspose,Le=zt===void 0?!1:zt,Me=Boolean(pt),qe=Boolean(Mt),br=!1,xr;if(_<C)if(!Le)xr=ot.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{xr=ot.transpose(),_=xr.rows,C=xr.columns,br=!0;var sn=Me;Me=qe,qe=sn}else xr=ot.clone();for(var Rn=Math.min(_,C),tr=Math.min(_+1,C),Sr=new Float64Array(tr),jr=new It(_,Rn),Nn=new It(C,C),gn=new Float64Array(C),ea=new Float64Array(_),ha=new Float64Array(tr),Zn=0;Zn<tr;Zn++)ha[Zn]=Zn;for(var na=Math.min(_-1,C),da=Math.max(0,Math.min(C-2,_)),Vn=Math.max(na,da),se=0;se<Vn;se++){if(se<na){Sr[se]=0;for(var Ut=se;Ut<_;Ut++)Sr[se]=Cn(Sr[se],xr.get(Ut,se));if(Sr[se]!==0){xr.get(se,se)<0&&(Sr[se]=-Sr[se]);for(var le=se;le<_;le++)xr.set(le,se,xr.get(le,se)/Sr[se]);xr.set(se,se,xr.get(se,se)+1)}Sr[se]=-Sr[se]}for(var ze=se+1;ze<C;ze++){if(se<na&&Sr[se]!==0){for(var Ie=0,We=se;We<_;We++)Ie+=xr.get(We,se)*xr.get(We,ze);Ie=-Ie/xr.get(se,se);for(var _r=se;_r<_;_r++)xr.set(_r,ze,xr.get(_r,ze)+Ie*xr.get(_r,se))}gn[ze]=xr.get(se,ze)}if(Me&&se<na)for(var nn=se;nn<_;nn++)jr.set(nn,se,xr.get(nn,se));if(se<da){gn[se]=0;for(var pn=se+1;pn<C;pn++)gn[se]=Cn(gn[se],gn[pn]);if(gn[se]!==0){gn[se+1]<0&&(gn[se]=0-gn[se]);for(var Gn=se+1;Gn<C;Gn++)gn[Gn]/=gn[se];gn[se+1]+=1}if(gn[se]=-gn[se],se+1<_&&gn[se]!==0){for(var jn=se+1;jn<_;jn++)ea[jn]=0;for(var oa=se+1;oa<_;oa++)for(var va=se+1;va<C;va++)ea[oa]+=gn[va]*xr.get(oa,va);for(var _a=se+1;_a<C;_a++)for(var fi=-gn[_a]/gn[se+1],Ba=se+1;Ba<_;Ba++)xr.set(Ba,_a,xr.get(Ba,_a)+fi*ea[Ba])}if(qe)for(var Wa=se+1;Wa<C;Wa++)Nn.set(Wa,se,gn[Wa])}}var wa=Math.min(C,_+1);if(na<C&&(Sr[na]=xr.get(na,na)),_<wa&&(Sr[wa-1]=0),da+1<wa&&(gn[da]=xr.get(da,wa-1)),gn[wa-1]=0,Me){for(var vi=na;vi<Rn;vi++){for(var ti=0;ti<_;ti++)jr.set(ti,vi,0);jr.set(vi,vi,1)}for(var Ia=na-1;Ia>=0;Ia--)if(Sr[Ia]!==0){for(var qi=Ia+1;qi<Rn;qi++){for(var gi=0,ji=Ia;ji<_;ji++)gi+=jr.get(ji,Ia)*jr.get(ji,qi);gi=-gi/jr.get(Ia,Ia);for(var Ti=Ia;Ti<_;Ti++)jr.set(Ti,qi,jr.get(Ti,qi)+gi*jr.get(Ti,Ia))}for(var ri=Ia;ri<_;ri++)jr.set(ri,Ia,-jr.get(ri,Ia));jr.set(Ia,Ia,1+jr.get(Ia,Ia));for(var No=0;No<Ia-1;No++)jr.set(No,Ia,0)}else{for(var Po=0;Po<_;Po++)jr.set(Po,Ia,0);jr.set(Ia,Ia,1)}}if(qe)for(var Ii=C-1;Ii>=0;Ii--){if(Ii<da&&gn[Ii]!==0)for(var ho=Ii+1;ho<C;ho++){for(var Ji=0,Xi=Ii+1;Xi<C;Xi++)Ji+=Nn.get(Xi,Ii)*Nn.get(Xi,ho);Ji=-Ji/Nn.get(Ii+1,Ii);for(var Ri=Ii+1;Ri<C;Ri++)Nn.set(Ri,ho,Nn.get(Ri,ho)+Ji*Nn.get(Ri,Ii))}for(var Oi=0;Oi<C;Oi++)Nn.set(Oi,Ii,0);Nn.set(Ii,Ii,1)}for(var Io=wa-1,to=0,Yi=Number.EPSILON;wa>0;){var un=void 0,vo=void 0;for(un=wa-2;un>=-1&&un!==-1;un--){var Fo=Number.MIN_VALUE+Yi*Math.abs(Sr[un]+Math.abs(Sr[un+1]));if(Math.abs(gn[un])<=Fo||Number.isNaN(gn[un])){gn[un]=0;break}}if(un===wa-2)vo=4;else{var Qa=void 0;for(Qa=wa-1;Qa>=un&&Qa!==un;Qa--){var ko=(Qa!==wa?Math.abs(gn[Qa]):0)+(Qa!==un+1?Math.abs(gn[Qa-1]):0);if(Math.abs(Sr[Qa])<=Yi*ko){Sr[Qa]=0;break}}Qa===un?vo=3:Qa===wa-1?vo=1:(vo=2,un=Qa)}switch(un++,vo){case 1:{var go=gn[wa-2];gn[wa-2]=0;for(var Li=wa-2;Li>=un;Li--){var eo=Cn(Sr[Li],go),de=Sr[Li]/eo,Ar=go/eo;if(Sr[Li]=eo,Li!==un&&(go=-Ar*gn[Li-1],gn[Li-1]=de*gn[Li-1]),qe)for(var qr=0;qr<C;qr++)eo=de*Nn.get(qr,Li)+Ar*Nn.get(qr,wa-1),Nn.set(qr,wa-1,-Ar*Nn.get(qr,Li)+de*Nn.get(qr,wa-1)),Nn.set(qr,Li,eo)}break}case 2:{var Bn=gn[un-1];gn[un-1]=0;for(var Sa=un;Sa<wa;Sa++){var ci=Cn(Sr[Sa],Bn),_i=Sr[Sa]/ci,li=Bn/ci;if(Sr[Sa]=ci,Bn=-li*gn[Sa],gn[Sa]=_i*gn[Sa],Me)for(var Ai=0;Ai<_;Ai++)ci=_i*jr.get(Ai,Sa)+li*jr.get(Ai,un-1),jr.set(Ai,un-1,-li*jr.get(Ai,Sa)+_i*jr.get(Ai,un-1)),jr.set(Ai,Sa,ci)}break}case 3:{var Ea=Math.max(Math.abs(Sr[wa-1]),Math.abs(Sr[wa-2]),Math.abs(gn[wa-2]),Math.abs(Sr[un]),Math.abs(gn[un])),ro=Sr[wa-1]/Ea,Yo=Sr[wa-2]/Ea,Bi=gn[wa-2]/Ea,no=Sr[un]/Ea,Oo=gn[un]/Ea,Vi=((Yo+ro)*(Yo-ro)+Bi*Bi)/2,po=ro*Bi*(ro*Bi),Ei=0;(Vi!==0||po!==0)&&(Vi<0?Ei=0-Math.sqrt(Vi*Vi+po):Ei=Math.sqrt(Vi*Vi+po),Ei=po/(Vi+Ei));for(var yo=(no+ro)*(no-ro)+Ei,Hi=no*Oo,ma=un;ma<wa-1;ma++){var qa=Cn(yo,Hi);qa===0&&(qa=Number.MIN_VALUE);var Mi=yo/qa,pi=Hi/qa;if(ma!==un&&(gn[ma-1]=qa),yo=Mi*Sr[ma]+pi*gn[ma],gn[ma]=Mi*gn[ma]-pi*Sr[ma],Hi=pi*Sr[ma+1],Sr[ma+1]=Mi*Sr[ma+1],qe)for(var so=0;so<C;so++)qa=Mi*Nn.get(so,ma)+pi*Nn.get(so,ma+1),Nn.set(so,ma+1,-pi*Nn.get(so,ma)+Mi*Nn.get(so,ma+1)),Nn.set(so,ma,qa);if(qa=Cn(yo,Hi),qa===0&&(qa=Number.MIN_VALUE),Mi=yo/qa,pi=Hi/qa,Sr[ma]=qa,yo=Mi*gn[ma]+pi*Sr[ma+1],Sr[ma+1]=-pi*gn[ma]+Mi*Sr[ma+1],Hi=pi*gn[ma+1],gn[ma+1]=Mi*gn[ma+1],Me&&ma<_-1)for(var Zi=0;Zi<_;Zi++)qa=Mi*jr.get(Zi,ma)+pi*jr.get(Zi,ma+1),jr.set(Zi,ma+1,-pi*jr.get(Zi,ma)+Mi*jr.get(Zi,ma+1)),jr.set(Zi,ma,qa)}gn[wa-2]=yo,to=to+1;break}case 4:{if(Sr[un]<=0&&(Sr[un]=Sr[un]<0?-Sr[un]:0,qe))for(var Fi=0;Fi<=Io;Fi++)Nn.set(Fi,un,-Nn.get(Fi,un));for(;un<Io&&!(Sr[un]>=Sr[un+1]);){var mo=Sr[un];if(Sr[un]=Sr[un+1],Sr[un+1]=mo,qe&&un<C-1)for(var uo=0;uo<C;uo++)mo=Nn.get(uo,un+1),Nn.set(uo,un+1,Nn.get(uo,un)),Nn.set(uo,un,mo);if(Me&&un<_-1)for(var bo=0;bo<_;bo++)mo=jr.get(bo,un+1),jr.set(bo,un+1,jr.get(bo,un)),jr.set(bo,un,mo);un++}to=0,wa--;break}}}if(br){var La=Nn;Nn=jr,jr=La}this.m=_,this.n=C,this.s=Sr,this.U=jr,this.V=Nn}return(0,k.Z)(it,[{key:"solve",value:function(B){for(var _=B,C=this.threshold,Y=this.s.length,pt=It.zeros(Y,Y),_t=0;_t<Y;_t++)Math.abs(this.s[_t])<=C?pt.set(_t,_t,0):pt.set(_t,_t,1/this.s[_t]);for(var Mt=this.U,zt=this.rightSingularVectors,Le=zt.mmul(pt),Me=zt.rows,qe=Mt.rows,br=It.zeros(Me,qe),xr=0;xr<Me;xr++)for(var sn=0;sn<qe;sn++){for(var Rn=0,tr=0;tr<Y;tr++)Rn+=Le.get(xr,tr)*Mt.get(sn,tr);br.set(xr,sn,Rn)}return br.mmul(_)}},{key:"solveForDiagonal",value:function(B){return this.solve(It.diag(B))}},{key:"inverse",value:function(){for(var B=this.V,_=this.threshold,C=B.rows,Y=B.columns,pt=new It(C,this.s.length),_t=0;_t<C;_t++)for(var Mt=0;Mt<Y;Mt++)Math.abs(this.s[Mt])>_&&pt.set(_t,Mt,B.get(_t,Mt)/this.s[Mt]);for(var zt=this.U,Le=zt.rows,Me=zt.columns,qe=new It(C,Le),br=0;br<C;br++)for(var xr=0;xr<Le;xr++){for(var sn=0,Rn=0;Rn<Me;Rn++)sn+=pt.get(br,Rn)*zt.get(xr,Rn);qe.set(br,xr,sn)}return qe}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var B=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,_=0,C=this.s,Y=0,pt=C.length;Y<pt;Y++)C[Y]>B&&_++;return _}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return It.diag(this.s)}}]),it}();function on(it){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return it=ln.checkMatrix(it),ot?new Gr(it).inverse():sr(it,It.eye(it.rows))}function sr(it,ot){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return it=ln.checkMatrix(it),ot=ln.checkMatrix(ot),B?new Gr(it).solve(ot):it.isSquare()?new Xr(it).solve(ot):new Qr(it).solve(ot)}function lr(it){if(it=It.checkMatrix(it),it.isSquare()){if(it.columns===0)return 1;var ot,B,_,C;if(it.columns===2)return ot=it.get(0,0),B=it.get(0,1),_=it.get(1,0),C=it.get(1,1),ot*C-B*_;if(it.columns===3){var Y,pt,_t;return Y=new Xe(it,[1,2],[1,2]),pt=new Xe(it,[1,2],[0,2]),_t=new Xe(it,[1,2],[0,1]),ot=it.get(0,0),B=it.get(0,1),_=it.get(0,2),ot*lr(Y)-B*lr(pt)+_*lr(_t)}else return new Xr(it).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Qe(it,ot){for(var B=[],_=0;_<it;_++)_!==ot&&B.push(_);return B}function $r(it,ot,B){var _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,C=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(it>C)return new Array(ot.rows+1).fill(0);for(var Y=ot.addRow(B,[0]),pt=0;pt<Y.rows;pt++)Math.abs(Y.get(pt,0))<_&&Y.set(pt,0,0);return Y.to1DArray()}function an(it){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=ot.thresholdValue,_=B===void 0?1e-9:B,C=ot.thresholdError,Y=C===void 0?1e-9:C;it=It.checkMatrix(it);for(var pt=it.rows,_t=new It(pt,pt),Mt=0;Mt<pt;Mt++){var zt=It.columnVector(it.getRow(Mt)),Le=it.subMatrixRow(Qe(pt,Mt)).transpose(),Me=new Gr(Le),qe=Me.solve(zt),br=It.sub(zt,Le.mmul(qe)).abs().max();_t.setRow(Mt,$r(br,qe,Mt,_,Y))}return _t}function bn(it){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(it=It.checkMatrix(it),it.isEmpty())return it.transpose();for(var B=new Gr(it,{autoTranspose:!0}),_=B.leftSingularVectors,C=B.rightSingularVectors,Y=B.diagonal,pt=0;pt<Y.length;pt++)Math.abs(Y[pt])>ot?Y[pt]=1/Y[pt]:Y[pt]=0;return C.mmul(It.diag(Y).mmul(_.transpose()))}function nr(it){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:it,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};it=new It(it);var _=!1;if(typeof ot=="object"&&!It.isMatrix(ot)&&!b(ot)?(B=ot,ot=it,_=!0):ot=new It(ot),it.rows!==ot.rows)throw new TypeError("Both matrices must have the same number of rows");var C=B,Y=C.center,pt=Y===void 0?!0:Y;pt&&(it=it.center("column"),_||(ot=ot.center("column")));for(var _t=it.transpose().mmul(ot),Mt=0;Mt<_t.rows;Mt++)for(var zt=0;zt<_t.columns;zt++)_t.set(Mt,zt,_t.get(Mt,zt)*(1/(it.rows-1)));return _t}function Tr(it){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:it,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};it=new It(it);var _=!1;if(typeof ot=="object"&&!It.isMatrix(ot)&&!b(ot)?(B=ot,ot=it,_=!0):ot=new It(ot),it.rows!==ot.rows)throw new TypeError("Both matrices must have the same number of rows");var C=B,Y=C.center,pt=Y===void 0?!0:Y,_t=C.scale,Mt=_t===void 0?!0:_t;pt&&(it.center("column"),_||ot.center("column")),Mt&&(it.scale("column"),_||ot.scale("column"));for(var zt=it.standardDeviation("column",{unbiased:!0}),Le=_?zt:ot.standardDeviation("column",{unbiased:!0}),Me=it.transpose().mmul(ot),qe=0;qe<Me.rows;qe++)for(var br=0;br<Me.columns;br++)Me.set(qe,br,Me.get(qe,br)*(1/(zt[qe]*Le[br]))*(1/(it.rows-1)));return Me}var ar=function(){function it(ot){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,I.Z)(this,it);var _=B.assumeSymmetric,C=_===void 0?!1:_;if(ot=ln.checkMatrix(ot),!ot.isSquare())throw new Error("Matrix is not a square matrix");if(ot.isEmpty())throw new Error("Matrix must be non-empty");var Y=ot.columns,pt=new It(Y,Y),_t=new Float64Array(Y),Mt=new Float64Array(Y),zt=ot,Le,Me,qe=!1;if(C?qe=!0:qe=ot.isSymmetric(),qe){for(Le=0;Le<Y;Le++)for(Me=0;Me<Y;Me++)pt.set(Le,Me,zt.get(Le,Me));vr(Y,Mt,_t,pt),Br(Y,Mt,_t,pt)}else{var br=new It(Y,Y),xr=new Float64Array(Y);for(Me=0;Me<Y;Me++)for(Le=0;Le<Y;Le++)br.set(Le,Me,zt.get(Le,Me));Fr(Y,br,xr,pt),kr(Y,Mt,_t,pt,br)}this.n=Y,this.e=Mt,this.d=_t,this.V=pt}return(0,k.Z)(it,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var B=this.n,_=this.e,C=this.d,Y=new It(B,B),pt,_t;for(pt=0;pt<B;pt++){for(_t=0;_t<B;_t++)Y.set(pt,_t,0);Y.set(pt,pt,C[pt]),_[pt]>0?Y.set(pt,pt+1,_[pt]):_[pt]<0&&Y.set(pt,pt-1,_[pt])}return Y}}]),it}();function vr(it,ot,B,_){var C,Y,pt,_t,Mt,zt,Le,Me;for(Mt=0;Mt<it;Mt++)B[Mt]=_.get(it-1,Mt);for(_t=it-1;_t>0;_t--){for(Me=0,pt=0,zt=0;zt<_t;zt++)Me=Me+Math.abs(B[zt]);if(Me===0)for(ot[_t]=B[_t-1],Mt=0;Mt<_t;Mt++)B[Mt]=_.get(_t-1,Mt),_.set(_t,Mt,0),_.set(Mt,_t,0);else{for(zt=0;zt<_t;zt++)B[zt]/=Me,pt+=B[zt]*B[zt];for(C=B[_t-1],Y=Math.sqrt(pt),C>0&&(Y=-Y),ot[_t]=Me*Y,pt=pt-C*Y,B[_t-1]=C-Y,Mt=0;Mt<_t;Mt++)ot[Mt]=0;for(Mt=0;Mt<_t;Mt++){for(C=B[Mt],_.set(Mt,_t,C),Y=ot[Mt]+_.get(Mt,Mt)*C,zt=Mt+1;zt<=_t-1;zt++)Y+=_.get(zt,Mt)*B[zt],ot[zt]+=_.get(zt,Mt)*C;ot[Mt]=Y}for(C=0,Mt=0;Mt<_t;Mt++)ot[Mt]/=pt,C+=ot[Mt]*B[Mt];for(Le=C/(pt+pt),Mt=0;Mt<_t;Mt++)ot[Mt]-=Le*B[Mt];for(Mt=0;Mt<_t;Mt++){for(C=B[Mt],Y=ot[Mt],zt=Mt;zt<=_t-1;zt++)_.set(zt,Mt,_.get(zt,Mt)-(C*ot[zt]+Y*B[zt]));B[Mt]=_.get(_t-1,Mt),_.set(_t,Mt,0)}}B[_t]=pt}for(_t=0;_t<it-1;_t++){if(_.set(it-1,_t,_.get(_t,_t)),_.set(_t,_t,1),pt=B[_t+1],pt!==0){for(zt=0;zt<=_t;zt++)B[zt]=_.get(zt,_t+1)/pt;for(Mt=0;Mt<=_t;Mt++){for(Y=0,zt=0;zt<=_t;zt++)Y+=_.get(zt,_t+1)*_.get(zt,Mt);for(zt=0;zt<=_t;zt++)_.set(zt,Mt,_.get(zt,Mt)-Y*B[zt])}}for(zt=0;zt<=_t;zt++)_.set(zt,_t+1,0)}for(Mt=0;Mt<it;Mt++)B[Mt]=_.get(it-1,Mt),_.set(it-1,Mt,0);_.set(it-1,it-1,1),ot[0]=0}function Br(it,ot,B,_){var C,Y,pt,_t,Mt,zt,Le,Me,qe,br,xr,sn,Rn,tr,Sr,jr,Nn;for(pt=1;pt<it;pt++)ot[pt-1]=ot[pt];ot[it-1]=0;var gn=0,ea=0,ha=Number.EPSILON;for(zt=0;zt<it;zt++){for(ea=Math.max(ea,Math.abs(B[zt])+Math.abs(ot[zt])),Le=zt;Le<it&&!(Math.abs(ot[Le])<=ha*ea);)Le++;if(Le>zt){Nn=0;do{for(Nn=Nn+1,C=B[zt],Me=(B[zt+1]-C)/(2*ot[zt]),qe=Cn(Me,1),Me<0&&(qe=-qe),B[zt]=ot[zt]/(Me+qe),B[zt+1]=ot[zt]*(Me+qe),br=B[zt+1],Y=C-B[zt],pt=zt+2;pt<it;pt++)B[pt]-=Y;for(gn=gn+Y,Me=B[Le],xr=1,sn=xr,Rn=xr,tr=ot[zt+1],Sr=0,jr=0,pt=Le-1;pt>=zt;pt--)for(Rn=sn,sn=xr,jr=Sr,C=xr*ot[pt],Y=xr*Me,qe=Cn(Me,ot[pt]),ot[pt+1]=Sr*qe,Sr=ot[pt]/qe,xr=Me/qe,Me=xr*B[pt]-Sr*C,B[pt+1]=Y+Sr*(xr*C+Sr*B[pt]),Mt=0;Mt<it;Mt++)Y=_.get(Mt,pt+1),_.set(Mt,pt+1,Sr*_.get(Mt,pt)+xr*Y),_.set(Mt,pt,xr*_.get(Mt,pt)-Sr*Y);Me=-Sr*jr*Rn*tr*ot[zt]/br,ot[zt]=Sr*Me,B[zt]=xr*Me}while(Math.abs(ot[zt])>ha*ea)}B[zt]=B[zt]+gn,ot[zt]=0}for(pt=0;pt<it-1;pt++){for(Mt=pt,Me=B[pt],_t=pt+1;_t<it;_t++)B[_t]<Me&&(Mt=_t,Me=B[_t]);if(Mt!==pt)for(B[Mt]=B[pt],B[pt]=Me,_t=0;_t<it;_t++)Me=_.get(_t,pt),_.set(_t,pt,_.get(_t,Mt)),_.set(_t,Mt,Me)}}function Fr(it,ot,B,_){var C=0,Y=it-1,pt,_t,Mt,zt,Le,Me,qe;for(Me=C+1;Me<=Y-1;Me++){for(qe=0,zt=Me;zt<=Y;zt++)qe=qe+Math.abs(ot.get(zt,Me-1));if(qe!==0){for(Mt=0,zt=Y;zt>=Me;zt--)B[zt]=ot.get(zt,Me-1)/qe,Mt+=B[zt]*B[zt];for(_t=Math.sqrt(Mt),B[Me]>0&&(_t=-_t),Mt=Mt-B[Me]*_t,B[Me]=B[Me]-_t,Le=Me;Le<it;Le++){for(pt=0,zt=Y;zt>=Me;zt--)pt+=B[zt]*ot.get(zt,Le);for(pt=pt/Mt,zt=Me;zt<=Y;zt++)ot.set(zt,Le,ot.get(zt,Le)-pt*B[zt])}for(zt=0;zt<=Y;zt++){for(pt=0,Le=Y;Le>=Me;Le--)pt+=B[Le]*ot.get(zt,Le);for(pt=pt/Mt,Le=Me;Le<=Y;Le++)ot.set(zt,Le,ot.get(zt,Le)-pt*B[Le])}B[Me]=qe*B[Me],ot.set(Me,Me-1,qe*_t)}}for(zt=0;zt<it;zt++)for(Le=0;Le<it;Le++)_.set(zt,Le,zt===Le?1:0);for(Me=Y-1;Me>=C+1;Me--)if(ot.get(Me,Me-1)!==0){for(zt=Me+1;zt<=Y;zt++)B[zt]=ot.get(zt,Me-1);for(Le=Me;Le<=Y;Le++){for(_t=0,zt=Me;zt<=Y;zt++)_t+=B[zt]*_.get(zt,Le);for(_t=_t/B[Me]/ot.get(Me,Me-1),zt=Me;zt<=Y;zt++)_.set(zt,Le,_.get(zt,Le)+_t*B[zt])}}}function kr(it,ot,B,_,C){var Y=it-1,pt=0,_t=it-1,Mt=Number.EPSILON,zt=0,Le=0,Me=0,qe=0,br=0,xr=0,sn=0,Rn=0,tr,Sr,jr,Nn,gn,ea,ha,Zn,na,da,Vn,se,Ut,le,ze;for(tr=0;tr<it;tr++)for((tr<pt||tr>_t)&&(B[tr]=C.get(tr,tr),ot[tr]=0),Sr=Math.max(tr-1,0);Sr<it;Sr++)Le=Le+Math.abs(C.get(tr,Sr));for(;Y>=pt;){for(Nn=Y;Nn>pt&&(xr=Math.abs(C.get(Nn-1,Nn-1))+Math.abs(C.get(Nn,Nn)),xr===0&&(xr=Le),!(Math.abs(C.get(Nn,Nn-1))<Mt*xr));)Nn--;if(Nn===Y)C.set(Y,Y,C.get(Y,Y)+zt),B[Y]=C.get(Y,Y),ot[Y]=0,Y--,Rn=0;else if(Nn===Y-1){if(ha=C.get(Y,Y-1)*C.get(Y-1,Y),Me=(C.get(Y-1,Y-1)-C.get(Y,Y))/2,qe=Me*Me+ha,sn=Math.sqrt(Math.abs(qe)),C.set(Y,Y,C.get(Y,Y)+zt),C.set(Y-1,Y-1,C.get(Y-1,Y-1)+zt),Zn=C.get(Y,Y),qe>=0){for(sn=Me>=0?Me+sn:Me-sn,B[Y-1]=Zn+sn,B[Y]=B[Y-1],sn!==0&&(B[Y]=Zn-ha/sn),ot[Y-1]=0,ot[Y]=0,Zn=C.get(Y,Y-1),xr=Math.abs(Zn)+Math.abs(sn),Me=Zn/xr,qe=sn/xr,br=Math.sqrt(Me*Me+qe*qe),Me=Me/br,qe=qe/br,Sr=Y-1;Sr<it;Sr++)sn=C.get(Y-1,Sr),C.set(Y-1,Sr,qe*sn+Me*C.get(Y,Sr)),C.set(Y,Sr,qe*C.get(Y,Sr)-Me*sn);for(tr=0;tr<=Y;tr++)sn=C.get(tr,Y-1),C.set(tr,Y-1,qe*sn+Me*C.get(tr,Y)),C.set(tr,Y,qe*C.get(tr,Y)-Me*sn);for(tr=pt;tr<=_t;tr++)sn=_.get(tr,Y-1),_.set(tr,Y-1,qe*sn+Me*_.get(tr,Y)),_.set(tr,Y,qe*_.get(tr,Y)-Me*sn)}else B[Y-1]=Zn+Me,B[Y]=Zn+Me,ot[Y-1]=sn,ot[Y]=-sn;Y=Y-2,Rn=0}else{if(Zn=C.get(Y,Y),na=0,ha=0,Nn<Y&&(na=C.get(Y-1,Y-1),ha=C.get(Y,Y-1)*C.get(Y-1,Y)),Rn===10){for(zt+=Zn,tr=pt;tr<=Y;tr++)C.set(tr,tr,C.get(tr,tr)-Zn);xr=Math.abs(C.get(Y,Y-1))+Math.abs(C.get(Y-1,Y-2)),Zn=na=.75*xr,ha=-.4375*xr*xr}if(Rn===30&&(xr=(na-Zn)/2,xr=xr*xr+ha,xr>0)){for(xr=Math.sqrt(xr),na<Zn&&(xr=-xr),xr=Zn-ha/((na-Zn)/2+xr),tr=pt;tr<=Y;tr++)C.set(tr,tr,C.get(tr,tr)-xr);zt+=xr,Zn=na=ha=.964}for(Rn=Rn+1,gn=Y-2;gn>=Nn&&(sn=C.get(gn,gn),br=Zn-sn,xr=na-sn,Me=(br*xr-ha)/C.get(gn+1,gn)+C.get(gn,gn+1),qe=C.get(gn+1,gn+1)-sn-br-xr,br=C.get(gn+2,gn+1),xr=Math.abs(Me)+Math.abs(qe)+Math.abs(br),Me=Me/xr,qe=qe/xr,br=br/xr,!(gn===Nn||Math.abs(C.get(gn,gn-1))*(Math.abs(qe)+Math.abs(br))<Mt*(Math.abs(Me)*(Math.abs(C.get(gn-1,gn-1))+Math.abs(sn)+Math.abs(C.get(gn+1,gn+1))))));)gn--;for(tr=gn+2;tr<=Y;tr++)C.set(tr,tr-2,0),tr>gn+2&&C.set(tr,tr-3,0);for(jr=gn;jr<=Y-1&&(le=jr!==Y-1,jr!==gn&&(Me=C.get(jr,jr-1),qe=C.get(jr+1,jr-1),br=le?C.get(jr+2,jr-1):0,Zn=Math.abs(Me)+Math.abs(qe)+Math.abs(br),Zn!==0&&(Me=Me/Zn,qe=qe/Zn,br=br/Zn)),Zn!==0);jr++)if(xr=Math.sqrt(Me*Me+qe*qe+br*br),Me<0&&(xr=-xr),xr!==0){for(jr!==gn?C.set(jr,jr-1,-xr*Zn):Nn!==gn&&C.set(jr,jr-1,-C.get(jr,jr-1)),Me=Me+xr,Zn=Me/xr,na=qe/xr,sn=br/xr,qe=qe/Me,br=br/Me,Sr=jr;Sr<it;Sr++)Me=C.get(jr,Sr)+qe*C.get(jr+1,Sr),le&&(Me=Me+br*C.get(jr+2,Sr),C.set(jr+2,Sr,C.get(jr+2,Sr)-Me*sn)),C.set(jr,Sr,C.get(jr,Sr)-Me*Zn),C.set(jr+1,Sr,C.get(jr+1,Sr)-Me*na);for(tr=0;tr<=Math.min(Y,jr+3);tr++)Me=Zn*C.get(tr,jr)+na*C.get(tr,jr+1),le&&(Me=Me+sn*C.get(tr,jr+2),C.set(tr,jr+2,C.get(tr,jr+2)-Me*br)),C.set(tr,jr,C.get(tr,jr)-Me),C.set(tr,jr+1,C.get(tr,jr+1)-Me*qe);for(tr=pt;tr<=_t;tr++)Me=Zn*_.get(tr,jr)+na*_.get(tr,jr+1),le&&(Me=Me+sn*_.get(tr,jr+2),_.set(tr,jr+2,_.get(tr,jr+2)-Me*br)),_.set(tr,jr,_.get(tr,jr)-Me),_.set(tr,jr+1,_.get(tr,jr+1)-Me*qe)}}}if(Le!==0){for(Y=it-1;Y>=0;Y--)if(Me=B[Y],qe=ot[Y],qe===0)for(Nn=Y,C.set(Y,Y,1),tr=Y-1;tr>=0;tr--){for(ha=C.get(tr,tr)-Me,br=0,Sr=Nn;Sr<=Y;Sr++)br=br+C.get(tr,Sr)*C.get(Sr,Y);if(ot[tr]<0)sn=ha,xr=br;else if(Nn=tr,ot[tr]===0?C.set(tr,Y,ha!==0?-br/ha:-br/(Mt*Le)):(Zn=C.get(tr,tr+1),na=C.get(tr+1,tr),qe=(B[tr]-Me)*(B[tr]-Me)+ot[tr]*ot[tr],ea=(Zn*xr-sn*br)/qe,C.set(tr,Y,ea),C.set(tr+1,Y,Math.abs(Zn)>Math.abs(sn)?(-br-ha*ea)/Zn:(-xr-na*ea)/sn)),ea=Math.abs(C.get(tr,Y)),Mt*ea*ea>1)for(Sr=tr;Sr<=Y;Sr++)C.set(Sr,Y,C.get(Sr,Y)/ea)}else if(qe<0)for(Nn=Y-1,Math.abs(C.get(Y,Y-1))>Math.abs(C.get(Y-1,Y))?(C.set(Y-1,Y-1,qe/C.get(Y,Y-1)),C.set(Y-1,Y,-(C.get(Y,Y)-Me)/C.get(Y,Y-1))):(ze=Z(0,-C.get(Y-1,Y),C.get(Y-1,Y-1)-Me,qe),C.set(Y-1,Y-1,ze[0]),C.set(Y-1,Y,ze[1])),C.set(Y,Y-1,0),C.set(Y,Y,1),tr=Y-2;tr>=0;tr--){for(da=0,Vn=0,Sr=Nn;Sr<=Y;Sr++)da=da+C.get(tr,Sr)*C.get(Sr,Y-1),Vn=Vn+C.get(tr,Sr)*C.get(Sr,Y);if(ha=C.get(tr,tr)-Me,ot[tr]<0)sn=ha,br=da,xr=Vn;else if(Nn=tr,ot[tr]===0?(ze=Z(-da,-Vn,ha,qe),C.set(tr,Y-1,ze[0]),C.set(tr,Y,ze[1])):(Zn=C.get(tr,tr+1),na=C.get(tr+1,tr),se=(B[tr]-Me)*(B[tr]-Me)+ot[tr]*ot[tr]-qe*qe,Ut=(B[tr]-Me)*2*qe,se===0&&Ut===0&&(se=Mt*Le*(Math.abs(ha)+Math.abs(qe)+Math.abs(Zn)+Math.abs(na)+Math.abs(sn))),ze=Z(Zn*br-sn*da+qe*Vn,Zn*xr-sn*Vn-qe*da,se,Ut),C.set(tr,Y-1,ze[0]),C.set(tr,Y,ze[1]),Math.abs(Zn)>Math.abs(sn)+Math.abs(qe)?(C.set(tr+1,Y-1,(-da-ha*C.get(tr,Y-1)+qe*C.get(tr,Y))/Zn),C.set(tr+1,Y,(-Vn-ha*C.get(tr,Y)-qe*C.get(tr,Y-1))/Zn)):(ze=Z(-br-na*C.get(tr,Y-1),-xr-na*C.get(tr,Y),sn,qe),C.set(tr+1,Y-1,ze[0]),C.set(tr+1,Y,ze[1]))),ea=Math.max(Math.abs(C.get(tr,Y-1)),Math.abs(C.get(tr,Y))),Mt*ea*ea>1)for(Sr=tr;Sr<=Y;Sr++)C.set(Sr,Y-1,C.get(Sr,Y-1)/ea),C.set(Sr,Y,C.get(Sr,Y)/ea)}for(tr=0;tr<it;tr++)if(tr<pt||tr>_t)for(Sr=tr;Sr<it;Sr++)_.set(tr,Sr,C.get(tr,Sr));for(Sr=it-1;Sr>=pt;Sr--)for(tr=pt;tr<=_t;tr++){for(sn=0,jr=pt;jr<=Math.min(Sr,_t);jr++)sn=sn+_.get(tr,jr)*C.get(jr,Sr);_.set(tr,Sr,sn)}}}function Z(it,ot,B,_){var C,Y;return Math.abs(B)>Math.abs(_)?(C=_/B,Y=B+C*_,[(it+C*ot)/Y,(ot-C*it)/Y]):(C=B/_,Y=_+C*B,[(C*it+ot)/Y,(C*ot-it)/Y])}var Te=function(){function it(ot){if((0,I.Z)(this,it),ot=ln.checkMatrix(ot),!ot.isSymmetric())throw new Error("Matrix is not symmetric");var B=ot,_=B.rows,C=new It(_,_),Y=!0,pt,_t,Mt;for(_t=0;_t<_;_t++){var zt=0;for(Mt=0;Mt<_t;Mt++){var Le=0;for(pt=0;pt<Mt;pt++)Le+=C.get(Mt,pt)*C.get(_t,pt);Le=(B.get(_t,Mt)-Le)/C.get(Mt,Mt),C.set(_t,Mt,Le),zt=zt+Le*Le}for(zt=B.get(_t,_t)-zt,Y&=zt>0,C.set(_t,_t,Math.sqrt(Math.max(zt,0))),Mt=_t+1;Mt<_;Mt++)C.set(_t,Mt,0)}this.L=C,this.positiveDefinite=Boolean(Y)}return(0,k.Z)(it,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(B){B=ln.checkMatrix(B);var _=this.L,C=_.rows;if(B.rows!==C)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var Y=B.columns,pt=B.clone(),_t,Mt,zt;for(zt=0;zt<C;zt++)for(Mt=0;Mt<Y;Mt++){for(_t=0;_t<zt;_t++)pt.set(zt,Mt,pt.get(zt,Mt)-pt.get(_t,Mt)*_.get(zt,_t));pt.set(zt,Mt,pt.get(zt,Mt)/_.get(zt,zt))}for(zt=C-1;zt>=0;zt--)for(Mt=0;Mt<Y;Mt++){for(_t=zt+1;_t<C;_t++)pt.set(zt,Mt,pt.get(zt,Mt)-pt.get(_t,Mt)*_.get(_t,zt));pt.set(zt,Mt,pt.get(zt,Mt)/_.get(zt,zt))}return pt}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),it}(),ne=(0,k.Z)(function it(ot){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,I.Z)(this,it),ot=ln.checkMatrix(ot);var _=B.Y,C=B.scaleScores,Y=C===void 0?!1:C,pt=B.maxIterations,_t=pt===void 0?1e3:pt,Mt=B.terminationCriteria,zt=Mt===void 0?1e-10:Mt,Le;if(_){if(b(_)&&typeof _[0]=="number"?_=It.columnVector(_):_=ln.checkMatrix(_),_.rows!==ot.rows)throw new Error("Y should have the same number of rows as X");Le=_.getColumnVector(0)}else Le=ot.getColumnVector(0);for(var Me=1,qe,br,xr,sn,Rn=0;Rn<_t&&Me>zt;Rn++)xr=ot.transpose().mmul(Le).div(Le.transpose().mmul(Le).get(0,0)),xr=xr.div(xr.norm()),qe=ot.mmul(xr).div(xr.transpose().mmul(xr).get(0,0)),Rn>0&&(Me=qe.clone().sub(sn).pow(2).sum()),sn=qe.clone(),_?(br=_.transpose().mmul(qe).div(qe.transpose().mmul(qe).get(0,0)),br=br.div(br.norm()),Le=_.mmul(br).div(br.transpose().mmul(br).get(0,0))):Le=qe;if(_){var tr=ot.transpose().mmul(qe).div(qe.transpose().mmul(qe).get(0,0));tr=tr.div(tr.norm());var Sr=ot.clone().sub(qe.clone().mmul(tr.transpose())),jr=Le.transpose().mmul(qe).div(qe.transpose().mmul(qe).get(0,0)),Nn=_.clone().sub(qe.clone().mulS(jr.get(0,0)).mmul(br.transpose()));this.t=qe,this.p=tr.transpose(),this.w=xr.transpose(),this.q=br,this.u=Le,this.s=qe.transpose().mmul(qe),this.xResidual=Sr,this.yResidual=Nn,this.betas=jr}else this.w=xr.transpose(),this.s=qe.transpose().mmul(qe).sqrt(),Y?this.t=qe.clone().div(this.s.get(0,0)):this.t=qe,this.xResidual=ot.sub(qe.mmul(xr.transpose()))})},27279:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return Re}});var L=R(22122),z=R(96156),F=R(8812),I=R(94184),k=R.n(I),D=R(85061),b=R(6610),E=R(5991),p=R(10379),y=R(54070),g=R(90484),T=R(50344),x=R(67294),S=R(96774),N=R.n(S),m=R(81253),d=R(63441),V=R(28481),Q=x.forwardRef(function(me,Ae){var Be,Ke=me.prefixCls,$t=me.forceRender,ce=me.className,we=me.style,Pe=me.children,ye=me.isActive,Bt=me.role,re=x.useState(ye||$t),Ee=(0,V.Z)(re,2),It=Ee[0],Et=Ee[1];return x.useEffect(function(){($t||ye)&&Et(!0)},[$t,ye]),It?x.createElement("div",{ref:Ae,className:k()("".concat(Ke,"-content"),(Be={},(0,z.Z)(Be,"".concat(Ke,"-content-active"),ye),(0,z.Z)(Be,"".concat(Ke,"-content-inactive"),!ye),Be),ce),style:we,role:Bt},x.createElement("div",{className:"".concat(Ke,"-content-box")},Pe)):null});Q.displayName="PanelContent";var j=Q,X=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],K=function(me){(0,p.Z)(Be,me);var Ae=(0,y.Z)(Be);function Be(){var Ke;(0,b.Z)(this,Be);for(var $t=arguments.length,ce=new Array($t),we=0;we<$t;we++)ce[we]=arguments[we];return Ke=Ae.call.apply(Ae,[this].concat(ce)),Ke.onItemClick=function(){var Pe=Ke.props,ye=Pe.onItemClick,Bt=Pe.panelKey;typeof ye=="function"&&ye(Bt)},Ke.handleKeyPress=function(Pe){(Pe.key==="Enter"||Pe.keyCode===13||Pe.which===13)&&Ke.onItemClick()},Ke.renderIcon=function(){var Pe=Ke.props,ye=Pe.showArrow,Bt=Pe.expandIcon,re=Pe.prefixCls,Ee=Pe.collapsible;if(!ye)return null;var It=typeof Bt=="function"?Bt(Ke.props):x.createElement("i",{className:"arrow"});return It&&x.createElement("div",{className:"".concat(re,"-expand-icon"),onClick:Ee==="header"||Ee==="icon"?Ke.onItemClick:null},It)},Ke.renderTitle=function(){var Pe=Ke.props,ye=Pe.header,Bt=Pe.prefixCls,re=Pe.collapsible;return x.createElement("span",{className:"".concat(Bt,"-header-text"),onClick:re==="header"?Ke.onItemClick:null},ye)},Ke}return(0,E.Z)(Be,[{key:"shouldComponentUpdate",value:function($t){return!N()(this.props,$t)}},{key:"render",value:function(){var $t,ce,we=this.props,Pe=we.className,ye=we.id,Bt=we.style,re=we.prefixCls,Ee=we.headerClass,It=we.children,Et=we.isActive,Wt=we.destroyInactivePanel,fe=we.accordion,Fe=we.forceRender,$e=we.openMotion,Lt=we.extra,Ne=we.collapsible,Xe=(0,m.Z)(we,X),Dr=Ne==="disabled",ur=Ne==="header",Or=Ne==="icon",ln=k()(($t={},(0,z.Z)($t,"".concat(re,"-item"),!0),(0,z.Z)($t,"".concat(re,"-item-active"),Et),(0,z.Z)($t,"".concat(re,"-item-disabled"),Dr),$t),Pe),fn=k()("".concat(re,"-header"),(ce={},(0,z.Z)(ce,Ee,Ee),(0,z.Z)(ce,"".concat(re,"-header-collapsible-only"),ur),(0,z.Z)(ce,"".concat(re,"-icon-collapsible-only"),Or),ce)),Xr={className:fn,"aria-expanded":Et,"aria-disabled":Dr,onKeyPress:this.handleKeyPress};!ur&&!Or&&(Xr.onClick=this.onItemClick,Xr.role=fe?"tab":"button",Xr.tabIndex=Dr?-1:0);var Cn=Lt!=null&&typeof Lt!="boolean";return delete Xe.header,delete Xe.panelKey,delete Xe.onItemClick,delete Xe.showArrow,delete Xe.expandIcon,x.createElement("div",(0,L.Z)({},Xe,{className:ln,style:Bt,id:ye}),x.createElement("div",Xr,this.renderIcon(),this.renderTitle(),Cn&&x.createElement("div",{className:"".concat(re,"-extra")},Lt)),x.createElement(d.default,(0,L.Z)({visible:Et,leavedClassName:"".concat(re,"-content-hidden")},$e,{forceRender:Fe,removeOnLeave:Wt}),function(Qr,Gr){var on=Qr.className,sr=Qr.style;return x.createElement(j,{ref:Gr,prefixCls:re,className:on,style:sr,isActive:Et,forceRender:Fe,role:fe?"tabpanel":null},It)}))}}]),Be}(x.Component);K.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var J=K;function rt(me){var Ae=me;if(!Array.isArray(Ae)){var Be=(0,g.Z)(Ae);Ae=Be==="number"||Be==="string"?[Ae]:[]}return Ae.map(function(Ke){return String(Ke)})}var tt=function(me){(0,p.Z)(Be,me);var Ae=(0,y.Z)(Be);function Be(Ke){var $t;(0,b.Z)(this,Be),$t=Ae.call(this,Ke),$t.onClickItem=function(ye){var Bt=$t.state.activeKey;if($t.props.accordion)Bt=Bt[0]===ye?[]:[ye];else{Bt=(0,D.Z)(Bt);var re=Bt.indexOf(ye),Ee=re>-1;Ee?Bt.splice(re,1):Bt.push(ye)}$t.setActiveKey(Bt)},$t.getNewChild=function(ye,Bt){if(!ye)return null;var re=$t.state.activeKey,Ee=$t.props,It=Ee.prefixCls,Et=Ee.openMotion,Wt=Ee.accordion,fe=Ee.destroyInactivePanel,Fe=Ee.expandIcon,$e=Ee.collapsible,Lt=ye.key||String(Bt),Ne=ye.props,Xe=Ne.header,Dr=Ne.headerClass,ur=Ne.destroyInactivePanel,Or=Ne.collapsible,ln=!1;Wt?ln=re[0]===Lt:ln=re.indexOf(Lt)>-1;var fn=Or!=null?Or:$e,Xr={key:Lt,panelKey:Lt,header:Xe,headerClass:Dr,isActive:ln,prefixCls:It,destroyInactivePanel:ur!=null?ur:fe,openMotion:Et,accordion:Wt,children:ye.props.children,onItemClick:fn==="disabled"?null:$t.onClickItem,expandIcon:Fe,collapsible:fn};return typeof ye.type=="string"?ye:(Object.keys(Xr).forEach(function(Cn){typeof Xr[Cn]=="undefined"&&delete Xr[Cn]}),x.cloneElement(ye,Xr))},$t.getItems=function(){var ye=$t.props.children;return(0,T.Z)(ye).map($t.getNewChild)},$t.setActiveKey=function(ye){"activeKey"in $t.props||$t.setState({activeKey:ye}),$t.props.onChange($t.props.accordion?ye[0]:ye)};var ce=Ke.activeKey,we=Ke.defaultActiveKey,Pe=we;return"activeKey"in Ke&&(Pe=ce),$t.state={activeKey:rt(Pe)},$t}return(0,E.Z)(Be,[{key:"shouldComponentUpdate",value:function($t,ce){return!N()(this.props,$t)||!N()(this.state,ce)}},{key:"render",value:function(){var $t,ce=this.props,we=ce.prefixCls,Pe=ce.className,ye=ce.style,Bt=ce.accordion,re=k()(($t={},(0,z.Z)($t,we,!0),(0,z.Z)($t,Pe,!!Pe),$t));return x.createElement("div",{className:re,style:ye,role:Bt?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function($t){var ce={};return"activeKey"in $t&&(ce.activeKey=rt($t.activeKey)),ce}}]),Be}(x.Component);tt.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},tt.Panel=J;var nt=tt,lt=nt,xt=nt.Panel,jt=R(98423),Dt=R(53124),Zt=R(33603),Vt=R(96159),ue=function(Ae){var Be=x.useContext(Dt.E_),Ke=Be.getPrefixCls,$t=Ae.prefixCls,ce=Ae.className,we=ce===void 0?"":ce,Pe=Ae.showArrow,ye=Pe===void 0?!0:Pe,Bt=Ke("collapse",$t),re=k()((0,z.Z)({},"".concat(Bt,"-no-arrow"),!ye),we);return x.createElement(lt.Panel,(0,L.Z)({},Ae,{prefixCls:Bt,className:re}))},dt=ue,Ot=function(Ae){var Be,Ke=x.useContext(Dt.E_),$t=Ke.getPrefixCls,ce=Ke.direction,we=Ae.prefixCls,Pe=Ae.className,ye=Pe===void 0?"":Pe,Bt=Ae.bordered,re=Bt===void 0?!0:Bt,Ee=Ae.ghost,It=Ae.expandIconPosition,Et=It===void 0?"start":It,Wt=$t("collapse",we),fe=x.useMemo(function(){return Et==="left"?"start":Et==="right"?"end":Et},[Et]),Fe=function(){var Dr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ur=Ae.expandIcon,Or=ur?ur(Dr):x.createElement(F.Z,{rotate:Dr.isActive?90:void 0});return(0,Vt.Tm)(Or,function(){return{className:k()(Or.props.className,"".concat(Wt,"-arrow"))}})},$e=k()("".concat(Wt,"-icon-position-").concat(fe),(Be={},(0,z.Z)(Be,"".concat(Wt,"-borderless"),!re),(0,z.Z)(Be,"".concat(Wt,"-rtl"),ce==="rtl"),(0,z.Z)(Be,"".concat(Wt,"-ghost"),!!Ee),Be),ye),Lt=(0,L.Z)((0,L.Z)({},Zt.ZP),{motionAppear:!1,leavedClassName:"".concat(Wt,"-content-hidden")}),Ne=function(){var Dr=Ae.children;return(0,T.Z)(Dr).map(function(ur,Or){var ln;if((ln=ur.props)===null||ln===void 0?void 0:ln.disabled){var fn=ur.key||String(Or),Xr=ur.props,Cn=Xr.disabled,Qr=Xr.collapsible,Gr=(0,L.Z)((0,L.Z)({},(0,jt.Z)(ur.props,["disabled"])),{key:fn,collapsible:Qr!=null?Qr:Cn?"disabled":void 0});return(0,Vt.Tm)(ur,Gr)}return ur})};return x.createElement(lt,(0,L.Z)({openMotion:Lt},Ae,{expandIcon:Fe,prefixCls:Wt,className:$e}),Ne())};Ot.Panel=dt;var ee=Ot,Re=ee},7359:function(Mr,G,R){"use strict";var L=R(38663),z=R.n(L),F=R(50596),I=R.n(F)},48168:function(Mr,G,R){var L=R(39092),z={};for(var F in L)L.hasOwnProperty(F)&&(z[L[F]]=F);var I=Mr.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var k in I)if(I.hasOwnProperty(k)){if(!("channels"in I[k]))throw new Error("missing channels property: "+k);if(!("labels"in I[k]))throw new Error("missing channel labels property: "+k);if(I[k].labels.length!==I[k].channels)throw new Error("channel and label counts mismatch: "+k);var D=I[k].channels,b=I[k].labels;delete I[k].channels,delete I[k].labels,Object.defineProperty(I[k],"channels",{value:D}),Object.defineProperty(I[k],"labels",{value:b})}I.rgb.hsl=function(p){var y=p[0]/255,g=p[1]/255,T=p[2]/255,x=Math.min(y,g,T),S=Math.max(y,g,T),N=S-x,m,d,V;return S===x?m=0:y===S?m=(g-T)/N:g===S?m=2+(T-y)/N:T===S&&(m=4+(y-g)/N),m=Math.min(m*60,360),m<0&&(m+=360),V=(x+S)/2,S===x?d=0:V<=.5?d=N/(S+x):d=N/(2-S-x),[m,d*100,V*100]},I.rgb.hsv=function(p){var y,g,T,x,S,N=p[0]/255,m=p[1]/255,d=p[2]/255,V=Math.max(N,m,d),Q=V-Math.min(N,m,d),j=function(X){return(V-X)/6/Q+1/2};return Q===0?x=S=0:(S=Q/V,y=j(N),g=j(m),T=j(d),N===V?x=T-g:m===V?x=1/3+y-T:d===V&&(x=2/3+g-y),x<0?x+=1:x>1&&(x-=1)),[x*360,S*100,V*100]},I.rgb.hwb=function(p){var y=p[0],g=p[1],T=p[2],x=I.rgb.hsl(p)[0],S=1/255*Math.min(y,Math.min(g,T));return T=1-1/255*Math.max(y,Math.max(g,T)),[x,S*100,T*100]},I.rgb.cmyk=function(p){var y=p[0]/255,g=p[1]/255,T=p[2]/255,x,S,N,m;return m=Math.min(1-y,1-g,1-T),x=(1-y-m)/(1-m)||0,S=(1-g-m)/(1-m)||0,N=(1-T-m)/(1-m)||0,[x*100,S*100,N*100,m*100]};function E(p,y){return Math.pow(p[0]-y[0],2)+Math.pow(p[1]-y[1],2)+Math.pow(p[2]-y[2],2)}I.rgb.keyword=function(p){var y=z[p];if(y)return y;var g=Infinity,T;for(var x in L)if(L.hasOwnProperty(x)){var S=L[x],N=E(p,S);N<g&&(g=N,T=x)}return T},I.keyword.rgb=function(p){return L[p]},I.rgb.xyz=function(p){var y=p[0]/255,g=p[1]/255,T=p[2]/255;y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92,g=g>.04045?Math.pow((g+.055)/1.055,2.4):g/12.92,T=T>.04045?Math.pow((T+.055)/1.055,2.4):T/12.92;var x=y*.4124+g*.3576+T*.1805,S=y*.2126+g*.7152+T*.0722,N=y*.0193+g*.1192+T*.9505;return[x*100,S*100,N*100]},I.rgb.lab=function(p){var y=I.rgb.xyz(p),g=y[0],T=y[1],x=y[2],S,N,m;return g/=95.047,T/=100,x/=108.883,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,T=T>.008856?Math.pow(T,1/3):7.787*T+16/116,x=x>.008856?Math.pow(x,1/3):7.787*x+16/116,S=116*T-16,N=500*(g-T),m=200*(T-x),[S,N,m]},I.hsl.rgb=function(p){var y=p[0]/360,g=p[1]/100,T=p[2]/100,x,S,N,m,d;if(g===0)return d=T*255,[d,d,d];T<.5?S=T*(1+g):S=T+g-T*g,x=2*T-S,m=[0,0,0];for(var V=0;V<3;V++)N=y+1/3*-(V-1),N<0&&N++,N>1&&N--,6*N<1?d=x+(S-x)*6*N:2*N<1?d=S:3*N<2?d=x+(S-x)*(2/3-N)*6:d=x,m[V]=d*255;return m},I.hsl.hsv=function(p){var y=p[0],g=p[1]/100,T=p[2]/100,x=g,S=Math.max(T,.01),N,m;return T*=2,g*=T<=1?T:2-T,x*=S<=1?S:2-S,m=(T+g)/2,N=T===0?2*x/(S+x):2*g/(T+g),[y,N*100,m*100]},I.hsv.rgb=function(p){var y=p[0]/60,g=p[1]/100,T=p[2]/100,x=Math.floor(y)%6,S=y-Math.floor(y),N=255*T*(1-g),m=255*T*(1-g*S),d=255*T*(1-g*(1-S));switch(T*=255,x){case 0:return[T,d,N];case 1:return[m,T,N];case 2:return[N,T,d];case 3:return[N,m,T];case 4:return[d,N,T];case 5:return[T,N,m]}},I.hsv.hsl=function(p){var y=p[0],g=p[1]/100,T=p[2]/100,x=Math.max(T,.01),S,N,m;return m=(2-g)*T,S=(2-g)*x,N=g*x,N/=S<=1?S:2-S,N=N||0,m/=2,[y,N*100,m*100]},I.hwb.rgb=function(p){var y=p[0]/360,g=p[1]/100,T=p[2]/100,x=g+T,S,N,m,d;x>1&&(g/=x,T/=x),S=Math.floor(6*y),N=1-T,m=6*y-S,(S&1)!=0&&(m=1-m),d=g+m*(N-g);var V,Q,j;switch(S){default:case 6:case 0:V=N,Q=d,j=g;break;case 1:V=d,Q=N,j=g;break;case 2:V=g,Q=N,j=d;break;case 3:V=g,Q=d,j=N;break;case 4:V=d,Q=g,j=N;break;case 5:V=N,Q=g,j=d;break}return[V*255,Q*255,j*255]},I.cmyk.rgb=function(p){var y=p[0]/100,g=p[1]/100,T=p[2]/100,x=p[3]/100,S,N,m;return S=1-Math.min(1,y*(1-x)+x),N=1-Math.min(1,g*(1-x)+x),m=1-Math.min(1,T*(1-x)+x),[S*255,N*255,m*255]},I.xyz.rgb=function(p){var y=p[0]/100,g=p[1]/100,T=p[2]/100,x,S,N;return x=y*3.2406+g*-1.5372+T*-.4986,S=y*-.9689+g*1.8758+T*.0415,N=y*.0557+g*-.204+T*1.057,x=x>.0031308?1.055*Math.pow(x,1/2.4)-.055:x*12.92,S=S>.0031308?1.055*Math.pow(S,1/2.4)-.055:S*12.92,N=N>.0031308?1.055*Math.pow(N,1/2.4)-.055:N*12.92,x=Math.min(Math.max(0,x),1),S=Math.min(Math.max(0,S),1),N=Math.min(Math.max(0,N),1),[x*255,S*255,N*255]},I.xyz.lab=function(p){var y=p[0],g=p[1],T=p[2],x,S,N;return y/=95.047,g/=100,T/=108.883,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,T=T>.008856?Math.pow(T,1/3):7.787*T+16/116,x=116*g-16,S=500*(y-g),N=200*(g-T),[x,S,N]},I.lab.xyz=function(p){var y=p[0],g=p[1],T=p[2],x,S,N;S=(y+16)/116,x=g/500+S,N=S-T/200;var m=Math.pow(S,3),d=Math.pow(x,3),V=Math.pow(N,3);return S=m>.008856?m:(S-16/116)/7.787,x=d>.008856?d:(x-16/116)/7.787,N=V>.008856?V:(N-16/116)/7.787,x*=95.047,S*=100,N*=108.883,[x,S,N]},I.lab.lch=function(p){var y=p[0],g=p[1],T=p[2],x,S,N;return x=Math.atan2(T,g),S=x*360/2/Math.PI,S<0&&(S+=360),N=Math.sqrt(g*g+T*T),[y,N,S]},I.lch.lab=function(p){var y=p[0],g=p[1],T=p[2],x,S,N;return N=T/360*2*Math.PI,x=g*Math.cos(N),S=g*Math.sin(N),[y,x,S]},I.rgb.ansi16=function(p){var y=p[0],g=p[1],T=p[2],x=1 in arguments?arguments[1]:I.rgb.hsv(p)[2];if(x=Math.round(x/50),x===0)return 30;var S=30+(Math.round(T/255)<<2|Math.round(g/255)<<1|Math.round(y/255));return x===2&&(S+=60),S},I.hsv.ansi16=function(p){return I.rgb.ansi16(I.hsv.rgb(p),p[2])},I.rgb.ansi256=function(p){var y=p[0],g=p[1],T=p[2];if(y===g&&g===T)return y<8?16:y>248?231:Math.round((y-8)/247*24)+232;var x=16+36*Math.round(y/255*5)+6*Math.round(g/255*5)+Math.round(T/255*5);return x},I.ansi16.rgb=function(p){var y=p%10;if(y===0||y===7)return p>50&&(y+=3.5),y=y/10.5*255,[y,y,y];var g=(~~(p>50)+1)*.5,T=(y&1)*g*255,x=(y>>1&1)*g*255,S=(y>>2&1)*g*255;return[T,x,S]},I.ansi256.rgb=function(p){if(p>=232){var y=(p-232)*10+8;return[y,y,y]}p-=16;var g,T=Math.floor(p/36)/5*255,x=Math.floor((g=p%36)/6)/5*255,S=g%6/5*255;return[T,x,S]},I.rgb.hex=function(p){var y=((Math.round(p[0])&255)<<16)+((Math.round(p[1])&255)<<8)+(Math.round(p[2])&255),g=y.toString(16).toUpperCase();return"000000".substring(g.length)+g},I.hex.rgb=function(p){var y=p.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!y)return[0,0,0];var g=y[0];y[0].length===3&&(g=g.split("").map(function(m){return m+m}).join(""));var T=parseInt(g,16),x=T>>16&255,S=T>>8&255,N=T&255;return[x,S,N]},I.rgb.hcg=function(p){var y=p[0]/255,g=p[1]/255,T=p[2]/255,x=Math.max(Math.max(y,g),T),S=Math.min(Math.min(y,g),T),N=x-S,m,d;return N<1?m=S/(1-N):m=0,N<=0?d=0:x===y?d=(g-T)/N%6:x===g?d=2+(T-y)/N:d=4+(y-g)/N+4,d/=6,d%=1,[d*360,N*100,m*100]},I.hsl.hcg=function(p){var y=p[1]/100,g=p[2]/100,T=1,x=0;return g<.5?T=2*y*g:T=2*y*(1-g),T<1&&(x=(g-.5*T)/(1-T)),[p[0],T*100,x*100]},I.hsv.hcg=function(p){var y=p[1]/100,g=p[2]/100,T=y*g,x=0;return T<1&&(x=(g-T)/(1-T)),[p[0],T*100,x*100]},I.hcg.rgb=function(p){var y=p[0]/360,g=p[1]/100,T=p[2]/100;if(g===0)return[T*255,T*255,T*255];var x=[0,0,0],S=y%1*6,N=S%1,m=1-N,d=0;switch(Math.floor(S)){case 0:x[0]=1,x[1]=N,x[2]=0;break;case 1:x[0]=m,x[1]=1,x[2]=0;break;case 2:x[0]=0,x[1]=1,x[2]=N;break;case 3:x[0]=0,x[1]=m,x[2]=1;break;case 4:x[0]=N,x[1]=0,x[2]=1;break;default:x[0]=1,x[1]=0,x[2]=m}return d=(1-g)*T,[(g*x[0]+d)*255,(g*x[1]+d)*255,(g*x[2]+d)*255]},I.hcg.hsv=function(p){var y=p[1]/100,g=p[2]/100,T=y+g*(1-y),x=0;return T>0&&(x=y/T),[p[0],x*100,T*100]},I.hcg.hsl=function(p){var y=p[1]/100,g=p[2]/100,T=g*(1-y)+.5*y,x=0;return T>0&&T<.5?x=y/(2*T):T>=.5&&T<1&&(x=y/(2*(1-T))),[p[0],x*100,T*100]},I.hcg.hwb=function(p){var y=p[1]/100,g=p[2]/100,T=y+g*(1-y);return[p[0],(T-y)*100,(1-T)*100]},I.hwb.hcg=function(p){var y=p[1]/100,g=p[2]/100,T=1-g,x=T-y,S=0;return x<1&&(S=(T-x)/(1-x)),[p[0],x*100,S*100]},I.apple.rgb=function(p){return[p[0]/65535*255,p[1]/65535*255,p[2]/65535*255]},I.rgb.apple=function(p){return[p[0]/255*65535,p[1]/255*65535,p[2]/255*65535]},I.gray.rgb=function(p){return[p[0]/100*255,p[0]/100*255,p[0]/100*255]},I.gray.hsl=I.gray.hsv=function(p){return[0,0,p[0]]},I.gray.hwb=function(p){return[0,100,p[0]]},I.gray.cmyk=function(p){return[0,0,0,p[0]]},I.gray.lab=function(p){return[p[0],0,0]},I.gray.hex=function(p){var y=Math.round(p[0]/100*255)&255,g=(y<<16)+(y<<8)+y,T=g.toString(16).toUpperCase();return"000000".substring(T.length)+T},I.rgb.gray=function(p){var y=(p[0]+p[1]+p[2])/3;return[y/255*100]}},12085:function(Mr,G,R){var L=R(48168),z=R(4111),F={},I=Object.keys(L);function k(b){var E=function(p){return p==null?p:(arguments.length>1&&(p=Array.prototype.slice.call(arguments)),b(p))};return"conversion"in b&&(E.conversion=b.conversion),E}function D(b){var E=function(p){if(p==null)return p;arguments.length>1&&(p=Array.prototype.slice.call(arguments));var y=b(p);if(typeof y=="object")for(var g=y.length,T=0;T<g;T++)y[T]=Math.round(y[T]);return y};return"conversion"in b&&(E.conversion=b.conversion),E}I.forEach(function(b){F[b]={},Object.defineProperty(F[b],"channels",{value:L[b].channels}),Object.defineProperty(F[b],"labels",{value:L[b].labels});var E=z(b),p=Object.keys(E);p.forEach(function(y){var g=E[y];F[b][y]=D(g),F[b][y].raw=k(g)})}),Mr.exports=F},39092:function(Mr){"use strict";Mr.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},4111:function(Mr,G,R){var L=R(48168);function z(){for(var D={},b=Object.keys(L),E=b.length,p=0;p<E;p++)D[b[p]]={distance:-1,parent:null};return D}function F(D){var b=z(),E=[D];for(b[D].distance=0;E.length;)for(var p=E.pop(),y=Object.keys(L[p]),g=y.length,T=0;T<g;T++){var x=y[T],S=b[x];S.distance===-1&&(S.distance=b[p].distance+1,S.parent=p,E.unshift(x))}return b}function I(D,b){return function(E){return b(D(E))}}function k(D,b){for(var E=[b[D].parent,D],p=L[b[D].parent][D],y=b[D].parent;b[y].parent;)E.unshift(b[y].parent),p=I(L[b[y].parent][y],p),y=b[y].parent;return p.conversion=E,p}Mr.exports=function(D){for(var b=F(D),E={},p=Object.keys(b),y=p.length,g=0;g<y;g++){var T=p[g],x=b[T];x.parent!==null&&(E[T]=k(T,b))}return E}},8874:function(Mr){"use strict";Mr.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(Mr,G,R){var L=R(8874),z=R(86851),F=Object.hasOwnProperty,I=Object.create(null);for(var k in L)F.call(L,k)&&(I[L[k]]=k);var D=Mr.exports={to:{},get:{}};D.get=function(p){var y=p.substring(0,3).toLowerCase(),g,T;switch(y){case"hsl":g=D.get.hsl(p),T="hsl";break;case"hwb":g=D.get.hwb(p),T="hwb";break;default:g=D.get.rgb(p),T="rgb";break}return g?{model:T,value:g}:null},D.get.rgb=function(p){if(!p)return null;var y=/^#([a-f0-9]{3,4})$/i,g=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,T=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,x=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,S=/^(\w+)$/,N=[0,0,0,1],m,d,V;if(m=p.match(g)){for(V=m[2],m=m[1],d=0;d<3;d++){var Q=d*2;N[d]=parseInt(m.slice(Q,Q+2),16)}V&&(N[3]=parseInt(V,16)/255)}else if(m=p.match(y)){for(m=m[1],V=m[3],d=0;d<3;d++)N[d]=parseInt(m[d]+m[d],16);V&&(N[3]=parseInt(V+V,16)/255)}else if(m=p.match(T)){for(d=0;d<3;d++)N[d]=parseInt(m[d+1],0);m[4]&&(m[5]?N[3]=parseFloat(m[4])*.01:N[3]=parseFloat(m[4]))}else if(m=p.match(x)){for(d=0;d<3;d++)N[d]=Math.round(parseFloat(m[d+1])*2.55);m[4]&&(m[5]?N[3]=parseFloat(m[4])*.01:N[3]=parseFloat(m[4]))}else return(m=p.match(S))?m[1]==="transparent"?[0,0,0,0]:F.call(L,m[1])?(N=L[m[1]],N[3]=1,N):null:null;for(d=0;d<3;d++)N[d]=b(N[d],0,255);return N[3]=b(N[3],0,1),N},D.get.hsl=function(p){if(!p)return null;var y=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,g=p.match(y);if(g){var T=parseFloat(g[4]),x=(parseFloat(g[1])%360+360)%360,S=b(parseFloat(g[2]),0,100),N=b(parseFloat(g[3]),0,100),m=b(isNaN(T)?1:T,0,1);return[x,S,N,m]}return null},D.get.hwb=function(p){if(!p)return null;var y=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,g=p.match(y);if(g){var T=parseFloat(g[4]),x=(parseFloat(g[1])%360+360)%360,S=b(parseFloat(g[2]),0,100),N=b(parseFloat(g[3]),0,100),m=b(isNaN(T)?1:T,0,1);return[x,S,N,m]}return null},D.to.hex=function(){var p=z(arguments);return"#"+E(p[0])+E(p[1])+E(p[2])+(p[3]<1?E(Math.round(p[3]*255)):"")},D.to.rgb=function(){var p=z(arguments);return p.length<4||p[3]===1?"rgb("+Math.round(p[0])+", "+Math.round(p[1])+", "+Math.round(p[2])+")":"rgba("+Math.round(p[0])+", "+Math.round(p[1])+", "+Math.round(p[2])+", "+p[3]+")"},D.to.rgb.percent=function(){var p=z(arguments),y=Math.round(p[0]/255*100),g=Math.round(p[1]/255*100),T=Math.round(p[2]/255*100);return p.length<4||p[3]===1?"rgb("+y+"%, "+g+"%, "+T+"%)":"rgba("+y+"%, "+g+"%, "+T+"%, "+p[3]+")"},D.to.hsl=function(){var p=z(arguments);return p.length<4||p[3]===1?"hsl("+p[0]+", "+p[1]+"%, "+p[2]+"%)":"hsla("+p[0]+", "+p[1]+"%, "+p[2]+"%, "+p[3]+")"},D.to.hwb=function(){var p=z(arguments),y="";return p.length>=4&&p[3]!==1&&(y=", "+p[3]),"hwb("+p[0]+", "+p[1]+"%, "+p[2]+"%"+y+")"},D.to.keyword=function(p){return I[p.slice(0,3)]};function b(p,y,g){return Math.min(Math.max(y,p),g)}function E(p){var y=Math.round(p).toString(16).toUpperCase();return y.length<2?"0"+y:y}},6767:function(Mr,G,R){"use strict";var L=R(19818),z=R(12085),F=[].slice,I=["keyword","gray","hex"],k={};Object.keys(z).forEach(function(S){k[F.call(z[S].labels).sort().join("")]=S});var D={};function b(S,N){if(!(this instanceof b))return new b(S,N);if(N&&N in I&&(N=null),N&&!(N in z))throw new Error("Unknown model: "+N);var m,d;if(S==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(S instanceof b)this.model=S.model,this.color=S.color.slice(),this.valpha=S.valpha;else if(typeof S=="string"){var V=L.get(S);if(V===null)throw new Error("Unable to parse color from string: "+S);this.model=V.model,d=z[this.model].channels,this.color=V.value.slice(0,d),this.valpha=typeof V.value[d]=="number"?V.value[d]:1}else if(S.length){this.model=N||"rgb",d=z[this.model].channels;var Q=F.call(S,0,d);this.color=x(Q,d),this.valpha=typeof S[d]=="number"?S[d]:1}else if(typeof S=="number")S&=16777215,this.model="rgb",this.color=[S>>16&255,S>>8&255,S&255],this.valpha=1;else{this.valpha=1;var j=Object.keys(S);"alpha"in S&&(j.splice(j.indexOf("alpha"),1),this.valpha=typeof S.alpha=="number"?S.alpha:0);var X=j.sort().join("");if(!(X in k))throw new Error("Unable to parse color from object: "+JSON.stringify(S));this.model=k[X];var K=z[this.model].labels,J=[];for(m=0;m<K.length;m++)J.push(S[K[m]]);this.color=x(J)}if(D[this.model])for(d=z[this.model].channels,m=0;m<d;m++){var rt=D[this.model][m];rt&&(this.color[m]=rt(this.color[m]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}b.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(S){var N=this.model in L.to?this:this.rgb();N=N.round(typeof S=="number"?S:1);var m=N.valpha===1?N.color:N.color.concat(this.valpha);return L.to[N.model](m)},percentString:function(S){var N=this.rgb().round(typeof S=="number"?S:1),m=N.valpha===1?N.color:N.color.concat(this.valpha);return L.to.rgb.percent(m)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var S={},N=z[this.model].channels,m=z[this.model].labels,d=0;d<N;d++)S[m[d]]=this.color[d];return this.valpha!==1&&(S.alpha=this.valpha),S},unitArray:function(){var S=this.rgb().color;return S[0]/=255,S[1]/=255,S[2]/=255,this.valpha!==1&&S.push(this.valpha),S},unitObject:function(){var S=this.rgb().object();return S.r/=255,S.g/=255,S.b/=255,this.valpha!==1&&(S.alpha=this.valpha),S},round:function(S){return S=Math.max(S||0,0),new b(this.color.map(p(S)).concat(this.valpha),this.model)},alpha:function(S){return arguments.length?new b(this.color.concat(Math.max(0,Math.min(1,S))),this.model):this.valpha},red:y("rgb",0,g(255)),green:y("rgb",1,g(255)),blue:y("rgb",2,g(255)),hue:y(["hsl","hsv","hsl","hwb","hcg"],0,function(S){return(S%360+360)%360}),saturationl:y("hsl",1,g(100)),lightness:y("hsl",2,g(100)),saturationv:y("hsv",1,g(100)),value:y("hsv",2,g(100)),chroma:y("hcg",1,g(100)),gray:y("hcg",2,g(100)),white:y("hwb",1,g(100)),wblack:y("hwb",2,g(100)),cyan:y("cmyk",0,g(100)),magenta:y("cmyk",1,g(100)),yellow:y("cmyk",2,g(100)),black:y("cmyk",3,g(100)),x:y("xyz",0,g(100)),y:y("xyz",1,g(100)),z:y("xyz",2,g(100)),l:y("lab",0,g(100)),a:y("lab",1),b:y("lab",2),keyword:function(S){return arguments.length?new b(S):z[this.model].keyword(this.color)},hex:function(S){return arguments.length?new b(S):L.to.hex(this.rgb().round().color)},rgbNumber:function(){var S=this.rgb().color;return(S[0]&255)<<16|(S[1]&255)<<8|S[2]&255},luminosity:function(){for(var S=this.rgb().color,N=[],m=0;m<S.length;m++){var d=S[m]/255;N[m]=d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4)}return .2126*N[0]+.7152*N[1]+.0722*N[2]},contrast:function(S){var N=this.luminosity(),m=S.luminosity();return N>m?(N+.05)/(m+.05):(m+.05)/(N+.05)},level:function(S){var N=this.contrast(S);return N>=7.1?"AAA":N>=4.5?"AA":""},isDark:function(){var S=this.rgb().color,N=(S[0]*299+S[1]*587+S[2]*114)/1e3;return N<128},isLight:function(){return!this.isDark()},negate:function(){for(var S=this.rgb(),N=0;N<3;N++)S.color[N]=255-S.color[N];return S},lighten:function(S){var N=this.hsl();return N.color[2]+=N.color[2]*S,N},darken:function(S){var N=this.hsl();return N.color[2]-=N.color[2]*S,N},saturate:function(S){var N=this.hsl();return N.color[1]+=N.color[1]*S,N},desaturate:function(S){var N=this.hsl();return N.color[1]-=N.color[1]*S,N},whiten:function(S){var N=this.hwb();return N.color[1]+=N.color[1]*S,N},blacken:function(S){var N=this.hwb();return N.color[2]+=N.color[2]*S,N},grayscale:function(){var S=this.rgb().color,N=S[0]*.3+S[1]*.59+S[2]*.11;return b.rgb(N,N,N)},fade:function(S){return this.alpha(this.valpha-this.valpha*S)},opaquer:function(S){return this.alpha(this.valpha+this.valpha*S)},rotate:function(S){var N=this.hsl(),m=N.color[0];return m=(m+S)%360,m=m<0?360+m:m,N.color[0]=m,N},mix:function(S,N){if(!S||!S.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof S);var m=S.rgb(),d=this.rgb(),V=N===void 0?.5:N,Q=2*V-1,j=m.alpha()-d.alpha(),X=((Q*j==-1?Q:(Q+j)/(1+Q*j))+1)/2,K=1-X;return b.rgb(X*m.red()+K*d.red(),X*m.green()+K*d.green(),X*m.blue()+K*d.blue(),m.alpha()*V+d.alpha()*(1-V))}},Object.keys(z).forEach(function(S){if(I.indexOf(S)===-1){var N=z[S].channels;b.prototype[S]=function(){if(this.model===S)return new b(this);if(arguments.length)return new b(arguments,S);var m=typeof arguments[N]=="number"?N:this.valpha;return new b(T(z[this.model][S].raw(this.color)).concat(m),S)},b[S]=function(m){return typeof m=="number"&&(m=x(F.call(arguments),N)),new b(m,S)}}});function E(S,N){return Number(S.toFixed(N))}function p(S){return function(N){return E(N,S)}}function y(S,N,m){return S=Array.isArray(S)?S:[S],S.forEach(function(d){(D[d]||(D[d]=[]))[N]=m}),S=S[0],function(d){var V;return arguments.length?(m&&(d=m(d)),V=this[S](),V.color[N]=d,V):(V=this[S]().color[N],m&&(V=m(V)),V)}}function g(S){return function(N){return Math.max(0,Math.min(S,N))}}function T(S){return Array.isArray(S)?S:[S]}function x(S,N){for(var m=0;m<N;m++)typeof S[m]!="number"&&(S[m]=0);return S}Mr.exports=b},71829:function(Mr,G,R){"use strict";R.r(G),R.d(G,{quadtree:function(){return L.Z}});var L=R(28833)},28833:function(Mr,G,R){"use strict";R.d(G,{Z:function(){return Q}});function L(J){const rt=+this._x.call(null,J),tt=+this._y.call(null,J);return z(this.cover(rt,tt),rt,tt,J)}function z(J,rt,tt,nt){if(isNaN(rt)||isNaN(tt))return J;var lt,xt=J._root,jt={data:nt},Dt=J._x0,Zt=J._y0,Vt=J._x1,ue=J._y1,dt,Ot,ee,Re,me,Ae,Be,Ke;if(!xt)return J._root=jt,J;for(;xt.length;)if((me=rt>=(dt=(Dt+Vt)/2))?Dt=dt:Vt=dt,(Ae=tt>=(Ot=(Zt+ue)/2))?Zt=Ot:ue=Ot,lt=xt,!(xt=xt[Be=Ae<<1|me]))return lt[Be]=jt,J;if(ee=+J._x.call(null,xt.data),Re=+J._y.call(null,xt.data),rt===ee&&tt===Re)return jt.next=xt,lt?lt[Be]=jt:J._root=jt,J;do lt=lt?lt[Be]=new Array(4):J._root=new Array(4),(me=rt>=(dt=(Dt+Vt)/2))?Dt=dt:Vt=dt,(Ae=tt>=(Ot=(Zt+ue)/2))?Zt=Ot:ue=Ot;while((Be=Ae<<1|me)==(Ke=(Re>=Ot)<<1|ee>=dt));return lt[Ke]=xt,lt[Be]=jt,J}function F(J){var rt,tt,nt=J.length,lt,xt,jt=new Array(nt),Dt=new Array(nt),Zt=Infinity,Vt=Infinity,ue=-Infinity,dt=-Infinity;for(tt=0;tt<nt;++tt)isNaN(lt=+this._x.call(null,rt=J[tt]))||isNaN(xt=+this._y.call(null,rt))||(jt[tt]=lt,Dt[tt]=xt,lt<Zt&&(Zt=lt),lt>ue&&(ue=lt),xt<Vt&&(Vt=xt),xt>dt&&(dt=xt));if(Zt>ue||Vt>dt)return this;for(this.cover(Zt,Vt).cover(ue,dt),tt=0;tt<nt;++tt)z(this,jt[tt],Dt[tt],J[tt]);return this}function I(J,rt){if(isNaN(J=+J)||isNaN(rt=+rt))return this;var tt=this._x0,nt=this._y0,lt=this._x1,xt=this._y1;if(isNaN(tt))lt=(tt=Math.floor(J))+1,xt=(nt=Math.floor(rt))+1;else{for(var jt=lt-tt||1,Dt=this._root,Zt,Vt;tt>J||J>=lt||nt>rt||rt>=xt;)switch(Vt=(rt<nt)<<1|J<tt,Zt=new Array(4),Zt[Vt]=Dt,Dt=Zt,jt*=2,Vt){case 0:lt=tt+jt,xt=nt+jt;break;case 1:tt=lt-jt,xt=nt+jt;break;case 2:lt=tt+jt,nt=xt-jt;break;case 3:tt=lt-jt,nt=xt-jt;break}this._root&&this._root.length&&(this._root=Dt)}return this._x0=tt,this._y0=nt,this._x1=lt,this._y1=xt,this}function k(){var J=[];return this.visit(function(rt){if(!rt.length)do J.push(rt.data);while(rt=rt.next)}),J}function D(J){return arguments.length?this.cover(+J[0][0],+J[0][1]).cover(+J[1][0],+J[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function b(J,rt,tt,nt,lt){this.node=J,this.x0=rt,this.y0=tt,this.x1=nt,this.y1=lt}function E(J,rt,tt){var nt,lt=this._x0,xt=this._y0,jt,Dt,Zt,Vt,ue=this._x1,dt=this._y1,Ot=[],ee=this._root,Re,me;for(ee&&Ot.push(new b(ee,lt,xt,ue,dt)),tt==null?tt=Infinity:(lt=J-tt,xt=rt-tt,ue=J+tt,dt=rt+tt,tt*=tt);Re=Ot.pop();)if(!(!(ee=Re.node)||(jt=Re.x0)>ue||(Dt=Re.y0)>dt||(Zt=Re.x1)<lt||(Vt=Re.y1)<xt))if(ee.length){var Ae=(jt+Zt)/2,Be=(Dt+Vt)/2;Ot.push(new b(ee[3],Ae,Be,Zt,Vt),new b(ee[2],jt,Be,Ae,Vt),new b(ee[1],Ae,Dt,Zt,Be),new b(ee[0],jt,Dt,Ae,Be)),(me=(rt>=Be)<<1|J>=Ae)&&(Re=Ot[Ot.length-1],Ot[Ot.length-1]=Ot[Ot.length-1-me],Ot[Ot.length-1-me]=Re)}else{var Ke=J-+this._x.call(null,ee.data),$t=rt-+this._y.call(null,ee.data),ce=Ke*Ke+$t*$t;if(ce<tt){var we=Math.sqrt(tt=ce);lt=J-we,xt=rt-we,ue=J+we,dt=rt+we,nt=ee.data}}return nt}function p(J){if(isNaN(ue=+this._x.call(null,J))||isNaN(dt=+this._y.call(null,J)))return this;var rt,tt=this._root,nt,lt,xt,jt=this._x0,Dt=this._y0,Zt=this._x1,Vt=this._y1,ue,dt,Ot,ee,Re,me,Ae,Be;if(!tt)return this;if(tt.length)for(;;){if((Re=ue>=(Ot=(jt+Zt)/2))?jt=Ot:Zt=Ot,(me=dt>=(ee=(Dt+Vt)/2))?Dt=ee:Vt=ee,rt=tt,!(tt=tt[Ae=me<<1|Re]))return this;if(!tt.length)break;(rt[Ae+1&3]||rt[Ae+2&3]||rt[Ae+3&3])&&(nt=rt,Be=Ae)}for(;tt.data!==J;)if(lt=tt,!(tt=tt.next))return this;return(xt=tt.next)&&delete tt.next,lt?(xt?lt.next=xt:delete lt.next,this):rt?(xt?rt[Ae]=xt:delete rt[Ae],(tt=rt[0]||rt[1]||rt[2]||rt[3])&&tt===(rt[3]||rt[2]||rt[1]||rt[0])&&!tt.length&&(nt?nt[Be]=tt:this._root=tt),this):(this._root=xt,this)}function y(J){for(var rt=0,tt=J.length;rt<tt;++rt)this.remove(J[rt]);return this}function g(){return this._root}function T(){var J=0;return this.visit(function(rt){if(!rt.length)do++J;while(rt=rt.next)}),J}function x(J){var rt=[],tt,nt=this._root,lt,xt,jt,Dt,Zt;for(nt&&rt.push(new b(nt,this._x0,this._y0,this._x1,this._y1));tt=rt.pop();)if(!J(nt=tt.node,xt=tt.x0,jt=tt.y0,Dt=tt.x1,Zt=tt.y1)&&nt.length){var Vt=(xt+Dt)/2,ue=(jt+Zt)/2;(lt=nt[3])&&rt.push(new b(lt,Vt,ue,Dt,Zt)),(lt=nt[2])&&rt.push(new b(lt,xt,ue,Vt,Zt)),(lt=nt[1])&&rt.push(new b(lt,Vt,jt,Dt,ue)),(lt=nt[0])&&rt.push(new b(lt,xt,jt,Vt,ue))}return this}function S(J){var rt=[],tt=[],nt;for(this._root&&rt.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));nt=rt.pop();){var lt=nt.node;if(lt.length){var xt,jt=nt.x0,Dt=nt.y0,Zt=nt.x1,Vt=nt.y1,ue=(jt+Zt)/2,dt=(Dt+Vt)/2;(xt=lt[0])&&rt.push(new b(xt,jt,Dt,ue,dt)),(xt=lt[1])&&rt.push(new b(xt,ue,Dt,Zt,dt)),(xt=lt[2])&&rt.push(new b(xt,jt,dt,ue,Vt)),(xt=lt[3])&&rt.push(new b(xt,ue,dt,Zt,Vt))}tt.push(nt)}for(;nt=tt.pop();)J(nt.node,nt.x0,nt.y0,nt.x1,nt.y1);return this}function N(J){return J[0]}function m(J){return arguments.length?(this._x=J,this):this._x}function d(J){return J[1]}function V(J){return arguments.length?(this._y=J,this):this._y}function Q(J,rt,tt){var nt=new j(rt==null?N:rt,tt==null?d:tt,NaN,NaN,NaN,NaN);return J==null?nt:nt.addAll(J)}function j(J,rt,tt,nt,lt,xt){this._x=J,this._y=rt,this._x0=tt,this._y0=nt,this._x1=lt,this._y1=xt,this._root=void 0}function X(J){for(var rt={data:J.data},tt=rt;J=J.next;)tt=tt.next={data:J.data};return rt}var K=Q.prototype=j.prototype;K.copy=function(){var J=new j(this._x,this._y,this._x0,this._y0,this._x1,this._y1),rt=this._root,tt,nt;if(!rt)return J;if(!rt.length)return J._root=X(rt),J;for(tt=[{source:rt,target:J._root=new Array(4)}];rt=tt.pop();)for(var lt=0;lt<4;++lt)(nt=rt.source[lt])&&(nt.length?tt.push({source:nt,target:rt.target[lt]=new Array(4)}):rt.target[lt]=X(nt));return J},K.add=L,K.addAll=F,K.cover=I,K.data=k,K.extent=D,K.find=E,K.remove=p,K.removeAll=y,K.root=g,K.size=T,K.visit=x,K.visitAfter=S,K.x=m,K.y=V},31969:function(Mr,G,R){"use strict";R.r(G),R.d(G,{BRIDGE_GRAPH_NAME:function(){return k},GraphType:function(){return E},HierarchyNodeType:function(){return p},InclusionType:function(){return b},LAYOUT_CONFIG:function(){return L},NodeType:function(){return D},ROOT_NAME:function(){return I},buildGraph:function(){return zr},flatGraph:function(){return mn},getEdges:function(){return dn},mergeConfig:function(){return z}});const L={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function z(v={},A=L){var U,q,st,ct;const mt=JSON.parse(JSON.stringify(A)),wt=((U=v==null?void 0:v.graph)===null||U===void 0?void 0:U.meta)||{},kt=((q=v==null?void 0:v.subScene)===null||q===void 0?void 0:q.meta)||{},Ht=((st=v==null?void 0:v.nodeSize)===null||st===void 0?void 0:st.meta)||{},ie=((ct=v==null?void 0:v.nodeSize)===null||ct===void 0?void 0:ct.node)||{},qt=mt.nodeSize.bridge;return{graph:{meta:Object.assign(mt.graph.meta,wt)},subScene:{meta:Object.assign(mt.subScene.meta,kt)},nodeSize:{meta:Object.assign(mt.nodeSize.meta,Ht),node:Object.assign(mt.nodeSize.node,ie),bridge:qt}}}function F(v){return`\u25EC${v}\u25EC`}const I=F("ROOT"),k=F("BRIDGE_GRAPH");var D,b,E,p;(function(v){v[v.META=0]="META",v[v.NODE=1]="NODE",v[v.BRIDGE=2]="BRIDGE"})(D||(D={})),function(v){v[v.INCLUDE=0]="INCLUDE",v[v.EXCLUDE=1]="EXCLUDE",v[v.UNSPECIFIED=2]="UNSPECIFIED"}(b||(b={})),function(v){v[v.META=0]="META",v[v.CORE=1]="CORE",v[v.BRIDGE=2]="BRIDGE"}(E||(E={})),function(v){v[v.META=0]="META",v[v.OP=1]="OP",v[v.SERIES=2]="SERIES"}(p||(p={}));var y=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof R.g!="undefined"?R.g:typeof self!="undefined"?self:{};function g(v,A){return v(A={exports:{}},A.exports),A.exports}var T=function(){this.__data__=[],this.size=0},x=function(v,A){return v===A||v!=v&&A!=A},S=function(v,A){for(var U=v.length;U--;)if(x(v[U][0],A))return U;return-1},N=Array.prototype.splice,m=function(v){var A=this.__data__,U=S(A,v);return!(U<0)&&(U==A.length-1?A.pop():N.call(A,U,1),--this.size,!0)},d=function(v){var A=this.__data__,U=S(A,v);return U<0?void 0:A[U][1]},V=function(v){return S(this.__data__,v)>-1},Q=function(v,A){var U=this.__data__,q=S(U,v);return q<0?(++this.size,U.push([v,A])):U[q][1]=A,this};function j(v){var A=-1,U=v==null?0:v.length;for(this.clear();++A<U;){var q=v[A];this.set(q[0],q[1])}}j.prototype.clear=T,j.prototype.delete=m,j.prototype.get=d,j.prototype.has=V,j.prototype.set=Q;var X=j,K=function(){this.__data__=new X,this.size=0},J=function(v){var A=this.__data__,U=A.delete(v);return this.size=A.size,U},rt=function(v){return this.__data__.get(v)},tt=function(v){return this.__data__.has(v)},nt=typeof y=="object"&&y&&y.Object===Object&&y,lt=typeof self=="object"&&self&&self.Object===Object&&self,xt=nt||lt||Function("return this")(),jt=xt.Symbol,Dt=Object.prototype,Zt=Dt.hasOwnProperty,Vt=Dt.toString,ue=jt?jt.toStringTag:void 0,dt=function(v){var A=Zt.call(v,ue),U=v[ue];try{v[ue]=void 0;var q=!0}catch(ct){}var st=Vt.call(v);return q&&(A?v[ue]=U:delete v[ue]),st},Ot=Object.prototype.toString,ee=function(v){return Ot.call(v)},Re=jt?jt.toStringTag:void 0,me=function(v){return v==null?v===void 0?"[object Undefined]":"[object Null]":Re&&Re in Object(v)?dt(v):ee(v)},Ae=function(v){var A=typeof v;return v!=null&&(A=="object"||A=="function")},Be,Ke=function(v){if(!Ae(v))return!1;var A=me(v);return A=="[object Function]"||A=="[object GeneratorFunction]"||A=="[object AsyncFunction]"||A=="[object Proxy]"},$t=xt["__core-js_shared__"],ce=(Be=/[^.]+$/.exec($t&&$t.keys&&$t.keys.IE_PROTO||""))?"Symbol(src)_1."+Be:"",we=function(v){return!!ce&&ce in v},Pe=Function.prototype.toString,ye=function(v){if(v!=null){try{return Pe.call(v)}catch(A){}try{return v+""}catch(A){}}return""},Bt=/^\[object .+?Constructor\]$/,re=Function.prototype,Ee=Object.prototype,It=re.toString,Et=Ee.hasOwnProperty,Wt=RegExp("^"+It.call(Et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fe=function(v){return!(!Ae(v)||we(v))&&(Ke(v)?Wt:Bt).test(ye(v))},Fe=function(v,A){return v==null?void 0:v[A]},$e=function(v,A){var U=Fe(v,A);return fe(U)?U:void 0},Lt=$e(xt,"Map"),Ne=$e(Object,"create"),Xe=function(){this.__data__=Ne?Ne(null):{},this.size=0},Dr=function(v){var A=this.has(v)&&delete this.__data__[v];return this.size-=A?1:0,A},ur=Object.prototype.hasOwnProperty,Or=function(v){var A=this.__data__;if(Ne){var U=A[v];return U==="__lodash_hash_undefined__"?void 0:U}return ur.call(A,v)?A[v]:void 0},ln=Object.prototype.hasOwnProperty,fn=function(v){var A=this.__data__;return Ne?A[v]!==void 0:ln.call(A,v)},Xr=function(v,A){var U=this.__data__;return this.size+=this.has(v)?0:1,U[v]=Ne&&A===void 0?"__lodash_hash_undefined__":A,this};function Cn(v){var A=-1,U=v==null?0:v.length;for(this.clear();++A<U;){var q=v[A];this.set(q[0],q[1])}}Cn.prototype.clear=Xe,Cn.prototype.delete=Dr,Cn.prototype.get=Or,Cn.prototype.has=fn,Cn.prototype.set=Xr;var Qr=Cn,Gr=function(){this.size=0,this.__data__={hash:new Qr,map:new(Lt||X),string:new Qr}},on=function(v){var A=typeof v;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?v!=="__proto__":v===null},sr=function(v,A){var U=v.__data__;return on(A)?U[typeof A=="string"?"string":"hash"]:U.map},lr=function(v){var A=sr(this,v).delete(v);return this.size-=A?1:0,A},Qe=function(v){return sr(this,v).get(v)},$r=function(v){return sr(this,v).has(v)},an=function(v,A){var U=sr(this,v),q=U.size;return U.set(v,A),this.size+=U.size==q?0:1,this};function bn(v){var A=-1,U=v==null?0:v.length;for(this.clear();++A<U;){var q=v[A];this.set(q[0],q[1])}}bn.prototype.clear=Gr,bn.prototype.delete=lr,bn.prototype.get=Qe,bn.prototype.has=$r,bn.prototype.set=an;var nr=bn,Tr=function(v,A){var U=this.__data__;if(U instanceof X){var q=U.__data__;if(!Lt||q.length<199)return q.push([v,A]),this.size=++U.size,this;U=this.__data__=new nr(q)}return U.set(v,A),this.size=U.size,this};function ar(v){var A=this.__data__=new X(v);this.size=A.size}ar.prototype.clear=K,ar.prototype.delete=J,ar.prototype.get=rt,ar.prototype.has=tt,ar.prototype.set=Tr;var vr=ar,Br=function(v,A){for(var U=-1,q=v==null?0:v.length;++U<q&&A(v[U],U,v)!==!1;);return v},Fr=function(){try{var v=$e(Object,"defineProperty");return v({},"",{}),v}catch(A){}}(),kr=function(v,A,U){A=="__proto__"&&Fr?Fr(v,A,{configurable:!0,enumerable:!0,value:U,writable:!0}):v[A]=U},Z=Object.prototype.hasOwnProperty,Te=function(v,A,U){var q=v[A];Z.call(v,A)&&x(q,U)&&(U!==void 0||A in v)||kr(v,A,U)},ne=function(v,A,U,q){var st=!U;U||(U={});for(var ct=-1,mt=A.length;++ct<mt;){var wt=A[ct],kt=q?q(U[wt],v[wt],wt,U,v):void 0;kt===void 0&&(kt=v[wt]),st?kr(U,wt,kt):Te(U,wt,kt)}return U},it=function(v,A){for(var U=-1,q=Array(v);++U<v;)q[U]=A(U);return q},ot=function(v){return v!=null&&typeof v=="object"},B=function(v){return ot(v)&&me(v)=="[object Arguments]"},_=Object.prototype,C=_.hasOwnProperty,Y=_.propertyIsEnumerable,pt=B(function(){return arguments}())?B:function(v){return ot(v)&&C.call(v,"callee")&&!Y.call(v,"callee")},_t=Array.isArray,Mt=function(){return!1},zt=g(function(v,A){var U=A&&!A.nodeType&&A,q=U&&v&&!v.nodeType&&v,st=q&&q.exports===U?xt.Buffer:void 0,ct=(st?st.isBuffer:void 0)||Mt;v.exports=ct}),Le=/^(?:0|[1-9]\d*)$/,Me=function(v,A){var U=typeof v;return!!(A=A==null?9007199254740991:A)&&(U=="number"||U!="symbol"&&Le.test(v))&&v>-1&&v%1==0&&v<A},qe=function(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=9007199254740991},br={};br["[object Float32Array]"]=br["[object Float64Array]"]=br["[object Int8Array]"]=br["[object Int16Array]"]=br["[object Int32Array]"]=br["[object Uint8Array]"]=br["[object Uint8ClampedArray]"]=br["[object Uint16Array]"]=br["[object Uint32Array]"]=!0,br["[object Arguments]"]=br["[object Array]"]=br["[object ArrayBuffer]"]=br["[object Boolean]"]=br["[object DataView]"]=br["[object Date]"]=br["[object Error]"]=br["[object Function]"]=br["[object Map]"]=br["[object Number]"]=br["[object Object]"]=br["[object RegExp]"]=br["[object Set]"]=br["[object String]"]=br["[object WeakMap]"]=!1;var xr=function(v){return ot(v)&&qe(v.length)&&!!br[me(v)]},sn=function(v){return function(A){return v(A)}},Rn=g(function(v,A){var U=A&&!A.nodeType&&A,q=U&&v&&!v.nodeType&&v,st=q&&q.exports===U&&nt.process,ct=function(){try{var mt=q&&q.require&&q.require("util").types;return mt||st&&st.binding&&st.binding("util")}catch(wt){}}();v.exports=ct}),tr=Rn&&Rn.isTypedArray,Sr=tr?sn(tr):xr,jr=Object.prototype.hasOwnProperty,Nn=function(v,A){var U=_t(v),q=!U&&pt(v),st=!U&&!q&&zt(v),ct=!U&&!q&&!st&&Sr(v),mt=U||q||st||ct,wt=mt?it(v.length,String):[],kt=wt.length;for(var Ht in v)!A&&!jr.call(v,Ht)||mt&&(Ht=="length"||st&&(Ht=="offset"||Ht=="parent")||ct&&(Ht=="buffer"||Ht=="byteLength"||Ht=="byteOffset")||Me(Ht,kt))||wt.push(Ht);return wt},gn=Object.prototype,ea=function(v){var A=v&&v.constructor;return v===(typeof A=="function"&&A.prototype||gn)},ha=function(v,A){return function(U){return v(A(U))}},Zn=ha(Object.keys,Object),na=Object.prototype.hasOwnProperty,da=function(v){if(!ea(v))return Zn(v);var A=[];for(var U in Object(v))na.call(v,U)&&U!="constructor"&&A.push(U);return A},Vn=function(v){return v!=null&&qe(v.length)&&!Ke(v)},se=function(v){return Vn(v)?Nn(v):da(v)},Ut=function(v,A){return v&&ne(A,se(A),v)},le=function(v){var A=[];if(v!=null)for(var U in Object(v))A.push(U);return A},ze=Object.prototype.hasOwnProperty,Ie=function(v){if(!Ae(v))return le(v);var A=ea(v),U=[];for(var q in v)(q!="constructor"||!A&&ze.call(v,q))&&U.push(q);return U},We=function(v){return Vn(v)?Nn(v,!0):Ie(v)},_r=function(v,A){return v&&ne(A,We(A),v)},nn=g(function(v,A){var U=A&&!A.nodeType&&A,q=U&&v&&!v.nodeType&&v,st=q&&q.exports===U?xt.Buffer:void 0,ct=st?st.allocUnsafe:void 0;v.exports=function(mt,wt){if(wt)return mt.slice();var kt=mt.length,Ht=ct?ct(kt):new mt.constructor(kt);return mt.copy(Ht),Ht}}),pn=function(v,A){var U=-1,q=v.length;for(A||(A=Array(q));++U<q;)A[U]=v[U];return A},Gn=function(v,A){for(var U=-1,q=v==null?0:v.length,st=0,ct=[];++U<q;){var mt=v[U];A(mt,U,v)&&(ct[st++]=mt)}return ct},jn=function(){return[]},oa=Object.prototype.propertyIsEnumerable,va=Object.getOwnPropertySymbols,_a=va?function(v){return v==null?[]:(v=Object(v),Gn(va(v),function(A){return oa.call(v,A)}))}:jn,fi=function(v,A){return ne(v,_a(v),A)},Ba=function(v,A){for(var U=-1,q=A.length,st=v.length;++U<q;)v[st+U]=A[U];return v},Wa=ha(Object.getPrototypeOf,Object),wa=Object.getOwnPropertySymbols?function(v){for(var A=[];v;)Ba(A,_a(v)),v=Wa(v);return A}:jn,vi=function(v,A){return ne(v,wa(v),A)},ti=function(v,A,U){var q=A(v);return _t(v)?q:Ba(q,U(v))},Ia=function(v){return ti(v,se,_a)},qi=function(v){return ti(v,We,wa)},gi=$e(xt,"DataView"),ji=$e(xt,"Promise"),Ti=$e(xt,"Set"),ri=$e(xt,"WeakMap"),No=ye(gi),Po=ye(Lt),Ii=ye(ji),ho=ye(Ti),Ji=ye(ri),Xi=me;(gi&&Xi(new gi(new ArrayBuffer(1)))!="[object DataView]"||Lt&&Xi(new Lt)!="[object Map]"||ji&&Xi(ji.resolve())!="[object Promise]"||Ti&&Xi(new Ti)!="[object Set]"||ri&&Xi(new ri)!="[object WeakMap]")&&(Xi=function(v){var A=me(v),U=A=="[object Object]"?v.constructor:void 0,q=U?ye(U):"";if(q)switch(q){case No:return"[object DataView]";case Po:return"[object Map]";case Ii:return"[object Promise]";case ho:return"[object Set]";case Ji:return"[object WeakMap]"}return A});var Ri=Xi,Oi=Object.prototype.hasOwnProperty,Io=function(v){var A=v.length,U=new v.constructor(A);return A&&typeof v[0]=="string"&&Oi.call(v,"index")&&(U.index=v.index,U.input=v.input),U},to=xt.Uint8Array,Yi=function(v){var A=new v.constructor(v.byteLength);return new to(A).set(new to(v)),A},un=function(v,A){var U=A?Yi(v.buffer):v.buffer;return new v.constructor(U,v.byteOffset,v.byteLength)},vo=/\w*$/,Fo=function(v){var A=new v.constructor(v.source,vo.exec(v));return A.lastIndex=v.lastIndex,A},Qa=jt?jt.prototype:void 0,ko=Qa?Qa.valueOf:void 0,go=function(v){return ko?Object(ko.call(v)):{}},Li=function(v,A){var U=A?Yi(v.buffer):v.buffer;return new v.constructor(U,v.byteOffset,v.length)},eo=function(v,A,U){var q=v.constructor;switch(A){case"[object ArrayBuffer]":return Yi(v);case"[object Boolean]":case"[object Date]":return new q(+v);case"[object DataView]":return un(v,U);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Li(v,U);case"[object Map]":return new q;case"[object Number]":case"[object String]":return new q(v);case"[object RegExp]":return Fo(v);case"[object Set]":return new q;case"[object Symbol]":return go(v)}},de=Object.create,Ar=function(){function v(){}return function(A){if(!Ae(A))return{};if(de)return de(A);v.prototype=A;var U=new v;return v.prototype=void 0,U}}(),qr=function(v){return typeof v.constructor!="function"||ea(v)?{}:Ar(Wa(v))},Bn=function(v){return ot(v)&&Ri(v)=="[object Map]"},Sa=Rn&&Rn.isMap,ci=Sa?sn(Sa):Bn,_i=function(v){return ot(v)&&Ri(v)=="[object Set]"},li=Rn&&Rn.isSet,Ai=li?sn(li):_i,Ea={};Ea["[object Arguments]"]=Ea["[object Array]"]=Ea["[object ArrayBuffer]"]=Ea["[object DataView]"]=Ea["[object Boolean]"]=Ea["[object Date]"]=Ea["[object Float32Array]"]=Ea["[object Float64Array]"]=Ea["[object Int8Array]"]=Ea["[object Int16Array]"]=Ea["[object Int32Array]"]=Ea["[object Map]"]=Ea["[object Number]"]=Ea["[object Object]"]=Ea["[object RegExp]"]=Ea["[object Set]"]=Ea["[object String]"]=Ea["[object Symbol]"]=Ea["[object Uint8Array]"]=Ea["[object Uint8ClampedArray]"]=Ea["[object Uint16Array]"]=Ea["[object Uint32Array]"]=!0,Ea["[object Error]"]=Ea["[object Function]"]=Ea["[object WeakMap]"]=!1;var ro=function v(A,U,q,st,ct,mt){var wt,kt=1&U,Ht=2&U,ie=4&U;if(q&&(wt=ct?q(A,st,ct,mt):q(A)),wt!==void 0)return wt;if(!Ae(A))return A;var qt=_t(A);if(qt){if(wt=Io(A),!kt)return pn(A,wt)}else{var Oe=Ri(A),ir=Oe=="[object Function]"||Oe=="[object GeneratorFunction]";if(zt(A))return nn(A,kt);if(Oe=="[object Object]"||Oe=="[object Arguments]"||ir&&!ct){if(wt=Ht||ir?{}:qr(A),!kt)return Ht?vi(A,_r(wt,A)):fi(A,Ut(wt,A))}else{if(!Ea[Oe])return ct?A:{};wt=eo(A,Oe,kt)}}mt||(mt=new vr);var Yr=mt.get(A);if(Yr)return Yr;mt.set(A,wt),Ai(A)?A.forEach(function(pr){wt.add(v(pr,U,q,pr,A,mt))}):ci(A)&&A.forEach(function(pr,gr){wt.set(gr,v(pr,U,q,gr,A,mt))});var hr=qt?void 0:(ie?Ht?qi:Ia:Ht?We:se)(A);return Br(hr||A,function(pr,gr){hr&&(pr=A[gr=pr]),Te(wt,gr,v(pr,U,q,gr,A,mt))}),wt},Yo=function(v){return ro(v,4)},Bi=function(v){return function(){return v}},no=function(v){return function(A,U,q){for(var st=-1,ct=Object(A),mt=q(A),wt=mt.length;wt--;){var kt=mt[v?wt:++st];if(U(ct[kt],kt,ct)===!1)break}return A}}(),Oo=function(v,A){return v&&no(v,A,se)},Vi=function(v,A){return function(U,q){if(U==null)return U;if(!Vn(U))return v(U,q);for(var st=U.length,ct=A?st:-1,mt=Object(U);(A?ct--:++ct<st)&&q(mt[ct],ct,mt)!==!1;);return U}}(Oo),po=function(v){return v},Ei=function(v){return typeof v=="function"?v:po},yo=function(v,A){return(_t(v)?Br:Vi)(v,Ei(A))},Hi=yo,ma=function(v,A){var U=[];return Vi(v,function(q,st,ct){A(q,st,ct)&&U.push(q)}),U},qa=function(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this},Mi=function(v){return this.__data__.has(v)};function pi(v){var A=-1,U=v==null?0:v.length;for(this.__data__=new nr;++A<U;)this.add(v[A])}pi.prototype.add=pi.prototype.push=qa,pi.prototype.has=Mi;var so=pi,Zi=function(v,A){for(var U=-1,q=v==null?0:v.length;++U<q;)if(A(v[U],U,v))return!0;return!1},Fi=function(v,A){return v.has(A)},mo=function(v,A,U,q,st,ct){var mt=1&U,wt=v.length,kt=A.length;if(wt!=kt&&!(mt&&kt>wt))return!1;var Ht=ct.get(v),ie=ct.get(A);if(Ht&&ie)return Ht==A&&ie==v;var qt=-1,Oe=!0,ir=2&U?new so:void 0;for(ct.set(v,A),ct.set(A,v);++qt<wt;){var Yr=v[qt],hr=A[qt];if(q)var pr=mt?q(hr,Yr,qt,A,v,ct):q(Yr,hr,qt,v,A,ct);if(pr!==void 0){if(pr)continue;Oe=!1;break}if(ir){if(!Zi(A,function(gr,En){if(!Fi(ir,En)&&(Yr===gr||st(Yr,gr,U,q,ct)))return ir.push(En)})){Oe=!1;break}}else if(Yr!==hr&&!st(Yr,hr,U,q,ct)){Oe=!1;break}}return ct.delete(v),ct.delete(A),Oe},uo=function(v){var A=-1,U=Array(v.size);return v.forEach(function(q,st){U[++A]=[st,q]}),U},bo=function(v){var A=-1,U=Array(v.size);return v.forEach(function(q){U[++A]=q}),U},La=jt?jt.prototype:void 0,ds=La?La.valueOf:void 0,os=function(v,A,U,q,st,ct,mt){switch(U){case"[object DataView]":if(v.byteLength!=A.byteLength||v.byteOffset!=A.byteOffset)return!1;v=v.buffer,A=A.buffer;case"[object ArrayBuffer]":return!(v.byteLength!=A.byteLength||!ct(new to(v),new to(A)));case"[object Boolean]":case"[object Date]":case"[object Number]":return x(+v,+A);case"[object Error]":return v.name==A.name&&v.message==A.message;case"[object RegExp]":case"[object String]":return v==A+"";case"[object Map]":var wt=uo;case"[object Set]":var kt=1&q;if(wt||(wt=bo),v.size!=A.size&&!kt)return!1;var Ht=mt.get(v);if(Ht)return Ht==A;q|=2,mt.set(v,A);var ie=mo(wt(v),wt(A),q,st,ct,mt);return mt.delete(v),ie;case"[object Symbol]":if(ds)return ds.call(v)==ds.call(A)}return!1},Nt=Object.prototype.hasOwnProperty,At=function(v,A,U,q,st,ct){var mt=1&U,wt=Ia(v),kt=wt.length;if(kt!=Ia(A).length&&!mt)return!1;for(var Ht=kt;Ht--;){var ie=wt[Ht];if(!(mt?ie in A:Nt.call(A,ie)))return!1}var qt=ct.get(v),Oe=ct.get(A);if(qt&&Oe)return qt==A&&Oe==v;var ir=!0;ct.set(v,A),ct.set(A,v);for(var Yr=mt;++Ht<kt;){var hr=v[ie=wt[Ht]],pr=A[ie];if(q)var gr=mt?q(pr,hr,ie,A,v,ct):q(hr,pr,ie,v,A,ct);if(!(gr===void 0?hr===pr||st(hr,pr,U,q,ct):gr)){ir=!1;break}Yr||(Yr=ie=="constructor")}if(ir&&!Yr){var En=v.constructor,kn=A.constructor;En==kn||!("constructor"in v)||!("constructor"in A)||typeof En=="function"&&En instanceof En&&typeof kn=="function"&&kn instanceof kn||(ir=!1)}return ct.delete(v),ct.delete(A),ir},ut=Object.prototype.hasOwnProperty,yt=function(v,A,U,q,st,ct){var mt=_t(v),wt=_t(A),kt=mt?"[object Array]":Ri(v),Ht=wt?"[object Array]":Ri(A),ie=(kt=kt=="[object Arguments]"?"[object Object]":kt)=="[object Object]",qt=(Ht=Ht=="[object Arguments]"?"[object Object]":Ht)=="[object Object]",Oe=kt==Ht;if(Oe&&zt(v)){if(!zt(A))return!1;mt=!0,ie=!1}if(Oe&&!ie)return ct||(ct=new vr),mt||Sr(v)?mo(v,A,U,q,st,ct):os(v,A,kt,U,q,st,ct);if(!(1&U)){var ir=ie&&ut.call(v,"__wrapped__"),Yr=qt&&ut.call(A,"__wrapped__");if(ir||Yr){var hr=ir?v.value():v,pr=Yr?A.value():A;return ct||(ct=new vr),st(hr,pr,U,q,ct)}}return!!Oe&&(ct||(ct=new vr),At(v,A,U,q,st,ct))},Ct=function v(A,U,q,st,ct){return A===U||(A==null||U==null||!ot(A)&&!ot(U)?A!=A&&U!=U:yt(A,U,q,st,v,ct))},ve=function(v,A,U,q){var st=U.length,ct=st,mt=!q;if(v==null)return!ct;for(v=Object(v);st--;){var wt=U[st];if(mt&&wt[2]?wt[1]!==v[wt[0]]:!(wt[0]in v))return!1}for(;++st<ct;){var kt=(wt=U[st])[0],Ht=v[kt],ie=wt[1];if(mt&&wt[2]){if(Ht===void 0&&!(kt in v))return!1}else{var qt=new vr;if(q)var Oe=q(Ht,ie,kt,v,A,qt);if(!(Oe===void 0?Ct(ie,Ht,3,q,qt):Oe))return!1}}return!0},ke=function(v){return v==v&&!Ae(v)},er=function(v){for(var A=se(v),U=A.length;U--;){var q=A[U],st=v[q];A[U]=[q,st,ke(st)]}return A},yr=function(v,A){return function(U){return U!=null&&U[v]===A&&(A!==void 0||v in Object(U))}},Pt=function(v){var A=er(v);return A.length==1&&A[0][2]?yr(A[0][0],A[0][1]):function(U){return U===v||ve(U,v,A)}},Tt=function(v){return typeof v=="symbol"||ot(v)&&me(v)=="[object Symbol]"},H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gt=/^\w*$/,Rt=function(v,A){if(_t(v))return!1;var U=typeof v;return!(U!="number"&&U!="symbol"&&U!="boolean"&&v!=null&&!Tt(v))||gt.test(v)||!H.test(v)||A!=null&&v in Object(A)};function te(v,A){if(typeof v!="function"||A!=null&&typeof A!="function")throw new TypeError("Expected a function");var U=function(){var q=arguments,st=A?A.apply(this,q):q[0],ct=U.cache;if(ct.has(st))return ct.get(st);var mt=v.apply(this,q);return U.cache=ct.set(st,mt)||ct,mt};return U.cache=new(te.Cache||nr),U}te.Cache=nr;var De=te,rr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Er=/\\(\\)?/g,yn=function(v){var A=De(v,function(q){return U.size===500&&U.clear(),q}),U=A.cache;return A}(function(v){var A=[];return v.charCodeAt(0)===46&&A.push(""),v.replace(rr,function(U,q,st,ct){A.push(st?ct.replace(Er,"$1"):q||U)}),A}),en=function(v,A){for(var U=-1,q=v==null?0:v.length,st=Array(q);++U<q;)st[U]=A(v[U],U,v);return st},hn=jt?jt.prototype:void 0,Qn=hn?hn.toString:void 0,fa=function v(A){if(typeof A=="string")return A;if(_t(A))return en(A,v)+"";if(Tt(A))return Qn?Qn.call(A):"";var U=A+"";return U=="0"&&1/A==-Infinity?"-0":U},Hn=function(v){return v==null?"":fa(v)},Jn=function(v,A){return _t(v)?v:Rt(v,A)?[v]:yn(Hn(v))},ja=function(v){if(typeof v=="string"||Tt(v))return v;var A=v+"";return A=="0"&&1/v==-Infinity?"-0":A},Va=function(v,A){for(var U=0,q=(A=Jn(A,v)).length;v!=null&&U<q;)v=v[ja(A[U++])];return U&&U==q?v:void 0},ni=function(v,A,U){var q=v==null?void 0:Va(v,A);return q===void 0?U:q},ai=function(v,A){return v!=null&&A in Object(v)},wi=function(v,A,U){for(var q=-1,st=(A=Jn(A,v)).length,ct=!1;++q<st;){var mt=ja(A[q]);if(!(ct=v!=null&&U(v,mt)))break;v=v[mt]}return ct||++q!=st?ct:!!(st=v==null?0:v.length)&&qe(st)&&Me(mt,st)&&(_t(v)||pt(v))},Ro=function(v,A){return v!=null&&wi(v,A,ai)},ss=function(v,A){return Rt(v)&&ke(A)?yr(ja(v),A):function(U){var q=ni(U,v);return q===void 0&&q===A?Ro(U,v):Ct(A,q,3)}},Bo=function(v){return function(A){return A==null?void 0:A[v]}},es=function(v){return function(A){return Va(A,v)}},Di=function(v){return Rt(v)?Bo(ja(v)):es(v)},Lo=function(v){return typeof v=="function"?v:v==null?po:typeof v=="object"?_t(v)?ss(v[0],v[1]):Pt(v):Di(v)},nu=function(v,A){return(_t(v)?Gn:ma)(v,Lo(A))},au=Object.prototype.hasOwnProperty,Ss=function(v,A){return v!=null&&au.call(v,A)},vs=function(v,A){return v!=null&&wi(v,A,Ss)},iu=Object.prototype.hasOwnProperty,h=function(v){if(v==null)return!0;if(Vn(v)&&(_t(v)||typeof v=="string"||typeof v.splice=="function"||zt(v)||Sr(v)||pt(v)))return!v.length;var A=Ri(v);if(A=="[object Map]"||A=="[object Set]")return!v.size;if(ea(v))return!da(v).length;for(var U in v)if(iu.call(v,U))return!1;return!0},P=function(v){return v===void 0},ht=function(v,A){var U=-1,q=Vn(v)?Array(v.length):[];return Vi(v,function(st,ct,mt){q[++U]=A(st,ct,mt)}),q},St=function(v,A){return(_t(v)?en:ht)(v,Lo(A))},Gt=function(v,A,U,q){var st=-1,ct=v==null?0:v.length;for(q&&ct&&(U=v[++st]);++st<ct;)U=A(U,v[st],st,v);return U},Kt=function(v,A,U,q,st){return st(v,function(ct,mt,wt){U=q?(q=!1,ct):A(U,ct,mt,wt)}),U},Qt=function(v,A,U){var q=_t(v)?Gt:Kt,st=arguments.length<3;return q(v,Lo(A),U,st,Vi)},pe=function(v){return typeof v=="string"||!_t(v)&&ot(v)&&me(v)=="[object String]"},Se=Bo("length"),je=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),fr=function(v){return je.test(v)},Rr="[\\ud800-\\udfff]",Vr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ur="\\ud83c[\\udffb-\\udfff]",vn="[^\\ud800-\\udfff]",On="(?:\\ud83c[\\udde6-\\uddff]){2}",Zr="[\\ud800-\\udbff][\\udc00-\\udfff]",Wn="(?:"+Vr+"|"+Ur+")?",Ma="[\\ufe0e\\ufe0f]?"+Wn+("(?:\\u200d(?:"+[vn,On,Zr].join("|")+")[\\ufe0e\\ufe0f]?"+Wn+")*"),Oa="(?:"+[vn+Vr+"?",Vr,On,Zr,Rr].join("|")+")",ba=RegExp(Ur+"(?="+Ur+")|"+Oa+Ma,"g"),ca=function(v){for(var A=ba.lastIndex=0;ba.test(v);)++A;return A},pa=function(v){return fr(v)?ca(v):Se(v)},ao=function(v){if(v==null)return 0;if(Vn(v))return pe(v)?pa(v):v.length;var A=Ri(v);return A=="[object Map]"||A=="[object Set]"?v.size:da(v).length},Ki=function(v,A,U){var q=_t(v),st=q||zt(v)||Sr(v);if(A=Lo(A),U==null){var ct=v&&v.constructor;U=st?q?new ct:[]:Ae(v)&&Ke(ct)?Ar(Wa(v)):{}}return(st?Br:Oo)(v,function(mt,wt,kt){return A(U,mt,wt,kt)}),U},Gi=jt?jt.isConcatSpreadable:void 0,$i=function(v){return _t(v)||pt(v)||!!(Gi&&v&&v[Gi])},Qi=function v(A,U,q,st,ct){var mt=-1,wt=A.length;for(q||(q=$i),ct||(ct=[]);++mt<wt;){var kt=A[mt];U>0&&q(kt)?U>1?v(kt,U-1,q,st,ct):Ba(ct,kt):st||(ct[ct.length]=kt)}return ct},fo=function(v,A,U){switch(U.length){case 0:return v.call(A);case 1:return v.call(A,U[0]);case 2:return v.call(A,U[0],U[1]);case 3:return v.call(A,U[0],U[1],U[2])}return v.apply(A,U)},Ao=Math.max,Fa=function(v,A,U){return A=Ao(A===void 0?v.length-1:A,0),function(){for(var q=arguments,st=-1,ct=Ao(q.length-A,0),mt=Array(ct);++st<ct;)mt[st]=q[A+st];st=-1;for(var wt=Array(A+1);++st<A;)wt[st]=q[st];return wt[A]=U(mt),fo(v,this,wt)}},hi=Fr?function(v,A){return Fr(v,"toString",{configurable:!0,enumerable:!1,value:Bi(A),writable:!0})}:po,Is=Date.now,gs=function(v){var A=0,U=0;return function(){var q=Is(),st=16-(q-U);if(U=q,st>0){if(++A>=800)return arguments[0]}else A=0;return v.apply(void 0,arguments)}}(hi),as=function(v,A){return gs(Fa(v,A,po),v+"")},ou=function(v,A,U,q){for(var st=v.length,ct=U+(q?1:-1);q?ct--:++ct<st;)if(A(v[ct],ct,v))return ct;return-1},lc=function(v){return v!=v},ll=function(v,A,U){for(var q=U-1,st=v.length;++q<st;)if(v[q]===A)return q;return-1},hl=function(v,A,U){return A==A?ll(v,A,U):ou(v,lc,U)},hc=function(v,A){return!!(v==null?0:v.length)&&hl(v,A,0)>-1},oh=function(v,A,U){for(var q=-1,st=v==null?0:v.length;++q<st;)if(U(A,v[q]))return!0;return!1},dc=function(){},Hu=Ti&&1/bo(new Ti([,-0]))[1]==1/0?function(v){return new Ti(v)}:dc,dl=function(v,A,U){var q=-1,st=hc,ct=v.length,mt=!0,wt=[],kt=wt;if(U)mt=!1,st=oh;else if(ct>=200){var Ht=A?null:Hu(v);if(Ht)return bo(Ht);mt=!1,st=Fi,kt=new so}else kt=A?[]:wt;t:for(;++q<ct;){var ie=v[q],qt=A?A(ie):ie;if(ie=U||ie!==0?ie:0,mt&&qt==qt){for(var Oe=kt.length;Oe--;)if(kt[Oe]===qt)continue t;A&&kt.push(qt),wt.push(ie)}else st(kt,qt,U)||(kt!==wt&&kt.push(qt),wt.push(ie))}return wt},vc=function(v){return ot(v)&&Vn(v)},vl=as(function(v){return dl(Qi(v,1,vc,!0))}),sh=function(v,A){return en(A,function(U){return v[U]})},su,gl=function(v){return v==null?[]:sh(v,se(v))};try{su={clone:Yo,constant:Bi,each:Hi,filter:nu,has:vs,isArray:_t,isEmpty:h,isFunction:Ke,isUndefined:P,keys:se,map:St,reduce:Qt,size:ao,transform:Ki,union:vl,values:gl}}catch(v){}su||(su=window._);var Un=su,Su=Ga;function Ga(v){this._isDirected=!Un.has(v,"directed")||v.directed,this._isMultigraph=!!Un.has(v,"multigraph")&&v.multigraph,this._isCompound=!!Un.has(v,"compound")&&v.compound,this._label=void 0,this._defaultNodeLabelFn=Un.constant(void 0),this._defaultEdgeLabelFn=Un.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function gc(v,A){v[A]?v[A]++:v[A]=1}function Tf(v,A){--v[A]||delete v[A]}function uu(v,A,U,q){var st=""+A,ct=""+U;if(!v&&st>ct){var mt=st;st=ct,ct=mt}return st+""+ct+""+(Un.isUndefined(q)?"\0":q)}function pc(v,A,U,q){var st=""+A,ct=""+U;if(!v&&st>ct){var mt=st;st=ct,ct=mt}var wt={v:st,w:ct};return q&&(wt.name=q),wt}function yc(v,A){return uu(v,A.v,A.w,A.name)}Ga.prototype._nodeCount=0,Ga.prototype._edgeCount=0,Ga.prototype.isDirected=function(){return this._isDirected},Ga.prototype.isMultigraph=function(){return this._isMultigraph},Ga.prototype.isCompound=function(){return this._isCompound},Ga.prototype.setGraph=function(v){return this._label=v,this},Ga.prototype.graph=function(){return this._label},Ga.prototype.setDefaultNodeLabel=function(v){return Un.isFunction(v)||(v=Un.constant(v)),this._defaultNodeLabelFn=v,this},Ga.prototype.nodeCount=function(){return this._nodeCount},Ga.prototype.nodes=function(){return Un.keys(this._nodes)},Ga.prototype.sources=function(){var v=this;return Un.filter(this.nodes(),function(A){return Un.isEmpty(v._in[A])})},Ga.prototype.sinks=function(){var v=this;return Un.filter(this.nodes(),function(A){return Un.isEmpty(v._out[A])})},Ga.prototype.setNodes=function(v,A){var U=arguments,q=this;return Un.each(v,function(st){U.length>1?q.setNode(st,A):q.setNode(st)}),this},Ga.prototype.setNode=function(v,A){return Un.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=A),this):(this._nodes[v]=arguments.length>1?A:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},Ga.prototype.node=function(v){return this._nodes[v]},Ga.prototype.hasNode=function(v){return Un.has(this._nodes,v)},Ga.prototype.removeNode=function(v){var A=this;if(Un.has(this._nodes,v)){var U=function(q){A.removeEdge(A._edgeObjs[q])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],Un.each(this.children(v),function(q){A.setParent(q)}),delete this._children[v]),Un.each(Un.keys(this._in[v]),U),delete this._in[v],delete this._preds[v],Un.each(Un.keys(this._out[v]),U),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},Ga.prototype.setParent=function(v,A){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Un.isUndefined(A))A="\0";else{for(var U=A+="";!Un.isUndefined(U);U=this.parent(U))if(U===v)throw new Error("Setting "+A+" as parent of "+v+" would create a cycle");this.setNode(A)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=A,this._children[A][v]=!0,this},Ga.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},Ga.prototype.parent=function(v){if(this._isCompound){var A=this._parent[v];if(A!=="\0")return A}},Ga.prototype.children=function(v){if(Un.isUndefined(v)&&(v="\0"),this._isCompound){var A=this._children[v];if(A)return Un.keys(A)}else{if(v==="\0")return this.nodes();if(this.hasNode(v))return[]}},Ga.prototype.predecessors=function(v){var A=this._preds[v];if(A)return Un.keys(A)},Ga.prototype.successors=function(v){var A=this._sucs[v];if(A)return Un.keys(A)},Ga.prototype.neighbors=function(v){var A=this.predecessors(v);if(A)return Un.union(A,this.successors(v))},Ga.prototype.isLeaf=function(v){return(this.isDirected()?this.successors(v):this.neighbors(v)).length===0},Ga.prototype.filterNodes=function(v){var A=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});A.setGraph(this.graph());var U=this;Un.each(this._nodes,function(ct,mt){v(mt)&&A.setNode(mt,ct)}),Un.each(this._edgeObjs,function(ct){A.hasNode(ct.v)&&A.hasNode(ct.w)&&A.setEdge(ct,U.edge(ct))});var q={};function st(ct){var mt=U.parent(ct);return mt===void 0||A.hasNode(mt)?(q[ct]=mt,mt):mt in q?q[mt]:st(mt)}return this._isCompound&&Un.each(A.nodes(),function(ct){A.setParent(ct,st(ct))}),A},Ga.prototype.setDefaultEdgeLabel=function(v){return Un.isFunction(v)||(v=Un.constant(v)),this._defaultEdgeLabelFn=v,this},Ga.prototype.edgeCount=function(){return this._edgeCount},Ga.prototype.edges=function(){return Un.values(this._edgeObjs)},Ga.prototype.setPath=function(v,A){var U=this,q=arguments;return Un.reduce(v,function(st,ct){return q.length>1?U.setEdge(st,ct,A):U.setEdge(st,ct),ct}),this},Ga.prototype.setEdge=function(){var v,A,U,q,st=!1,ct=arguments[0];typeof ct=="object"&&ct!==null&&"v"in ct?(v=ct.v,A=ct.w,U=ct.name,arguments.length===2&&(q=arguments[1],st=!0)):(v=ct,A=arguments[1],U=arguments[3],arguments.length>2&&(q=arguments[2],st=!0)),v=""+v,A=""+A,Un.isUndefined(U)||(U=""+U);var mt=uu(this._isDirected,v,A,U);if(Un.has(this._edgeLabels,mt))return st&&(this._edgeLabels[mt]=q),this;if(!Un.isUndefined(U)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(A),this._edgeLabels[mt]=st?q:this._defaultEdgeLabelFn(v,A,U);var wt=pc(this._isDirected,v,A,U);return v=wt.v,A=wt.w,Object.freeze(wt),this._edgeObjs[mt]=wt,gc(this._preds[A],v),gc(this._sucs[v],A),this._in[A][mt]=wt,this._out[v][mt]=wt,this._edgeCount++,this},Ga.prototype.edge=function(v,A,U){var q=arguments.length===1?yc(this._isDirected,arguments[0]):uu(this._isDirected,v,A,U);return this._edgeLabels[q]},Ga.prototype.hasEdge=function(v,A,U){var q=arguments.length===1?yc(this._isDirected,arguments[0]):uu(this._isDirected,v,A,U);return Un.has(this._edgeLabels,q)},Ga.prototype.removeEdge=function(v,A,U){var q=arguments.length===1?yc(this._isDirected,arguments[0]):uu(this._isDirected,v,A,U),st=this._edgeObjs[q];return st&&(v=st.v,A=st.w,delete this._edgeLabels[q],delete this._edgeObjs[q],Tf(this._preds[A],v),Tf(this._sucs[v],A),delete this._in[A][q],delete this._out[v][q],this._edgeCount--),this},Ga.prototype.inEdges=function(v,A){var U=this._in[v];if(U){var q=Un.values(U);return A?Un.filter(q,function(st){return st.v===A}):q}},Ga.prototype.outEdges=function(v,A){var U=this._out[v];if(U){var q=Un.values(U);return A?Un.filter(q,function(st){return st.w===A}):q}},Ga.prototype.nodeEdges=function(v,A){var U=this.inEdges(v,A);if(U)return U.concat(this.outEdges(v,A))};var If={Graph:Su,version:"2.1.8"},pl={write:function(v){var A={options:{directed:v.isDirected(),multigraph:v.isMultigraph(),compound:v.isCompound()},nodes:yl(v),edges:ps(v)};return Un.isUndefined(v.graph())||(A.value=Un.clone(v.graph())),A},read:function(v){var A=new Su(v.options).setGraph(v.value);return Un.each(v.nodes,function(U){A.setNode(U.v,U.value),U.parent&&A.setParent(U.v,U.parent)}),Un.each(v.edges,function(U){A.setEdge({v:U.v,w:U.w,name:U.name},U.value)}),A}};function yl(v){return Un.map(v.nodes(),function(A){var U=v.node(A),q=v.parent(A),st={v:A};return Un.isUndefined(U)||(st.value=U),Un.isUndefined(q)||(st.parent=q),st})}function ps(v){return Un.map(v.edges(),function(A){var U=v.edge(A),q={v:A.v,w:A.w};return Un.isUndefined(A.name)||(q.name=A.name),Un.isUndefined(U)||(q.value=U),q})}var mc=function(v){var A,U={},q=[];function st(ct){Un.has(U,ct)||(U[ct]=!0,A.push(ct),Un.each(v.successors(ct),st),Un.each(v.predecessors(ct),st))}return Un.each(v.nodes(),function(ct){A=[],st(ct),A.length&&q.push(A)}),q},zs=xo;function xo(){this._arr=[],this._keyIndices={}}xo.prototype.size=function(){return this._arr.length},xo.prototype.keys=function(){return this._arr.map(function(v){return v.key})},xo.prototype.has=function(v){return Un.has(this._keyIndices,v)},xo.prototype.priority=function(v){var A=this._keyIndices[v];if(A!==void 0)return this._arr[A].priority},xo.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},xo.prototype.add=function(v,A){var U=this._keyIndices;if(v=String(v),!Un.has(U,v)){var q=this._arr,st=q.length;return U[v]=st,q.push({key:v,priority:A}),this._decrease(st),!0}return!1},xo.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},xo.prototype.decrease=function(v,A){var U=this._keyIndices[v];if(A>this._arr[U].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[U].priority+" New: "+A);this._arr[U].priority=A,this._decrease(U)},xo.prototype._heapify=function(v){var A=this._arr,U=2*v,q=U+1,st=v;U<A.length&&(st=A[U].priority<A[st].priority?U:st,q<A.length&&(st=A[q].priority<A[st].priority?q:st),st!==v&&(this._swap(v,st),this._heapify(st)))},xo.prototype._decrease=function(v){for(var A,U=this._arr,q=U[v].priority;v!==0&&!(U[A=v>>1].priority<q);)this._swap(v,A),v=A},xo.prototype._swap=function(v,A){var U=this._arr,q=this._keyIndices,st=U[v],ct=U[A];U[v]=ct,U[A]=st,q[ct.key]=v,q[st.key]=A};var Us=function(v,A,U,q){return function(st,ct,mt,wt){var kt,Ht,ie={},qt=new zs,Oe=function(ir){var Yr=ir.v!==kt?ir.v:ir.w,hr=ie[Yr],pr=mt(ir),gr=Ht.distance+pr;if(pr<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+ir+" Weight: "+pr);gr<hr.distance&&(hr.distance=gr,hr.predecessor=kt,qt.decrease(Yr,gr))};for(st.nodes().forEach(function(ir){var Yr=ir===ct?0:Number.POSITIVE_INFINITY;ie[ir]={distance:Yr},qt.add(ir,Yr)});qt.size()>0&&(kt=qt.removeMin(),(Ht=ie[kt]).distance!==Number.POSITIVE_INFINITY);)wt(kt).forEach(Oe);return ie}(v,String(A),U||Os,q||function(st){return v.outEdges(st)})},Os=Un.constant(1),Of=function(v,A,U){return Un.transform(v.nodes(),function(q,st){q[st]=Us(v,st,A,U)},{})},bc=function(v){var A=0,U=[],q={},st=[];function ct(mt){var wt=q[mt]={onStack:!0,lowlink:A,index:A++};if(U.push(mt),v.successors(mt).forEach(function(ie){Un.has(q,ie)?q[ie].onStack&&(wt.lowlink=Math.min(wt.lowlink,q[ie].index)):(ct(ie),wt.lowlink=Math.min(wt.lowlink,q[ie].lowlink))}),wt.lowlink===wt.index){var kt,Ht=[];do kt=U.pop(),q[kt].onStack=!1,Ht.push(kt);while(mt!==kt);st.push(Ht)}}return v.nodes().forEach(function(mt){Un.has(q,mt)||ct(mt)}),st},ml=function(v){return Un.filter(bc(v),function(A){return A.length>1||A.length===1&&v.hasEdge(A[0],A[0])})},bl=function(v,A,U){return function(q,st,ct){var mt={},wt=q.nodes();return wt.forEach(function(kt){mt[kt]={},mt[kt][kt]={distance:0},wt.forEach(function(Ht){kt!==Ht&&(mt[kt][Ht]={distance:Number.POSITIVE_INFINITY})}),ct(kt).forEach(function(Ht){var ie=Ht.v===kt?Ht.w:Ht.v,qt=st(Ht);mt[kt][ie]={distance:qt,predecessor:kt}})}),wt.forEach(function(kt){var Ht=mt[kt];wt.forEach(function(ie){var qt=mt[ie];wt.forEach(function(Oe){var ir=qt[kt],Yr=Ht[Oe],hr=qt[Oe],pr=ir.distance+Yr.distance;pr<hr.distance&&(hr.distance=pr,hr.predecessor=Yr.predecessor)})})}),mt}(v,A||xl,U||function(q){return v.outEdges(q)})},xl=Un.constant(1),Lf=El;function El(v){var A={},U={},q=[];if(Un.each(v.sinks(),function st(ct){if(Un.has(U,ct))throw new Df;Un.has(A,ct)||(U[ct]=!0,A[ct]=!0,Un.each(v.predecessors(ct),st),delete U[ct],q.push(ct))}),Un.size(A)!==v.nodeCount())throw new Df;return q}function Df(){}El.CycleException=Df,Df.prototype=new Error;var wl=function(v,A,U){Un.isArray(A)||(A=[A]);var q=(v.isDirected()?v.successors:v.neighbors).bind(v),st=[],ct={};return Un.each(A,function(mt){if(!v.hasNode(mt))throw new Error("Graph does not have node: "+mt);xc(v,mt,U==="post",ct,q,st)}),st};function xc(v,A,U,q,st,ct){Un.has(q,A)||(q[A]=!0,U||ct.push(A),Un.each(st(A),function(mt){xc(v,mt,U,q,st,ct)}),U&&ct.push(A))}var Zu,Ec={Graph:If.Graph,json:pl,alg:{components:mc,dijkstra:Us,dijkstraAll:Of,findCycles:ml,floydWarshall:bl,isAcyclic:function(v){try{Lf(v)}catch(A){if(A instanceof Lf.CycleException)return!1;throw A}return!0},postorder:function(v,A){return wl(v,A,"post")},preorder:function(v,A){return wl(v,A,"pre")},prim:function(v,A){var U,q=new Su,st={},ct=new zs;function mt(kt){var Ht=kt.v===U?kt.w:kt.v,ie=ct.priority(Ht);if(ie!==void 0){var qt=A(kt);qt<ie&&(st[Ht]=U,ct.decrease(Ht,qt))}}if(v.nodeCount()===0)return q;Un.each(v.nodes(),function(kt){ct.add(kt,Number.POSITIVE_INFINITY),q.setNode(kt)}),ct.decrease(v.nodes()[0],0);for(var wt=!1;ct.size()>0;){if(U=ct.removeMin(),Un.has(st,U))q.setEdge(U,st[U]);else{if(wt)throw new Error("Input graph is not connected: "+v);wt=!0}v.nodeEdges(U).forEach(mt)}return q},tarjan:bc,topsort:Lf},version:If.version};try{Zu=Ec}catch(v){}Zu||(Zu=window.graphlib);var us=Zu,wc=function(v){return ro(v,5)},Ku=function(v,A,U){if(!Ae(U))return!1;var q=typeof A;return!!(q=="number"?Vn(U)&&Me(A,U.length):q=="string"&&A in U)&&x(U[A],v)},Sl=Object.prototype,uh=Sl.hasOwnProperty,Sc=as(function(v,A){v=Object(v);var U=-1,q=A.length,st=q>2?A[2]:void 0;for(st&&Ku(A[0],A[1],st)&&(q=1);++U<q;)for(var ct=A[U],mt=We(ct),wt=-1,kt=mt.length;++wt<kt;){var Ht=mt[wt],ie=v[Ht];(ie===void 0||x(ie,Sl[Ht])&&!uh.call(v,Ht))&&(v[Ht]=ct[Ht])}return v}),$u=function(v){return function(A,U,q){var st=Object(A);if(!Vn(A)){var ct=Lo(U);A=se(A),U=function(wt){return ct(st[wt],wt,st)}}var mt=v(A,U,q);return mt>-1?st[ct?A[mt]:mt]:void 0}},_u=/^\s+|\s+$/g,Qu=/^[-+]0x[0-9a-f]+$/i,qu=/^0b[01]+$/i,_l=/^0o[0-7]+$/i,Nf=parseInt,Mu=function(v){if(typeof v=="number")return v;if(Tt(v))return NaN;if(Ae(v)){var A=typeof v.valueOf=="function"?v.valueOf():v;v=Ae(A)?A+"":A}if(typeof v!="string")return v===0?v:+v;v=v.replace(_u,"");var U=qu.test(v);return U||_l.test(v)?Nf(v.slice(2),U?2:8):Qu.test(v)?NaN:+v},fu=function(v){return v?(v=Mu(v))===Infinity||v===-Infinity?17976931348623157e292*(v<0?-1:1):v==v?v:0:v===0?v:0},cu=function(v){var A=fu(v),U=A%1;return A==A?U?A-U:A:0},Pf=Math.max,Ju=$u(function(v,A,U){var q=v==null?0:v.length;if(!q)return-1;var st=U==null?0:cu(U);return st<0&&(st=Pf(q+st,0)),ou(v,Lo(A),st)}),_c=function(v){return(v==null?0:v.length)?Qi(v,1):[]},lu=function(v,A){return v==null?v:no(v,Ei(A),We)},fh=function(v){var A=v==null?0:v.length;return A?v[A-1]:void 0},Mc=function(v,A){var U={};return A=Lo(A),Oo(v,function(q,st,ct){kr(U,st,A(q,st,ct))}),U},tf=function(v,A,U){for(var q=-1,st=v.length;++q<st;){var ct=v[q],mt=A(ct);if(mt!=null&&(wt===void 0?mt==mt&&!Tt(mt):U(mt,wt)))var wt=mt,kt=ct}return kt},Cc=function(v,A){return v>A},Ml=function(v){return v&&v.length?tf(v,po,Cc):void 0},kf=function(v,A,U){(U!==void 0&&!x(v[A],U)||U===void 0&&!(A in v))&&kr(v,A,U)},ch=Function.prototype,Ac=Object.prototype,Rf=ch.toString,Cl=Ac.hasOwnProperty,ef=Rf.call(Object),Ls=function(v){if(!ot(v)||me(v)!="[object Object]")return!1;var A=Wa(v);if(A===null)return!0;var U=Cl.call(A,"constructor")&&A.constructor;return typeof U=="function"&&U instanceof U&&Rf.call(U)==ef},Cu=function(v,A){if((A!=="constructor"||typeof v[A]!="function")&&A!="__proto__")return v[A]},Ds=function(v){return ne(v,We(v))},rf=function(v,A,U,q,st,ct,mt){var wt=Cu(v,U),kt=Cu(A,U),Ht=mt.get(kt);if(Ht)kf(v,U,Ht);else{var ie=ct?ct(wt,kt,U+"",v,A,mt):void 0,qt=ie===void 0;if(qt){var Oe=_t(kt),ir=!Oe&&zt(kt),Yr=!Oe&&!ir&&Sr(kt);ie=kt,Oe||ir||Yr?_t(wt)?ie=wt:vc(wt)?ie=pn(wt):ir?(qt=!1,ie=nn(kt,!0)):Yr?(qt=!1,ie=Li(kt,!0)):ie=[]:Ls(kt)||pt(kt)?(ie=wt,pt(wt)?ie=Ds(wt):Ae(wt)&&!Ke(wt)||(ie=qr(kt))):qt=!1}qt&&(mt.set(kt,ie),st(ie,kt,q,ct,mt),mt.delete(kt)),kf(v,U,ie)}},Qo=function v(A,U,q,st,ct){A!==U&&no(U,function(mt,wt){if(ct||(ct=new vr),Ae(mt))rf(A,U,wt,q,v,st,ct);else{var kt=st?st(Cu(A,wt),mt,wt+"",A,U,ct):void 0;kt===void 0&&(kt=mt),kf(A,wt,kt)}},We)},Au=function(v){return as(function(A,U){var q=-1,st=U.length,ct=st>1?U[st-1]:void 0,mt=st>2?U[2]:void 0;for(ct=v.length>3&&typeof ct=="function"?(st--,ct):void 0,mt&&Ku(U[0],U[1],mt)&&(ct=st<3?void 0:ct,st=1),A=Object(A);++q<st;){var wt=U[q];wt&&v(A,wt,q,ct)}return A})}(function(v,A,U){Qo(v,A,U)}),Al=function(v,A){return v<A},Tu=function(v){return v&&v.length?tf(v,po,Al):void 0},Tl=function(v,A){return v&&v.length?tf(v,Lo(A),Al):void 0},Iu=function(){return xt.Date.now()},Tc=function(v,A,U,q){if(!Ae(v))return v;for(var st=-1,ct=(A=Jn(A,v)).length,mt=ct-1,wt=v;wt!=null&&++st<ct;){var kt=ja(A[st]),Ht=U;if(kt==="__proto__"||kt==="constructor"||kt==="prototype")return v;if(st!=mt){var ie=wt[kt];(Ht=q?q(ie,kt,wt):void 0)===void 0&&(Ht=Ae(ie)?ie:Me(A[st+1])?[]:{})}Te(wt,kt,Ht),wt=wt[kt]}return v},Ic=function(v,A,U){for(var q=-1,st=A.length,ct={};++q<st;){var mt=A[q],wt=Va(v,mt);U(wt,mt)&&Tc(ct,Jn(mt,v),wt)}return ct},Bf=function(v,A){return Ic(v,A,function(U,q){return Ro(v,q)})},Ff=function(v){return gs(Fa(v,void 0,_c),v+"")}(function(v,A){return v==null?{}:Bf(v,A)}),Oc=Math.ceil,Gf=Math.max,Lc=function(v,A,U,q){for(var st=-1,ct=Gf(Oc((A-v)/(U||1)),0),mt=Array(ct);ct--;)mt[q?ct:++st]=v,v+=U;return mt},Ou=function(v){return function(A,U,q){return q&&typeof q!="number"&&Ku(A,U,q)&&(U=q=void 0),A=fu(A),U===void 0?(U=A,A=0):U=fu(U),q=q===void 0?A<U?1:-1:fu(q),Lc(A,U,q,v)}}(),Dc=function(v,A){var U=v.length;for(v.sort(A);U--;)v[U]=v[U].value;return v},nf=function(v,A){if(v!==A){var U=v!==void 0,q=v===null,st=v==v,ct=Tt(v),mt=A!==void 0,wt=A===null,kt=A==A,Ht=Tt(A);if(!wt&&!Ht&&!ct&&v>A||ct&&mt&&kt&&!wt&&!Ht||q&&mt&&kt||!U&&kt||!st)return 1;if(!q&&!ct&&!Ht&&v<A||Ht&&U&&st&&!q&&!ct||wt&&U&&st||!mt&&st||!kt)return-1}return 0},Il=function(v,A,U){for(var q=-1,st=v.criteria,ct=A.criteria,mt=st.length,wt=U.length;++q<mt;){var kt=nf(st[q],ct[q]);if(kt)return q>=wt?kt:kt*(U[q]=="desc"?-1:1)}return v.index-A.index},Lu=function(v,A,U){A=A.length?en(A,function(ct){return _t(ct)?function(mt){return Va(mt,ct.length===1?ct[0]:ct)}:ct}):[po];var q=-1;A=en(A,sn(Lo));var st=ht(v,function(ct,mt,wt){return{criteria:en(A,function(kt){return kt(ct)}),index:++q,value:ct}});return Dc(st,function(ct,mt){return Il(ct,mt,U)})},Vo=as(function(v,A){if(v==null)return[];var U=A.length;return U>1&&Ku(v,A[0],A[1])?A=[]:U>2&&Ku(A[0],A[1],A[2])&&(A=[A[0]]),Lu(v,Qi(A,1),[])}),Nc=0,Ol=function(v){var A=++Nc;return Hn(v)+A},Pc=function(v,A,U){for(var q=-1,st=v.length,ct=A.length,mt={};++q<st;){var wt=q<ct?A[q]:void 0;U(mt,v[q],wt)}return mt},Ws,Ns=function(v,A){return Pc(v||[],A||[],Te)};try{Ws={cloneDeep:wc,constant:Bi,defaults:Sc,each:Hi,filter:nu,find:Ju,flatten:_c,forEach:yo,forIn:lu,has:vs,isUndefined:P,last:fh,map:St,mapValues:Mc,max:Ml,merge:Au,min:Tu,minBy:Tl,now:Iu,pick:Ff,range:Ou,reduce:Qt,sortBy:Vo,uniqueId:Ol,values:gl,zipObject:Ns}}catch(v){}Ws||(Ws=window._);var Ye=Ws,kc=hu;function hu(){var v={};v._next=v._prev=v,this._sentinel=v}function zf(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function fs(v,A){if(v!=="_next"&&v!=="_prev")return A}hu.prototype.dequeue=function(){var v=this._sentinel,A=v._prev;if(A!==v)return zf(A),A},hu.prototype.enqueue=function(v){var A=this._sentinel;v._prev&&v._next&&zf(v),v._next=A._next,A._next._prev=v,A._next=v,v._prev=A},hu.prototype.toString=function(){for(var v=[],A=this._sentinel,U=A._prev;U!==A;)v.push(JSON.stringify(U,fs)),U=U._prev;return"["+v.join(", ")+"]"};var Uf=us.Graph,af=function(v,A){if(v.nodeCount()<=1)return[];var U=function(st,ct){var mt=new Uf,wt=0,kt=0;Ye.forEach(st.nodes(),function(qt){mt.setNode(qt,{v:qt,in:0,out:0})}),Ye.forEach(st.edges(),function(qt){var Oe=mt.edge(qt.v,qt.w)||0,ir=ct(qt),Yr=Oe+ir;mt.setEdge(qt.v,qt.w,Yr),kt=Math.max(kt,mt.node(qt.v).out+=ir),wt=Math.max(wt,mt.node(qt.w).in+=ir)});var Ht=Ye.range(kt+wt+3).map(function(){return new kc}),ie=wt+1;return Ye.forEach(mt.nodes(),function(qt){jf(Ht,ie,mt.node(qt))}),{graph:mt,buckets:Ht,zeroIdx:ie}}(v,A||Wf),q=function(st,ct,mt){for(var wt,kt=[],Ht=ct[ct.length-1],ie=ct[0];st.nodeCount();){for(;wt=ie.dequeue();)Du(st,ct,mt,wt);for(;wt=Ht.dequeue();)Du(st,ct,mt,wt);if(st.nodeCount()){for(var qt=ct.length-2;qt>0;--qt)if(wt=ct[qt].dequeue()){kt=kt.concat(Du(st,ct,mt,wt,!0));break}}}return kt}(U.graph,U.buckets,U.zeroIdx);return Ye.flatten(Ye.map(q,function(st){return v.outEdges(st.v,st.w)}),!0)},Wf=Ye.constant(1);function Du(v,A,U,q,st){var ct=st?[]:void 0;return Ye.forEach(v.inEdges(q.v),function(mt){var wt=v.edge(mt),kt=v.node(mt.v);st&&ct.push({v:mt.v,w:mt.w}),kt.out-=wt,jf(A,U,kt)}),Ye.forEach(v.outEdges(q.v),function(mt){var wt=v.edge(mt),kt=mt.w,Ht=v.node(kt);Ht.in-=wt,jf(A,U,Ht)}),v.removeNode(q.v),ct}function jf(v,A,U){U.out?U.in?v[U.out-U.in+A].enqueue(U):v[v.length-1].enqueue(U):v[0].enqueue(U)}var Rc={run:function(v){var A=v.graph().acyclicer==="greedy"?af(v,function(U){return function(q){return U.edge(q).weight}}(v)):function(U){var q=[],st={},ct={};function mt(wt){Ye.has(ct,wt)||(ct[wt]=!0,st[wt]=!0,Ye.forEach(U.outEdges(wt),function(kt){Ye.has(st,kt.w)?q.push(kt):mt(kt.w)}),delete st[wt])}return Ye.forEach(U.nodes(),mt),q}(v);Ye.forEach(A,function(U){var q=v.edge(U);v.removeEdge(U),q.forwardName=U.name,q.reversed=!0,v.setEdge(U.w,U.v,q,Ye.uniqueId("rev"))})},undo:function(v){Ye.forEach(v.edges(),function(A){var U=v.edge(A);if(U.reversed){v.removeEdge(A);var q=U.forwardName;delete U.reversed,delete U.forwardName,v.setEdge(A.w,A.v,U,q)}})}},Nu=us.Graph,Eo={addDummyNode:Pu,simplify:function(v){var A=new Nu().setGraph(v.graph());return Ye.forEach(v.nodes(),function(U){A.setNode(U,v.node(U))}),Ye.forEach(v.edges(),function(U){var q=A.edge(U.v,U.w)||{weight:0,minlen:1},st=v.edge(U);A.setEdge(U.v,U.w,{weight:q.weight+st.weight,minlen:Math.max(q.minlen,st.minlen)})}),A},asNonCompoundGraph:function(v){var A=new Nu({multigraph:v.isMultigraph()}).setGraph(v.graph());return Ye.forEach(v.nodes(),function(U){v.children(U).length||A.setNode(U,v.node(U))}),Ye.forEach(v.edges(),function(U){A.setEdge(U,v.edge(U))}),A},successorWeights:function(v){var A=Ye.map(v.nodes(),function(U){var q={};return Ye.forEach(v.outEdges(U),function(st){q[st.w]=(q[st.w]||0)+v.edge(st).weight}),q});return Ye.zipObject(v.nodes(),A)},predecessorWeights:function(v){var A=Ye.map(v.nodes(),function(U){var q={};return Ye.forEach(v.inEdges(U),function(st){q[st.v]=(q[st.v]||0)+v.edge(st).weight}),q});return Ye.zipObject(v.nodes(),A)},intersectRect:function(v,A){var U,q,st=v.x,ct=v.y,mt=A.x-st,wt=A.y-ct,kt=v.width/2,Ht=v.height/2;if(!mt&&!wt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(wt)*kt>Math.abs(mt)*Ht?(wt<0&&(Ht=-Ht),U=Ht*mt/wt,q=Ht):(mt<0&&(kt=-kt),U=kt,q=kt*wt/mt),{x:st+U,y:ct+q}},buildLayerMatrix:function(v){var A=Ye.map(Ye.range(Ll(v)+1),function(){return[]});return Ye.forEach(v.nodes(),function(U){var q=v.node(U),st=q.rank;Ye.isUndefined(st)||(A[st][q.order]=U)}),A},normalizeRanks:function(v){var A=Ye.min(Ye.map(v.nodes(),function(U){return v.node(U).rank}));Ye.forEach(v.nodes(),function(U){var q=v.node(U);Ye.has(q,"rank")&&(q.rank-=A)})},removeEmptyRanks:function(v){var A=Ye.min(Ye.map(v.nodes(),function(ct){return v.node(ct).rank})),U=[];Ye.forEach(v.nodes(),function(ct){var mt=v.node(ct).rank-A;U[mt]||(U[mt]=[]),U[mt].push(ct)});var q=0,st=v.graph().nodeRankFactor;Ye.forEach(U,function(ct,mt){Ye.isUndefined(ct)&&mt%st!=0?--q:q&&Ye.forEach(ct,function(wt){v.node(wt).rank+=q})})},addBorderNode:function(v,A,U,q){var st={width:0,height:0};return arguments.length>=4&&(st.rank=U,st.order=q),Pu(v,"border",st,A)},maxRank:Ll,partition:function(v,A){var U={lhs:[],rhs:[]};return Ye.forEach(v,function(q){A(q)?U.lhs.push(q):U.rhs.push(q)}),U},time:function(v,A){var U=Ye.now();try{return A()}finally{console.log(v+" time: "+(Ye.now()-U)+"ms")}},notime:function(v,A){return A()}};function Pu(v,A,U,q){var st;do st=Ye.uniqueId(q);while(v.hasNode(st));return U.dummy=A,v.setNode(st,U),st}function Ll(v){return Ye.max(Ye.map(v.nodes(),function(A){var U=v.node(A).rank;if(!Ye.isUndefined(U))return U}))}var of={run:function(v){v.graph().dummyChains=[],Ye.forEach(v.edges(),function(A){(function(U,q){var st,ct,mt,wt=q.v,kt=U.node(wt).rank,Ht=q.w,ie=U.node(Ht).rank,qt=q.name,Oe=U.edge(q),ir=Oe.labelRank;if(ie!==kt+1){for(U.removeEdge(q),mt=0,++kt;kt<ie;++mt,++kt)Oe.points=[],ct={width:0,height:0,edgeLabel:Oe,edgeObj:q,rank:kt},st=Eo.addDummyNode(U,"edge",ct,"_d"),kt===ir&&(ct.width=Oe.width,ct.height=Oe.height,ct.dummy="edge-label",ct.labelpos=Oe.labelpos),U.setEdge(wt,st,{weight:Oe.weight},qt),mt===0&&U.graph().dummyChains.push(st),wt=st;U.setEdge(wt,Ht,{weight:Oe.weight},qt)}})(v,A)})},undo:function(v){Ye.forEach(v.graph().dummyChains,function(A){var U,q=v.node(A),st=q.edgeLabel;for(v.setEdge(q.edgeObj,st);q.dummy;)U=v.successors(A)[0],v.removeNode(A),st.points.push({x:q.x,y:q.y}),q.dummy==="edge-label"&&(st.x=q.x,st.y=q.y,st.width=q.width,st.height=q.height),A=U,q=v.node(A)})}},ys=function(v){var A={};Ye.forEach(v.sources(),function U(q){var st=v.node(q);if(Ye.has(A,q))return st.rank;A[q]=!0;var ct=Ye.min(Ye.map(v.outEdges(q),function(mt){return U(mt.w)-v.edge(mt).minlen}));return ct!==Number.POSITIVE_INFINITY&&ct!=null||(ct=0),st.rank=ct})},du=function(v,A){return v.node(A.w).rank-v.node(A.v).rank-v.edge(A).minlen},js=us.Graph,vu=du,sf=function(v){var A,U,q=new js({directed:!1}),st=v.nodes()[0],ct=v.nodeCount();for(q.setNode(st,{});Xs(q,v)<ct;)A=Ys(q,v),U=q.hasNode(A.v)?vu(v,A):-vu(v,A),gu(q,v,U);return q};function Xs(v,A){return Ye.forEach(v.nodes(),function U(q){Ye.forEach(A.nodeEdges(q),function(st){var ct=st.v,mt=q===ct?st.w:ct;v.hasNode(mt)||vu(A,st)||(v.setNode(mt,{}),v.setEdge(q,mt,{}),U(mt))})}),v.nodeCount()}function Ys(v,A){return Ye.minBy(A.edges(),function(U){if(v.hasNode(U.v)!==v.hasNode(U.w))return vu(A,U)})}function gu(v,A,U){Ye.forEach(v.nodes(),function(q){A.node(q).rank+=U})}var uf=du,Xf=ys,pu=us.alg.preorder,Bc=us.alg.postorder,ff=Eo.simplify,Vs=cs;function cs(v){v=ff(v),Xf(v);var A,U=sf(v);for(yu(U),Fc(U,v);A=zc(U);)Hs(U,v,A,Nl(U,v,A))}function Fc(v,A){var U=Bc(v,v.nodes());U=U.slice(0,U.length-1),Ye.forEach(U,function(q){(function(st,ct,mt){var wt=st.node(mt).parent;st.edge(mt,wt).cutvalue=Dl(st,ct,mt)})(v,A,q)})}function Dl(v,A,U){var q=v.node(U).parent,st=!0,ct=A.edge(U,q),mt=0;return ct||(st=!1,ct=A.edge(q,U)),mt=ct.weight,Ye.forEach(A.nodeEdges(U),function(wt){var kt,Ht,ie=wt.v===U,qt=ie?wt.w:wt.v;if(qt!==q){var Oe=ie===st,ir=A.edge(wt).weight;if(mt+=Oe?ir:-ir,kt=U,Ht=qt,v.hasEdge(kt,Ht)){var Yr=v.edge(U,qt).cutvalue;mt+=Oe?-Yr:Yr}}}),mt}function yu(v,A){arguments.length<2&&(A=v.nodes()[0]),Gc(v,{},1,A)}function Gc(v,A,U,q,st){var ct=U,mt=v.node(q);return A[q]=!0,Ye.forEach(v.neighbors(q),function(wt){Ye.has(A,wt)||(U=Gc(v,A,U,wt,q))}),mt.low=ct,mt.lim=U++,st?mt.parent=st:delete mt.parent,U}function zc(v){return Ye.find(v.edges(),function(A){return v.edge(A).cutvalue<0})}function Nl(v,A,U){var q=U.v,st=U.w;A.hasEdge(q,st)||(q=U.w,st=U.v);var ct=v.node(q),mt=v.node(st),wt=ct,kt=!1;ct.lim>mt.lim&&(wt=mt,kt=!0);var Ht=Ye.filter(A.edges(),function(ie){return kt===Pl(v,v.node(ie.v),wt)&&kt!==Pl(v,v.node(ie.w),wt)});return Ye.minBy(Ht,function(ie){return uf(A,ie)})}function Hs(v,A,U,q){var st=U.v,ct=U.w;v.removeEdge(st,ct),v.setEdge(q.v,q.w,{}),yu(v),Fc(v,A),function(mt,wt){var kt=Ye.find(mt.nodes(),function(ie){return!wt.node(ie).parent}),Ht=pu(mt,kt);Ht=Ht.slice(1),Ye.forEach(Ht,function(ie){var qt=mt.node(ie).parent,Oe=wt.edge(ie,qt),ir=!1;Oe||(Oe=wt.edge(qt,ie),ir=!0),wt.node(ie).rank=wt.node(qt).rank+(ir?Oe.minlen:-Oe.minlen)})}(v,A)}function Pl(v,A,U){return U.low<=A.lim&&A.lim<=U.lim}cs.initLowLimValues=yu,cs.initCutValues=Fc,cs.calcCutValue=Dl,cs.leaveEdge=zc,cs.enterEdge=Nl,cs.exchangeEdges=Hs;var kl=ys,Rl=function(v){switch(v.graph().ranker){case"network-simplex":Bl(v);break;case"tight-tree":(function(A){kl(A),sf(A)})(v);break;case"longest-path":Yf(v);break;default:Bl(v)}},Yf=kl;function Bl(v){Vs(v)}var lh=function(v){var A=function(U){var q={},st=0;function ct(mt){var wt=st;Ye.forEach(U.children(mt),ct),q[mt]={low:wt,lim:st++}}return Ye.forEach(U.children(),ct),q}(v);Ye.forEach(v.graph().dummyChains,function(U){for(var q=v.node(U),st=q.edgeObj,ct=function(qt,Oe,ir,Yr){var hr,pr,gr=[],En=[],kn=Math.min(Oe[ir].low,Oe[Yr].low),Tn=Math.max(Oe[ir].lim,Oe[Yr].lim);hr=ir;do hr=qt.parent(hr),gr.push(hr);while(hr&&(Oe[hr].low>kn||Tn>Oe[hr].lim));for(pr=hr,hr=Yr;(hr=qt.parent(hr))!==pr;)En.push(hr);return{path:gr.concat(En.reverse()),lca:pr}}(v,A,st.v,st.w),mt=ct.path,wt=ct.lca,kt=0,Ht=mt[kt],ie=!0;U!==st.w;){if(q=v.node(U),ie){for(;(Ht=mt[kt])!==wt&&v.node(Ht).maxRank<q.rank;)kt++;Ht===wt&&(ie=!1)}if(!ie){for(;kt<mt.length-1&&v.node(Ht=mt[kt+1]).minRank<=q.rank;)kt++;Ht=mt[kt]}v.setParent(U,Ht),U=v.successors(U)[0]}})},Uc={run:function(v){var A=Eo.addDummyNode(v,"root",{},"_root"),U=function(mt){var wt={};function kt(Ht,ie){var qt=mt.children(Ht);qt&&qt.length&&Ye.forEach(qt,function(Oe){kt(Oe,ie+1)}),wt[Ht]=ie}return Ye.forEach(mt.children(),function(Ht){kt(Ht,1)}),wt}(v),q=Ye.max(Ye.values(U))-1,st=2*q+1;v.graph().nestingRoot=A,Ye.forEach(v.edges(),function(mt){v.edge(mt).minlen*=st});var ct=function(mt){return Ye.reduce(mt.edges(),function(wt,kt){return wt+mt.edge(kt).weight},0)}(v)+1;Ye.forEach(v.children(),function(mt){Wc(v,A,st,ct,q,U,mt)}),v.graph().nodeRankFactor=st},cleanup:function(v){var A=v.graph();v.removeNode(A.nestingRoot),delete A.nestingRoot,Ye.forEach(v.edges(),function(U){v.edge(U).nestingEdge&&v.removeEdge(U)})}};function Wc(v,A,U,q,st,ct,mt){var wt=v.children(mt);if(wt.length){var kt=Eo.addBorderNode(v,"_bt"),Ht=Eo.addBorderNode(v,"_bb"),ie=v.node(mt);v.setParent(kt,mt),ie.borderTop=kt,v.setParent(Ht,mt),ie.borderBottom=Ht,Ye.forEach(wt,function(qt){Wc(v,A,U,q,st,ct,qt);var Oe=v.node(qt),ir=Oe.borderTop?Oe.borderTop:qt,Yr=Oe.borderBottom?Oe.borderBottom:qt,hr=Oe.borderTop?q:2*q,pr=ir!==Yr?1:st-ct[mt]+1;v.setEdge(kt,ir,{weight:hr,minlen:pr,nestingEdge:!0}),v.setEdge(Yr,Ht,{weight:hr,minlen:pr,nestingEdge:!0})}),v.parent(mt)||v.setEdge(A,kt,{weight:0,minlen:st+ct[mt]})}else mt!==A&&v.setEdge(A,mt,{weight:0,minlen:U})}var Fl=function(v){Ye.forEach(v.children(),function A(U){var q=v.children(U),st=v.node(U);if(q.length&&Ye.forEach(q,A),Ye.has(st,"minRank")){st.borderLeft=[],st.borderRight=[];for(var ct=st.minRank,mt=st.maxRank+1;ct<mt;++ct)Gl(v,"borderLeft","_bl",U,st,ct),Gl(v,"borderRight","_br",U,st,ct)}})};function Gl(v,A,U,q,st,ct){var mt={width:0,height:0,rank:ct,borderType:A},wt=st[A][ct-1],kt=Eo.addDummyNode(v,"border",mt,U);st[A][ct]=kt,v.setParent(kt,q),wt&&v.setEdge(wt,kt,{weight:1})}var zl={adjust:function(v){var A=v.graph().rankdir.toLowerCase();A!=="lr"&&A!=="rl"||jc(v)},undo:function(v){var A=v.graph().rankdir.toLowerCase();A!=="bt"&&A!=="rl"||function(U){Ye.forEach(U.nodes(),function(q){Xc(U.node(q))}),Ye.forEach(U.edges(),function(q){var st=U.edge(q);Ye.forEach(st.points,Xc),Ye.has(st,"y")&&Xc(st)})}(v),A!=="lr"&&A!=="rl"||(function(U){Ye.forEach(U.nodes(),function(q){cf(U.node(q))}),Ye.forEach(U.edges(),function(q){var st=U.edge(q);Ye.forEach(st.points,cf),Ye.has(st,"x")&&cf(st)})}(v),jc(v))}};function jc(v){Ye.forEach(v.nodes(),function(A){Ps(v.node(A))}),Ye.forEach(v.edges(),function(A){Ps(v.edge(A))})}function Ps(v){var A=v.width;v.width=v.height,v.height=A}function Xc(v){v.y=-v.y}function cf(v){var A=v.x;v.x=v.y,v.y=A}var lf=function(v){var A={},U=Ye.filter(v.nodes(),function(wt){return!v.children(wt).length}),q=Ye.max(Ye.map(U,function(wt){return v.node(wt).rank})),st=Ye.map(Ye.range(q+1),function(){return[]});function ct(wt){if(!Ye.has(A,wt)){A[wt]=!0;var kt=v.node(wt);st[kt.rank].push(wt),Ye.forEach(v.successors(wt),ct)}}var mt=Ye.sortBy(U,function(wt){return v.node(wt).rank});return Ye.forEach(mt,ct),st},Vf=function(v,A){for(var U=0,q=1;q<A.length;++q)U+=Hf(v,A[q-1],A[q]);return U};function Hf(v,A,U){for(var q=Ye.zipObject(U,Ye.map(U,function(Ht,ie){return ie})),st=Ye.flatten(Ye.map(A,function(Ht){return Ye.sortBy(Ye.map(v.outEdges(Ht),function(ie){return{pos:q[ie.w],weight:v.edge(ie).weight}}),"pos")}),!0),ct=1;ct<U.length;)ct<<=1;var mt=2*ct-1;ct-=1;var wt=Ye.map(new Array(mt),function(){return 0}),kt=0;return Ye.forEach(st.forEach(function(Ht){var ie=Ht.pos+ct;wt[ie]+=Ht.weight;for(var qt=0;ie>0;)ie%2&&(qt+=wt[ie+1]),wt[ie=ie-1>>1]+=Ht.weight;kt+=Ht.weight*qt})),kt}var Zf=function(v,A){return Ye.map(A,function(U){var q=v.inEdges(U);if(q.length){var st=Ye.reduce(q,function(ct,mt){var wt=v.edge(mt),kt=v.node(mt.v);return{sum:ct.sum+wt.weight*kt.order,weight:ct.weight+wt.weight}},{sum:0,weight:0});return{v:U,barycenter:st.sum/st.weight,weight:st.weight}}return{v:U}})},ku=function(v,A){var U={};return Ye.forEach(v,function(q,st){var ct=U[q.v]={indegree:0,in:[],out:[],vs:[q.v],i:st};Ye.isUndefined(q.barycenter)||(ct.barycenter=q.barycenter,ct.weight=q.weight)}),Ye.forEach(A.edges(),function(q){var st=U[q.v],ct=U[q.w];Ye.isUndefined(st)||Ye.isUndefined(ct)||(ct.indegree++,st.out.push(U[q.w]))}),function(q){var st=[];function ct(kt){return function(Ht){Ht.merged||(Ye.isUndefined(Ht.barycenter)||Ye.isUndefined(kt.barycenter)||Ht.barycenter>=kt.barycenter)&&function(ie,qt){var Oe=0,ir=0;ie.weight&&(Oe+=ie.barycenter*ie.weight,ir+=ie.weight),qt.weight&&(Oe+=qt.barycenter*qt.weight,ir+=qt.weight),ie.vs=qt.vs.concat(ie.vs),ie.barycenter=Oe/ir,ie.weight=ir,ie.i=Math.min(qt.i,ie.i),qt.merged=!0}(kt,Ht)}}function mt(kt){return function(Ht){Ht.in.push(kt),--Ht.indegree==0&&q.push(Ht)}}for(;q.length;){var wt=q.pop();st.push(wt),Ye.forEach(wt.in.reverse(),ct(wt)),Ye.forEach(wt.out,mt(wt))}return Ye.map(Ye.filter(st,function(kt){return!kt.merged}),function(kt){return Ye.pick(kt,["vs","i","barycenter","weight"])})}(Ye.filter(U,function(q){return!q.indegree}))},Kf=function(v,A){var U=Eo.partition(v,function(qt){return Ye.has(qt,"barycenter")}),q=U.lhs,st=Ye.sortBy(U.rhs,function(qt){return-qt.i}),ct=[],mt=0,wt=0,kt=0;q.sort((Ht=!!A,function(qt,Oe){return qt.barycenter<Oe.barycenter?-1:qt.barycenter>Oe.barycenter?1:Ht?Oe.i-qt.i:qt.i-Oe.i})),kt=hf(ct,st,kt),Ye.forEach(q,function(qt){kt+=qt.vs.length,ct.push(qt.vs),mt+=qt.barycenter*qt.weight,wt+=qt.weight,kt=hf(ct,st,kt)});var Ht,ie={vs:Ye.flatten(ct,!0)};return wt&&(ie.barycenter=mt/wt,ie.weight=wt),ie};function hf(v,A,U){for(var q;A.length&&(q=Ye.last(A)).i<=U;)A.pop(),v.push(q.vs),U++;return U}var Yc=function v(A,U,q,st){var ct=A.children(U),mt=A.node(U),wt=mt?mt.borderLeft:void 0,kt=mt?mt.borderRight:void 0,Ht={};wt&&(ct=Ye.filter(ct,function(hr){return hr!==wt&&hr!==kt}));var ie=Zf(A,ct);Ye.forEach(ie,function(hr){if(A.children(hr.v).length){var pr=v(A,hr.v,q,st);Ht[hr.v]=pr,Ye.has(pr,"barycenter")&&(gr=hr,En=pr,Ye.isUndefined(gr.barycenter)?(gr.barycenter=En.barycenter,gr.weight=En.weight):(gr.barycenter=(gr.barycenter*gr.weight+En.barycenter*En.weight)/(gr.weight+En.weight),gr.weight+=En.weight))}var gr,En});var qt=ku(ie,q);(function(hr,pr){Ye.forEach(hr,function(gr){gr.vs=Ye.flatten(gr.vs.map(function(En){return pr[En]?pr[En].vs:En}),!0)})})(qt,Ht);var Oe=Kf(qt,st);if(wt&&(Oe.vs=Ye.flatten([wt,Oe.vs,kt],!0),A.predecessors(wt).length)){var ir=A.node(A.predecessors(wt)[0]),Yr=A.node(A.predecessors(kt)[0]);Ye.has(Oe,"barycenter")||(Oe.barycenter=0,Oe.weight=0),Oe.barycenter=(Oe.barycenter*Oe.weight+ir.order+Yr.order)/(Oe.weight+2),Oe.weight+=2}return Oe},$f=us.Graph,Qf=function(v,A,U){var q=function(ct){for(var mt;ct.hasNode(mt=Ye.uniqueId("_root")););return mt}(v),st=new $f({compound:!0}).setGraph({root:q}).setDefaultNodeLabel(function(ct){return v.node(ct)});return Ye.forEach(v.nodes(),function(ct){var mt=v.node(ct),wt=v.parent(ct);(mt.rank===A||mt.minRank<=A&&A<=mt.maxRank)&&(st.setNode(ct),st.setParent(ct,wt||q),Ye.forEach(v[U](ct),function(kt){var Ht=kt.v===ct?kt.w:kt.v,ie=st.edge(Ht,ct),qt=Ye.isUndefined(ie)?0:ie.weight;st.setEdge(Ht,ct,{weight:v.edge(kt).weight+qt})}),Ye.has(mt,"minRank")&&st.setNode(ct,{borderLeft:mt.borderLeft[A],borderRight:mt.borderRight[A]}))}),st},qf=function(v,A,U){var q,st={};Ye.forEach(U,function(ct){for(var mt,wt,kt=v.parent(ct);kt;){if((mt=v.parent(kt))?(wt=st[mt],st[mt]=kt):(wt=q,q=kt),wt&&wt!==kt)return void A.setEdge(wt,kt);kt=mt}})},df=us.Graph,vf=function(v){var A=Eo.maxRank(v),U=ks(v,Ye.range(1,A+1),"inEdges"),q=ks(v,Ye.range(A-1,-1,-1),"outEdges"),st=lf(v);_s(v,st);for(var ct,mt=Number.POSITIVE_INFINITY,wt=0,kt=0;kt<4;++wt,++kt){gf(wt%2?U:q,wt%4>=2),st=Eo.buildLayerMatrix(v);var Ht=Vf(v,st);Ht<mt&&(kt=0,ct=Ye.cloneDeep(st),mt=Ht)}_s(v,ct)};function ks(v,A,U){return Ye.map(A,function(q){return Qf(v,q,U)})}function gf(v,A){var U=new df;Ye.forEach(v,function(q){var st=q.graph().root,ct=Yc(q,st,U,A);Ye.forEach(ct.vs,function(mt,wt){q.node(mt).order=wt}),qf(q,U,ct.vs)})}function _s(v,A){Ye.forEach(A,function(U){Ye.forEach(U,function(q,st){v.node(q).order=st})})}var Ul=us.Graph,mu=function(v){var A,U=Eo.buildLayerMatrix(v),q=Ye.merge(bu(v,U),Wl(v,U)),st={};Ye.forEach(["u","d"],function(mt){A=mt==="u"?U:Ye.values(U).reverse(),Ye.forEach(["l","r"],function(wt){wt==="r"&&(A=Ye.map(A,function(qt){return Ye.values(qt).reverse()}));var kt=(mt==="u"?v.predecessors:v.successors).bind(v),Ht=Vc(v,A,q,kt),ie=Hc(v,A,Ht.root,Ht.align,wt==="r");wt==="r"&&(ie=Ye.mapValues(ie,function(qt){return-qt})),st[mt+wt]=ie})});var ct=Zs(v,st);return Zc(st,ct),jl(st,v.graph().align)};function bu(v,A){var U={};return Ye.reduce(A,function(q,st){var ct=0,mt=0,wt=q.length,kt=Ye.last(st);return Ye.forEach(st,function(Ht,ie){var qt=function(ir,Yr){if(ir.node(Yr).dummy)return Ye.find(ir.predecessors(Yr),function(hr){return ir.node(hr).dummy})}(v,Ht),Oe=qt?v.node(qt).order:wt;(qt||Ht===kt)&&(Ye.forEach(st.slice(mt,ie+1),function(ir){Ye.forEach(v.predecessors(ir),function(Yr){var hr=v.node(Yr),pr=hr.order;!(pr<ct||Oe<pr)||hr.dummy&&v.node(ir).dummy||pf(U,Yr,ir)})}),mt=ie+1,ct=Oe)}),st}),U}function Wl(v,A){var U={};function q(st,ct,mt,wt,kt){var Ht;Ye.forEach(Ye.range(ct,mt),function(ie){Ht=st[ie],v.node(Ht).dummy&&Ye.forEach(v.predecessors(Ht),function(qt){var Oe=v.node(qt);Oe.dummy&&(Oe.order<wt||Oe.order>kt)&&pf(U,qt,Ht)})})}return Ye.reduce(A,function(st,ct){var mt,wt=-1,kt=0;return Ye.forEach(ct,function(Ht,ie){if(v.node(Ht).dummy==="border"){var qt=v.predecessors(Ht);qt.length&&(mt=v.node(qt[0]).order,q(ct,kt,ie,wt,mt),kt=ie,wt=mt)}q(ct,kt,ct.length,mt,st.length)}),ct}),U}function pf(v,A,U){if(A>U){var q=A;A=U,U=q}var st=v[A];st||(v[A]=st={}),st[U]=!0}function Ru(v,A,U){if(A>U){var q=A;A=U,U=q}return Ye.has(v[A],U)}function Vc(v,A,U,q){var st={},ct={},mt={};return Ye.forEach(A,function(wt){Ye.forEach(wt,function(kt,Ht){st[kt]=kt,ct[kt]=kt,mt[kt]=Ht})}),Ye.forEach(A,function(wt){var kt=-1;Ye.forEach(wt,function(Ht){var ie=q(Ht);if(ie.length)for(var qt=((ie=Ye.sortBy(ie,function(hr){return mt[hr]})).length-1)/2,Oe=Math.floor(qt),ir=Math.ceil(qt);Oe<=ir;++Oe){var Yr=ie[Oe];ct[Ht]===Ht&&kt<mt[Yr]&&!Ru(U,Ht,Yr)&&(ct[Yr]=Ht,ct[Ht]=st[Ht]=st[Yr],kt=mt[Yr])}})}),{root:st,align:ct}}function Hc(v,A,U,q,st){var ct={},mt=function(Ht,ie,qt,Oe){var ir=new Ul,Yr=Ht.graph(),hr=function(pr,gr,En){return function(kn,Tn,qn){var Kn,ia=kn.node(Tn),ga=kn.node(qn),ua=0;if(ua+=ia.width/2,Ye.has(ia,"labelpos"))switch(ia.labelpos.toLowerCase()){case"l":Kn=-ia.width/2;break;case"r":Kn=ia.width/2}if(Kn&&(ua+=En?Kn:-Kn),Kn=0,ua+=(ia.dummy?gr:pr)/2,ua+=(ga.dummy?gr:pr)/2,ua+=ga.width/2,Ye.has(ga,"labelpos"))switch(ga.labelpos.toLowerCase()){case"l":Kn=ga.width/2;break;case"r":Kn=-ga.width/2}return Kn&&(ua+=En?Kn:-Kn),Kn=0,ua}}(Yr.nodesep,Yr.edgesep,Oe);return Ye.forEach(ie,function(pr){var gr;Ye.forEach(pr,function(En){var kn=qt[En];if(ir.setNode(kn),gr){var Tn=qt[gr],qn=ir.edge(Tn,kn);ir.setEdge(Tn,kn,Math.max(hr(Ht,En,gr),qn||0))}gr=En})}),ir}(v,A,U,st),wt=st?"borderLeft":"borderRight";function kt(Ht,ie){for(var qt=mt.nodes(),Oe=qt.pop(),ir={};Oe;)ir[Oe]?Ht(Oe):(ir[Oe]=!0,qt.push(Oe),qt=qt.concat(ie(Oe))),Oe=qt.pop()}return kt(function(Ht){ct[Ht]=mt.inEdges(Ht).reduce(function(ie,qt){return Math.max(ie,ct[qt.v]+mt.edge(qt))},0)},mt.predecessors.bind(mt)),kt(function(Ht){var ie=mt.outEdges(Ht).reduce(function(Oe,ir){return Math.min(Oe,ct[ir.w]-mt.edge(ir))},Number.POSITIVE_INFINITY),qt=v.node(Ht);ie!==Number.POSITIVE_INFINITY&&qt.borderType!==wt&&(ct[Ht]=Math.max(ct[Ht],ie))},mt.successors.bind(mt)),Ye.forEach(q,function(Ht){ct[Ht]=ct[U[Ht]]}),ct}function Zs(v,A){return Ye.minBy(Ye.values(A),function(U){var q=Number.NEGATIVE_INFINITY,st=Number.POSITIVE_INFINITY;return Ye.forIn(U,function(ct,mt){var wt=function(kt,Ht){return kt.node(Ht).width}(v,mt)/2;q=Math.max(ct+wt,q),st=Math.min(ct-wt,st)}),q-st})}function Zc(v,A){var U=Ye.values(A),q=Ye.min(U),st=Ye.max(U);Ye.forEach(["u","d"],function(ct){Ye.forEach(["l","r"],function(mt){var wt,kt=ct+mt,Ht=v[kt];if(Ht!==A){var ie=Ye.values(Ht);(wt=mt==="l"?q-Ye.min(ie):st-Ye.max(ie))&&(v[kt]=Ye.mapValues(Ht,function(qt){return qt+wt}))}})})}function jl(v,A){return Ye.mapValues(v.ul,function(U,q){if(A)return v[A.toLowerCase()][q];var st=Ye.sortBy(Ye.map(v,q));return(st[1]+st[2])/2})}var Kc=mu,hh=function(v){(function(A){var U=Eo.buildLayerMatrix(A),q=A.graph().ranksep,st=0;Ye.forEach(U,function(ct){var mt=Ye.max(Ye.map(ct,function(wt){return A.node(wt).height}));Ye.forEach(ct,function(wt){A.node(wt).y=st+mt/2}),st+=mt+q})})(v=Eo.asNonCompoundGraph(v)),Ye.forEach(Kc(v),function(A,U){v.node(U).x=A})},dh=Eo.normalizeRanks,vh=Eo.removeEmptyRanks,Go=Eo,$c=us.Graph,Bu=function(v,A){var U=A&&A.debugTiming?Go.time:Go.notime;U("layout",function(){var q=U("  buildLayoutGraph",function(){return function(st){var ct=new $c({multigraph:!0,compound:!0}),mt=tc(st.graph());return ct.setGraph(Ye.merge({},Xl,zo(mt,Ks),Ye.pick(mt,Qc))),Ye.forEach(st.nodes(),function(wt){var kt=tc(st.node(wt));ct.setNode(wt,Ye.defaults(zo(kt,Jf),qc)),ct.setParent(wt,st.parent(wt))}),Ye.forEach(st.edges(),function(wt){var kt=tc(st.edge(wt));ct.setEdge(wt,Ye.merge({},Rs,zo(kt,qo),Ye.pick(kt,wo)))}),ct}(v)});U("  runLayout",function(){(function(st,ct){ct("    makeSpaceForEdgeLabels",function(){(function(mt){var wt=mt.graph();wt.ranksep/=2,Ye.forEach(mt.edges(),function(kt){var Ht=mt.edge(kt);Ht.minlen*=2,Ht.labelpos.toLowerCase()!=="c"&&(wt.rankdir==="TB"||wt.rankdir==="BT"?Ht.width+=Ht.labeloffset:Ht.height+=Ht.labeloffset)})})(st)}),ct("    removeSelfEdges",function(){(function(mt){Ye.forEach(mt.edges(),function(wt){if(wt.v===wt.w){var kt=mt.node(wt.v);kt.selfEdges||(kt.selfEdges=[]),kt.selfEdges.push({e:wt,label:mt.edge(wt)}),mt.removeEdge(wt)}})})(st)}),ct("    acyclic",function(){Rc.run(st)}),ct("    nestingGraph.run",function(){Uc.run(st)}),ct("    rank",function(){Rl(Go.asNonCompoundGraph(st))}),ct("    injectEdgeLabelProxies",function(){(function(mt){Ye.forEach(mt.edges(),function(wt){var kt=mt.edge(wt);if(kt.width&&kt.height){var Ht=mt.node(wt.v),ie={rank:(mt.node(wt.w).rank-Ht.rank)/2+Ht.rank,e:wt};Go.addDummyNode(mt,"edge-proxy",ie,"_ep")}})})(st)}),ct("    removeEmptyRanks",function(){vh(st)}),ct("    nestingGraph.cleanup",function(){Uc.cleanup(st)}),ct("    normalizeRanks",function(){dh(st)}),ct("    assignRankMinMax",function(){(function(mt){var wt=0;Ye.forEach(mt.nodes(),function(kt){var Ht=mt.node(kt);Ht.borderTop&&(Ht.minRank=mt.node(Ht.borderTop).rank,Ht.maxRank=mt.node(Ht.borderBottom).rank,wt=Ye.max(wt,Ht.maxRank))}),mt.graph().maxRank=wt})(st)}),ct("    removeEdgeLabelProxies",function(){(function(mt){Ye.forEach(mt.nodes(),function(wt){var kt=mt.node(wt);kt.dummy==="edge-proxy"&&(mt.edge(kt.e).labelRank=kt.rank,mt.removeNode(wt))})})(st)}),ct("    normalize.run",function(){of.run(st)}),ct("    parentDummyChains",function(){lh(st)}),ct("    addBorderSegments",function(){Fl(st)}),ct("    order",function(){vf(st)}),ct("    insertSelfEdges",function(){(function(mt){var wt=Go.buildLayerMatrix(mt);Ye.forEach(wt,function(kt){var Ht=0;Ye.forEach(kt,function(ie,qt){var Oe=mt.node(ie);Oe.order=qt+Ht,Ye.forEach(Oe.selfEdges,function(ir){Go.addDummyNode(mt,"selfedge",{width:ir.label.width,height:ir.label.height,rank:Oe.rank,order:qt+ ++Ht,e:ir.e,label:ir.label},"_se")}),delete Oe.selfEdges})})})(st)}),ct("    adjustCoordinateSystem",function(){zl.adjust(st)}),ct("    position",function(){hh(st)}),ct("    positionSelfEdges",function(){(function(mt){Ye.forEach(mt.nodes(),function(wt){var kt=mt.node(wt);if(kt.dummy==="selfedge"){var Ht=mt.node(kt.e.v),ie=Ht.x+Ht.width/2,qt=Ht.y,Oe=kt.x-ie,ir=Ht.height/2;mt.setEdge(kt.e,kt.label),mt.removeNode(wt),kt.label.points=[{x:ie+2*Oe/3,y:qt-ir},{x:ie+5*Oe/6,y:qt-ir},{x:ie+Oe,y:qt},{x:ie+5*Oe/6,y:qt+ir},{x:ie+2*Oe/3,y:qt+ir}],kt.label.x=kt.x,kt.label.y=kt.y}})})(st)}),ct("    removeBorderNodes",function(){(function(mt){Ye.forEach(mt.nodes(),function(wt){if(mt.children(wt).length){var kt=mt.node(wt),Ht=mt.node(kt.borderTop),ie=mt.node(kt.borderBottom),qt=mt.node(Ye.last(kt.borderLeft)),Oe=mt.node(Ye.last(kt.borderRight));kt.width=Math.abs(Oe.x-qt.x),kt.height=Math.abs(ie.y-Ht.y),kt.x=qt.x+kt.width/2,kt.y=Ht.y+kt.height/2}}),Ye.forEach(mt.nodes(),function(wt){mt.node(wt).dummy==="border"&&mt.removeNode(wt)})})(st)}),ct("    normalize.undo",function(){of.undo(st)}),ct("    fixupEdgeLabelCoords",function(){(function(mt){Ye.forEach(mt.edges(),function(wt){var kt=mt.edge(wt);if(Ye.has(kt,"x"))switch(kt.labelpos!=="l"&&kt.labelpos!=="r"||(kt.width-=kt.labeloffset),kt.labelpos){case"l":kt.x-=kt.width/2+kt.labeloffset;break;case"r":kt.x+=kt.width/2+kt.labeloffset}})})(st)}),ct("    undoCoordinateSystem",function(){zl.undo(st)}),ct("    translateGraph",function(){(function(mt){var wt=Number.POSITIVE_INFINITY,kt=0,Ht=Number.POSITIVE_INFINITY,ie=0,qt=mt.graph(),Oe=qt.marginx||0,ir=qt.marginy||0;function Yr(hr){var pr=hr.x,gr=hr.y,En=hr.width,kn=hr.height;wt=Math.min(wt,pr-En/2),kt=Math.max(kt,pr+En/2),Ht=Math.min(Ht,gr-kn/2),ie=Math.max(ie,gr+kn/2)}Ye.forEach(mt.nodes(),function(hr){Yr(mt.node(hr))}),Ye.forEach(mt.edges(),function(hr){var pr=mt.edge(hr);Ye.has(pr,"x")&&Yr(pr)}),wt-=Oe,Ht-=ir,Ye.forEach(mt.nodes(),function(hr){var pr=mt.node(hr);pr.x-=wt,pr.y-=Ht}),Ye.forEach(mt.edges(),function(hr){var pr=mt.edge(hr);Ye.forEach(pr.points,function(gr){gr.x-=wt,gr.y-=Ht}),Ye.has(pr,"x")&&(pr.x-=wt),Ye.has(pr,"y")&&(pr.y-=Ht)}),qt.width=kt-wt+Oe,qt.height=ie-Ht+ir})(st)}),ct("    assignNodeIntersects",function(){(function(mt){Ye.forEach(mt.edges(),function(wt){var kt,Ht,ie=mt.edge(wt),qt=mt.node(wt.v),Oe=mt.node(wt.w);ie.points?(kt=ie.points[0],Ht=ie.points[ie.points.length-1]):(ie.points=[],kt=Oe,Ht=qt),ie.points.unshift(Go.intersectRect(qt,kt)),ie.points.push(Go.intersectRect(Oe,Ht))})})(st)}),ct("    reversePoints",function(){(function(mt){Ye.forEach(mt.edges(),function(wt){var kt=mt.edge(wt);kt.reversed&&kt.points.reverse()})})(st)}),ct("    acyclic.undo",function(){Rc.undo(st)})})(q,U)}),U("  updateInputGraph",function(){(function(st,ct){Ye.forEach(st.nodes(),function(mt){var wt=st.node(mt),kt=ct.node(mt);wt&&(wt.x=kt.x,wt.y=kt.y,ct.children(mt).length&&(wt.width=kt.width,wt.height=kt.height))}),Ye.forEach(st.edges(),function(mt){var wt=st.edge(mt),kt=ct.edge(mt);wt.points=kt.points,Ye.has(kt,"x")&&(wt.x=kt.x,wt.y=kt.y)}),st.graph().width=ct.graph().width,st.graph().height=ct.graph().height})(v,q)})})},Ks=["nodesep","edgesep","ranksep","marginx","marginy"],Xl={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Qc=["acyclicer","ranker","rankdir","align"],Jf=["width","height"],qc={width:0,height:0},qo=["minlen","weight","width","height","labeloffset"],Rs={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},wo=["labelpos"];function zo(v,A){return Ye.mapValues(Ye.pick(v,A),Number)}function tc(v){var A={};return Ye.forEach(v,function(U,q){A[q.toLowerCase()]=U}),A}var gh=us.Graph,Yl={graphlib:us,layout:Bu,debug:{debugOrdering:function(v){var A=Eo.buildLayerMatrix(v),U=new gh({compound:!0,multigraph:!0}).setGraph({});return Ye.forEach(v.nodes(),function(q){U.setNode(q,{label:q}),U.setParent(q,"layer"+v.node(q).rank)}),Ye.forEach(v.edges(),function(q){U.setEdge(q.v,q.w,{},q.name)}),Ye.forEach(A,function(q,st){var ct="layer"+st;U.setNode(ct,{rank:"same"}),Ye.reduce(q,function(mt,wt){return U.setEdge(mt,wt,{style:"invis"}),wt})}),U}},util:{time:Eo.time,notime:Eo.notime},version:"0.8.5"},Vl=Yl.graphlib,Hl=Yl.layout;class Zl{constructor(A){this.cardinality=1,this.include=b.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=D.NODE,this.name=A.name,this.attr=A.attr||{},this.inputs=A.inputs,this.path=A.path||[],this.width=A.width,this.height=A.height}}class ph{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function Kl(v){const A=new ph;return v.nodes.map(U=>new Zl(U)).forEach(U=>{A.nodes[U.name]=U,U.inputs.forEach(q=>{(function(st,ct,mt){mt.name!==ct.name&&st.edges.push(Object.assign(Object.assign({},mt.attr),{v:mt.name,w:ct.name}))})(A,U,q)})}),A}class yh{constructor(A,U={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=b.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=D.META,this.path=[],this.name=A,this.metaGraph=yf(A,E.META,U)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(A=>this.metaGraph.node(A))}leaves(){let A,U=[],q=[this];for(;q.length;){let st=q.shift();st.isGroupNode?(A=st.metaGraph,A.nodes().forEach(ct=>q.push(A.node(ct)))):U.push(st.name)}return U}}class $l{constructor(A,U){this.v=A,this.w=U,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(A,U){this.baseEdgeList.push(A)}}function Ql(v,A={}){return new yh(v,A)}function ec(v,A){return new $l(v,A)}function yf(v,A,U){const q=U||{},st=new Vl.Graph(q);return st.setGraph({name:v,rankdir:q.rankdir,type:A,align:q.align}),st}class ms{constructor(A={}){this.graphOptions=A,this.index={},this.graphOptions.compound=!0,this.root=Ql(I,this.graphOptions),this.index[I]=this.root}getNodeMap(){return this.index}node(A){return this.index[A]}setNode(A,U){this.index[A]=U}getBridgeGraph(A){const U=this.index[A];if(!U)throw Error("Could not find node in hierarchy: "+A);if(!("metaGraph"in U))return null;const q=U;if(q.bridgeGraph)return q.bridgeGraph;const st=yf(k,E.BRIDGE,this.graphOptions);if(q.bridgeGraph=st,!U.parentNode||!("metaGraph"in U.parentNode))return st;const ct=U.parentNode;return[ct.metaGraph,this.getBridgeGraph(ct.name)].forEach(mt=>{mt.edges().filter(wt=>wt.v===A||wt.w===A).forEach(wt=>{const kt=wt.w===A;mt.edge(wt).baseEdgeList.forEach(Ht=>{const[ie,qt]=kt?[Ht.w,wt.v]:[Ht.v,wt.w],Oe=this.getChildName(A,ie),ir={v:kt?qt:Oe,w:kt?Oe:qt};let Yr=st.edge(ir);Yr||(Yr=ec(ir.v,ir.w),Yr.inbound=kt,st.setEdge(ir.v,ir.w,Yr)),Yr.addBaseEdge(Ht,this)})})}),st}getChildName(A,U){let q=this.index[U];for(;q;){if(q.parentNode&&q.parentNode.name===A)return q.name;q=q.parentNode}throw Error("Could not find immediate child for descendant: "+U)}getPredecessors(A){const U=this.index[A];if(!U)throw Error("Could not find node with name: "+A);return this.getOneWayEdges(U,!0)}getSuccessors(A){const U=this.index[A];if(!U)throw Error("Could not find node with name: "+A);return this.getOneWayEdges(U,!1)}getOneWayEdges(A,U){const q=[];if(!A.parentNode||!A.parentNode.isGroupNode)return q;const st=A.parentNode,ct=st.metaGraph,mt=this.getBridgeGraph(st.name);return Jc(ct,A,U,q),Jc(mt,A,U,q),q}}function ql(v,A){const{rankDirection:U,align:q}=A,st=new ms({rankdir:U,align:q});return function(ct,mt){Object.keys(mt.nodes).forEach(wt=>{const kt=mt.nodes[wt],Ht=kt.path;let ie=ct.root;ie.depth=Math.max(Ht.length,ie.depth);for(let qt=0;qt<Ht.length&&(ie.depth=Math.max(ie.depth,Ht.length-qt),ie.cardinality+=kt.cardinality,qt!==Ht.length-1);qt++){const Oe=Ht[qt];let ir=ct.node(Oe);ir||(ir=Ql(Oe,ct.graphOptions),ir.path=kt.path.slice(0,qt+1),ir.parentNode=ie,ct.setNode(Oe,ir),ie.metaGraph.setNode(Oe,ir)),ie=ir}ct.setNode(kt.name,kt),kt.parentNode=ie,ie.metaGraph.setNode(kt.name,kt)})}(st,v),function(ct,mt){const wt=ct.getNodeMap();let kt=[],Ht=[];const ie=(qt,Oe)=>{let ir=0;for(;qt;)Oe[ir++]=qt.name,qt=qt.parentNode;return ir-1};mt.edges.forEach(qt=>{kt=[],Ht=[];let Oe=ie(mt.nodes[qt.v],kt),ir=ie(mt.nodes[qt.w],Ht);for(;kt[Oe]===Ht[ir];)if(Oe--,ir--,Oe<0||ir<0)throw Error("No difference found between ancestor paths.");const Yr=wt[kt[Oe+1]],hr=kt[Oe],pr=Ht[ir];let gr=Yr.metaGraph.edge(hr,pr);gr||(gr=ec(hr,pr),Yr.metaGraph.setEdge(hr,pr,gr)),gr.addBaseEdge(qt,ct)})}(st,v),st}function Jc(v,A,U,q){(U?v.inEdges(A.name):v.outEdges(A.name)).forEach(st=>{const ct=v.edge(st);q.push(ct)})}class tl{constructor(A){this.hierarchy=A,this.index={},this.hasSubHierarchy={},this.root=new ae(this.hierarchy.root,this.hierarchy.graphOptions),this.index[A.root.name]=this.root,this.buildSubHierarchy(A.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(A){if(A in this.hasSubHierarchy)return;this.hasSubHierarchy[A]=!0;const U=this.index[A];if(U.node.type!==D.META)return;const q=U,st=q.node.metaGraph,ct=q.coreGraph;st.nodes().forEach(ie=>{const qt=this.getOrCreateRenderNodeByName(ie);ct.setNode(ie,qt)}),st.edges().forEach(ie=>{const qt=st.edge(ie),Oe=new bt(qt);ct.setEdge(ie.v,ie.w,Oe)});const mt=q.node.parentNode;if(!mt)return;const wt=this.getRenderNodeByName(mt.name),kt=(ie,...qt)=>qt.concat([ie?"IN":"OUT"]).join("~~"),Ht=this.hierarchy.getBridgeGraph(A);Ht.edges().forEach(ie=>{const qt=Ht.edge(ie),Oe=!!st.node(ie.w),[ir,Yr]=Oe?[ie.w,ie.v]:[ie.v,ie.w],hr=qn=>{const Kn=Oe?{v:qn,w:A}:{v:A,w:qn};return wt.coreGraph.edge(Kn)};let pr=hr(Yr);pr||(pr=hr(kt(Oe,Yr,mt.name)));const gr=kt(Oe,A),En=kt(Oe,Yr,A);let kn=ct.node(En);if(!kn){let qn=ct.node(gr);if(!qn){const ia={name:gr,type:D.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:b.UNSPECIFIED,inbound:Oe,attr:{}};qn=new Do(ia),this.index[gr]=qn,ct.setNode(gr,qn)}const Kn={name:En,type:D.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:b.UNSPECIFIED,inbound:Oe,attr:{}};kn=new Do(Kn),this.index[En]=kn,ct.setNode(En,kn),ct.setParent(En,gr),qn.node.cardinality++}const Tn=new bt(qt);Tn.adjoiningMetaEdge=pr,Oe?ct.setEdge(En,ir,Tn):ct.setEdge(ir,En,Tn)})}getOrCreateRenderNodeByName(A){if(!A)return null;if(A in this.index)return this.index[A];const U=this.getNodeByName(A);return U?(this.index[A]=U.isGroupNode?new ae(U,this.hierarchy.graphOptions):new Do(U),this.index[A]):null}getRenderNodeByName(A){return this.index[A]}getNodeByName(A){return this.hierarchy.node(A)}}class Do{constructor(A){this.node=A,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=A.width||0,this.height=A.height||0,this.displayName=A.name,this.attr=A.attr}}class bt{constructor(A){this.metaEdge=A,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class ae extends Do{constructor(A,U){super(A);const q=A.metaGraph.graph();U.compound=!0,this.coreGraph=yf(q.name,E.CORE,U)}}function Ge(v,A){v.node.isGroupNode&&function(U,q){const st=z(q);U.coreGraph.nodes().map(ct=>U.coreGraph.node(ct)).forEach(ct=>{var mt,wt,kt,Ht,ie,qt;const{height:Oe,width:ir}=ct;switch(ct.node.type){case D.NODE:Object.assign(ct,st.nodeSize.node),ct.height=Oe||st.nodeSize.node.height,ct.width=ir||st.nodeSize.node.width;break;case D.BRIDGE:Object.assign(ct,st.nodeSize.bridge);break;case D.META:ct.expanded?Ge(ct,q):(Object.assign(ct,st.nodeSize.meta),ct.height=st.nodeSize.meta.height,ct.width=st.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+ct.node.type)}if(!ct.expanded){const Yr=ct.attr;(function(hr,pr=!1){if(hr.coreBox.width=hr.width,hr.coreBox.height=hr.height,!pr){const gr=`${hr.displayName}`.length,En=3;hr.width=Math.max(hr.coreBox.width,gr*En)}})(ct,q&&(ct.node.type===0&&!!((wt=(mt=q==null?void 0:q.nodeSize)===null||mt===void 0?void 0:mt.meta)===null||wt===void 0?void 0:wt.width)||ct.node.type===1&&(!!((Ht=(kt=q==null?void 0:q.nodeSize)===null||kt===void 0?void 0:kt.node)===null||Ht===void 0?void 0:Ht.width)||!!Yr.width)||ct.node.type===2&&!!((qt=(ie=q==null?void 0:q.nodeSize)===null||ie===void 0?void 0:ie.bridge)===null||qt===void 0?void 0:qt.width)))}})}(v,A),v.node.type===D.META&&function(U,q){const st=z(q),ct=st.subScene.meta;Object.assign(U,ct);const{nodeSep:mt,rankSep:wt,edgeSep:kt,align:Ht}=st.graph.meta,ie={nodesep:mt,ranksep:wt,edgesep:kt,align:Ht};Object.assign(U.coreBox,function(ir,Yr){const{ranksep:hr,nodesep:pr,edgesep:gr,align:En}=Yr;Object.assign(ir.graph(),{ranksep:hr,nodesep:pr,edgesep:gr,align:En});const kn=[];if(ir.nodes().forEach(ga=>{ir.node(ga).node.type!==D.BRIDGE&&kn.push(ga)}),!kn.length)return{width:0,height:0};Hl(ir);let Tn=1/0,qn=1/0,Kn=-1/0,ia=-1/0;return kn.forEach(ga=>{const ua=ir.node(ga),yi=.5*ua.width,xa=ua.x-yi,zi=ua.x+yi;Tn=xa<Tn?xa:Tn,Kn=zi>Kn?zi:Kn;const ii=.5*ua.height,ka=ua.y-ii,Ui=ua.y+ii;qn=ka<qn?ka:qn,ia=Ui>ia?Ui:ia}),ir.edges().forEach(ga=>{const ua=ir.edge(ga),yi=ir.node(ua.metaEdge.v),xa=ir.node(ua.metaEdge.w);if(ua.points.length===3&&function(ka){let Ui=Lr(ka[0],ka[1]);for(let Ni=1;Ni<ka.length-1;Ni++){const So=Lr(ka[Ni],ka[Ni+1]);if(Math.abs(So-Ui)>1)return!1;Ui=So}return!0}(ua.points)){if(yi!=null){const ka=yi.expanded?yi.x:Wr(yi);ua.points[0].x=ka}if(xa!=null){const ka=xa.expanded?xa.x:Wr(xa);ua.points[2].x=ka}ua.points=[ua.points[0],ua.points[1]]}const zi=ua.points[ua.points.length-2];xa!=null&&(ua.points[ua.points.length-1]=Nr(zi,xa));const ii=ua.points[1];yi!=null&&(ua.points[0]=Nr(ii,yi)),ua.points.forEach(ka=>{Tn=ka.x<Tn?ka.x:Tn,Kn=ka.x>Kn?ka.x:Kn,qn=ka.y<qn?ka.y:qn,ia=ka.y>ia?ka.y:ia})}),ir.nodes().forEach(ga=>{const ua=ir.node(ga);ua.x-=Tn,ua.y-=qn}),ir.edges().forEach(ga=>{ir.edge(ga).points.forEach(ua=>{ua.x-=Tn,ua.y-=qn})}),{width:Kn-Tn,height:ia-qn}}(U.coreGraph,ie));let qt=0;U.coreGraph.nodeCount()>0&&qt++;const Oe=qt<=1?0:qt;U.coreBox.width+=Oe+Oe,U.coreBox.height=ct.labelHeight+U.coreBox.height,U.width=U.coreBox.width+ct.paddingLeft+ct.paddingRight,U.height=U.paddingTop+U.coreBox.height+U.paddingBottom}(v,A)}function Lr(v,A){const U=A.x-v.x,q=A.y-v.y;return 180*Math.atan(q/U)/Math.PI}function Wr(v){return v.expanded?v.x:v.x-v.width/2+0+v.coreBox.width/2}function Nr(v,A){const U=A.expanded?A.x:Wr(A),q=A.y,st=v.x-U,ct=v.y-q;let mt,wt,kt=A.expanded?A.width:A.coreBox.width,Ht=A.expanded?A.height:A.coreBox.height;return Math.abs(ct)*kt/2>Math.abs(st)*Ht/2?(ct<0&&(Ht=-Ht),mt=ct===0?0:Ht/2*st/ct,wt=Ht/2):(st<0&&(kt=-kt),mt=kt/2,wt=st===0?0:kt/2*ct/st),{x:U+mt,y:q+wt}}function zr(v,A,U){var q,st,ct,mt;const wt=v.nodes.filter((qt,Oe,ir)=>ir.findIndex(Yr=>Yr.id===qt.id)!==Oe).map(qt=>qt.id);if(wt.length)throw new Error(`Duplicated ids found: ${wt.join(", ")}`);const kt=function(qt){const Oe={nodes:[]},ir=qt.compound,Yr=Object.keys(ir||{}),hr=new Map,pr=(En,kn=[])=>{if(hr.has(En))return hr.get(En);for(let Tn=0;Tn<Yr.length;Tn++){let qn=Yr[Tn];if(ir&&ir[qn].indexOf(En)!==-1)return kn.unshift(qn),pr(qn,kn)}return kn.length===0&&hr.set(En,kn),kn},gr=En=>qt.edges.filter(kn=>kn.w===En).map(kn=>({name:kn.v}));return qt.nodes.forEach(En=>{const kn=En.id,Tn=[...pr(kn),kn];let qn=gr(kn);Oe.nodes.push({name:kn,path:Tn,inputs:qn,width:En.width,height:En.height,attr:Object.assign({},En)})}),Oe}(v),Ht=function(qt,Oe){const ir=(hr,pr)=>{for(let gr of pr.values())if(gr.includes(hr))return!0;return!1},Yr=(hr,pr=[])=>{if(Object.keys(hr).length===0)return[...new Set(pr)];const gr=new Map(Object.keys(hr).map(kn=>[kn,hr[kn]])),En={};for(let[kn,Tn]of gr)ir(kn,gr)?En[kn]=Tn:pr=pr.concat(kn,Tn);return Yr(En,pr)};return Yr(qt).filter(hr=>Oe.includes(hr))}(v.compound||{},(A==null?void 0:A.expanded)||[]),ie=function(qt,Oe){return function(ir){return new tl(ir)}(ql(Kl(qt),Oe))}(kt,{rankDirection:((st=(q=U==null?void 0:U.graph)===null||q===void 0?void 0:q.meta)===null||st===void 0?void 0:st.rankDir)||(A==null?void 0:A.rankDirection)||L.graph.meta.rankDir,align:((mt=(ct=U==null?void 0:U.graph)===null||ct===void 0?void 0:ct.meta)===null||mt===void 0?void 0:mt.align)||L.graph.meta.align});return function(qt,Oe){Oe.forEach(ir=>{const Yr=qt.getRenderInfoNodes().find(gr=>gr.displayName===ir);let hr=Yr&&Yr.node&&Yr.node.name||"";const pr=qt.getRenderNodeByName(hr);if(!pr)throw new Error(`No nodes found: ${hr}`);pr.expanded=!0,qt.buildSubHierarchy(hr)})}(ie,Ht),Ge(ie.root,U),wn(ie.root)}function mn(v,A=!1){const U=JSON.parse(JSON.stringify(v)),q={nodes:[U],edges:[...U.edges]};return U.nodes.forEach(function st(ct){(ct.type===0||ct.type===1)&&q.nodes.push(ct),ct.type===0&&(q.edges=q.edges.concat(ct.edges)),Array.isArray(ct.nodes)&&ct.nodes.forEach(st)}),A&&q.nodes.forEach(st=>{const ct=q.nodes.find(mt=>mt.id===st.parentNodeName);if(ct){const mt=ct.x-ct.width/2+ct.paddingLeft,wt=ct.y-ct.height/2+ct.labelHeight+ct.paddingTop;ct.id!==I&&(st.x+=mt,st.y+=wt),st.type===0&&st.edges.forEach(kt=>{kt.points.forEach(Ht=>{Ht.x+=st.x-st.width/2+st.paddingLeft,Ht.y+=st.y-st.height/2+st.labelHeight+st.paddingTop})})}}),q}function dn(v,A,U,q){var st,ct;let mt=[];const wt=((st=U.find(qt=>qt.id===v))===null||st===void 0?void 0:st.path)||[],kt=((ct=U.find(qt=>qt.id===A))===null||ct===void 0?void 0:ct.path)||[],Ht=[I,...wt].slice(0,wt.length).reverse(),ie=[I,...kt].slice(0,kt.length);return Ht.forEach(qt=>{const Oe=U.find(ir=>ir.id===qt);mt=mt.concat(Oe.edges.filter(ir=>ir.baseEdgeList.some(Yr=>Yr.v===((q==null?void 0:q.v)||v)&&Yr.w===((q==null?void 0:q.w)||A))))}),ie.filter(qt=>!Ht.includes(qt)).forEach(qt=>{const Oe=U.find(ir=>ir.id===qt);mt=mt.concat(Oe.edges.filter(ir=>ir.baseEdgeList.some(Yr=>Yr.v===((q==null?void 0:q.v)||v)&&Yr.w===((q==null?void 0:q.w)||A))))}),mt}function wn(v){const A=v.coreGraph.nodes().map(q=>v.coreGraph.node(q));return Object.assign(Object.assign({},xn(v)),{expanded:v.expanded,nodes:v.expanded?(U=A,U.map(q=>q.node.type===D.META?wn(q):xn(q))):[],edges:v.expanded?In(v):[]});var U}function xn(v){return{id:v.node.name,name:v.node.name,type:v.node.type,cardinality:v.node.cardinality,attr:v.attr,parentNodeName:v.node.parentNode?v.node.parentNode.name:null,coreBox:Object.assign({},v.coreBox),x:v.x,y:v.y,width:v.width,height:v.height,radius:v.radius,labelHeight:v.labelHeight,labelOffset:v.labelOffset,outboxWidth:v.outboxWidth,paddingLeft:v.paddingLeft,paddingTop:v.paddingTop,paddingRight:v.paddingRight,paddingBottom:v.paddingBottom,path:v.node.path}}function In(v){return v.coreGraph.edges().map(A=>({renderInfoEdge:v.coreGraph.edge(A),edge:A})).filter(({renderInfoEdge:A})=>A.metaEdge).map(({edge:A,renderInfoEdge:U})=>{const q=function(st,ct){const mt=ct.points.map(wt=>Object.assign({},wt));if(ct.adjoiningMetaEdge){const wt=ct.adjoiningMetaEdge.points,kt=ct.metaEdge.inbound,Ht=kt?wt[wt.length-1]:wt[0],ie=mt[kt?0:mt.length-1],qt=st.x-st.width/2,Oe=st.y-st.height/2,ir=Ht.x-qt,Yr=Ht.y-Oe,hr=-st.paddingLeft,pr=-(st.paddingTop+st.labelHeight);ie.x=ir+hr,ie.y=Yr+pr}return mt}(v,U);return{adjoiningEdge:U.adjoiningMetaEdge?{w:U.adjoiningMetaEdge.metaEdge.w,v:U.adjoiningMetaEdge.metaEdge.v}:null,inbound:U.metaEdge.inbound,w:A.w,v:A.v,points:q,weight:U.weight,baseEdgeList:U.metaEdge.baseEdgeList,parentNodeName:v.node.name}})}},49685:function(Mr,G,R){"use strict";R.r(G),R.d(G,{EPSILON:function(){return L},ARRAY_TYPE:function(){return z},RANDOM:function(){return F},setMatrixArrayType:function(){return I},toRadian:function(){return D},equals:function(){return b}});var L=1e-6,z=typeof Float32Array!="undefined"?Float32Array:Array,F=Math.random;function I(E){z=E}var k=Math.PI/180;function D(E){return E*k}function b(E,p){return Math.abs(E-p)<=L*Math.max(1,Math.abs(E),Math.abs(p))}Math.hypot||(Math.hypot=function(){for(var E=0,p=arguments.length;p--;)E+=arguments[p]*arguments[p];return Math.sqrt(E)})},64530:function(Mr,G,R){"use strict";R.r(G),R.d(G,{glMatrix:function(){return b},mat2:function(){return L},mat2d:function(){return z},mat3:function(){return Dr},mat4:function(){return F},quat:function(){return k},quat2:function(){return D},vec2:function(){return iu},vec3:function(){return da},vec4:function(){return I}});var L={};R.r(L),R.d(L,{LDU:function(){return tt},add:function(){return nt},adjoint:function(){return m},clone:function(){return p},copy:function(){return y},create:function(){return E},determinant:function(){return d},equals:function(){return jt},exactEquals:function(){return xt},frob:function(){return rt},fromRotation:function(){return X},fromScaling:function(){return K},fromValues:function(){return T},identity:function(){return g},invert:function(){return N},mul:function(){return Vt},multiply:function(){return V},multiplyScalar:function(){return Dt},multiplyScalarAndAdd:function(){return Zt},rotate:function(){return Q},scale:function(){return j},set:function(){return x},str:function(){return J},sub:function(){return ue},subtract:function(){return lt},transpose:function(){return S}});var z={};R.r(z),R.d(z,{add:function(){return Et},clone:function(){return Ot},copy:function(){return ee},create:function(){return dt},determinant:function(){return Ke},equals:function(){return Lt},exactEquals:function(){return $e},frob:function(){return It},fromRotation:function(){return ye},fromScaling:function(){return Bt},fromTranslation:function(){return re},fromValues:function(){return me},identity:function(){return Re},invert:function(){return Be},mul:function(){return Ne},multiply:function(){return $t},multiplyScalar:function(){return fe},multiplyScalarAndAdd:function(){return Fe},rotate:function(){return ce},scale:function(){return we},set:function(){return Ae},str:function(){return Ee},sub:function(){return Xe},subtract:function(){return Wt},translate:function(){return Pe}});var F={};R.r(F),R.d(F,{add:function(){return Sr},adjoint:function(){return on},clone:function(){return Or},copy:function(){return ln},create:function(){return ur},determinant:function(){return sr},equals:function(){return ha},exactEquals:function(){return ea},frob:function(){return tr},fromQuat:function(){return Y},fromQuat2:function(){return ne},fromRotation:function(){return Br},fromRotationTranslation:function(){return Te},fromRotationTranslationScale:function(){return _},fromRotationTranslationScaleOrigin:function(){return C},fromScaling:function(){return vr},fromTranslation:function(){return ar},fromValues:function(){return fn},fromXRotation:function(){return Fr},fromYRotation:function(){return kr},fromZRotation:function(){return Z},frustum:function(){return pt},getRotation:function(){return B},getScaling:function(){return ot},getTranslation:function(){return it},identity:function(){return Cn},invert:function(){return Gr},lookAt:function(){return xr},mul:function(){return Zn},multiply:function(){return lr},multiplyScalar:function(){return Nn},multiplyScalarAndAdd:function(){return gn},ortho:function(){return qe},orthoNO:function(){return Me},orthoZO:function(){return br},perspective:function(){return Mt},perspectiveFromFieldOfView:function(){return Le},perspectiveNO:function(){return _t},perspectiveZO:function(){return zt},rotate:function(){return an},rotateX:function(){return bn},rotateY:function(){return nr},rotateZ:function(){return Tr},scale:function(){return $r},set:function(){return Xr},str:function(){return Rn},sub:function(){return na},subtract:function(){return jr},targetTo:function(){return sn},translate:function(){return Qe},transpose:function(){return Qr}});var I={};R.r(I),R.d(I,{add:function(){return Ie},ceil:function(){return pn},clone:function(){return se},copy:function(){return le},create:function(){return Vn},cross:function(){return ji},dist:function(){return to},distance:function(){return Ba},div:function(){return Io},divide:function(){return nn},dot:function(){return gi},equals:function(){return Xi},exactEquals:function(){return Ji},floor:function(){return Gn},forEach:function(){return Fo},fromValues:function(){return Ut},inverse:function(){return Ia},len:function(){return un},length:function(){return wa},lerp:function(){return Ti},max:function(){return oa},min:function(){return jn},mul:function(){return Oi},multiply:function(){return _r},negate:function(){return ti},normalize:function(){return qi},random:function(){return ri},round:function(){return va},scale:function(){return _a},scaleAndAdd:function(){return fi},set:function(){return ze},sqrDist:function(){return Yi},sqrLen:function(){return vo},squaredDistance:function(){return Wa},squaredLength:function(){return vi},str:function(){return ho},sub:function(){return Ri},subtract:function(){return We},transformMat4:function(){return No},transformQuat:function(){return Po},zero:function(){return Ii}});var k={};R.r(k),R.d(k,{add:function(){return Hi},calculateW:function(){return Sa},clone:function(){return Vi},conjugate:function(){return Yo},copy:function(){return Ei},create:function(){return Qa},dot:function(){return Mi},equals:function(){return La},exactEquals:function(){return bo},exp:function(){return ci},fromEuler:function(){return no},fromMat3:function(){return Bi},fromValues:function(){return po},getAngle:function(){return eo},getAxisAngle:function(){return Li},identity:function(){return ko},invert:function(){return ro},len:function(){return Zi},length:function(){return so},lerp:function(){return pi},ln:function(){return _i},mul:function(){return ma},multiply:function(){return de},normalize:function(){return uo},pow:function(){return li},random:function(){return Ea},rotateX:function(){return Ar},rotateY:function(){return qr},rotateZ:function(){return Bn},rotationTo:function(){return ds},scale:function(){return qa},set:function(){return yo},setAxes:function(){return Nt},setAxisAngle:function(){return go},slerp:function(){return Ai},sqlerp:function(){return os},sqrLen:function(){return mo},squaredLength:function(){return Fi},str:function(){return Oo}});var D={};R.r(D),R.d(D,{add:function(){return Jn},clone:function(){return ut},conjugate:function(){return ss},copy:function(){return Pt},create:function(){return At},dot:function(){return ai},equals:function(){return vs},exactEquals:function(){return Ss},fromMat4:function(){return yr},fromRotation:function(){return er},fromRotationTranslation:function(){return ve},fromRotationTranslationValues:function(){return Ct},fromTranslation:function(){return ke},fromValues:function(){return yt},getDual:function(){return Rt},getReal:function(){return gt},getTranslation:function(){return rr},identity:function(){return Tt},invert:function(){return Ro},len:function(){return es},length:function(){return Bo},lerp:function(){return wi},mul:function(){return Va},multiply:function(){return ja},normalize:function(){return nu},rotateAroundAxis:function(){return Hn},rotateByQuatAppend:function(){return Qn},rotateByQuatPrepend:function(){return fa},rotateX:function(){return yn},rotateY:function(){return en},rotateZ:function(){return hn},scale:function(){return ni},set:function(){return H},setDual:function(){return De},setReal:function(){return te},sqrLen:function(){return Lo},squaredLength:function(){return Di},str:function(){return au},translate:function(){return Er}});var b=R(49685);function E(){var h=new b.ARRAY_TYPE(4);return b.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}function p(h){var P=new b.ARRAY_TYPE(4);return P[0]=h[0],P[1]=h[1],P[2]=h[2],P[3]=h[3],P}function y(h,P){return h[0]=P[0],h[1]=P[1],h[2]=P[2],h[3]=P[3],h}function g(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h}function T(h,P,ht,St){var Gt=new b.ARRAY_TYPE(4);return Gt[0]=h,Gt[1]=P,Gt[2]=ht,Gt[3]=St,Gt}function x(h,P,ht,St,Gt){return h[0]=P,h[1]=ht,h[2]=St,h[3]=Gt,h}function S(h,P){if(h===P){var ht=P[1];h[1]=P[2],h[2]=ht}else h[0]=P[0],h[1]=P[2],h[2]=P[1],h[3]=P[3];return h}function N(h,P){var ht=P[0],St=P[1],Gt=P[2],Kt=P[3],Qt=ht*Kt-Gt*St;return Qt?(Qt=1/Qt,h[0]=Kt*Qt,h[1]=-St*Qt,h[2]=-Gt*Qt,h[3]=ht*Qt,h):null}function m(h,P){var ht=P[0];return h[0]=P[3],h[1]=-P[1],h[2]=-P[2],h[3]=ht,h}function d(h){return h[0]*h[3]-h[2]*h[1]}function V(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=ht[0],Se=ht[1],je=ht[2],fr=ht[3];return h[0]=St*pe+Kt*Se,h[1]=Gt*pe+Qt*Se,h[2]=St*je+Kt*fr,h[3]=Gt*je+Qt*fr,h}function Q(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=Math.sin(ht),Se=Math.cos(ht);return h[0]=St*Se+Kt*pe,h[1]=Gt*Se+Qt*pe,h[2]=St*-pe+Kt*Se,h[3]=Gt*-pe+Qt*Se,h}function j(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=ht[0],Se=ht[1];return h[0]=St*pe,h[1]=Gt*pe,h[2]=Kt*Se,h[3]=Qt*Se,h}function X(h,P){var ht=Math.sin(P),St=Math.cos(P);return h[0]=St,h[1]=ht,h[2]=-ht,h[3]=St,h}function K(h,P){return h[0]=P[0],h[1]=0,h[2]=0,h[3]=P[1],h}function J(h){return"mat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function rt(h){return Math.hypot(h[0],h[1],h[2],h[3])}function tt(h,P,ht,St){return h[2]=St[2]/St[0],ht[0]=St[0],ht[1]=St[1],ht[3]=St[3]-h[2]*ht[1],[h,P,ht]}function nt(h,P,ht){return h[0]=P[0]+ht[0],h[1]=P[1]+ht[1],h[2]=P[2]+ht[2],h[3]=P[3]+ht[3],h}function lt(h,P,ht){return h[0]=P[0]-ht[0],h[1]=P[1]-ht[1],h[2]=P[2]-ht[2],h[3]=P[3]-ht[3],h}function xt(h,P){return h[0]===P[0]&&h[1]===P[1]&&h[2]===P[2]&&h[3]===P[3]}function jt(h,P){var ht=h[0],St=h[1],Gt=h[2],Kt=h[3],Qt=P[0],pe=P[1],Se=P[2],je=P[3];return Math.abs(ht-Qt)<=b.EPSILON*Math.max(1,Math.abs(ht),Math.abs(Qt))&&Math.abs(St-pe)<=b.EPSILON*Math.max(1,Math.abs(St),Math.abs(pe))&&Math.abs(Gt-Se)<=b.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(Se))&&Math.abs(Kt-je)<=b.EPSILON*Math.max(1,Math.abs(Kt),Math.abs(je))}function Dt(h,P,ht){return h[0]=P[0]*ht,h[1]=P[1]*ht,h[2]=P[2]*ht,h[3]=P[3]*ht,h}function Zt(h,P,ht,St){return h[0]=P[0]+ht[0]*St,h[1]=P[1]+ht[1]*St,h[2]=P[2]+ht[2]*St,h[3]=P[3]+ht[3]*St,h}var Vt=V,ue=lt;function dt(){var h=new b.ARRAY_TYPE(6);return b.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[4]=0,h[5]=0),h[0]=1,h[3]=1,h}function Ot(h){var P=new b.ARRAY_TYPE(6);return P[0]=h[0],P[1]=h[1],P[2]=h[2],P[3]=h[3],P[4]=h[4],P[5]=h[5],P}function ee(h,P){return h[0]=P[0],h[1]=P[1],h[2]=P[2],h[3]=P[3],h[4]=P[4],h[5]=P[5],h}function Re(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h}function me(h,P,ht,St,Gt,Kt){var Qt=new b.ARRAY_TYPE(6);return Qt[0]=h,Qt[1]=P,Qt[2]=ht,Qt[3]=St,Qt[4]=Gt,Qt[5]=Kt,Qt}function Ae(h,P,ht,St,Gt,Kt,Qt){return h[0]=P,h[1]=ht,h[2]=St,h[3]=Gt,h[4]=Kt,h[5]=Qt,h}function Be(h,P){var ht=P[0],St=P[1],Gt=P[2],Kt=P[3],Qt=P[4],pe=P[5],Se=ht*Kt-St*Gt;return Se?(Se=1/Se,h[0]=Kt*Se,h[1]=-St*Se,h[2]=-Gt*Se,h[3]=ht*Se,h[4]=(Gt*pe-Kt*Qt)*Se,h[5]=(St*Qt-ht*pe)*Se,h):null}function Ke(h){return h[0]*h[3]-h[1]*h[2]}function $t(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=P[4],Se=P[5],je=ht[0],fr=ht[1],Rr=ht[2],Vr=ht[3],Ur=ht[4],vn=ht[5];return h[0]=St*je+Kt*fr,h[1]=Gt*je+Qt*fr,h[2]=St*Rr+Kt*Vr,h[3]=Gt*Rr+Qt*Vr,h[4]=St*Ur+Kt*vn+pe,h[5]=Gt*Ur+Qt*vn+Se,h}function ce(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=P[4],Se=P[5],je=Math.sin(ht),fr=Math.cos(ht);return h[0]=St*fr+Kt*je,h[1]=Gt*fr+Qt*je,h[2]=St*-je+Kt*fr,h[3]=Gt*-je+Qt*fr,h[4]=pe,h[5]=Se,h}function we(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=P[4],Se=P[5],je=ht[0],fr=ht[1];return h[0]=St*je,h[1]=Gt*je,h[2]=Kt*fr,h[3]=Qt*fr,h[4]=pe,h[5]=Se,h}function Pe(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=P[4],Se=P[5],je=ht[0],fr=ht[1];return h[0]=St,h[1]=Gt,h[2]=Kt,h[3]=Qt,h[4]=St*je+Kt*fr+pe,h[5]=Gt*je+Qt*fr+Se,h}function ye(h,P){var ht=Math.sin(P),St=Math.cos(P);return h[0]=St,h[1]=ht,h[2]=-ht,h[3]=St,h[4]=0,h[5]=0,h}function Bt(h,P){return h[0]=P[0],h[1]=0,h[2]=0,h[3]=P[1],h[4]=0,h[5]=0,h}function re(h,P){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=P[0],h[5]=P[1],h}function Ee(h){return"mat2d("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+")"}function It(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],1)}function Et(h,P,ht){return h[0]=P[0]+ht[0],h[1]=P[1]+ht[1],h[2]=P[2]+ht[2],h[3]=P[3]+ht[3],h[4]=P[4]+ht[4],h[5]=P[5]+ht[5],h}function Wt(h,P,ht){return h[0]=P[0]-ht[0],h[1]=P[1]-ht[1],h[2]=P[2]-ht[2],h[3]=P[3]-ht[3],h[4]=P[4]-ht[4],h[5]=P[5]-ht[5],h}function fe(h,P,ht){return h[0]=P[0]*ht,h[1]=P[1]*ht,h[2]=P[2]*ht,h[3]=P[3]*ht,h[4]=P[4]*ht,h[5]=P[5]*ht,h}function Fe(h,P,ht,St){return h[0]=P[0]+ht[0]*St,h[1]=P[1]+ht[1]*St,h[2]=P[2]+ht[2]*St,h[3]=P[3]+ht[3]*St,h[4]=P[4]+ht[4]*St,h[5]=P[5]+ht[5]*St,h}function $e(h,P){return h[0]===P[0]&&h[1]===P[1]&&h[2]===P[2]&&h[3]===P[3]&&h[4]===P[4]&&h[5]===P[5]}function Lt(h,P){var ht=h[0],St=h[1],Gt=h[2],Kt=h[3],Qt=h[4],pe=h[5],Se=P[0],je=P[1],fr=P[2],Rr=P[3],Vr=P[4],Ur=P[5];return Math.abs(ht-Se)<=b.EPSILON*Math.max(1,Math.abs(ht),Math.abs(Se))&&Math.abs(St-je)<=b.EPSILON*Math.max(1,Math.abs(St),Math.abs(je))&&Math.abs(Gt-fr)<=b.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(fr))&&Math.abs(Kt-Rr)<=b.EPSILON*Math.max(1,Math.abs(Kt),Math.abs(Rr))&&Math.abs(Qt-Vr)<=b.EPSILON*Math.max(1,Math.abs(Qt),Math.abs(Vr))&&Math.abs(pe-Ur)<=b.EPSILON*Math.max(1,Math.abs(pe),Math.abs(Ur))}var Ne=$t,Xe=Wt,Dr=R(35600);function ur(){var h=new b.ARRAY_TYPE(16);return b.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h}function Or(h){var P=new b.ARRAY_TYPE(16);return P[0]=h[0],P[1]=h[1],P[2]=h[2],P[3]=h[3],P[4]=h[4],P[5]=h[5],P[6]=h[6],P[7]=h[7],P[8]=h[8],P[9]=h[9],P[10]=h[10],P[11]=h[11],P[12]=h[12],P[13]=h[13],P[14]=h[14],P[15]=h[15],P}function ln(h,P){return h[0]=P[0],h[1]=P[1],h[2]=P[2],h[3]=P[3],h[4]=P[4],h[5]=P[5],h[6]=P[6],h[7]=P[7],h[8]=P[8],h[9]=P[9],h[10]=P[10],h[11]=P[11],h[12]=P[12],h[13]=P[13],h[14]=P[14],h[15]=P[15],h}function fn(h,P,ht,St,Gt,Kt,Qt,pe,Se,je,fr,Rr,Vr,Ur,vn,On){var Zr=new b.ARRAY_TYPE(16);return Zr[0]=h,Zr[1]=P,Zr[2]=ht,Zr[3]=St,Zr[4]=Gt,Zr[5]=Kt,Zr[6]=Qt,Zr[7]=pe,Zr[8]=Se,Zr[9]=je,Zr[10]=fr,Zr[11]=Rr,Zr[12]=Vr,Zr[13]=Ur,Zr[14]=vn,Zr[15]=On,Zr}function Xr(h,P,ht,St,Gt,Kt,Qt,pe,Se,je,fr,Rr,Vr,Ur,vn,On,Zr){return h[0]=P,h[1]=ht,h[2]=St,h[3]=Gt,h[4]=Kt,h[5]=Qt,h[6]=pe,h[7]=Se,h[8]=je,h[9]=fr,h[10]=Rr,h[11]=Vr,h[12]=Ur,h[13]=vn,h[14]=On,h[15]=Zr,h}function Cn(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Qr(h,P){if(h===P){var ht=P[1],St=P[2],Gt=P[3],Kt=P[6],Qt=P[7],pe=P[11];h[1]=P[4],h[2]=P[8],h[3]=P[12],h[4]=ht,h[6]=P[9],h[7]=P[13],h[8]=St,h[9]=Kt,h[11]=P[14],h[12]=Gt,h[13]=Qt,h[14]=pe}else h[0]=P[0],h[1]=P[4],h[2]=P[8],h[3]=P[12],h[4]=P[1],h[5]=P[5],h[6]=P[9],h[7]=P[13],h[8]=P[2],h[9]=P[6],h[10]=P[10],h[11]=P[14],h[12]=P[3],h[13]=P[7],h[14]=P[11],h[15]=P[15];return h}function Gr(h,P){var ht=P[0],St=P[1],Gt=P[2],Kt=P[3],Qt=P[4],pe=P[5],Se=P[6],je=P[7],fr=P[8],Rr=P[9],Vr=P[10],Ur=P[11],vn=P[12],On=P[13],Zr=P[14],Wn=P[15],Ma=ht*pe-St*Qt,Oa=ht*Se-Gt*Qt,ba=ht*je-Kt*Qt,ca=St*Se-Gt*pe,pa=St*je-Kt*pe,ao=Gt*je-Kt*Se,Ki=fr*On-Rr*vn,Gi=fr*Zr-Vr*vn,$i=fr*Wn-Ur*vn,Qi=Rr*Zr-Vr*On,fo=Rr*Wn-Ur*On,Ao=Vr*Wn-Ur*Zr,Fa=Ma*Ao-Oa*fo+ba*Qi+ca*$i-pa*Gi+ao*Ki;return Fa?(Fa=1/Fa,h[0]=(pe*Ao-Se*fo+je*Qi)*Fa,h[1]=(Gt*fo-St*Ao-Kt*Qi)*Fa,h[2]=(On*ao-Zr*pa+Wn*ca)*Fa,h[3]=(Vr*pa-Rr*ao-Ur*ca)*Fa,h[4]=(Se*$i-Qt*Ao-je*Gi)*Fa,h[5]=(ht*Ao-Gt*$i+Kt*Gi)*Fa,h[6]=(Zr*ba-vn*ao-Wn*Oa)*Fa,h[7]=(fr*ao-Vr*ba+Ur*Oa)*Fa,h[8]=(Qt*fo-pe*$i+je*Ki)*Fa,h[9]=(St*$i-ht*fo-Kt*Ki)*Fa,h[10]=(vn*pa-On*ba+Wn*Ma)*Fa,h[11]=(Rr*ba-fr*pa-Ur*Ma)*Fa,h[12]=(pe*Gi-Qt*Qi-Se*Ki)*Fa,h[13]=(ht*Qi-St*Gi+Gt*Ki)*Fa,h[14]=(On*Oa-vn*ca-Zr*Ma)*Fa,h[15]=(fr*ca-Rr*Oa+Vr*Ma)*Fa,h):null}function on(h,P){var ht=P[0],St=P[1],Gt=P[2],Kt=P[3],Qt=P[4],pe=P[5],Se=P[6],je=P[7],fr=P[8],Rr=P[9],Vr=P[10],Ur=P[11],vn=P[12],On=P[13],Zr=P[14],Wn=P[15];return h[0]=pe*(Vr*Wn-Ur*Zr)-Rr*(Se*Wn-je*Zr)+On*(Se*Ur-je*Vr),h[1]=-(St*(Vr*Wn-Ur*Zr)-Rr*(Gt*Wn-Kt*Zr)+On*(Gt*Ur-Kt*Vr)),h[2]=St*(Se*Wn-je*Zr)-pe*(Gt*Wn-Kt*Zr)+On*(Gt*je-Kt*Se),h[3]=-(St*(Se*Ur-je*Vr)-pe*(Gt*Ur-Kt*Vr)+Rr*(Gt*je-Kt*Se)),h[4]=-(Qt*(Vr*Wn-Ur*Zr)-fr*(Se*Wn-je*Zr)+vn*(Se*Ur-je*Vr)),h[5]=ht*(Vr*Wn-Ur*Zr)-fr*(Gt*Wn-Kt*Zr)+vn*(Gt*Ur-Kt*Vr),h[6]=-(ht*(Se*Wn-je*Zr)-Qt*(Gt*Wn-Kt*Zr)+vn*(Gt*je-Kt*Se)),h[7]=ht*(Se*Ur-je*Vr)-Qt*(Gt*Ur-Kt*Vr)+fr*(Gt*je-Kt*Se),h[8]=Qt*(Rr*Wn-Ur*On)-fr*(pe*Wn-je*On)+vn*(pe*Ur-je*Rr),h[9]=-(ht*(Rr*Wn-Ur*On)-fr*(St*Wn-Kt*On)+vn*(St*Ur-Kt*Rr)),h[10]=ht*(pe*Wn-je*On)-Qt*(St*Wn-Kt*On)+vn*(St*je-Kt*pe),h[11]=-(ht*(pe*Ur-je*Rr)-Qt*(St*Ur-Kt*Rr)+fr*(St*je-Kt*pe)),h[12]=-(Qt*(Rr*Zr-Vr*On)-fr*(pe*Zr-Se*On)+vn*(pe*Vr-Se*Rr)),h[13]=ht*(Rr*Zr-Vr*On)-fr*(St*Zr-Gt*On)+vn*(St*Vr-Gt*Rr),h[14]=-(ht*(pe*Zr-Se*On)-Qt*(St*Zr-Gt*On)+vn*(St*Se-Gt*pe)),h[15]=ht*(pe*Vr-Se*Rr)-Qt*(St*Vr-Gt*Rr)+fr*(St*Se-Gt*pe),h}function sr(h){var P=h[0],ht=h[1],St=h[2],Gt=h[3],Kt=h[4],Qt=h[5],pe=h[6],Se=h[7],je=h[8],fr=h[9],Rr=h[10],Vr=h[11],Ur=h[12],vn=h[13],On=h[14],Zr=h[15],Wn=P*Qt-ht*Kt,Ma=P*pe-St*Kt,Oa=P*Se-Gt*Kt,ba=ht*pe-St*Qt,ca=ht*Se-Gt*Qt,pa=St*Se-Gt*pe,ao=je*vn-fr*Ur,Ki=je*On-Rr*Ur,Gi=je*Zr-Vr*Ur,$i=fr*On-Rr*vn,Qi=fr*Zr-Vr*vn,fo=Rr*Zr-Vr*On;return Wn*fo-Ma*Qi+Oa*$i+ba*Gi-ca*Ki+pa*ao}function lr(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=P[4],Se=P[5],je=P[6],fr=P[7],Rr=P[8],Vr=P[9],Ur=P[10],vn=P[11],On=P[12],Zr=P[13],Wn=P[14],Ma=P[15],Oa=ht[0],ba=ht[1],ca=ht[2],pa=ht[3];return h[0]=Oa*St+ba*pe+ca*Rr+pa*On,h[1]=Oa*Gt+ba*Se+ca*Vr+pa*Zr,h[2]=Oa*Kt+ba*je+ca*Ur+pa*Wn,h[3]=Oa*Qt+ba*fr+ca*vn+pa*Ma,Oa=ht[4],ba=ht[5],ca=ht[6],pa=ht[7],h[4]=Oa*St+ba*pe+ca*Rr+pa*On,h[5]=Oa*Gt+ba*Se+ca*Vr+pa*Zr,h[6]=Oa*Kt+ba*je+ca*Ur+pa*Wn,h[7]=Oa*Qt+ba*fr+ca*vn+pa*Ma,Oa=ht[8],ba=ht[9],ca=ht[10],pa=ht[11],h[8]=Oa*St+ba*pe+ca*Rr+pa*On,h[9]=Oa*Gt+ba*Se+ca*Vr+pa*Zr,h[10]=Oa*Kt+ba*je+ca*Ur+pa*Wn,h[11]=Oa*Qt+ba*fr+ca*vn+pa*Ma,Oa=ht[12],ba=ht[13],ca=ht[14],pa=ht[15],h[12]=Oa*St+ba*pe+ca*Rr+pa*On,h[13]=Oa*Gt+ba*Se+ca*Vr+pa*Zr,h[14]=Oa*Kt+ba*je+ca*Ur+pa*Wn,h[15]=Oa*Qt+ba*fr+ca*vn+pa*Ma,h}function Qe(h,P,ht){var St=ht[0],Gt=ht[1],Kt=ht[2],Qt,pe,Se,je,fr,Rr,Vr,Ur,vn,On,Zr,Wn;return P===h?(h[12]=P[0]*St+P[4]*Gt+P[8]*Kt+P[12],h[13]=P[1]*St+P[5]*Gt+P[9]*Kt+P[13],h[14]=P[2]*St+P[6]*Gt+P[10]*Kt+P[14],h[15]=P[3]*St+P[7]*Gt+P[11]*Kt+P[15]):(Qt=P[0],pe=P[1],Se=P[2],je=P[3],fr=P[4],Rr=P[5],Vr=P[6],Ur=P[7],vn=P[8],On=P[9],Zr=P[10],Wn=P[11],h[0]=Qt,h[1]=pe,h[2]=Se,h[3]=je,h[4]=fr,h[5]=Rr,h[6]=Vr,h[7]=Ur,h[8]=vn,h[9]=On,h[10]=Zr,h[11]=Wn,h[12]=Qt*St+fr*Gt+vn*Kt+P[12],h[13]=pe*St+Rr*Gt+On*Kt+P[13],h[14]=Se*St+Vr*Gt+Zr*Kt+P[14],h[15]=je*St+Ur*Gt+Wn*Kt+P[15]),h}function $r(h,P,ht){var St=ht[0],Gt=ht[1],Kt=ht[2];return h[0]=P[0]*St,h[1]=P[1]*St,h[2]=P[2]*St,h[3]=P[3]*St,h[4]=P[4]*Gt,h[5]=P[5]*Gt,h[6]=P[6]*Gt,h[7]=P[7]*Gt,h[8]=P[8]*Kt,h[9]=P[9]*Kt,h[10]=P[10]*Kt,h[11]=P[11]*Kt,h[12]=P[12],h[13]=P[13],h[14]=P[14],h[15]=P[15],h}function an(h,P,ht,St){var Gt=St[0],Kt=St[1],Qt=St[2],pe=Math.hypot(Gt,Kt,Qt),Se,je,fr,Rr,Vr,Ur,vn,On,Zr,Wn,Ma,Oa,ba,ca,pa,ao,Ki,Gi,$i,Qi,fo,Ao,Fa,hi;return pe<b.EPSILON?null:(pe=1/pe,Gt*=pe,Kt*=pe,Qt*=pe,Se=Math.sin(ht),je=Math.cos(ht),fr=1-je,Rr=P[0],Vr=P[1],Ur=P[2],vn=P[3],On=P[4],Zr=P[5],Wn=P[6],Ma=P[7],Oa=P[8],ba=P[9],ca=P[10],pa=P[11],ao=Gt*Gt*fr+je,Ki=Kt*Gt*fr+Qt*Se,Gi=Qt*Gt*fr-Kt*Se,$i=Gt*Kt*fr-Qt*Se,Qi=Kt*Kt*fr+je,fo=Qt*Kt*fr+Gt*Se,Ao=Gt*Qt*fr+Kt*Se,Fa=Kt*Qt*fr-Gt*Se,hi=Qt*Qt*fr+je,h[0]=Rr*ao+On*Ki+Oa*Gi,h[1]=Vr*ao+Zr*Ki+ba*Gi,h[2]=Ur*ao+Wn*Ki+ca*Gi,h[3]=vn*ao+Ma*Ki+pa*Gi,h[4]=Rr*$i+On*Qi+Oa*fo,h[5]=Vr*$i+Zr*Qi+ba*fo,h[6]=Ur*$i+Wn*Qi+ca*fo,h[7]=vn*$i+Ma*Qi+pa*fo,h[8]=Rr*Ao+On*Fa+Oa*hi,h[9]=Vr*Ao+Zr*Fa+ba*hi,h[10]=Ur*Ao+Wn*Fa+ca*hi,h[11]=vn*Ao+Ma*Fa+pa*hi,P!==h&&(h[12]=P[12],h[13]=P[13],h[14]=P[14],h[15]=P[15]),h)}function bn(h,P,ht){var St=Math.sin(ht),Gt=Math.cos(ht),Kt=P[4],Qt=P[5],pe=P[6],Se=P[7],je=P[8],fr=P[9],Rr=P[10],Vr=P[11];return P!==h&&(h[0]=P[0],h[1]=P[1],h[2]=P[2],h[3]=P[3],h[12]=P[12],h[13]=P[13],h[14]=P[14],h[15]=P[15]),h[4]=Kt*Gt+je*St,h[5]=Qt*Gt+fr*St,h[6]=pe*Gt+Rr*St,h[7]=Se*Gt+Vr*St,h[8]=je*Gt-Kt*St,h[9]=fr*Gt-Qt*St,h[10]=Rr*Gt-pe*St,h[11]=Vr*Gt-Se*St,h}function nr(h,P,ht){var St=Math.sin(ht),Gt=Math.cos(ht),Kt=P[0],Qt=P[1],pe=P[2],Se=P[3],je=P[8],fr=P[9],Rr=P[10],Vr=P[11];return P!==h&&(h[4]=P[4],h[5]=P[5],h[6]=P[6],h[7]=P[7],h[12]=P[12],h[13]=P[13],h[14]=P[14],h[15]=P[15]),h[0]=Kt*Gt-je*St,h[1]=Qt*Gt-fr*St,h[2]=pe*Gt-Rr*St,h[3]=Se*Gt-Vr*St,h[8]=Kt*St+je*Gt,h[9]=Qt*St+fr*Gt,h[10]=pe*St+Rr*Gt,h[11]=Se*St+Vr*Gt,h}function Tr(h,P,ht){var St=Math.sin(ht),Gt=Math.cos(ht),Kt=P[0],Qt=P[1],pe=P[2],Se=P[3],je=P[4],fr=P[5],Rr=P[6],Vr=P[7];return P!==h&&(h[8]=P[8],h[9]=P[9],h[10]=P[10],h[11]=P[11],h[12]=P[12],h[13]=P[13],h[14]=P[14],h[15]=P[15]),h[0]=Kt*Gt+je*St,h[1]=Qt*Gt+fr*St,h[2]=pe*Gt+Rr*St,h[3]=Se*Gt+Vr*St,h[4]=je*Gt-Kt*St,h[5]=fr*Gt-Qt*St,h[6]=Rr*Gt-pe*St,h[7]=Vr*Gt-Se*St,h}function ar(h,P){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=P[0],h[13]=P[1],h[14]=P[2],h[15]=1,h}function vr(h,P){return h[0]=P[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=P[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=P[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Br(h,P,ht){var St=ht[0],Gt=ht[1],Kt=ht[2],Qt=Math.hypot(St,Gt,Kt),pe,Se,je;return Qt<b.EPSILON?null:(Qt=1/Qt,St*=Qt,Gt*=Qt,Kt*=Qt,pe=Math.sin(P),Se=Math.cos(P),je=1-Se,h[0]=St*St*je+Se,h[1]=Gt*St*je+Kt*pe,h[2]=Kt*St*je-Gt*pe,h[3]=0,h[4]=St*Gt*je-Kt*pe,h[5]=Gt*Gt*je+Se,h[6]=Kt*Gt*je+St*pe,h[7]=0,h[8]=St*Kt*je+Gt*pe,h[9]=Gt*Kt*je-St*pe,h[10]=Kt*Kt*je+Se,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h)}function Fr(h,P){var ht=Math.sin(P),St=Math.cos(P);return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=St,h[6]=ht,h[7]=0,h[8]=0,h[9]=-ht,h[10]=St,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function kr(h,P){var ht=Math.sin(P),St=Math.cos(P);return h[0]=St,h[1]=0,h[2]=-ht,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=ht,h[9]=0,h[10]=St,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Z(h,P){var ht=Math.sin(P),St=Math.cos(P);return h[0]=St,h[1]=ht,h[2]=0,h[3]=0,h[4]=-ht,h[5]=St,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Te(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=St+St,Se=Gt+Gt,je=Kt+Kt,fr=St*pe,Rr=St*Se,Vr=St*je,Ur=Gt*Se,vn=Gt*je,On=Kt*je,Zr=Qt*pe,Wn=Qt*Se,Ma=Qt*je;return h[0]=1-(Ur+On),h[1]=Rr+Ma,h[2]=Vr-Wn,h[3]=0,h[4]=Rr-Ma,h[5]=1-(fr+On),h[6]=vn+Zr,h[7]=0,h[8]=Vr+Wn,h[9]=vn-Zr,h[10]=1-(fr+Ur),h[11]=0,h[12]=ht[0],h[13]=ht[1],h[14]=ht[2],h[15]=1,h}function ne(h,P){var ht=new b.ARRAY_TYPE(3),St=-P[0],Gt=-P[1],Kt=-P[2],Qt=P[3],pe=P[4],Se=P[5],je=P[6],fr=P[7],Rr=St*St+Gt*Gt+Kt*Kt+Qt*Qt;return Rr>0?(ht[0]=(pe*Qt+fr*St+Se*Kt-je*Gt)*2/Rr,ht[1]=(Se*Qt+fr*Gt+je*St-pe*Kt)*2/Rr,ht[2]=(je*Qt+fr*Kt+pe*Gt-Se*St)*2/Rr):(ht[0]=(pe*Qt+fr*St+Se*Kt-je*Gt)*2,ht[1]=(Se*Qt+fr*Gt+je*St-pe*Kt)*2,ht[2]=(je*Qt+fr*Kt+pe*Gt-Se*St)*2),Te(h,P,ht),h}function it(h,P){return h[0]=P[12],h[1]=P[13],h[2]=P[14],h}function ot(h,P){var ht=P[0],St=P[1],Gt=P[2],Kt=P[4],Qt=P[5],pe=P[6],Se=P[8],je=P[9],fr=P[10];return h[0]=Math.hypot(ht,St,Gt),h[1]=Math.hypot(Kt,Qt,pe),h[2]=Math.hypot(Se,je,fr),h}function B(h,P){var ht=new b.ARRAY_TYPE(3);ot(ht,P);var St=1/ht[0],Gt=1/ht[1],Kt=1/ht[2],Qt=P[0]*St,pe=P[1]*Gt,Se=P[2]*Kt,je=P[4]*St,fr=P[5]*Gt,Rr=P[6]*Kt,Vr=P[8]*St,Ur=P[9]*Gt,vn=P[10]*Kt,On=Qt+fr+vn,Zr=0;return On>0?(Zr=Math.sqrt(On+1)*2,h[3]=.25*Zr,h[0]=(Rr-Ur)/Zr,h[1]=(Vr-Se)/Zr,h[2]=(pe-je)/Zr):Qt>fr&&Qt>vn?(Zr=Math.sqrt(1+Qt-fr-vn)*2,h[3]=(Rr-Ur)/Zr,h[0]=.25*Zr,h[1]=(pe+je)/Zr,h[2]=(Vr+Se)/Zr):fr>vn?(Zr=Math.sqrt(1+fr-Qt-vn)*2,h[3]=(Vr-Se)/Zr,h[0]=(pe+je)/Zr,h[1]=.25*Zr,h[2]=(Rr+Ur)/Zr):(Zr=Math.sqrt(1+vn-Qt-fr)*2,h[3]=(pe-je)/Zr,h[0]=(Vr+Se)/Zr,h[1]=(Rr+Ur)/Zr,h[2]=.25*Zr),h}function _(h,P,ht,St){var Gt=P[0],Kt=P[1],Qt=P[2],pe=P[3],Se=Gt+Gt,je=Kt+Kt,fr=Qt+Qt,Rr=Gt*Se,Vr=Gt*je,Ur=Gt*fr,vn=Kt*je,On=Kt*fr,Zr=Qt*fr,Wn=pe*Se,Ma=pe*je,Oa=pe*fr,ba=St[0],ca=St[1],pa=St[2];return h[0]=(1-(vn+Zr))*ba,h[1]=(Vr+Oa)*ba,h[2]=(Ur-Ma)*ba,h[3]=0,h[4]=(Vr-Oa)*ca,h[5]=(1-(Rr+Zr))*ca,h[6]=(On+Wn)*ca,h[7]=0,h[8]=(Ur+Ma)*pa,h[9]=(On-Wn)*pa,h[10]=(1-(Rr+vn))*pa,h[11]=0,h[12]=ht[0],h[13]=ht[1],h[14]=ht[2],h[15]=1,h}function C(h,P,ht,St,Gt){var Kt=P[0],Qt=P[1],pe=P[2],Se=P[3],je=Kt+Kt,fr=Qt+Qt,Rr=pe+pe,Vr=Kt*je,Ur=Kt*fr,vn=Kt*Rr,On=Qt*fr,Zr=Qt*Rr,Wn=pe*Rr,Ma=Se*je,Oa=Se*fr,ba=Se*Rr,ca=St[0],pa=St[1],ao=St[2],Ki=Gt[0],Gi=Gt[1],$i=Gt[2],Qi=(1-(On+Wn))*ca,fo=(Ur+ba)*ca,Ao=(vn-Oa)*ca,Fa=(Ur-ba)*pa,hi=(1-(Vr+Wn))*pa,Is=(Zr+Ma)*pa,gs=(vn+Oa)*ao,as=(Zr-Ma)*ao,ou=(1-(Vr+On))*ao;return h[0]=Qi,h[1]=fo,h[2]=Ao,h[3]=0,h[4]=Fa,h[5]=hi,h[6]=Is,h[7]=0,h[8]=gs,h[9]=as,h[10]=ou,h[11]=0,h[12]=ht[0]+Ki-(Qi*Ki+Fa*Gi+gs*$i),h[13]=ht[1]+Gi-(fo*Ki+hi*Gi+as*$i),h[14]=ht[2]+$i-(Ao*Ki+Is*Gi+ou*$i),h[15]=1,h}function Y(h,P){var ht=P[0],St=P[1],Gt=P[2],Kt=P[3],Qt=ht+ht,pe=St+St,Se=Gt+Gt,je=ht*Qt,fr=St*Qt,Rr=St*pe,Vr=Gt*Qt,Ur=Gt*pe,vn=Gt*Se,On=Kt*Qt,Zr=Kt*pe,Wn=Kt*Se;return h[0]=1-Rr-vn,h[1]=fr+Wn,h[2]=Vr-Zr,h[3]=0,h[4]=fr-Wn,h[5]=1-je-vn,h[6]=Ur+On,h[7]=0,h[8]=Vr+Zr,h[9]=Ur-On,h[10]=1-je-Rr,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function pt(h,P,ht,St,Gt,Kt,Qt){var pe=1/(ht-P),Se=1/(Gt-St),je=1/(Kt-Qt);return h[0]=Kt*2*pe,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Kt*2*Se,h[6]=0,h[7]=0,h[8]=(ht+P)*pe,h[9]=(Gt+St)*Se,h[10]=(Qt+Kt)*je,h[11]=-1,h[12]=0,h[13]=0,h[14]=Qt*Kt*2*je,h[15]=0,h}function _t(h,P,ht,St,Gt){var Kt=1/Math.tan(P/2),Qt;return h[0]=Kt/ht,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Kt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Gt!=null&&Gt!==Infinity?(Qt=1/(St-Gt),h[10]=(Gt+St)*Qt,h[14]=2*Gt*St*Qt):(h[10]=-1,h[14]=-2*St),h}var Mt=_t;function zt(h,P,ht,St,Gt){var Kt=1/Math.tan(P/2),Qt;return h[0]=Kt/ht,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Kt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Gt!=null&&Gt!==Infinity?(Qt=1/(St-Gt),h[10]=Gt*Qt,h[14]=Gt*St*Qt):(h[10]=-1,h[14]=-St),h}function Le(h,P,ht,St){var Gt=Math.tan(P.upDegrees*Math.PI/180),Kt=Math.tan(P.downDegrees*Math.PI/180),Qt=Math.tan(P.leftDegrees*Math.PI/180),pe=Math.tan(P.rightDegrees*Math.PI/180),Se=2/(Qt+pe),je=2/(Gt+Kt);return h[0]=Se,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=je,h[6]=0,h[7]=0,h[8]=-((Qt-pe)*Se*.5),h[9]=(Gt-Kt)*je*.5,h[10]=St/(ht-St),h[11]=-1,h[12]=0,h[13]=0,h[14]=St*ht/(ht-St),h[15]=0,h}function Me(h,P,ht,St,Gt,Kt,Qt){var pe=1/(P-ht),Se=1/(St-Gt),je=1/(Kt-Qt);return h[0]=-2*pe,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*Se,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*je,h[11]=0,h[12]=(P+ht)*pe,h[13]=(Gt+St)*Se,h[14]=(Qt+Kt)*je,h[15]=1,h}var qe=Me;function br(h,P,ht,St,Gt,Kt,Qt){var pe=1/(P-ht),Se=1/(St-Gt),je=1/(Kt-Qt);return h[0]=-2*pe,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*Se,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=je,h[11]=0,h[12]=(P+ht)*pe,h[13]=(Gt+St)*Se,h[14]=Kt*je,h[15]=1,h}function xr(h,P,ht,St){var Gt,Kt,Qt,pe,Se,je,fr,Rr,Vr,Ur,vn=P[0],On=P[1],Zr=P[2],Wn=St[0],Ma=St[1],Oa=St[2],ba=ht[0],ca=ht[1],pa=ht[2];return Math.abs(vn-ba)<b.EPSILON&&Math.abs(On-ca)<b.EPSILON&&Math.abs(Zr-pa)<b.EPSILON?Cn(h):(fr=vn-ba,Rr=On-ca,Vr=Zr-pa,Ur=1/Math.hypot(fr,Rr,Vr),fr*=Ur,Rr*=Ur,Vr*=Ur,Gt=Ma*Vr-Oa*Rr,Kt=Oa*fr-Wn*Vr,Qt=Wn*Rr-Ma*fr,Ur=Math.hypot(Gt,Kt,Qt),Ur?(Ur=1/Ur,Gt*=Ur,Kt*=Ur,Qt*=Ur):(Gt=0,Kt=0,Qt=0),pe=Rr*Qt-Vr*Kt,Se=Vr*Gt-fr*Qt,je=fr*Kt-Rr*Gt,Ur=Math.hypot(pe,Se,je),Ur?(Ur=1/Ur,pe*=Ur,Se*=Ur,je*=Ur):(pe=0,Se=0,je=0),h[0]=Gt,h[1]=pe,h[2]=fr,h[3]=0,h[4]=Kt,h[5]=Se,h[6]=Rr,h[7]=0,h[8]=Qt,h[9]=je,h[10]=Vr,h[11]=0,h[12]=-(Gt*vn+Kt*On+Qt*Zr),h[13]=-(pe*vn+Se*On+je*Zr),h[14]=-(fr*vn+Rr*On+Vr*Zr),h[15]=1,h)}function sn(h,P,ht,St){var Gt=P[0],Kt=P[1],Qt=P[2],pe=St[0],Se=St[1],je=St[2],fr=Gt-ht[0],Rr=Kt-ht[1],Vr=Qt-ht[2],Ur=fr*fr+Rr*Rr+Vr*Vr;Ur>0&&(Ur=1/Math.sqrt(Ur),fr*=Ur,Rr*=Ur,Vr*=Ur);var vn=Se*Vr-je*Rr,On=je*fr-pe*Vr,Zr=pe*Rr-Se*fr;return Ur=vn*vn+On*On+Zr*Zr,Ur>0&&(Ur=1/Math.sqrt(Ur),vn*=Ur,On*=Ur,Zr*=Ur),h[0]=vn,h[1]=On,h[2]=Zr,h[3]=0,h[4]=Rr*Zr-Vr*On,h[5]=Vr*vn-fr*Zr,h[6]=fr*On-Rr*vn,h[7]=0,h[8]=fr,h[9]=Rr,h[10]=Vr,h[11]=0,h[12]=Gt,h[13]=Kt,h[14]=Qt,h[15]=1,h}function Rn(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function tr(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])}function Sr(h,P,ht){return h[0]=P[0]+ht[0],h[1]=P[1]+ht[1],h[2]=P[2]+ht[2],h[3]=P[3]+ht[3],h[4]=P[4]+ht[4],h[5]=P[5]+ht[5],h[6]=P[6]+ht[6],h[7]=P[7]+ht[7],h[8]=P[8]+ht[8],h[9]=P[9]+ht[9],h[10]=P[10]+ht[10],h[11]=P[11]+ht[11],h[12]=P[12]+ht[12],h[13]=P[13]+ht[13],h[14]=P[14]+ht[14],h[15]=P[15]+ht[15],h}function jr(h,P,ht){return h[0]=P[0]-ht[0],h[1]=P[1]-ht[1],h[2]=P[2]-ht[2],h[3]=P[3]-ht[3],h[4]=P[4]-ht[4],h[5]=P[5]-ht[5],h[6]=P[6]-ht[6],h[7]=P[7]-ht[7],h[8]=P[8]-ht[8],h[9]=P[9]-ht[9],h[10]=P[10]-ht[10],h[11]=P[11]-ht[11],h[12]=P[12]-ht[12],h[13]=P[13]-ht[13],h[14]=P[14]-ht[14],h[15]=P[15]-ht[15],h}function Nn(h,P,ht){return h[0]=P[0]*ht,h[1]=P[1]*ht,h[2]=P[2]*ht,h[3]=P[3]*ht,h[4]=P[4]*ht,h[5]=P[5]*ht,h[6]=P[6]*ht,h[7]=P[7]*ht,h[8]=P[8]*ht,h[9]=P[9]*ht,h[10]=P[10]*ht,h[11]=P[11]*ht,h[12]=P[12]*ht,h[13]=P[13]*ht,h[14]=P[14]*ht,h[15]=P[15]*ht,h}function gn(h,P,ht,St){return h[0]=P[0]+ht[0]*St,h[1]=P[1]+ht[1]*St,h[2]=P[2]+ht[2]*St,h[3]=P[3]+ht[3]*St,h[4]=P[4]+ht[4]*St,h[5]=P[5]+ht[5]*St,h[6]=P[6]+ht[6]*St,h[7]=P[7]+ht[7]*St,h[8]=P[8]+ht[8]*St,h[9]=P[9]+ht[9]*St,h[10]=P[10]+ht[10]*St,h[11]=P[11]+ht[11]*St,h[12]=P[12]+ht[12]*St,h[13]=P[13]+ht[13]*St,h[14]=P[14]+ht[14]*St,h[15]=P[15]+ht[15]*St,h}function ea(h,P){return h[0]===P[0]&&h[1]===P[1]&&h[2]===P[2]&&h[3]===P[3]&&h[4]===P[4]&&h[5]===P[5]&&h[6]===P[6]&&h[7]===P[7]&&h[8]===P[8]&&h[9]===P[9]&&h[10]===P[10]&&h[11]===P[11]&&h[12]===P[12]&&h[13]===P[13]&&h[14]===P[14]&&h[15]===P[15]}function ha(h,P){var ht=h[0],St=h[1],Gt=h[2],Kt=h[3],Qt=h[4],pe=h[5],Se=h[6],je=h[7],fr=h[8],Rr=h[9],Vr=h[10],Ur=h[11],vn=h[12],On=h[13],Zr=h[14],Wn=h[15],Ma=P[0],Oa=P[1],ba=P[2],ca=P[3],pa=P[4],ao=P[5],Ki=P[6],Gi=P[7],$i=P[8],Qi=P[9],fo=P[10],Ao=P[11],Fa=P[12],hi=P[13],Is=P[14],gs=P[15];return Math.abs(ht-Ma)<=b.EPSILON*Math.max(1,Math.abs(ht),Math.abs(Ma))&&Math.abs(St-Oa)<=b.EPSILON*Math.max(1,Math.abs(St),Math.abs(Oa))&&Math.abs(Gt-ba)<=b.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(ba))&&Math.abs(Kt-ca)<=b.EPSILON*Math.max(1,Math.abs(Kt),Math.abs(ca))&&Math.abs(Qt-pa)<=b.EPSILON*Math.max(1,Math.abs(Qt),Math.abs(pa))&&Math.abs(pe-ao)<=b.EPSILON*Math.max(1,Math.abs(pe),Math.abs(ao))&&Math.abs(Se-Ki)<=b.EPSILON*Math.max(1,Math.abs(Se),Math.abs(Ki))&&Math.abs(je-Gi)<=b.EPSILON*Math.max(1,Math.abs(je),Math.abs(Gi))&&Math.abs(fr-$i)<=b.EPSILON*Math.max(1,Math.abs(fr),Math.abs($i))&&Math.abs(Rr-Qi)<=b.EPSILON*Math.max(1,Math.abs(Rr),Math.abs(Qi))&&Math.abs(Vr-fo)<=b.EPSILON*Math.max(1,Math.abs(Vr),Math.abs(fo))&&Math.abs(Ur-Ao)<=b.EPSILON*Math.max(1,Math.abs(Ur),Math.abs(Ao))&&Math.abs(vn-Fa)<=b.EPSILON*Math.max(1,Math.abs(vn),Math.abs(Fa))&&Math.abs(On-hi)<=b.EPSILON*Math.max(1,Math.abs(On),Math.abs(hi))&&Math.abs(Zr-Is)<=b.EPSILON*Math.max(1,Math.abs(Zr),Math.abs(Is))&&Math.abs(Wn-gs)<=b.EPSILON*Math.max(1,Math.abs(Wn),Math.abs(gs))}var Zn=lr,na=jr,da=R(77160);function Vn(){var h=new b.ARRAY_TYPE(4);return b.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0),h}function se(h){var P=new b.ARRAY_TYPE(4);return P[0]=h[0],P[1]=h[1],P[2]=h[2],P[3]=h[3],P}function Ut(h,P,ht,St){var Gt=new b.ARRAY_TYPE(4);return Gt[0]=h,Gt[1]=P,Gt[2]=ht,Gt[3]=St,Gt}function le(h,P){return h[0]=P[0],h[1]=P[1],h[2]=P[2],h[3]=P[3],h}function ze(h,P,ht,St,Gt){return h[0]=P,h[1]=ht,h[2]=St,h[3]=Gt,h}function Ie(h,P,ht){return h[0]=P[0]+ht[0],h[1]=P[1]+ht[1],h[2]=P[2]+ht[2],h[3]=P[3]+ht[3],h}function We(h,P,ht){return h[0]=P[0]-ht[0],h[1]=P[1]-ht[1],h[2]=P[2]-ht[2],h[3]=P[3]-ht[3],h}function _r(h,P,ht){return h[0]=P[0]*ht[0],h[1]=P[1]*ht[1],h[2]=P[2]*ht[2],h[3]=P[3]*ht[3],h}function nn(h,P,ht){return h[0]=P[0]/ht[0],h[1]=P[1]/ht[1],h[2]=P[2]/ht[2],h[3]=P[3]/ht[3],h}function pn(h,P){return h[0]=Math.ceil(P[0]),h[1]=Math.ceil(P[1]),h[2]=Math.ceil(P[2]),h[3]=Math.ceil(P[3]),h}function Gn(h,P){return h[0]=Math.floor(P[0]),h[1]=Math.floor(P[1]),h[2]=Math.floor(P[2]),h[3]=Math.floor(P[3]),h}function jn(h,P,ht){return h[0]=Math.min(P[0],ht[0]),h[1]=Math.min(P[1],ht[1]),h[2]=Math.min(P[2],ht[2]),h[3]=Math.min(P[3],ht[3]),h}function oa(h,P,ht){return h[0]=Math.max(P[0],ht[0]),h[1]=Math.max(P[1],ht[1]),h[2]=Math.max(P[2],ht[2]),h[3]=Math.max(P[3],ht[3]),h}function va(h,P){return h[0]=Math.round(P[0]),h[1]=Math.round(P[1]),h[2]=Math.round(P[2]),h[3]=Math.round(P[3]),h}function _a(h,P,ht){return h[0]=P[0]*ht,h[1]=P[1]*ht,h[2]=P[2]*ht,h[3]=P[3]*ht,h}function fi(h,P,ht,St){return h[0]=P[0]+ht[0]*St,h[1]=P[1]+ht[1]*St,h[2]=P[2]+ht[2]*St,h[3]=P[3]+ht[3]*St,h}function Ba(h,P){var ht=P[0]-h[0],St=P[1]-h[1],Gt=P[2]-h[2],Kt=P[3]-h[3];return Math.hypot(ht,St,Gt,Kt)}function Wa(h,P){var ht=P[0]-h[0],St=P[1]-h[1],Gt=P[2]-h[2],Kt=P[3]-h[3];return ht*ht+St*St+Gt*Gt+Kt*Kt}function wa(h){var P=h[0],ht=h[1],St=h[2],Gt=h[3];return Math.hypot(P,ht,St,Gt)}function vi(h){var P=h[0],ht=h[1],St=h[2],Gt=h[3];return P*P+ht*ht+St*St+Gt*Gt}function ti(h,P){return h[0]=-P[0],h[1]=-P[1],h[2]=-P[2],h[3]=-P[3],h}function Ia(h,P){return h[0]=1/P[0],h[1]=1/P[1],h[2]=1/P[2],h[3]=1/P[3],h}function qi(h,P){var ht=P[0],St=P[1],Gt=P[2],Kt=P[3],Qt=ht*ht+St*St+Gt*Gt+Kt*Kt;return Qt>0&&(Qt=1/Math.sqrt(Qt)),h[0]=ht*Qt,h[1]=St*Qt,h[2]=Gt*Qt,h[3]=Kt*Qt,h}function gi(h,P){return h[0]*P[0]+h[1]*P[1]+h[2]*P[2]+h[3]*P[3]}function ji(h,P,ht,St){var Gt=ht[0]*St[1]-ht[1]*St[0],Kt=ht[0]*St[2]-ht[2]*St[0],Qt=ht[0]*St[3]-ht[3]*St[0],pe=ht[1]*St[2]-ht[2]*St[1],Se=ht[1]*St[3]-ht[3]*St[1],je=ht[2]*St[3]-ht[3]*St[2],fr=P[0],Rr=P[1],Vr=P[2],Ur=P[3];return h[0]=Rr*je-Vr*Se+Ur*pe,h[1]=-(fr*je)+Vr*Qt-Ur*Kt,h[2]=fr*Se-Rr*Qt+Ur*Gt,h[3]=-(fr*pe)+Rr*Kt-Vr*Gt,h}function Ti(h,P,ht,St){var Gt=P[0],Kt=P[1],Qt=P[2],pe=P[3];return h[0]=Gt+St*(ht[0]-Gt),h[1]=Kt+St*(ht[1]-Kt),h[2]=Qt+St*(ht[2]-Qt),h[3]=pe+St*(ht[3]-pe),h}function ri(h,P){P=P||1;var ht,St,Gt,Kt,Qt,pe;do ht=b.RANDOM()*2-1,St=b.RANDOM()*2-1,Qt=ht*ht+St*St;while(Qt>=1);do Gt=b.RANDOM()*2-1,Kt=b.RANDOM()*2-1,pe=Gt*Gt+Kt*Kt;while(pe>=1);var Se=Math.sqrt((1-Qt)/pe);return h[0]=P*ht,h[1]=P*St,h[2]=P*Gt*Se,h[3]=P*Kt*Se,h}function No(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3];return h[0]=ht[0]*St+ht[4]*Gt+ht[8]*Kt+ht[12]*Qt,h[1]=ht[1]*St+ht[5]*Gt+ht[9]*Kt+ht[13]*Qt,h[2]=ht[2]*St+ht[6]*Gt+ht[10]*Kt+ht[14]*Qt,h[3]=ht[3]*St+ht[7]*Gt+ht[11]*Kt+ht[15]*Qt,h}function Po(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=ht[0],pe=ht[1],Se=ht[2],je=ht[3],fr=je*St+pe*Kt-Se*Gt,Rr=je*Gt+Se*St-Qt*Kt,Vr=je*Kt+Qt*Gt-pe*St,Ur=-Qt*St-pe*Gt-Se*Kt;return h[0]=fr*je+Ur*-Qt+Rr*-Se-Vr*-pe,h[1]=Rr*je+Ur*-pe+Vr*-Qt-fr*-Se,h[2]=Vr*je+Ur*-Se+fr*-pe-Rr*-Qt,h[3]=P[3],h}function Ii(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h}function ho(h){return"vec4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function Ji(h,P){return h[0]===P[0]&&h[1]===P[1]&&h[2]===P[2]&&h[3]===P[3]}function Xi(h,P){var ht=h[0],St=h[1],Gt=h[2],Kt=h[3],Qt=P[0],pe=P[1],Se=P[2],je=P[3];return Math.abs(ht-Qt)<=b.EPSILON*Math.max(1,Math.abs(ht),Math.abs(Qt))&&Math.abs(St-pe)<=b.EPSILON*Math.max(1,Math.abs(St),Math.abs(pe))&&Math.abs(Gt-Se)<=b.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(Se))&&Math.abs(Kt-je)<=b.EPSILON*Math.max(1,Math.abs(Kt),Math.abs(je))}var Ri=We,Oi=_r,Io=nn,to=Ba,Yi=Wa,un=wa,vo=vi,Fo=function(){var h=Vn();return function(P,ht,St,Gt,Kt,Qt){var pe,Se;for(ht||(ht=4),St||(St=0),Gt?Se=Math.min(Gt*ht+St,P.length):Se=P.length,pe=St;pe<Se;pe+=ht)h[0]=P[pe],h[1]=P[pe+1],h[2]=P[pe+2],h[3]=P[pe+3],Kt(h,h,Qt),P[pe]=h[0],P[pe+1]=h[1],P[pe+2]=h[2],P[pe+3]=h[3];return P}}();function Qa(){var h=new b.ARRAY_TYPE(4);return b.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function ko(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h}function go(h,P,ht){ht=ht*.5;var St=Math.sin(ht);return h[0]=St*P[0],h[1]=St*P[1],h[2]=St*P[2],h[3]=Math.cos(ht),h}function Li(h,P){var ht=Math.acos(P[3])*2,St=Math.sin(ht/2);return St>b.EPSILON?(h[0]=P[0]/St,h[1]=P[1]/St,h[2]=P[2]/St):(h[0]=1,h[1]=0,h[2]=0),ht}function eo(h,P){var ht=Mi(h,P);return Math.acos(2*ht*ht-1)}function de(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=ht[0],Se=ht[1],je=ht[2],fr=ht[3];return h[0]=St*fr+Qt*pe+Gt*je-Kt*Se,h[1]=Gt*fr+Qt*Se+Kt*pe-St*je,h[2]=Kt*fr+Qt*je+St*Se-Gt*pe,h[3]=Qt*fr-St*pe-Gt*Se-Kt*je,h}function Ar(h,P,ht){ht*=.5;var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=Math.sin(ht),Se=Math.cos(ht);return h[0]=St*Se+Qt*pe,h[1]=Gt*Se+Kt*pe,h[2]=Kt*Se-Gt*pe,h[3]=Qt*Se-St*pe,h}function qr(h,P,ht){ht*=.5;var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=Math.sin(ht),Se=Math.cos(ht);return h[0]=St*Se-Kt*pe,h[1]=Gt*Se+Qt*pe,h[2]=Kt*Se+St*pe,h[3]=Qt*Se-Gt*pe,h}function Bn(h,P,ht){ht*=.5;var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=Math.sin(ht),Se=Math.cos(ht);return h[0]=St*Se+Gt*pe,h[1]=Gt*Se-St*pe,h[2]=Kt*Se+Qt*pe,h[3]=Qt*Se-Kt*pe,h}function Sa(h,P){var ht=P[0],St=P[1],Gt=P[2];return h[0]=ht,h[1]=St,h[2]=Gt,h[3]=Math.sqrt(Math.abs(1-ht*ht-St*St-Gt*Gt)),h}function ci(h,P){var ht=P[0],St=P[1],Gt=P[2],Kt=P[3],Qt=Math.sqrt(ht*ht+St*St+Gt*Gt),pe=Math.exp(Kt),Se=Qt>0?pe*Math.sin(Qt)/Qt:0;return h[0]=ht*Se,h[1]=St*Se,h[2]=Gt*Se,h[3]=pe*Math.cos(Qt),h}function _i(h,P){var ht=P[0],St=P[1],Gt=P[2],Kt=P[3],Qt=Math.sqrt(ht*ht+St*St+Gt*Gt),pe=Qt>0?Math.atan2(Qt,Kt)/Qt:0;return h[0]=ht*pe,h[1]=St*pe,h[2]=Gt*pe,h[3]=.5*Math.log(ht*ht+St*St+Gt*Gt+Kt*Kt),h}function li(h,P,ht){return _i(h,P),qa(h,h,ht),ci(h,h),h}function Ai(h,P,ht,St){var Gt=P[0],Kt=P[1],Qt=P[2],pe=P[3],Se=ht[0],je=ht[1],fr=ht[2],Rr=ht[3],Vr,Ur,vn,On,Zr;return Ur=Gt*Se+Kt*je+Qt*fr+pe*Rr,Ur<0&&(Ur=-Ur,Se=-Se,je=-je,fr=-fr,Rr=-Rr),1-Ur>b.EPSILON?(Vr=Math.acos(Ur),vn=Math.sin(Vr),On=Math.sin((1-St)*Vr)/vn,Zr=Math.sin(St*Vr)/vn):(On=1-St,Zr=St),h[0]=On*Gt+Zr*Se,h[1]=On*Kt+Zr*je,h[2]=On*Qt+Zr*fr,h[3]=On*pe+Zr*Rr,h}function Ea(h){var P=b.RANDOM(),ht=b.RANDOM(),St=b.RANDOM(),Gt=Math.sqrt(1-P),Kt=Math.sqrt(P);return h[0]=Gt*Math.sin(2*Math.PI*ht),h[1]=Gt*Math.cos(2*Math.PI*ht),h[2]=Kt*Math.sin(2*Math.PI*St),h[3]=Kt*Math.cos(2*Math.PI*St),h}function ro(h,P){var ht=P[0],St=P[1],Gt=P[2],Kt=P[3],Qt=ht*ht+St*St+Gt*Gt+Kt*Kt,pe=Qt?1/Qt:0;return h[0]=-ht*pe,h[1]=-St*pe,h[2]=-Gt*pe,h[3]=Kt*pe,h}function Yo(h,P){return h[0]=-P[0],h[1]=-P[1],h[2]=-P[2],h[3]=P[3],h}function Bi(h,P){var ht=P[0]+P[4]+P[8],St;if(ht>0)St=Math.sqrt(ht+1),h[3]=.5*St,St=.5/St,h[0]=(P[5]-P[7])*St,h[1]=(P[6]-P[2])*St,h[2]=(P[1]-P[3])*St;else{var Gt=0;P[4]>P[0]&&(Gt=1),P[8]>P[Gt*3+Gt]&&(Gt=2);var Kt=(Gt+1)%3,Qt=(Gt+2)%3;St=Math.sqrt(P[Gt*3+Gt]-P[Kt*3+Kt]-P[Qt*3+Qt]+1),h[Gt]=.5*St,St=.5/St,h[3]=(P[Kt*3+Qt]-P[Qt*3+Kt])*St,h[Kt]=(P[Kt*3+Gt]+P[Gt*3+Kt])*St,h[Qt]=(P[Qt*3+Gt]+P[Gt*3+Qt])*St}return h}function no(h,P,ht,St){var Gt=.5*Math.PI/180;P*=Gt,ht*=Gt,St*=Gt;var Kt=Math.sin(P),Qt=Math.cos(P),pe=Math.sin(ht),Se=Math.cos(ht),je=Math.sin(St),fr=Math.cos(St);return h[0]=Kt*Se*fr-Qt*pe*je,h[1]=Qt*pe*fr+Kt*Se*je,h[2]=Qt*Se*je-Kt*pe*fr,h[3]=Qt*Se*fr+Kt*pe*je,h}function Oo(h){return"quat("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}var Vi=se,po=Ut,Ei=le,yo=ze,Hi=Ie,ma=de,qa=_a,Mi=gi,pi=Ti,so=wa,Zi=so,Fi=vi,mo=Fi,uo=qi,bo=Ji,La=Xi,ds=function(){var h=da.create(),P=da.fromValues(1,0,0),ht=da.fromValues(0,1,0);return function(St,Gt,Kt){var Qt=da.dot(Gt,Kt);return Qt<-.999999?(da.cross(h,P,Gt),da.len(h)<1e-6&&da.cross(h,ht,Gt),da.normalize(h,h),go(St,h,Math.PI),St):Qt>.999999?(St[0]=0,St[1]=0,St[2]=0,St[3]=1,St):(da.cross(h,Gt,Kt),St[0]=h[0],St[1]=h[1],St[2]=h[2],St[3]=1+Qt,uo(St,St))}}(),os=function(){var h=Qa(),P=Qa();return function(ht,St,Gt,Kt,Qt,pe){return Ai(h,St,Qt,pe),Ai(P,Gt,Kt,pe),Ai(ht,h,P,2*pe*(1-pe)),ht}}(),Nt=function(){var h=Dr.create();return function(P,ht,St,Gt){return h[0]=St[0],h[3]=St[1],h[6]=St[2],h[1]=Gt[0],h[4]=Gt[1],h[7]=Gt[2],h[2]=-ht[0],h[5]=-ht[1],h[8]=-ht[2],uo(P,Bi(P,h))}}();function At(){var h=new b.ARRAY_TYPE(8);return b.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[4]=0,h[5]=0,h[6]=0,h[7]=0),h[3]=1,h}function ut(h){var P=new b.ARRAY_TYPE(8);return P[0]=h[0],P[1]=h[1],P[2]=h[2],P[3]=h[3],P[4]=h[4],P[5]=h[5],P[6]=h[6],P[7]=h[7],P}function yt(h,P,ht,St,Gt,Kt,Qt,pe){var Se=new b.ARRAY_TYPE(8);return Se[0]=h,Se[1]=P,Se[2]=ht,Se[3]=St,Se[4]=Gt,Se[5]=Kt,Se[6]=Qt,Se[7]=pe,Se}function Ct(h,P,ht,St,Gt,Kt,Qt){var pe=new b.ARRAY_TYPE(8);pe[0]=h,pe[1]=P,pe[2]=ht,pe[3]=St;var Se=Gt*.5,je=Kt*.5,fr=Qt*.5;return pe[4]=Se*St+je*ht-fr*P,pe[5]=je*St+fr*h-Se*ht,pe[6]=fr*St+Se*P-je*h,pe[7]=-Se*h-je*P-fr*ht,pe}function ve(h,P,ht){var St=ht[0]*.5,Gt=ht[1]*.5,Kt=ht[2]*.5,Qt=P[0],pe=P[1],Se=P[2],je=P[3];return h[0]=Qt,h[1]=pe,h[2]=Se,h[3]=je,h[4]=St*je+Gt*Se-Kt*pe,h[5]=Gt*je+Kt*Qt-St*Se,h[6]=Kt*je+St*pe-Gt*Qt,h[7]=-St*Qt-Gt*pe-Kt*Se,h}function ke(h,P){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=P[0]*.5,h[5]=P[1]*.5,h[6]=P[2]*.5,h[7]=0,h}function er(h,P){return h[0]=P[0],h[1]=P[1],h[2]=P[2],h[3]=P[3],h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function yr(h,P){var ht=Qa();B(ht,P);var St=new b.ARRAY_TYPE(3);return it(St,P),ve(h,ht,St),h}function Pt(h,P){return h[0]=P[0],h[1]=P[1],h[2]=P[2],h[3]=P[3],h[4]=P[4],h[5]=P[5],h[6]=P[6],h[7]=P[7],h}function Tt(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function H(h,P,ht,St,Gt,Kt,Qt,pe,Se){return h[0]=P,h[1]=ht,h[2]=St,h[3]=Gt,h[4]=Kt,h[5]=Qt,h[6]=pe,h[7]=Se,h}var gt=Ei;function Rt(h,P){return h[0]=P[4],h[1]=P[5],h[2]=P[6],h[3]=P[7],h}var te=Ei;function De(h,P){return h[4]=P[0],h[5]=P[1],h[6]=P[2],h[7]=P[3],h}function rr(h,P){var ht=P[4],St=P[5],Gt=P[6],Kt=P[7],Qt=-P[0],pe=-P[1],Se=-P[2],je=P[3];return h[0]=(ht*je+Kt*Qt+St*Se-Gt*pe)*2,h[1]=(St*je+Kt*pe+Gt*Qt-ht*Se)*2,h[2]=(Gt*je+Kt*Se+ht*pe-St*Qt)*2,h}function Er(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=ht[0]*.5,Se=ht[1]*.5,je=ht[2]*.5,fr=P[4],Rr=P[5],Vr=P[6],Ur=P[7];return h[0]=St,h[1]=Gt,h[2]=Kt,h[3]=Qt,h[4]=Qt*pe+Gt*je-Kt*Se+fr,h[5]=Qt*Se+Kt*pe-St*je+Rr,h[6]=Qt*je+St*Se-Gt*pe+Vr,h[7]=-St*pe-Gt*Se-Kt*je+Ur,h}function yn(h,P,ht){var St=-P[0],Gt=-P[1],Kt=-P[2],Qt=P[3],pe=P[4],Se=P[5],je=P[6],fr=P[7],Rr=pe*Qt+fr*St+Se*Kt-je*Gt,Vr=Se*Qt+fr*Gt+je*St-pe*Kt,Ur=je*Qt+fr*Kt+pe*Gt-Se*St,vn=fr*Qt-pe*St-Se*Gt-je*Kt;return Ar(h,P,ht),St=h[0],Gt=h[1],Kt=h[2],Qt=h[3],h[4]=Rr*Qt+vn*St+Vr*Kt-Ur*Gt,h[5]=Vr*Qt+vn*Gt+Ur*St-Rr*Kt,h[6]=Ur*Qt+vn*Kt+Rr*Gt-Vr*St,h[7]=vn*Qt-Rr*St-Vr*Gt-Ur*Kt,h}function en(h,P,ht){var St=-P[0],Gt=-P[1],Kt=-P[2],Qt=P[3],pe=P[4],Se=P[5],je=P[6],fr=P[7],Rr=pe*Qt+fr*St+Se*Kt-je*Gt,Vr=Se*Qt+fr*Gt+je*St-pe*Kt,Ur=je*Qt+fr*Kt+pe*Gt-Se*St,vn=fr*Qt-pe*St-Se*Gt-je*Kt;return qr(h,P,ht),St=h[0],Gt=h[1],Kt=h[2],Qt=h[3],h[4]=Rr*Qt+vn*St+Vr*Kt-Ur*Gt,h[5]=Vr*Qt+vn*Gt+Ur*St-Rr*Kt,h[6]=Ur*Qt+vn*Kt+Rr*Gt-Vr*St,h[7]=vn*Qt-Rr*St-Vr*Gt-Ur*Kt,h}function hn(h,P,ht){var St=-P[0],Gt=-P[1],Kt=-P[2],Qt=P[3],pe=P[4],Se=P[5],je=P[6],fr=P[7],Rr=pe*Qt+fr*St+Se*Kt-je*Gt,Vr=Se*Qt+fr*Gt+je*St-pe*Kt,Ur=je*Qt+fr*Kt+pe*Gt-Se*St,vn=fr*Qt-pe*St-Se*Gt-je*Kt;return Bn(h,P,ht),St=h[0],Gt=h[1],Kt=h[2],Qt=h[3],h[4]=Rr*Qt+vn*St+Vr*Kt-Ur*Gt,h[5]=Vr*Qt+vn*Gt+Ur*St-Rr*Kt,h[6]=Ur*Qt+vn*Kt+Rr*Gt-Vr*St,h[7]=vn*Qt-Rr*St-Vr*Gt-Ur*Kt,h}function Qn(h,P,ht){var St=ht[0],Gt=ht[1],Kt=ht[2],Qt=ht[3],pe=P[0],Se=P[1],je=P[2],fr=P[3];return h[0]=pe*Qt+fr*St+Se*Kt-je*Gt,h[1]=Se*Qt+fr*Gt+je*St-pe*Kt,h[2]=je*Qt+fr*Kt+pe*Gt-Se*St,h[3]=fr*Qt-pe*St-Se*Gt-je*Kt,pe=P[4],Se=P[5],je=P[6],fr=P[7],h[4]=pe*Qt+fr*St+Se*Kt-je*Gt,h[5]=Se*Qt+fr*Gt+je*St-pe*Kt,h[6]=je*Qt+fr*Kt+pe*Gt-Se*St,h[7]=fr*Qt-pe*St-Se*Gt-je*Kt,h}function fa(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=ht[0],Se=ht[1],je=ht[2],fr=ht[3];return h[0]=St*fr+Qt*pe+Gt*je-Kt*Se,h[1]=Gt*fr+Qt*Se+Kt*pe-St*je,h[2]=Kt*fr+Qt*je+St*Se-Gt*pe,h[3]=Qt*fr-St*pe-Gt*Se-Kt*je,pe=ht[4],Se=ht[5],je=ht[6],fr=ht[7],h[4]=St*fr+Qt*pe+Gt*je-Kt*Se,h[5]=Gt*fr+Qt*Se+Kt*pe-St*je,h[6]=Kt*fr+Qt*je+St*Se-Gt*pe,h[7]=Qt*fr-St*pe-Gt*Se-Kt*je,h}function Hn(h,P,ht,St){if(Math.abs(St)<b.EPSILON)return Pt(h,P);var Gt=Math.hypot(ht[0],ht[1],ht[2]);St=St*.5;var Kt=Math.sin(St),Qt=Kt*ht[0]/Gt,pe=Kt*ht[1]/Gt,Se=Kt*ht[2]/Gt,je=Math.cos(St),fr=P[0],Rr=P[1],Vr=P[2],Ur=P[3];h[0]=fr*je+Ur*Qt+Rr*Se-Vr*pe,h[1]=Rr*je+Ur*pe+Vr*Qt-fr*Se,h[2]=Vr*je+Ur*Se+fr*pe-Rr*Qt,h[3]=Ur*je-fr*Qt-Rr*pe-Vr*Se;var vn=P[4],On=P[5],Zr=P[6],Wn=P[7];return h[4]=vn*je+Wn*Qt+On*Se-Zr*pe,h[5]=On*je+Wn*pe+Zr*Qt-vn*Se,h[6]=Zr*je+Wn*Se+vn*pe-On*Qt,h[7]=Wn*je-vn*Qt-On*pe-Zr*Se,h}function Jn(h,P,ht){return h[0]=P[0]+ht[0],h[1]=P[1]+ht[1],h[2]=P[2]+ht[2],h[3]=P[3]+ht[3],h[4]=P[4]+ht[4],h[5]=P[5]+ht[5],h[6]=P[6]+ht[6],h[7]=P[7]+ht[7],h}function ja(h,P,ht){var St=P[0],Gt=P[1],Kt=P[2],Qt=P[3],pe=ht[4],Se=ht[5],je=ht[6],fr=ht[7],Rr=P[4],Vr=P[5],Ur=P[6],vn=P[7],On=ht[0],Zr=ht[1],Wn=ht[2],Ma=ht[3];return h[0]=St*Ma+Qt*On+Gt*Wn-Kt*Zr,h[1]=Gt*Ma+Qt*Zr+Kt*On-St*Wn,h[2]=Kt*Ma+Qt*Wn+St*Zr-Gt*On,h[3]=Qt*Ma-St*On-Gt*Zr-Kt*Wn,h[4]=St*fr+Qt*pe+Gt*je-Kt*Se+Rr*Ma+vn*On+Vr*Wn-Ur*Zr,h[5]=Gt*fr+Qt*Se+Kt*pe-St*je+Vr*Ma+vn*Zr+Ur*On-Rr*Wn,h[6]=Kt*fr+Qt*je+St*Se-Gt*pe+Ur*Ma+vn*Wn+Rr*Zr-Vr*On,h[7]=Qt*fr-St*pe-Gt*Se-Kt*je+vn*Ma-Rr*On-Vr*Zr-Ur*Wn,h}var Va=ja;function ni(h,P,ht){return h[0]=P[0]*ht,h[1]=P[1]*ht,h[2]=P[2]*ht,h[3]=P[3]*ht,h[4]=P[4]*ht,h[5]=P[5]*ht,h[6]=P[6]*ht,h[7]=P[7]*ht,h}var ai=Mi;function wi(h,P,ht,St){var Gt=1-St;return ai(P,ht)<0&&(St=-St),h[0]=P[0]*Gt+ht[0]*St,h[1]=P[1]*Gt+ht[1]*St,h[2]=P[2]*Gt+ht[2]*St,h[3]=P[3]*Gt+ht[3]*St,h[4]=P[4]*Gt+ht[4]*St,h[5]=P[5]*Gt+ht[5]*St,h[6]=P[6]*Gt+ht[6]*St,h[7]=P[7]*Gt+ht[7]*St,h}function Ro(h,P){var ht=Di(P);return h[0]=-P[0]/ht,h[1]=-P[1]/ht,h[2]=-P[2]/ht,h[3]=P[3]/ht,h[4]=-P[4]/ht,h[5]=-P[5]/ht,h[6]=-P[6]/ht,h[7]=P[7]/ht,h}function ss(h,P){return h[0]=-P[0],h[1]=-P[1],h[2]=-P[2],h[3]=P[3],h[4]=-P[4],h[5]=-P[5],h[6]=-P[6],h[7]=P[7],h}var Bo=so,es=Bo,Di=Fi,Lo=Di;function nu(h,P){var ht=Di(P);if(ht>0){ht=Math.sqrt(ht);var St=P[0]/ht,Gt=P[1]/ht,Kt=P[2]/ht,Qt=P[3]/ht,pe=P[4],Se=P[5],je=P[6],fr=P[7],Rr=St*pe+Gt*Se+Kt*je+Qt*fr;h[0]=St,h[1]=Gt,h[2]=Kt,h[3]=Qt,h[4]=(pe-St*Rr)/ht,h[5]=(Se-Gt*Rr)/ht,h[6]=(je-Kt*Rr)/ht,h[7]=(fr-Qt*Rr)/ht}return h}function au(h){return"quat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+")"}function Ss(h,P){return h[0]===P[0]&&h[1]===P[1]&&h[2]===P[2]&&h[3]===P[3]&&h[4]===P[4]&&h[5]===P[5]&&h[6]===P[6]&&h[7]===P[7]}function vs(h,P){var ht=h[0],St=h[1],Gt=h[2],Kt=h[3],Qt=h[4],pe=h[5],Se=h[6],je=h[7],fr=P[0],Rr=P[1],Vr=P[2],Ur=P[3],vn=P[4],On=P[5],Zr=P[6],Wn=P[7];return Math.abs(ht-fr)<=b.EPSILON*Math.max(1,Math.abs(ht),Math.abs(fr))&&Math.abs(St-Rr)<=b.EPSILON*Math.max(1,Math.abs(St),Math.abs(Rr))&&Math.abs(Gt-Vr)<=b.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(Vr))&&Math.abs(Kt-Ur)<=b.EPSILON*Math.max(1,Math.abs(Kt),Math.abs(Ur))&&Math.abs(Qt-vn)<=b.EPSILON*Math.max(1,Math.abs(Qt),Math.abs(vn))&&Math.abs(pe-On)<=b.EPSILON*Math.max(1,Math.abs(pe),Math.abs(On))&&Math.abs(Se-Zr)<=b.EPSILON*Math.max(1,Math.abs(Se),Math.abs(Zr))&&Math.abs(je-Wn)<=b.EPSILON*Math.max(1,Math.abs(je),Math.abs(Wn))}var iu=R(31437)},35600:function(Mr,G,R){"use strict";R.r(G),R.d(G,{create:function(){return z},fromMat4:function(){return F},clone:function(){return I},copy:function(){return k},fromValues:function(){return D},set:function(){return b},identity:function(){return E},transpose:function(){return p},invert:function(){return y},adjoint:function(){return g},determinant:function(){return T},multiply:function(){return x},translate:function(){return S},rotate:function(){return N},scale:function(){return m},fromTranslation:function(){return d},fromRotation:function(){return V},fromScaling:function(){return Q},fromMat2d:function(){return j},fromQuat:function(){return X},normalFromMat4:function(){return K},projection:function(){return J},str:function(){return rt},frob:function(){return tt},add:function(){return nt},subtract:function(){return lt},multiplyScalar:function(){return xt},multiplyScalarAndAdd:function(){return jt},exactEquals:function(){return Dt},equals:function(){return Zt},mul:function(){return Vt},sub:function(){return ue}});var L=R(49685);function z(){var dt=new L.ARRAY_TYPE(9);return L.ARRAY_TYPE!=Float32Array&&(dt[1]=0,dt[2]=0,dt[3]=0,dt[5]=0,dt[6]=0,dt[7]=0),dt[0]=1,dt[4]=1,dt[8]=1,dt}function F(dt,Ot){return dt[0]=Ot[0],dt[1]=Ot[1],dt[2]=Ot[2],dt[3]=Ot[4],dt[4]=Ot[5],dt[5]=Ot[6],dt[6]=Ot[8],dt[7]=Ot[9],dt[8]=Ot[10],dt}function I(dt){var Ot=new L.ARRAY_TYPE(9);return Ot[0]=dt[0],Ot[1]=dt[1],Ot[2]=dt[2],Ot[3]=dt[3],Ot[4]=dt[4],Ot[5]=dt[5],Ot[6]=dt[6],Ot[7]=dt[7],Ot[8]=dt[8],Ot}function k(dt,Ot){return dt[0]=Ot[0],dt[1]=Ot[1],dt[2]=Ot[2],dt[3]=Ot[3],dt[4]=Ot[4],dt[5]=Ot[5],dt[6]=Ot[6],dt[7]=Ot[7],dt[8]=Ot[8],dt}function D(dt,Ot,ee,Re,me,Ae,Be,Ke,$t){var ce=new L.ARRAY_TYPE(9);return ce[0]=dt,ce[1]=Ot,ce[2]=ee,ce[3]=Re,ce[4]=me,ce[5]=Ae,ce[6]=Be,ce[7]=Ke,ce[8]=$t,ce}function b(dt,Ot,ee,Re,me,Ae,Be,Ke,$t,ce){return dt[0]=Ot,dt[1]=ee,dt[2]=Re,dt[3]=me,dt[4]=Ae,dt[5]=Be,dt[6]=Ke,dt[7]=$t,dt[8]=ce,dt}function E(dt){return dt[0]=1,dt[1]=0,dt[2]=0,dt[3]=0,dt[4]=1,dt[5]=0,dt[6]=0,dt[7]=0,dt[8]=1,dt}function p(dt,Ot){if(dt===Ot){var ee=Ot[1],Re=Ot[2],me=Ot[5];dt[1]=Ot[3],dt[2]=Ot[6],dt[3]=ee,dt[5]=Ot[7],dt[6]=Re,dt[7]=me}else dt[0]=Ot[0],dt[1]=Ot[3],dt[2]=Ot[6],dt[3]=Ot[1],dt[4]=Ot[4],dt[5]=Ot[7],dt[6]=Ot[2],dt[7]=Ot[5],dt[8]=Ot[8];return dt}function y(dt,Ot){var ee=Ot[0],Re=Ot[1],me=Ot[2],Ae=Ot[3],Be=Ot[4],Ke=Ot[5],$t=Ot[6],ce=Ot[7],we=Ot[8],Pe=we*Be-Ke*ce,ye=-we*Ae+Ke*$t,Bt=ce*Ae-Be*$t,re=ee*Pe+Re*ye+me*Bt;return re?(re=1/re,dt[0]=Pe*re,dt[1]=(-we*Re+me*ce)*re,dt[2]=(Ke*Re-me*Be)*re,dt[3]=ye*re,dt[4]=(we*ee-me*$t)*re,dt[5]=(-Ke*ee+me*Ae)*re,dt[6]=Bt*re,dt[7]=(-ce*ee+Re*$t)*re,dt[8]=(Be*ee-Re*Ae)*re,dt):null}function g(dt,Ot){var ee=Ot[0],Re=Ot[1],me=Ot[2],Ae=Ot[3],Be=Ot[4],Ke=Ot[5],$t=Ot[6],ce=Ot[7],we=Ot[8];return dt[0]=Be*we-Ke*ce,dt[1]=me*ce-Re*we,dt[2]=Re*Ke-me*Be,dt[3]=Ke*$t-Ae*we,dt[4]=ee*we-me*$t,dt[5]=me*Ae-ee*Ke,dt[6]=Ae*ce-Be*$t,dt[7]=Re*$t-ee*ce,dt[8]=ee*Be-Re*Ae,dt}function T(dt){var Ot=dt[0],ee=dt[1],Re=dt[2],me=dt[3],Ae=dt[4],Be=dt[5],Ke=dt[6],$t=dt[7],ce=dt[8];return Ot*(ce*Ae-Be*$t)+ee*(-ce*me+Be*Ke)+Re*($t*me-Ae*Ke)}function x(dt,Ot,ee){var Re=Ot[0],me=Ot[1],Ae=Ot[2],Be=Ot[3],Ke=Ot[4],$t=Ot[5],ce=Ot[6],we=Ot[7],Pe=Ot[8],ye=ee[0],Bt=ee[1],re=ee[2],Ee=ee[3],It=ee[4],Et=ee[5],Wt=ee[6],fe=ee[7],Fe=ee[8];return dt[0]=ye*Re+Bt*Be+re*ce,dt[1]=ye*me+Bt*Ke+re*we,dt[2]=ye*Ae+Bt*$t+re*Pe,dt[3]=Ee*Re+It*Be+Et*ce,dt[4]=Ee*me+It*Ke+Et*we,dt[5]=Ee*Ae+It*$t+Et*Pe,dt[6]=Wt*Re+fe*Be+Fe*ce,dt[7]=Wt*me+fe*Ke+Fe*we,dt[8]=Wt*Ae+fe*$t+Fe*Pe,dt}function S(dt,Ot,ee){var Re=Ot[0],me=Ot[1],Ae=Ot[2],Be=Ot[3],Ke=Ot[4],$t=Ot[5],ce=Ot[6],we=Ot[7],Pe=Ot[8],ye=ee[0],Bt=ee[1];return dt[0]=Re,dt[1]=me,dt[2]=Ae,dt[3]=Be,dt[4]=Ke,dt[5]=$t,dt[6]=ye*Re+Bt*Be+ce,dt[7]=ye*me+Bt*Ke+we,dt[8]=ye*Ae+Bt*$t+Pe,dt}function N(dt,Ot,ee){var Re=Ot[0],me=Ot[1],Ae=Ot[2],Be=Ot[3],Ke=Ot[4],$t=Ot[5],ce=Ot[6],we=Ot[7],Pe=Ot[8],ye=Math.sin(ee),Bt=Math.cos(ee);return dt[0]=Bt*Re+ye*Be,dt[1]=Bt*me+ye*Ke,dt[2]=Bt*Ae+ye*$t,dt[3]=Bt*Be-ye*Re,dt[4]=Bt*Ke-ye*me,dt[5]=Bt*$t-ye*Ae,dt[6]=ce,dt[7]=we,dt[8]=Pe,dt}function m(dt,Ot,ee){var Re=ee[0],me=ee[1];return dt[0]=Re*Ot[0],dt[1]=Re*Ot[1],dt[2]=Re*Ot[2],dt[3]=me*Ot[3],dt[4]=me*Ot[4],dt[5]=me*Ot[5],dt[6]=Ot[6],dt[7]=Ot[7],dt[8]=Ot[8],dt}function d(dt,Ot){return dt[0]=1,dt[1]=0,dt[2]=0,dt[3]=0,dt[4]=1,dt[5]=0,dt[6]=Ot[0],dt[7]=Ot[1],dt[8]=1,dt}function V(dt,Ot){var ee=Math.sin(Ot),Re=Math.cos(Ot);return dt[0]=Re,dt[1]=ee,dt[2]=0,dt[3]=-ee,dt[4]=Re,dt[5]=0,dt[6]=0,dt[7]=0,dt[8]=1,dt}function Q(dt,Ot){return dt[0]=Ot[0],dt[1]=0,dt[2]=0,dt[3]=0,dt[4]=Ot[1],dt[5]=0,dt[6]=0,dt[7]=0,dt[8]=1,dt}function j(dt,Ot){return dt[0]=Ot[0],dt[1]=Ot[1],dt[2]=0,dt[3]=Ot[2],dt[4]=Ot[3],dt[5]=0,dt[6]=Ot[4],dt[7]=Ot[5],dt[8]=1,dt}function X(dt,Ot){var ee=Ot[0],Re=Ot[1],me=Ot[2],Ae=Ot[3],Be=ee+ee,Ke=Re+Re,$t=me+me,ce=ee*Be,we=Re*Be,Pe=Re*Ke,ye=me*Be,Bt=me*Ke,re=me*$t,Ee=Ae*Be,It=Ae*Ke,Et=Ae*$t;return dt[0]=1-Pe-re,dt[3]=we-Et,dt[6]=ye+It,dt[1]=we+Et,dt[4]=1-ce-re,dt[7]=Bt-Ee,dt[2]=ye-It,dt[5]=Bt+Ee,dt[8]=1-ce-Pe,dt}function K(dt,Ot){var ee=Ot[0],Re=Ot[1],me=Ot[2],Ae=Ot[3],Be=Ot[4],Ke=Ot[5],$t=Ot[6],ce=Ot[7],we=Ot[8],Pe=Ot[9],ye=Ot[10],Bt=Ot[11],re=Ot[12],Ee=Ot[13],It=Ot[14],Et=Ot[15],Wt=ee*Ke-Re*Be,fe=ee*$t-me*Be,Fe=ee*ce-Ae*Be,$e=Re*$t-me*Ke,Lt=Re*ce-Ae*Ke,Ne=me*ce-Ae*$t,Xe=we*Ee-Pe*re,Dr=we*It-ye*re,ur=we*Et-Bt*re,Or=Pe*It-ye*Ee,ln=Pe*Et-Bt*Ee,fn=ye*Et-Bt*It,Xr=Wt*fn-fe*ln+Fe*Or+$e*ur-Lt*Dr+Ne*Xe;return Xr?(Xr=1/Xr,dt[0]=(Ke*fn-$t*ln+ce*Or)*Xr,dt[1]=($t*ur-Be*fn-ce*Dr)*Xr,dt[2]=(Be*ln-Ke*ur+ce*Xe)*Xr,dt[3]=(me*ln-Re*fn-Ae*Or)*Xr,dt[4]=(ee*fn-me*ur+Ae*Dr)*Xr,dt[5]=(Re*ur-ee*ln-Ae*Xe)*Xr,dt[6]=(Ee*Ne-It*Lt+Et*$e)*Xr,dt[7]=(It*Fe-re*Ne-Et*fe)*Xr,dt[8]=(re*Lt-Ee*Fe+Et*Wt)*Xr,dt):null}function J(dt,Ot,ee){return dt[0]=2/Ot,dt[1]=0,dt[2]=0,dt[3]=0,dt[4]=-2/ee,dt[5]=0,dt[6]=-1,dt[7]=1,dt[8]=1,dt}function rt(dt){return"mat3("+dt[0]+", "+dt[1]+", "+dt[2]+", "+dt[3]+", "+dt[4]+", "+dt[5]+", "+dt[6]+", "+dt[7]+", "+dt[8]+")"}function tt(dt){return Math.hypot(dt[0],dt[1],dt[2],dt[3],dt[4],dt[5],dt[6],dt[7],dt[8])}function nt(dt,Ot,ee){return dt[0]=Ot[0]+ee[0],dt[1]=Ot[1]+ee[1],dt[2]=Ot[2]+ee[2],dt[3]=Ot[3]+ee[3],dt[4]=Ot[4]+ee[4],dt[5]=Ot[5]+ee[5],dt[6]=Ot[6]+ee[6],dt[7]=Ot[7]+ee[7],dt[8]=Ot[8]+ee[8],dt}function lt(dt,Ot,ee){return dt[0]=Ot[0]-ee[0],dt[1]=Ot[1]-ee[1],dt[2]=Ot[2]-ee[2],dt[3]=Ot[3]-ee[3],dt[4]=Ot[4]-ee[4],dt[5]=Ot[5]-ee[5],dt[6]=Ot[6]-ee[6],dt[7]=Ot[7]-ee[7],dt[8]=Ot[8]-ee[8],dt}function xt(dt,Ot,ee){return dt[0]=Ot[0]*ee,dt[1]=Ot[1]*ee,dt[2]=Ot[2]*ee,dt[3]=Ot[3]*ee,dt[4]=Ot[4]*ee,dt[5]=Ot[5]*ee,dt[6]=Ot[6]*ee,dt[7]=Ot[7]*ee,dt[8]=Ot[8]*ee,dt}function jt(dt,Ot,ee,Re){return dt[0]=Ot[0]+ee[0]*Re,dt[1]=Ot[1]+ee[1]*Re,dt[2]=Ot[2]+ee[2]*Re,dt[3]=Ot[3]+ee[3]*Re,dt[4]=Ot[4]+ee[4]*Re,dt[5]=Ot[5]+ee[5]*Re,dt[6]=Ot[6]+ee[6]*Re,dt[7]=Ot[7]+ee[7]*Re,dt[8]=Ot[8]+ee[8]*Re,dt}function Dt(dt,Ot){return dt[0]===Ot[0]&&dt[1]===Ot[1]&&dt[2]===Ot[2]&&dt[3]===Ot[3]&&dt[4]===Ot[4]&&dt[5]===Ot[5]&&dt[6]===Ot[6]&&dt[7]===Ot[7]&&dt[8]===Ot[8]}function Zt(dt,Ot){var ee=dt[0],Re=dt[1],me=dt[2],Ae=dt[3],Be=dt[4],Ke=dt[5],$t=dt[6],ce=dt[7],we=dt[8],Pe=Ot[0],ye=Ot[1],Bt=Ot[2],re=Ot[3],Ee=Ot[4],It=Ot[5],Et=Ot[6],Wt=Ot[7],fe=Ot[8];return Math.abs(ee-Pe)<=L.EPSILON*Math.max(1,Math.abs(ee),Math.abs(Pe))&&Math.abs(Re-ye)<=L.EPSILON*Math.max(1,Math.abs(Re),Math.abs(ye))&&Math.abs(me-Bt)<=L.EPSILON*Math.max(1,Math.abs(me),Math.abs(Bt))&&Math.abs(Ae-re)<=L.EPSILON*Math.max(1,Math.abs(Ae),Math.abs(re))&&Math.abs(Be-Ee)<=L.EPSILON*Math.max(1,Math.abs(Be),Math.abs(Ee))&&Math.abs(Ke-It)<=L.EPSILON*Math.max(1,Math.abs(Ke),Math.abs(It))&&Math.abs($t-Et)<=L.EPSILON*Math.max(1,Math.abs($t),Math.abs(Et))&&Math.abs(ce-Wt)<=L.EPSILON*Math.max(1,Math.abs(ce),Math.abs(Wt))&&Math.abs(we-fe)<=L.EPSILON*Math.max(1,Math.abs(we),Math.abs(fe))}var Vt=x,ue=lt},31437:function(Mr,G,R){"use strict";R.r(G),R.d(G,{create:function(){return z},clone:function(){return F},fromValues:function(){return I},copy:function(){return k},set:function(){return D},add:function(){return b},subtract:function(){return E},multiply:function(){return p},divide:function(){return y},ceil:function(){return g},floor:function(){return T},min:function(){return x},max:function(){return S},round:function(){return N},scale:function(){return m},scaleAndAdd:function(){return d},distance:function(){return V},squaredDistance:function(){return Q},length:function(){return j},squaredLength:function(){return X},negate:function(){return K},inverse:function(){return J},normalize:function(){return rt},dot:function(){return tt},cross:function(){return nt},lerp:function(){return lt},random:function(){return xt},transformMat2:function(){return jt},transformMat2d:function(){return Dt},transformMat3:function(){return Zt},transformMat4:function(){return Vt},rotate:function(){return ue},angle:function(){return dt},zero:function(){return Ot},str:function(){return ee},exactEquals:function(){return Re},equals:function(){return me},len:function(){return Ae},sub:function(){return Be},mul:function(){return Ke},div:function(){return $t},dist:function(){return ce},sqrDist:function(){return we},sqrLen:function(){return Pe},forEach:function(){return ye}});var L=R(49685);function z(){var Bt=new L.ARRAY_TYPE(2);return L.ARRAY_TYPE!=Float32Array&&(Bt[0]=0,Bt[1]=0),Bt}function F(Bt){var re=new L.ARRAY_TYPE(2);return re[0]=Bt[0],re[1]=Bt[1],re}function I(Bt,re){var Ee=new L.ARRAY_TYPE(2);return Ee[0]=Bt,Ee[1]=re,Ee}function k(Bt,re){return Bt[0]=re[0],Bt[1]=re[1],Bt}function D(Bt,re,Ee){return Bt[0]=re,Bt[1]=Ee,Bt}function b(Bt,re,Ee){return Bt[0]=re[0]+Ee[0],Bt[1]=re[1]+Ee[1],Bt}function E(Bt,re,Ee){return Bt[0]=re[0]-Ee[0],Bt[1]=re[1]-Ee[1],Bt}function p(Bt,re,Ee){return Bt[0]=re[0]*Ee[0],Bt[1]=re[1]*Ee[1],Bt}function y(Bt,re,Ee){return Bt[0]=re[0]/Ee[0],Bt[1]=re[1]/Ee[1],Bt}function g(Bt,re){return Bt[0]=Math.ceil(re[0]),Bt[1]=Math.ceil(re[1]),Bt}function T(Bt,re){return Bt[0]=Math.floor(re[0]),Bt[1]=Math.floor(re[1]),Bt}function x(Bt,re,Ee){return Bt[0]=Math.min(re[0],Ee[0]),Bt[1]=Math.min(re[1],Ee[1]),Bt}function S(Bt,re,Ee){return Bt[0]=Math.max(re[0],Ee[0]),Bt[1]=Math.max(re[1],Ee[1]),Bt}function N(Bt,re){return Bt[0]=Math.round(re[0]),Bt[1]=Math.round(re[1]),Bt}function m(Bt,re,Ee){return Bt[0]=re[0]*Ee,Bt[1]=re[1]*Ee,Bt}function d(Bt,re,Ee,It){return Bt[0]=re[0]+Ee[0]*It,Bt[1]=re[1]+Ee[1]*It,Bt}function V(Bt,re){var Ee=re[0]-Bt[0],It=re[1]-Bt[1];return Math.hypot(Ee,It)}function Q(Bt,re){var Ee=re[0]-Bt[0],It=re[1]-Bt[1];return Ee*Ee+It*It}function j(Bt){var re=Bt[0],Ee=Bt[1];return Math.hypot(re,Ee)}function X(Bt){var re=Bt[0],Ee=Bt[1];return re*re+Ee*Ee}function K(Bt,re){return Bt[0]=-re[0],Bt[1]=-re[1],Bt}function J(Bt,re){return Bt[0]=1/re[0],Bt[1]=1/re[1],Bt}function rt(Bt,re){var Ee=re[0],It=re[1],Et=Ee*Ee+It*It;return Et>0&&(Et=1/Math.sqrt(Et)),Bt[0]=re[0]*Et,Bt[1]=re[1]*Et,Bt}function tt(Bt,re){return Bt[0]*re[0]+Bt[1]*re[1]}function nt(Bt,re,Ee){var It=re[0]*Ee[1]-re[1]*Ee[0];return Bt[0]=Bt[1]=0,Bt[2]=It,Bt}function lt(Bt,re,Ee,It){var Et=re[0],Wt=re[1];return Bt[0]=Et+It*(Ee[0]-Et),Bt[1]=Wt+It*(Ee[1]-Wt),Bt}function xt(Bt,re){re=re||1;var Ee=L.RANDOM()*2*Math.PI;return Bt[0]=Math.cos(Ee)*re,Bt[1]=Math.sin(Ee)*re,Bt}function jt(Bt,re,Ee){var It=re[0],Et=re[1];return Bt[0]=Ee[0]*It+Ee[2]*Et,Bt[1]=Ee[1]*It+Ee[3]*Et,Bt}function Dt(Bt,re,Ee){var It=re[0],Et=re[1];return Bt[0]=Ee[0]*It+Ee[2]*Et+Ee[4],Bt[1]=Ee[1]*It+Ee[3]*Et+Ee[5],Bt}function Zt(Bt,re,Ee){var It=re[0],Et=re[1];return Bt[0]=Ee[0]*It+Ee[3]*Et+Ee[6],Bt[1]=Ee[1]*It+Ee[4]*Et+Ee[7],Bt}function Vt(Bt,re,Ee){var It=re[0],Et=re[1];return Bt[0]=Ee[0]*It+Ee[4]*Et+Ee[12],Bt[1]=Ee[1]*It+Ee[5]*Et+Ee[13],Bt}function ue(Bt,re,Ee,It){var Et=re[0]-Ee[0],Wt=re[1]-Ee[1],fe=Math.sin(It),Fe=Math.cos(It);return Bt[0]=Et*Fe-Wt*fe+Ee[0],Bt[1]=Et*fe+Wt*Fe+Ee[1],Bt}function dt(Bt,re){var Ee=Bt[0],It=Bt[1],Et=re[0],Wt=re[1],fe=Math.sqrt(Ee*Ee+It*It)*Math.sqrt(Et*Et+Wt*Wt),Fe=fe&&(Ee*Et+It*Wt)/fe;return Math.acos(Math.min(Math.max(Fe,-1),1))}function Ot(Bt){return Bt[0]=0,Bt[1]=0,Bt}function ee(Bt){return"vec2("+Bt[0]+", "+Bt[1]+")"}function Re(Bt,re){return Bt[0]===re[0]&&Bt[1]===re[1]}function me(Bt,re){var Ee=Bt[0],It=Bt[1],Et=re[0],Wt=re[1];return Math.abs(Ee-Et)<=L.EPSILON*Math.max(1,Math.abs(Ee),Math.abs(Et))&&Math.abs(It-Wt)<=L.EPSILON*Math.max(1,Math.abs(It),Math.abs(Wt))}var Ae=j,Be=E,Ke=p,$t=y,ce=V,we=Q,Pe=X,ye=function(){var Bt=z();return function(re,Ee,It,Et,Wt,fe){var Fe,$e;for(Ee||(Ee=2),It||(It=0),Et?$e=Math.min(Et*Ee+It,re.length):$e=re.length,Fe=It;Fe<$e;Fe+=Ee)Bt[0]=re[Fe],Bt[1]=re[Fe+1],Wt(Bt,Bt,fe),re[Fe]=Bt[0],re[Fe+1]=Bt[1];return re}}()},77160:function(Mr,G,R){"use strict";R.r(G),R.d(G,{create:function(){return z},clone:function(){return F},length:function(){return I},fromValues:function(){return k},copy:function(){return D},set:function(){return b},add:function(){return E},subtract:function(){return p},multiply:function(){return y},divide:function(){return g},ceil:function(){return T},floor:function(){return x},min:function(){return S},max:function(){return N},round:function(){return m},scale:function(){return d},scaleAndAdd:function(){return V},distance:function(){return Q},squaredDistance:function(){return j},squaredLength:function(){return X},negate:function(){return K},inverse:function(){return J},normalize:function(){return rt},dot:function(){return tt},cross:function(){return nt},lerp:function(){return lt},hermite:function(){return xt},bezier:function(){return jt},random:function(){return Dt},transformMat4:function(){return Zt},transformMat3:function(){return Vt},transformQuat:function(){return ue},rotateX:function(){return dt},rotateY:function(){return Ot},rotateZ:function(){return ee},angle:function(){return Re},zero:function(){return me},str:function(){return Ae},exactEquals:function(){return Be},equals:function(){return Ke},sub:function(){return $t},mul:function(){return ce},div:function(){return we},dist:function(){return Pe},sqrDist:function(){return ye},len:function(){return Bt},sqrLen:function(){return re},forEach:function(){return Ee}});var L=R(49685);function z(){var It=new L.ARRAY_TYPE(3);return L.ARRAY_TYPE!=Float32Array&&(It[0]=0,It[1]=0,It[2]=0),It}function F(It){var Et=new L.ARRAY_TYPE(3);return Et[0]=It[0],Et[1]=It[1],Et[2]=It[2],Et}function I(It){var Et=It[0],Wt=It[1],fe=It[2];return Math.hypot(Et,Wt,fe)}function k(It,Et,Wt){var fe=new L.ARRAY_TYPE(3);return fe[0]=It,fe[1]=Et,fe[2]=Wt,fe}function D(It,Et){return It[0]=Et[0],It[1]=Et[1],It[2]=Et[2],It}function b(It,Et,Wt,fe){return It[0]=Et,It[1]=Wt,It[2]=fe,It}function E(It,Et,Wt){return It[0]=Et[0]+Wt[0],It[1]=Et[1]+Wt[1],It[2]=Et[2]+Wt[2],It}function p(It,Et,Wt){return It[0]=Et[0]-Wt[0],It[1]=Et[1]-Wt[1],It[2]=Et[2]-Wt[2],It}function y(It,Et,Wt){return It[0]=Et[0]*Wt[0],It[1]=Et[1]*Wt[1],It[2]=Et[2]*Wt[2],It}function g(It,Et,Wt){return It[0]=Et[0]/Wt[0],It[1]=Et[1]/Wt[1],It[2]=Et[2]/Wt[2],It}function T(It,Et){return It[0]=Math.ceil(Et[0]),It[1]=Math.ceil(Et[1]),It[2]=Math.ceil(Et[2]),It}function x(It,Et){return It[0]=Math.floor(Et[0]),It[1]=Math.floor(Et[1]),It[2]=Math.floor(Et[2]),It}function S(It,Et,Wt){return It[0]=Math.min(Et[0],Wt[0]),It[1]=Math.min(Et[1],Wt[1]),It[2]=Math.min(Et[2],Wt[2]),It}function N(It,Et,Wt){return It[0]=Math.max(Et[0],Wt[0]),It[1]=Math.max(Et[1],Wt[1]),It[2]=Math.max(Et[2],Wt[2]),It}function m(It,Et){return It[0]=Math.round(Et[0]),It[1]=Math.round(Et[1]),It[2]=Math.round(Et[2]),It}function d(It,Et,Wt){return It[0]=Et[0]*Wt,It[1]=Et[1]*Wt,It[2]=Et[2]*Wt,It}function V(It,Et,Wt,fe){return It[0]=Et[0]+Wt[0]*fe,It[1]=Et[1]+Wt[1]*fe,It[2]=Et[2]+Wt[2]*fe,It}function Q(It,Et){var Wt=Et[0]-It[0],fe=Et[1]-It[1],Fe=Et[2]-It[2];return Math.hypot(Wt,fe,Fe)}function j(It,Et){var Wt=Et[0]-It[0],fe=Et[1]-It[1],Fe=Et[2]-It[2];return Wt*Wt+fe*fe+Fe*Fe}function X(It){var Et=It[0],Wt=It[1],fe=It[2];return Et*Et+Wt*Wt+fe*fe}function K(It,Et){return It[0]=-Et[0],It[1]=-Et[1],It[2]=-Et[2],It}function J(It,Et){return It[0]=1/Et[0],It[1]=1/Et[1],It[2]=1/Et[2],It}function rt(It,Et){var Wt=Et[0],fe=Et[1],Fe=Et[2],$e=Wt*Wt+fe*fe+Fe*Fe;return $e>0&&($e=1/Math.sqrt($e)),It[0]=Et[0]*$e,It[1]=Et[1]*$e,It[2]=Et[2]*$e,It}function tt(It,Et){return It[0]*Et[0]+It[1]*Et[1]+It[2]*Et[2]}function nt(It,Et,Wt){var fe=Et[0],Fe=Et[1],$e=Et[2],Lt=Wt[0],Ne=Wt[1],Xe=Wt[2];return It[0]=Fe*Xe-$e*Ne,It[1]=$e*Lt-fe*Xe,It[2]=fe*Ne-Fe*Lt,It}function lt(It,Et,Wt,fe){var Fe=Et[0],$e=Et[1],Lt=Et[2];return It[0]=Fe+fe*(Wt[0]-Fe),It[1]=$e+fe*(Wt[1]-$e),It[2]=Lt+fe*(Wt[2]-Lt),It}function xt(It,Et,Wt,fe,Fe,$e){var Lt=$e*$e,Ne=Lt*(2*$e-3)+1,Xe=Lt*($e-2)+$e,Dr=Lt*($e-1),ur=Lt*(3-2*$e);return It[0]=Et[0]*Ne+Wt[0]*Xe+fe[0]*Dr+Fe[0]*ur,It[1]=Et[1]*Ne+Wt[1]*Xe+fe[1]*Dr+Fe[1]*ur,It[2]=Et[2]*Ne+Wt[2]*Xe+fe[2]*Dr+Fe[2]*ur,It}function jt(It,Et,Wt,fe,Fe,$e){var Lt=1-$e,Ne=Lt*Lt,Xe=$e*$e,Dr=Ne*Lt,ur=3*$e*Ne,Or=3*Xe*Lt,ln=Xe*$e;return It[0]=Et[0]*Dr+Wt[0]*ur+fe[0]*Or+Fe[0]*ln,It[1]=Et[1]*Dr+Wt[1]*ur+fe[1]*Or+Fe[1]*ln,It[2]=Et[2]*Dr+Wt[2]*ur+fe[2]*Or+Fe[2]*ln,It}function Dt(It,Et){Et=Et||1;var Wt=L.RANDOM()*2*Math.PI,fe=L.RANDOM()*2-1,Fe=Math.sqrt(1-fe*fe)*Et;return It[0]=Math.cos(Wt)*Fe,It[1]=Math.sin(Wt)*Fe,It[2]=fe*Et,It}function Zt(It,Et,Wt){var fe=Et[0],Fe=Et[1],$e=Et[2],Lt=Wt[3]*fe+Wt[7]*Fe+Wt[11]*$e+Wt[15];return Lt=Lt||1,It[0]=(Wt[0]*fe+Wt[4]*Fe+Wt[8]*$e+Wt[12])/Lt,It[1]=(Wt[1]*fe+Wt[5]*Fe+Wt[9]*$e+Wt[13])/Lt,It[2]=(Wt[2]*fe+Wt[6]*Fe+Wt[10]*$e+Wt[14])/Lt,It}function Vt(It,Et,Wt){var fe=Et[0],Fe=Et[1],$e=Et[2];return It[0]=fe*Wt[0]+Fe*Wt[3]+$e*Wt[6],It[1]=fe*Wt[1]+Fe*Wt[4]+$e*Wt[7],It[2]=fe*Wt[2]+Fe*Wt[5]+$e*Wt[8],It}function ue(It,Et,Wt){var fe=Wt[0],Fe=Wt[1],$e=Wt[2],Lt=Wt[3],Ne=Et[0],Xe=Et[1],Dr=Et[2],ur=Fe*Dr-$e*Xe,Or=$e*Ne-fe*Dr,ln=fe*Xe-Fe*Ne,fn=Fe*ln-$e*Or,Xr=$e*ur-fe*ln,Cn=fe*Or-Fe*ur,Qr=Lt*2;return ur*=Qr,Or*=Qr,ln*=Qr,fn*=2,Xr*=2,Cn*=2,It[0]=Ne+ur+fn,It[1]=Xe+Or+Xr,It[2]=Dr+ln+Cn,It}function dt(It,Et,Wt,fe){var Fe=[],$e=[];return Fe[0]=Et[0]-Wt[0],Fe[1]=Et[1]-Wt[1],Fe[2]=Et[2]-Wt[2],$e[0]=Fe[0],$e[1]=Fe[1]*Math.cos(fe)-Fe[2]*Math.sin(fe),$e[2]=Fe[1]*Math.sin(fe)+Fe[2]*Math.cos(fe),It[0]=$e[0]+Wt[0],It[1]=$e[1]+Wt[1],It[2]=$e[2]+Wt[2],It}function Ot(It,Et,Wt,fe){var Fe=[],$e=[];return Fe[0]=Et[0]-Wt[0],Fe[1]=Et[1]-Wt[1],Fe[2]=Et[2]-Wt[2],$e[0]=Fe[2]*Math.sin(fe)+Fe[0]*Math.cos(fe),$e[1]=Fe[1],$e[2]=Fe[2]*Math.cos(fe)-Fe[0]*Math.sin(fe),It[0]=$e[0]+Wt[0],It[1]=$e[1]+Wt[1],It[2]=$e[2]+Wt[2],It}function ee(It,Et,Wt,fe){var Fe=[],$e=[];return Fe[0]=Et[0]-Wt[0],Fe[1]=Et[1]-Wt[1],Fe[2]=Et[2]-Wt[2],$e[0]=Fe[0]*Math.cos(fe)-Fe[1]*Math.sin(fe),$e[1]=Fe[0]*Math.sin(fe)+Fe[1]*Math.cos(fe),$e[2]=Fe[2],It[0]=$e[0]+Wt[0],It[1]=$e[1]+Wt[1],It[2]=$e[2]+Wt[2],It}function Re(It,Et){var Wt=It[0],fe=It[1],Fe=It[2],$e=Et[0],Lt=Et[1],Ne=Et[2],Xe=Math.sqrt(Wt*Wt+fe*fe+Fe*Fe),Dr=Math.sqrt($e*$e+Lt*Lt+Ne*Ne),ur=Xe*Dr,Or=ur&&tt(It,Et)/ur;return Math.acos(Math.min(Math.max(Or,-1),1))}function me(It){return It[0]=0,It[1]=0,It[2]=0,It}function Ae(It){return"vec3("+It[0]+", "+It[1]+", "+It[2]+")"}function Be(It,Et){return It[0]===Et[0]&&It[1]===Et[1]&&It[2]===Et[2]}function Ke(It,Et){var Wt=It[0],fe=It[1],Fe=It[2],$e=Et[0],Lt=Et[1],Ne=Et[2];return Math.abs(Wt-$e)<=L.EPSILON*Math.max(1,Math.abs(Wt),Math.abs($e))&&Math.abs(fe-Lt)<=L.EPSILON*Math.max(1,Math.abs(fe),Math.abs(Lt))&&Math.abs(Fe-Ne)<=L.EPSILON*Math.max(1,Math.abs(Fe),Math.abs(Ne))}var $t=p,ce=y,we=g,Pe=Q,ye=j,Bt=I,re=X,Ee=function(){var It=z();return function(Et,Wt,fe,Fe,$e,Lt){var Ne,Xe;for(Wt||(Wt=3),fe||(fe=0),Fe?Xe=Math.min(Fe*Wt+fe,Et.length):Xe=Et.length,Ne=fe;Ne<Xe;Ne+=Wt)It[0]=Et[Ne],It[1]=Et[Ne+1],It[2]=Et[Ne+2],$e(It,It,Lt),Et[Ne]=It[0],Et[Ne+1]=It[1],Et[Ne+2]=It[2];return Et}}()},38186:function(Mr){var G=[],R=[],L="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function z(I,k){if(k=k||{},I===void 0)throw new Error(L);var D=k.prepend===!0?"prepend":"append",b=k.container!==void 0?k.container:document.querySelector("head"),E=G.indexOf(b);E===-1&&(E=G.push(b)-1,R[E]={});var p;return R[E]!==void 0&&R[E][D]!==void 0?p=R[E][D]:(p=R[E][D]=F(),D==="prepend"?b.insertBefore(p,b.childNodes[0]):b.appendChild(p)),I.charCodeAt(0)===65279&&(I=I.substr(1,I.length)),p.styleSheet?p.styleSheet.cssText+=I:p.textContent+=I,p}function F(){var I=document.createElement("style");return I.setAttribute("type","text/css"),I}Mr.exports=z,Mr.exports.insertCss=z},81763:function(Mr,G,R){var L=R(44239),z=R(37005),F="[object Number]";function I(k){return typeof k=="number"||z(k)&&L(k)==F}Mr.exports=I},81550:function(Mr){(function(G,R){Mr.exports=R()})(this,function(){"use strict";var G=function(bt){return bt instanceof Uint8Array||bt instanceof Uint16Array||bt instanceof Uint32Array||bt instanceof Int8Array||bt instanceof Int16Array||bt instanceof Int32Array||bt instanceof Float32Array||bt instanceof Float64Array||bt instanceof Uint8ClampedArray},R=function(bt,ae){for(var Ge=Object.keys(ae),Lr=0;Lr<Ge.length;++Lr)bt[Ge[Lr]]=ae[Ge[Lr]];return bt},L=`
`;function z(bt){return typeof atob!="undefined"?atob(bt):"base64:"+bt}function F(bt){var ae=new Error("(regl) "+bt);throw console.error(ae),ae}function I(bt,ae){bt||F(ae)}function k(bt){return bt?": "+bt:""}function D(bt,ae,Ge){bt in ae||F("unknown parameter ("+bt+")"+k(Ge)+". possible values: "+Object.keys(ae).join())}function b(bt,ae){G(bt)||F("invalid parameter type"+k(ae)+". must be a typed array")}function E(bt,ae){switch(ae){case"number":return typeof bt=="number";case"object":return typeof bt=="object";case"string":return typeof bt=="string";case"boolean":return typeof bt=="boolean";case"function":return typeof bt=="function";case"undefined":return typeof bt=="undefined";case"symbol":return typeof bt=="symbol"}}function p(bt,ae,Ge){E(bt,ae)||F("invalid parameter type"+k(Ge)+". expected "+ae+", got "+typeof bt)}function y(bt,ae){bt>=0&&(bt|0)===bt||F("invalid parameter type, ("+bt+")"+k(ae)+". must be a nonnegative integer")}function g(bt,ae,Ge){ae.indexOf(bt)<0&&F("invalid value"+k(Ge)+". must be one of: "+ae)}var T=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function x(bt){Object.keys(bt).forEach(function(ae){T.indexOf(ae)<0&&F('invalid regl constructor argument "'+ae+'". must be one of '+T)})}function S(bt,ae){for(bt=bt+"";bt.length<ae;)bt=" "+bt;return bt}function N(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function m(bt,ae){this.number=bt,this.line=ae,this.errors=[]}function d(bt,ae,Ge){this.file=bt,this.line=ae,this.message=Ge}function V(){var bt=new Error,ae=(bt.stack||bt).toString(),Ge=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ae);if(Ge)return Ge[1];var Lr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ae);return Lr?Lr[1]:"unknown"}function Q(){var bt=new Error,ae=(bt.stack||bt).toString(),Ge=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ae);if(Ge)return Ge[1];var Lr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ae);return Lr?Lr[1]:"unknown"}function j(bt,ae){var Ge=bt.split(`
`),Lr=1,Wr=0,Nr={unknown:new N,0:new N};Nr.unknown.name=Nr[0].name=ae||V(),Nr.unknown.lines.push(new m(0,""));for(var zr=0;zr<Ge.length;++zr){var mn=Ge[zr],dn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(mn);if(dn)switch(dn[1]){case"line":var wn=/(\d+)(\s+\d+)?/.exec(dn[2]);wn&&(Lr=wn[1]|0,wn[2]&&(Wr=wn[2]|0,Wr in Nr||(Nr[Wr]=new N)));break;case"define":var xn=/SHADER_NAME(_B64)?\s+(.*)$/.exec(dn[2]);xn&&(Nr[Wr].name=xn[1]?z(xn[2]):xn[2]);break}Nr[Wr].lines.push(new m(Lr++,mn))}return Object.keys(Nr).forEach(function(In){var v=Nr[In];v.lines.forEach(function(A){v.index[A.number]=A})}),Nr}function X(bt){var ae=[];return bt.split(`
`).forEach(function(Ge){if(!(Ge.length<5)){var Lr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ge);Lr?ae.push(new d(Lr[1]|0,Lr[2]|0,Lr[3].trim())):Ge.length>0&&ae.push(new d("unknown",0,Ge))}}),ae}function K(bt,ae){ae.forEach(function(Ge){var Lr=bt[Ge.file];if(Lr){var Wr=Lr.index[Ge.line];if(Wr){Wr.errors.push(Ge),Lr.hasErrors=!0;return}}bt.unknown.hasErrors=!0,bt.unknown.lines[0].errors.push(Ge)})}function J(bt,ae,Ge,Lr,Wr){if(!bt.getShaderParameter(ae,bt.COMPILE_STATUS)){var Nr=bt.getShaderInfoLog(ae),zr=Lr===bt.FRAGMENT_SHADER?"fragment":"vertex";Dt(Ge,"string",zr+" shader source must be a string",Wr);var mn=j(Ge,Wr),dn=X(Nr);K(mn,dn),Object.keys(mn).forEach(function(wn){var xn=mn[wn];if(!xn.hasErrors)return;var In=[""],v=[""];function A(U,q){In.push(U),v.push(q||"")}A("file number "+wn+": "+xn.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),xn.lines.forEach(function(U){if(U.errors.length>0){A(S(U.number,4)+"|  ","background-color:yellow; font-weight:bold"),A(U.line+L,"color:red; background-color:yellow; font-weight:bold");var q=0;U.errors.forEach(function(st){var ct=st.message,mt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ct);if(mt){var wt=mt[1];switch(ct=mt[2],wt){case"assign":wt="=";break}q=Math.max(U.line.indexOf(wt,q),0)}else q=0;A(S("| ",6)),A(S("^^^",q+3)+L,"font-weight:bold"),A(S("| ",6)),A(ct+L,"font-weight:bold")}),A(S("| ",6)+L)}else A(S(U.number,4)+"|  "),A(U.line+L,"color:red")}),typeof document!="undefined"&&!window.chrome?(v[0]=In.join("%c"),console.log.apply(console,v)):console.log(In.join(""))}),I.raise("Error compiling "+zr+" shader, "+mn[0].name)}}function rt(bt,ae,Ge,Lr,Wr){if(!bt.getProgramParameter(ae,bt.LINK_STATUS)){var Nr=bt.getProgramInfoLog(ae),zr=j(Ge,Wr),mn=j(Lr,Wr),dn='Error linking program with vertex shader, "'+mn[0].name+'", and fragment shader "'+zr[0].name+'"';typeof document!="undefined"?console.log("%c"+dn+L+"%c"+Nr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(dn+L+Nr),I.raise(dn)}}function tt(bt){bt._commandRef=V()}function nt(bt,ae,Ge,Lr){tt(bt);function Wr(dn){return dn?Lr.id(dn):0}bt._fragId=Wr(bt.static.frag),bt._vertId=Wr(bt.static.vert);function Nr(dn,wn){Object.keys(wn).forEach(function(xn){dn[Lr.id(xn)]=!0})}var zr=bt._uniformSet={};Nr(zr,ae.static),Nr(zr,ae.dynamic);var mn=bt._attributeSet={};Nr(mn,Ge.static),Nr(mn,Ge.dynamic),bt._hasCount="count"in bt.static||"count"in bt.dynamic||"elements"in bt.static||"elements"in bt.dynamic}function lt(bt,ae){var Ge=Q();F(bt+" in command "+(ae||V())+(Ge==="unknown"?"":" called from "+Ge))}function xt(bt,ae,Ge){bt||lt(ae,Ge||V())}function jt(bt,ae,Ge,Lr){bt in ae||lt("unknown parameter ("+bt+")"+k(Ge)+". possible values: "+Object.keys(ae).join(),Lr||V())}function Dt(bt,ae,Ge,Lr){E(bt,ae)||lt("invalid parameter type"+k(Ge)+". expected "+ae+", got "+typeof bt,Lr||V())}function Zt(bt){bt()}function Vt(bt,ae,Ge){bt.texture?g(bt.texture._texture.internalformat,ae,"unsupported texture format for attachment"):g(bt.renderbuffer._renderbuffer.format,Ge,"unsupported renderbuffer format for attachment")}var ue=33071,dt=9728,Ot=9984,ee=9985,Re=9986,me=9987,Ae=5120,Be=5121,Ke=5122,$t=5123,ce=5124,we=5125,Pe=5126,ye=32819,Bt=32820,re=33635,Ee=34042,It=36193,Et={};Et[Ae]=Et[Be]=1,Et[Ke]=Et[$t]=Et[It]=Et[re]=Et[ye]=Et[Bt]=2,Et[ce]=Et[we]=Et[Pe]=Et[Ee]=4;function Wt(bt,ae){return bt===Bt||bt===ye||bt===re?2:bt===Ee?4:Et[bt]*ae}function fe(bt){return!(bt&bt-1)&&!!bt}function Fe(bt,ae,Ge){var Lr,Wr=ae.width,Nr=ae.height,zr=ae.channels;I(Wr>0&&Wr<=Ge.maxTextureSize&&Nr>0&&Nr<=Ge.maxTextureSize,"invalid texture shape"),(bt.wrapS!==ue||bt.wrapT!==ue)&&I(fe(Wr)&&fe(Nr),"incompatible wrap mode for texture, both width and height must be power of 2"),ae.mipmask===1?Wr!==1&&Nr!==1&&I(bt.minFilter!==Ot&&bt.minFilter!==Re&&bt.minFilter!==ee&&bt.minFilter!==me,"min filter requires mipmap"):(I(fe(Wr)&&fe(Nr),"texture must be a square power of 2 to support mipmapping"),I(ae.mipmask===(Wr<<1)-1,"missing or incomplete mipmap data")),ae.type===Pe&&(Ge.extensions.indexOf("oes_texture_float_linear")<0&&I(bt.minFilter===dt&&bt.magFilter===dt,"filter not supported, must enable oes_texture_float_linear"),I(!bt.genMipmaps,"mipmap generation not supported with float textures"));var mn=ae.images;for(Lr=0;Lr<16;++Lr)if(mn[Lr]){var dn=Wr>>Lr,wn=Nr>>Lr;I(ae.mipmask&1<<Lr,"missing mipmap data");var xn=mn[Lr];if(I(xn.width===dn&&xn.height===wn,"invalid shape for mip images"),I(xn.format===ae.format&&xn.internalformat===ae.internalformat&&xn.type===ae.type,"incompatible type for mip image"),!xn.compressed)if(xn.data){var In=Math.ceil(Wt(xn.type,zr)*dn/xn.unpackAlignment)*xn.unpackAlignment;I(xn.data.byteLength===In*wn,"invalid data for image, buffer size is inconsistent with image format")}else xn.element||xn.copy}else bt.genMipmaps||I((ae.mipmask&1<<Lr)==0,"extra mipmap data");ae.compressed&&I(!bt.genMipmaps,"mipmap generation for compressed images not supported")}function $e(bt,ae,Ge,Lr){var Wr=bt.width,Nr=bt.height,zr=bt.channels;I(Wr>0&&Wr<=Lr.maxTextureSize&&Nr>0&&Nr<=Lr.maxTextureSize,"invalid texture shape"),I(Wr===Nr,"cube map must be square"),I(ae.wrapS===ue&&ae.wrapT===ue,"wrap mode not supported by cube map");for(var mn=0;mn<Ge.length;++mn){var dn=Ge[mn];I(dn.width===Wr&&dn.height===Nr,"inconsistent cube map face shape"),ae.genMipmaps&&(I(!dn.compressed,"can not generate mipmap for compressed textures"),I(dn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var wn=dn.images,xn=0;xn<16;++xn){var In=wn[xn];if(In){var v=Wr>>xn,A=Nr>>xn;I(dn.mipmask&1<<xn,"missing mipmap data"),I(In.width===v&&In.height===A,"invalid shape for mip images"),I(In.format===bt.format&&In.internalformat===bt.internalformat&&In.type===bt.type,"incompatible type for mip image"),In.compressed||(In.data?I(In.data.byteLength===v*A*Math.max(Wt(In.type,zr),In.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):In.element||In.copy)}}}}var Lt=R(I,{optional:Zt,raise:F,commandRaise:lt,command:xt,parameter:D,commandParameter:jt,constructor:x,type:p,commandType:Dt,isTypedArray:b,nni:y,oneOf:g,shaderError:J,linkError:rt,callSite:Q,saveCommandRef:tt,saveDrawInfo:nt,framebufferFormat:Vt,guessCommand:V,texture2D:Fe,textureCube:$e}),Ne=0,Xe=0,Dr=5,ur=6;function Or(bt,ae){this.id=Ne++,this.type=bt,this.data=ae}function ln(bt){return bt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function fn(bt){if(bt.length===0)return[];var ae=bt.charAt(0),Ge=bt.charAt(bt.length-1);if(bt.length>1&&ae===Ge&&(ae==='"'||ae==="'"))return['"'+ln(bt.substr(1,bt.length-2))+'"'];var Lr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(bt);if(Lr)return fn(bt.substr(0,Lr.index)).concat(fn(Lr[1])).concat(fn(bt.substr(Lr.index+Lr[0].length)));var Wr=bt.split(".");if(Wr.length===1)return['"'+ln(bt)+'"'];for(var Nr=[],zr=0;zr<Wr.length;++zr)Nr=Nr.concat(fn(Wr[zr]));return Nr}function Xr(bt){return"["+fn(bt).join("][")+"]"}function Cn(bt,ae){return new Or(bt,Xr(ae+""))}function Qr(bt){return typeof bt=="function"&&!bt._reglType||bt instanceof Or}function Gr(bt,ae){if(typeof bt=="function")return new Or(Xe,bt);if(typeof bt=="number"||typeof bt=="boolean")return new Or(Dr,bt);if(Array.isArray(bt))return new Or(ur,bt.map((Ge,Lr)=>Gr(Ge,ae+"["+Lr+"]")));if(bt instanceof Or)return bt;Lt(!1,"invalid option type in uniform "+ae)}var on={DynamicVariable:Or,define:Cn,isDynamic:Qr,unbox:Gr,accessor:Xr},sr={next:typeof requestAnimationFrame=="function"?function(bt){return requestAnimationFrame(bt)}:function(bt){return setTimeout(bt,16)},cancel:typeof cancelAnimationFrame=="function"?function(bt){return cancelAnimationFrame(bt)}:clearTimeout},lr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Qe(){var bt={"":0},ae=[""];return{id:function(Ge){var Lr=bt[Ge];return Lr||(Lr=bt[Ge]=ae.length,ae.push(Ge),Lr)},str:function(Ge){return ae[Ge]}}}function $r(bt,ae,Ge){var Lr=document.createElement("canvas");R(Lr.style,{border:0,margin:0,padding:0,top:0,left:0}),bt.appendChild(Lr),bt===document.body&&(Lr.style.position="absolute",R(bt.style,{margin:0,padding:0}));function Wr(){var mn=window.innerWidth,dn=window.innerHeight;if(bt!==document.body){var wn=bt.getBoundingClientRect();mn=wn.right-wn.left,dn=wn.bottom-wn.top}Lr.width=Ge*mn,Lr.height=Ge*dn,R(Lr.style,{width:mn+"px",height:dn+"px"})}var Nr;bt!==document.body&&typeof ResizeObserver=="function"?(Nr=new ResizeObserver(function(){setTimeout(Wr)}),Nr.observe(bt)):window.addEventListener("resize",Wr,!1);function zr(){Nr?Nr.disconnect():window.removeEventListener("resize",Wr),bt.removeChild(Lr)}return Wr(),{canvas:Lr,onDestroy:zr}}function an(bt,ae){function Ge(Lr){try{return bt.getContext(Lr,ae)}catch(Wr){return null}}return Ge("webgl")||Ge("experimental-webgl")||Ge("webgl-experimental")}function bn(bt){return typeof bt.nodeName=="string"&&typeof bt.appendChild=="function"&&typeof bt.getBoundingClientRect=="function"}function nr(bt){return typeof bt.drawArrays=="function"||typeof bt.drawElements=="function"}function Tr(bt){return typeof bt=="string"?bt.split():(Lt(Array.isArray(bt),"invalid extension array"),bt)}function ar(bt){return typeof bt=="string"?(Lt(typeof document!="undefined","not supported outside of DOM"),document.querySelector(bt)):bt}function vr(bt){var ae=bt||{},Ge,Lr,Wr,Nr,zr={},mn=[],dn=[],wn=typeof window=="undefined"?1:window.devicePixelRatio,xn=!1,In=function(U){U&&Lt.raise(U)},v=function(){};if(typeof ae=="string"?(Lt(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ge=document.querySelector(ae),Lt(Ge,"invalid query string for element")):typeof ae=="object"?bn(ae)?Ge=ae:nr(ae)?(Nr=ae,Wr=Nr.canvas):(Lt.constructor(ae),"gl"in ae?Nr=ae.gl:"canvas"in ae?Wr=ar(ae.canvas):"container"in ae&&(Lr=ar(ae.container)),"attributes"in ae&&(zr=ae.attributes,Lt.type(zr,"object","invalid context attributes")),"extensions"in ae&&(mn=Tr(ae.extensions)),"optionalExtensions"in ae&&(dn=Tr(ae.optionalExtensions)),"onDone"in ae&&(Lt.type(ae.onDone,"function","invalid or missing onDone callback"),In=ae.onDone),"profile"in ae&&(xn=!!ae.profile),"pixelRatio"in ae&&(wn=+ae.pixelRatio,Lt(wn>0,"invalid pixel ratio"))):Lt.raise("invalid arguments to regl"),Ge&&(Ge.nodeName.toLowerCase()==="canvas"?Wr=Ge:Lr=Ge),!Nr){if(!Wr){Lt(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var A=$r(Lr||document.body,In,wn);if(!A)return null;Wr=A.canvas,v=A.onDestroy}zr.premultipliedAlpha===void 0&&(zr.premultipliedAlpha=!0),Nr=an(Wr,zr)}return Nr?{gl:Nr,canvas:Wr,container:Lr,extensions:mn,optionalExtensions:dn,pixelRatio:wn,profile:xn,onDone:In,onDestroy:v}:(v(),In("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Br(bt,ae){var Ge={};function Lr(zr){Lt.type(zr,"string","extension name must be string");var mn=zr.toLowerCase(),dn;try{dn=Ge[mn]=bt.getExtension(mn)}catch(wn){}return!!dn}for(var Wr=0;Wr<ae.extensions.length;++Wr){var Nr=ae.extensions[Wr];if(!Lr(Nr))return ae.onDestroy(),ae.onDone('"'+Nr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ae.optionalExtensions.forEach(Lr),{extensions:Ge,restore:function(){Object.keys(Ge).forEach(function(zr){if(Ge[zr]&&!Lr(zr))throw new Error("(regl): error restoring extension "+zr)})}}}function Fr(bt,ae){for(var Ge=Array(bt),Lr=0;Lr<bt;++Lr)Ge[Lr]=ae(Lr);return Ge}var kr=5120,Z=5121,Te=5122,ne=5123,it=5124,ot=5125,B=5126;function _(bt){for(var ae=16;ae<=1<<28;ae*=16)if(bt<=ae)return ae;return 0}function C(bt){var ae,Ge;return ae=(bt>65535)<<4,bt>>>=ae,Ge=(bt>255)<<3,bt>>>=Ge,ae|=Ge,Ge=(bt>15)<<2,bt>>>=Ge,ae|=Ge,Ge=(bt>3)<<1,bt>>>=Ge,ae|=Ge,ae|bt>>1}function Y(){var bt=Fr(8,function(){return[]});function ae(Nr){var zr=_(Nr),mn=bt[C(zr)>>2];return mn.length>0?mn.pop():new ArrayBuffer(zr)}function Ge(Nr){bt[C(Nr.byteLength)>>2].push(Nr)}function Lr(Nr,zr){var mn=null;switch(Nr){case kr:mn=new Int8Array(ae(zr),0,zr);break;case Z:mn=new Uint8Array(ae(zr),0,zr);break;case Te:mn=new Int16Array(ae(2*zr),0,zr);break;case ne:mn=new Uint16Array(ae(2*zr),0,zr);break;case it:mn=new Int32Array(ae(4*zr),0,zr);break;case ot:mn=new Uint32Array(ae(4*zr),0,zr);break;case B:mn=new Float32Array(ae(4*zr),0,zr);break;default:return null}return mn.length!==zr?mn.subarray(0,zr):mn}function Wr(Nr){Ge(Nr.buffer)}return{alloc:ae,free:Ge,allocType:Lr,freeType:Wr}}var pt=Y();pt.zero=Y();var _t=3408,Mt=3410,zt=3411,Le=3412,Me=3413,qe=3414,br=3415,xr=33901,sn=33902,Rn=3379,tr=3386,Sr=34921,jr=36347,Nn=36348,gn=35661,ea=35660,ha=34930,Zn=36349,na=34076,da=34024,Vn=7936,se=7937,Ut=7938,le=35724,ze=34047,Ie=36063,We=34852,_r=3553,nn=34067,pn=34069,Gn=33984,jn=6408,oa=5126,va=5121,_a=36160,fi=36053,Ba=36064,Wa=16384,wa=function(bt,ae){var Ge=1;ae.ext_texture_filter_anisotropic&&(Ge=bt.getParameter(ze));var Lr=1,Wr=1;ae.webgl_draw_buffers&&(Lr=bt.getParameter(We),Wr=bt.getParameter(Ie));var Nr=!!ae.oes_texture_float;if(Nr){var zr=bt.createTexture();bt.bindTexture(_r,zr),bt.texImage2D(_r,0,jn,1,1,0,jn,oa,null);var mn=bt.createFramebuffer();if(bt.bindFramebuffer(_a,mn),bt.framebufferTexture2D(_a,Ba,_r,zr,0),bt.bindTexture(_r,null),bt.checkFramebufferStatus(_a)!==fi)Nr=!1;else{bt.viewport(0,0,1,1),bt.clearColor(1,0,0,1),bt.clear(Wa);var dn=pt.allocType(oa,4);bt.readPixels(0,0,1,1,jn,oa,dn),bt.getError()?Nr=!1:(bt.deleteFramebuffer(mn),bt.deleteTexture(zr),Nr=dn[0]===1),pt.freeType(dn)}}var wn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),xn=!0;if(!wn){var In=bt.createTexture(),v=pt.allocType(va,36);bt.activeTexture(Gn),bt.bindTexture(nn,In),bt.texImage2D(pn,0,jn,3,3,0,jn,va,v),pt.freeType(v),bt.bindTexture(nn,null),bt.deleteTexture(In),xn=!bt.getError()}return{colorBits:[bt.getParameter(Mt),bt.getParameter(zt),bt.getParameter(Le),bt.getParameter(Me)],depthBits:bt.getParameter(qe),stencilBits:bt.getParameter(br),subpixelBits:bt.getParameter(_t),extensions:Object.keys(ae).filter(function(A){return!!ae[A]}),maxAnisotropic:Ge,maxDrawbuffers:Lr,maxColorAttachments:Wr,pointSizeDims:bt.getParameter(xr),lineWidthDims:bt.getParameter(sn),maxViewportDims:bt.getParameter(tr),maxCombinedTextureUnits:bt.getParameter(gn),maxCubeMapSize:bt.getParameter(na),maxRenderbufferSize:bt.getParameter(da),maxTextureUnits:bt.getParameter(ha),maxTextureSize:bt.getParameter(Rn),maxAttributes:bt.getParameter(Sr),maxVertexUniforms:bt.getParameter(jr),maxVertexTextureUnits:bt.getParameter(ea),maxVaryingVectors:bt.getParameter(Nn),maxFragmentUniforms:bt.getParameter(Zn),glsl:bt.getParameter(le),renderer:bt.getParameter(se),vendor:bt.getParameter(Vn),version:bt.getParameter(Ut),readFloat:Nr,npotTextureCube:xn}};function vi(bt){return!!bt&&typeof bt=="object"&&Array.isArray(bt.shape)&&Array.isArray(bt.stride)&&typeof bt.offset=="number"&&bt.shape.length===bt.stride.length&&(Array.isArray(bt.data)||G(bt.data))}var ti=function(bt){return Object.keys(bt).map(function(ae){return bt[ae]})},Ia={shape:No,flatten:ri};function qi(bt,ae,Ge){for(var Lr=0;Lr<ae;++Lr)Ge[Lr]=bt[Lr]}function gi(bt,ae,Ge,Lr){for(var Wr=0,Nr=0;Nr<ae;++Nr)for(var zr=bt[Nr],mn=0;mn<Ge;++mn)Lr[Wr++]=zr[mn]}function ji(bt,ae,Ge,Lr,Wr,Nr){for(var zr=Nr,mn=0;mn<ae;++mn)for(var dn=bt[mn],wn=0;wn<Ge;++wn)for(var xn=dn[wn],In=0;In<Lr;++In)Wr[zr++]=xn[In]}function Ti(bt,ae,Ge,Lr,Wr){for(var Nr=1,zr=Ge+1;zr<ae.length;++zr)Nr*=ae[zr];var mn=ae[Ge];if(ae.length-Ge==4){var dn=ae[Ge+1],wn=ae[Ge+2],xn=ae[Ge+3];for(zr=0;zr<mn;++zr)ji(bt[zr],dn,wn,xn,Lr,Wr),Wr+=Nr}else for(zr=0;zr<mn;++zr)Ti(bt[zr],ae,Ge+1,Lr,Wr),Wr+=Nr}function ri(bt,ae,Ge,Lr){var Wr=1;if(ae.length)for(var Nr=0;Nr<ae.length;++Nr)Wr*=ae[Nr];else Wr=0;var zr=Lr||pt.allocType(Ge,Wr);switch(ae.length){case 0:break;case 1:qi(bt,ae[0],zr);break;case 2:gi(bt,ae[0],ae[1],zr);break;case 3:ji(bt,ae[0],ae[1],ae[2],zr,0);break;default:Ti(bt,ae,0,zr,0)}return zr}function No(bt){for(var ae=[],Ge=bt;Ge.length;Ge=Ge[0])ae.push(Ge.length);return ae}var Po={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ii=5120,ho=5122,Ji=5124,Xi=5121,Ri=5123,Oi=5125,Io=5126,to=5126,Yi={int8:Ii,int16:ho,int32:Ji,uint8:Xi,uint16:Ri,uint32:Oi,float:Io,float32:to},un=35048,vo=35040,Fo={dynamic:un,stream:vo,static:35044},Qa=Ia.flatten,ko=Ia.shape,go=35044,Li=35040,eo=5121,de=5126,Ar=[];Ar[5120]=1,Ar[5122]=2,Ar[5124]=4,Ar[5121]=1,Ar[5123]=2,Ar[5125]=4,Ar[5126]=4;function qr(bt){return Po[Object.prototype.toString.call(bt)]|0}function Bn(bt,ae){for(var Ge=0;Ge<ae.length;++Ge)bt[Ge]=ae[Ge]}function Sa(bt,ae,Ge,Lr,Wr,Nr,zr){for(var mn=0,dn=0;dn<Ge;++dn)for(var wn=0;wn<Lr;++wn)bt[mn++]=ae[Wr*dn+Nr*wn+zr]}function ci(bt,ae,Ge,Lr){var Wr=0,Nr={};function zr(q){this.id=Wr++,this.buffer=bt.createBuffer(),this.type=q,this.usage=go,this.byteLength=0,this.dimension=1,this.dtype=eo,this.persistentData=null,Ge.profile&&(this.stats={size:0})}zr.prototype.bind=function(){bt.bindBuffer(this.type,this.buffer)},zr.prototype.destroy=function(){v(this)};var mn=[];function dn(q,st){var ct=mn.pop();return ct||(ct=new zr(q)),ct.bind(),In(ct,st,Li,0,1,!1),ct}function wn(q){mn.push(q)}function xn(q,st,ct){q.byteLength=st.byteLength,bt.bufferData(q.type,st,ct)}function In(q,st,ct,mt,wt,kt){var Ht;if(q.usage=ct,Array.isArray(st)){if(q.dtype=mt||de,st.length>0){var ie;if(Array.isArray(st[0])){Ht=ko(st);for(var qt=1,Oe=1;Oe<Ht.length;++Oe)qt*=Ht[Oe];q.dimension=qt,ie=Qa(st,Ht,q.dtype),xn(q,ie,ct),kt?q.persistentData=ie:pt.freeType(ie)}else if(typeof st[0]=="number"){q.dimension=wt;var ir=pt.allocType(q.dtype,st.length);Bn(ir,st),xn(q,ir,ct),kt?q.persistentData=ir:pt.freeType(ir)}else G(st[0])?(q.dimension=st[0].length,q.dtype=mt||qr(st[0])||de,ie=Qa(st,[st.length,st[0].length],q.dtype),xn(q,ie,ct),kt?q.persistentData=ie:pt.freeType(ie)):Lt.raise("invalid buffer data")}}else if(G(st))q.dtype=mt||qr(st),q.dimension=wt,xn(q,st,ct),kt&&(q.persistentData=new Uint8Array(new Uint8Array(st.buffer)));else if(vi(st)){Ht=st.shape;var Yr=st.stride,hr=st.offset,pr=0,gr=0,En=0,kn=0;Ht.length===1?(pr=Ht[0],gr=1,En=Yr[0],kn=0):Ht.length===2?(pr=Ht[0],gr=Ht[1],En=Yr[0],kn=Yr[1]):Lt.raise("invalid shape"),q.dtype=mt||qr(st.data)||de,q.dimension=gr;var Tn=pt.allocType(q.dtype,pr*gr);Sa(Tn,st.data,pr,gr,En,kn,hr),xn(q,Tn,ct),kt?q.persistentData=Tn:pt.freeType(Tn)}else st instanceof ArrayBuffer?(q.dtype=eo,q.dimension=wt,xn(q,st,ct),kt&&(q.persistentData=new Uint8Array(new Uint8Array(st)))):Lt.raise("invalid buffer data")}function v(q){ae.bufferCount--,Lr(q);var st=q.buffer;Lt(st,"buffer must not be deleted already"),bt.deleteBuffer(st),q.buffer=null,delete Nr[q.id]}function A(q,st,ct,mt){ae.bufferCount++;var wt=new zr(st);Nr[wt.id]=wt;function kt(qt){var Oe=go,ir=null,Yr=0,hr=0,pr=1;return Array.isArray(qt)||G(qt)||vi(qt)||qt instanceof ArrayBuffer?ir=qt:typeof qt=="number"?Yr=qt|0:qt&&(Lt.type(qt,"object","buffer arguments must be an object, a number or an array"),"data"in qt&&(Lt(ir===null||Array.isArray(ir)||G(ir)||vi(ir),"invalid data for buffer"),ir=qt.data),"usage"in qt&&(Lt.parameter(qt.usage,Fo,"invalid buffer usage"),Oe=Fo[qt.usage]),"type"in qt&&(Lt.parameter(qt.type,Yi,"invalid buffer type"),hr=Yi[qt.type]),"dimension"in qt&&(Lt.type(qt.dimension,"number","invalid dimension"),pr=qt.dimension|0),"length"in qt&&(Lt.nni(Yr,"buffer length must be a nonnegative integer"),Yr=qt.length|0)),wt.bind(),ir?In(wt,ir,Oe,hr,pr,mt):(Yr&&bt.bufferData(wt.type,Yr,Oe),wt.dtype=hr||eo,wt.usage=Oe,wt.dimension=pr,wt.byteLength=Yr),Ge.profile&&(wt.stats.size=wt.byteLength*Ar[wt.dtype]),kt}function Ht(qt,Oe){Lt(Oe+qt.byteLength<=wt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+qt.byteLength+" starting from offset "+Oe+" to a buffer of size "+wt.byteLength),bt.bufferSubData(wt.type,Oe,qt)}function ie(qt,Oe){var ir=(Oe||0)|0,Yr;if(wt.bind(),G(qt)||qt instanceof ArrayBuffer)Ht(qt,ir);else if(Array.isArray(qt)){if(qt.length>0)if(typeof qt[0]=="number"){var hr=pt.allocType(wt.dtype,qt.length);Bn(hr,qt),Ht(hr,ir),pt.freeType(hr)}else if(Array.isArray(qt[0])||G(qt[0])){Yr=ko(qt);var pr=Qa(qt,Yr,wt.dtype);Ht(pr,ir),pt.freeType(pr)}else Lt.raise("invalid buffer data")}else if(vi(qt)){Yr=qt.shape;var gr=qt.stride,En=0,kn=0,Tn=0,qn=0;Yr.length===1?(En=Yr[0],kn=1,Tn=gr[0],qn=0):Yr.length===2?(En=Yr[0],kn=Yr[1],Tn=gr[0],qn=gr[1]):Lt.raise("invalid shape");var Kn=Array.isArray(qt.data)?wt.dtype:qr(qt.data),ia=pt.allocType(Kn,En*kn);Sa(ia,qt.data,En,kn,Tn,qn,qt.offset),Ht(ia,ir),pt.freeType(ia)}else Lt.raise("invalid data for buffer subdata");return kt}return ct||kt(q),kt._reglType="buffer",kt._buffer=wt,kt.subdata=ie,Ge.profile&&(kt.stats=wt.stats),kt.destroy=function(){v(wt)},kt}function U(){ti(Nr).forEach(function(q){q.buffer=bt.createBuffer(),bt.bindBuffer(q.type,q.buffer),bt.bufferData(q.type,q.persistentData||q.byteLength,q.usage)})}return Ge.profile&&(ae.getTotalBufferSize=function(){var q=0;return Object.keys(Nr).forEach(function(st){q+=Nr[st].stats.size}),q}),{create:A,createStream:dn,destroyStream:wn,clear:function(){ti(Nr).forEach(v),mn.forEach(v)},getBuffer:function(q){return q&&q._buffer instanceof zr?q._buffer:null},restore:U,_initBuffer:In}}var _i=0,li=0,Ai=1,Ea=1,ro=4,Yo=4,Bi={points:_i,point:li,lines:Ai,line:Ea,triangles:ro,triangle:Yo,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},no=0,Oo=1,Vi=4,po=5120,Ei=5121,yo=5122,Hi=5123,ma=5124,qa=5125,Mi=34963,pi=35040,so=35044;function Zi(bt,ae,Ge,Lr){var Wr={},Nr=0,zr={uint8:Ei,uint16:Hi};ae.oes_element_index_uint&&(zr.uint32=qa);function mn(U){this.id=Nr++,Wr[this.id]=this,this.buffer=U,this.primType=Vi,this.vertCount=0,this.type=0}mn.prototype.bind=function(){this.buffer.bind()};var dn=[];function wn(U){var q=dn.pop();return q||(q=new mn(Ge.create(null,Mi,!0,!1)._buffer)),In(q,U,pi,-1,-1,0,0),q}function xn(U){dn.push(U)}function In(U,q,st,ct,mt,wt,kt){U.buffer.bind();var Ht;if(q){var ie=kt;!kt&&(!G(q)||vi(q)&&!G(q.data))&&(ie=ae.oes_element_index_uint?qa:Hi),Ge._initBuffer(U.buffer,q,st,ie,3)}else bt.bufferData(Mi,wt,st),U.buffer.dtype=Ht||Ei,U.buffer.usage=st,U.buffer.dimension=3,U.buffer.byteLength=wt;if(Ht=kt,!kt){switch(U.buffer.dtype){case Ei:case po:Ht=Ei;break;case Hi:case yo:Ht=Hi;break;case qa:case ma:Ht=qa;break;default:Lt.raise("unsupported type for element array")}U.buffer.dtype=Ht}U.type=Ht,Lt(Ht!==qa||!!ae.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var qt=mt;qt<0&&(qt=U.buffer.byteLength,Ht===Hi?qt>>=1:Ht===qa&&(qt>>=2)),U.vertCount=qt;var Oe=ct;if(ct<0){Oe=Vi;var ir=U.buffer.dimension;ir===1&&(Oe=no),ir===2&&(Oe=Oo),ir===3&&(Oe=Vi)}U.primType=Oe}function v(U){Lr.elementsCount--,Lt(U.buffer!==null,"must not double destroy elements"),delete Wr[U.id],U.buffer.destroy(),U.buffer=null}function A(U,q){var st=Ge.create(null,Mi,!0),ct=new mn(st._buffer);Lr.elementsCount++;function mt(wt){if(!wt)st(),ct.primType=Vi,ct.vertCount=0,ct.type=Ei;else if(typeof wt=="number")st(wt),ct.primType=Vi,ct.vertCount=wt|0,ct.type=Ei;else{var kt=null,Ht=so,ie=-1,qt=-1,Oe=0,ir=0;Array.isArray(wt)||G(wt)||vi(wt)?kt=wt:(Lt.type(wt,"object","invalid arguments for elements"),"data"in wt&&(kt=wt.data,Lt(Array.isArray(kt)||G(kt)||vi(kt),"invalid data for element buffer")),"usage"in wt&&(Lt.parameter(wt.usage,Fo,"invalid element buffer usage"),Ht=Fo[wt.usage]),"primitive"in wt&&(Lt.parameter(wt.primitive,Bi,"invalid element buffer primitive"),ie=Bi[wt.primitive]),"count"in wt&&(Lt(typeof wt.count=="number"&&wt.count>=0,"invalid vertex count for elements"),qt=wt.count|0),"type"in wt&&(Lt.parameter(wt.type,zr,"invalid buffer type"),ir=zr[wt.type]),"length"in wt?Oe=wt.length|0:(Oe=qt,ir===Hi||ir===yo?Oe*=2:(ir===qa||ir===ma)&&(Oe*=4))),In(ct,kt,Ht,ie,qt,Oe,ir)}return mt}return mt(U),mt._reglType="elements",mt._elements=ct,mt.subdata=function(wt,kt){return st.subdata(wt,kt),mt},mt.destroy=function(){v(ct)},mt}return{create:A,createStream:wn,destroyStream:xn,getElements:function(U){return typeof U=="function"&&U._elements instanceof mn?U._elements:null},clear:function(){ti(Wr).forEach(v)}}}var Fi=new Float32Array(1),mo=new Uint32Array(Fi.buffer),uo=5123;function bo(bt){for(var ae=pt.allocType(uo,bt.length),Ge=0;Ge<bt.length;++Ge)if(isNaN(bt[Ge]))ae[Ge]=65535;else if(bt[Ge]===Infinity)ae[Ge]=31744;else if(bt[Ge]===-Infinity)ae[Ge]=64512;else{Fi[0]=bt[Ge];var Lr=mo[0],Wr=Lr>>>31<<15,Nr=(Lr<<1>>>24)-127,zr=Lr>>13&(1<<10)-1;if(Nr<-24)ae[Ge]=Wr;else if(Nr<-14){var mn=-14-Nr;ae[Ge]=Wr+(zr+(1<<10)>>mn)}else Nr>15?ae[Ge]=Wr+31744:ae[Ge]=Wr+(Nr+15<<10)+zr}return ae}function La(bt){return Array.isArray(bt)||G(bt)}var ds=function(bt){return!(bt&bt-1)&&!!bt},os=34467,Nt=3553,At=34067,ut=34069,yt=6408,Ct=6406,ve=6407,ke=6409,er=6410,yr=32854,Pt=32855,Tt=36194,H=32819,gt=32820,Rt=33635,te=34042,De=6402,rr=34041,Er=35904,yn=35906,en=36193,hn=33776,Qn=33777,fa=33778,Hn=33779,Jn=35986,ja=35987,Va=34798,ni=35840,ai=35841,wi=35842,Ro=35843,ss=36196,Bo=5121,es=5123,Di=5125,Lo=5126,nu=10242,au=10243,Ss=10497,vs=33071,iu=33648,h=10240,P=10241,ht=9728,St=9729,Gt=9984,Kt=9985,Qt=9986,pe=9987,Se=33170,je=4352,fr=4353,Rr=4354,Vr=34046,Ur=3317,vn=37440,On=37441,Zr=37443,Wn=37444,Ma=33984,Oa=[Gt,Qt,Kt,pe],ba=[0,ke,er,ve,yt],ca={};ca[ke]=ca[Ct]=ca[De]=1,ca[rr]=ca[er]=2,ca[ve]=ca[Er]=3,ca[yt]=ca[yn]=4;function pa(bt){return"[object "+bt+"]"}var ao=pa("HTMLCanvasElement"),Ki=pa("OffscreenCanvas"),Gi=pa("CanvasRenderingContext2D"),$i=pa("ImageBitmap"),Qi=pa("HTMLImageElement"),fo=pa("HTMLVideoElement"),Ao=Object.keys(Po).concat([ao,Ki,Gi,$i,Qi,fo]),Fa=[];Fa[Bo]=1,Fa[Lo]=4,Fa[en]=2,Fa[es]=2,Fa[Di]=4;var hi=[];hi[yr]=2,hi[Pt]=2,hi[Tt]=2,hi[rr]=4,hi[hn]=.5,hi[Qn]=.5,hi[fa]=1,hi[Hn]=1,hi[Jn]=.5,hi[ja]=1,hi[Va]=1,hi[ni]=.5,hi[ai]=.25,hi[wi]=.5,hi[Ro]=.25,hi[ss]=.5;function Is(bt){return Array.isArray(bt)&&(bt.length===0||typeof bt[0]=="number")}function gs(bt){if(!Array.isArray(bt))return!1;var ae=bt.length;return!(ae===0||!La(bt[0]))}function as(bt){return Object.prototype.toString.call(bt)}function ou(bt){return as(bt)===ao}function lc(bt){return as(bt)===Ki}function ll(bt){return as(bt)===Gi}function hl(bt){return as(bt)===$i}function hc(bt){return as(bt)===Qi}function oh(bt){return as(bt)===fo}function dc(bt){if(!bt)return!1;var ae=as(bt);return Ao.indexOf(ae)>=0?!0:Is(bt)||gs(bt)||vi(bt)}function Hu(bt){return Po[Object.prototype.toString.call(bt)]|0}function dl(bt,ae){var Ge=ae.length;switch(bt.type){case Bo:case es:case Di:case Lo:var Lr=pt.allocType(bt.type,Ge);Lr.set(ae),bt.data=Lr;break;case en:bt.data=bo(ae);break;default:Lt.raise("unsupported texture type, must specify a typed array")}}function vc(bt,ae){return pt.allocType(bt.type===en?Lo:bt.type,ae)}function vl(bt,ae){bt.type===en?(bt.data=bo(ae),pt.freeType(ae)):bt.data=ae}function sh(bt,ae,Ge,Lr,Wr,Nr){for(var zr=bt.width,mn=bt.height,dn=bt.channels,wn=zr*mn*dn,xn=vc(bt,wn),In=0,v=0;v<mn;++v)for(var A=0;A<zr;++A)for(var U=0;U<dn;++U)xn[In++]=ae[Ge*A+Lr*v+Wr*U+Nr];vl(bt,xn)}function su(bt,ae,Ge,Lr,Wr,Nr){var zr;if(typeof hi[bt]!="undefined"?zr=hi[bt]:zr=ca[bt]*Fa[ae],Nr&&(zr*=6),Wr){for(var mn=0,dn=Ge;dn>=1;)mn+=zr*dn*dn,dn/=2;return mn}else return zr*Ge*Lr}function gl(bt,ae,Ge,Lr,Wr,Nr,zr){var mn={"don't care":je,"dont care":je,nice:Rr,fast:fr},dn={repeat:Ss,clamp:vs,mirror:iu},wn={nearest:ht,linear:St},xn=R({mipmap:pe,"nearest mipmap nearest":Gt,"linear mipmap nearest":Kt,"nearest mipmap linear":Qt,"linear mipmap linear":pe},wn),In={none:0,browser:Wn},v={uint8:Bo,rgba4:H,rgb565:Rt,"rgb5 a1":gt},A={alpha:Ct,luminance:ke,"luminance alpha":er,rgb:ve,rgba:yt,rgba4:yr,"rgb5 a1":Pt,rgb565:Tt},U={};ae.ext_srgb&&(A.srgb=Er,A.srgba=yn),ae.oes_texture_float&&(v.float32=v.float=Lo),ae.oes_texture_half_float&&(v.float16=v["half float"]=en),ae.webgl_depth_texture&&(R(A,{depth:De,"depth stencil":rr}),R(v,{uint16:es,uint32:Di,"depth stencil":te})),ae.webgl_compressed_texture_s3tc&&R(U,{"rgb s3tc dxt1":hn,"rgba s3tc dxt1":Qn,"rgba s3tc dxt3":fa,"rgba s3tc dxt5":Hn}),ae.webgl_compressed_texture_atc&&R(U,{"rgb atc":Jn,"rgba atc explicit alpha":ja,"rgba atc interpolated alpha":Va}),ae.webgl_compressed_texture_pvrtc&&R(U,{"rgb pvrtc 4bppv1":ni,"rgb pvrtc 2bppv1":ai,"rgba pvrtc 4bppv1":wi,"rgba pvrtc 2bppv1":Ro}),ae.webgl_compressed_texture_etc1&&(U["rgb etc1"]=ss);var q=Array.prototype.slice.call(bt.getParameter(os));Object.keys(U).forEach(function(Ce){var Pr=U[Ce];q.indexOf(Pr)>=0&&(A[Ce]=Pr)});var st=Object.keys(A);Ge.textureFormats=st;var ct=[];Object.keys(A).forEach(function(Ce){var Pr=A[Ce];ct[Pr]=Ce});var mt=[];Object.keys(v).forEach(function(Ce){var Pr=v[Ce];mt[Pr]=Ce});var wt=[];Object.keys(wn).forEach(function(Ce){var Pr=wn[Ce];wt[Pr]=Ce});var kt=[];Object.keys(xn).forEach(function(Ce){var Pr=xn[Ce];kt[Pr]=Ce});var Ht=[];Object.keys(dn).forEach(function(Ce){var Pr=dn[Ce];Ht[Pr]=Ce});var ie=st.reduce(function(Ce,Pr){var Ir=A[Pr];return Ir===ke||Ir===Ct||Ir===ke||Ir===er||Ir===De||Ir===rr||ae.ext_srgb&&(Ir===Er||Ir===yn)?Ce[Ir]=Ir:Ir===Pt||Pr.indexOf("rgba")>=0?Ce[Ir]=yt:Ce[Ir]=ve,Ce},{});function qt(){this.internalformat=yt,this.format=yt,this.type=Bo,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Wn,this.width=0,this.height=0,this.channels=0}function Oe(Ce,Pr){Ce.internalformat=Pr.internalformat,Ce.format=Pr.format,Ce.type=Pr.type,Ce.compressed=Pr.compressed,Ce.premultiplyAlpha=Pr.premultiplyAlpha,Ce.flipY=Pr.flipY,Ce.unpackAlignment=Pr.unpackAlignment,Ce.colorSpace=Pr.colorSpace,Ce.width=Pr.width,Ce.height=Pr.height,Ce.channels=Pr.channels}function ir(Ce,Pr){if(!(typeof Pr!="object"||!Pr)){if("premultiplyAlpha"in Pr&&(Lt.type(Pr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Ce.premultiplyAlpha=Pr.premultiplyAlpha),"flipY"in Pr&&(Lt.type(Pr.flipY,"boolean","invalid texture flip"),Ce.flipY=Pr.flipY),"alignment"in Pr&&(Lt.oneOf(Pr.alignment,[1,2,4,8],"invalid texture unpack alignment"),Ce.unpackAlignment=Pr.alignment),"colorSpace"in Pr&&(Lt.parameter(Pr.colorSpace,In,"invalid colorSpace"),Ce.colorSpace=In[Pr.colorSpace]),"type"in Pr){var Ir=Pr.type;Lt(ae.oes_texture_float||!(Ir==="float"||Ir==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Lt(ae.oes_texture_half_float||!(Ir==="half float"||Ir==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Lt(ae.webgl_depth_texture||!(Ir==="uint16"||Ir==="uint32"||Ir==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Lt.parameter(Ir,v,"invalid texture type"),Ce.type=v[Ir]}var Xn=Ce.width,Aa=Ce.height,be=Ce.channels,Jt=!1;"shape"in Pr?(Lt(Array.isArray(Pr.shape)&&Pr.shape.length>=2,"shape must be an array"),Xn=Pr.shape[0],Aa=Pr.shape[1],Pr.shape.length===3&&(be=Pr.shape[2],Lt(be>0&&be<=4,"invalid number of channels"),Jt=!0),Lt(Xn>=0&&Xn<=Ge.maxTextureSize,"invalid width"),Lt(Aa>=0&&Aa<=Ge.maxTextureSize,"invalid height")):("radius"in Pr&&(Xn=Aa=Pr.radius,Lt(Xn>=0&&Xn<=Ge.maxTextureSize,"invalid radius")),"width"in Pr&&(Xn=Pr.width,Lt(Xn>=0&&Xn<=Ge.maxTextureSize,"invalid width")),"height"in Pr&&(Aa=Pr.height,Lt(Aa>=0&&Aa<=Ge.maxTextureSize,"invalid height")),"channels"in Pr&&(be=Pr.channels,Lt(be>0&&be<=4,"invalid number of channels"),Jt=!0)),Ce.width=Xn|0,Ce.height=Aa|0,Ce.channels=be|0;var He=!1;if("format"in Pr){var mr=Pr.format;Lt(ae.webgl_depth_texture||!(mr==="depth"||mr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Lt.parameter(mr,A,"invalid texture format");var wr=Ce.internalformat=A[mr];Ce.format=ie[wr],mr in v&&("type"in Pr||(Ce.type=v[mr])),mr in U&&(Ce.compressed=!0),He=!0}!Jt&&He?Ce.channels=ca[Ce.format]:Jt&&!He?Ce.channels!==ba[Ce.format]&&(Ce.format=Ce.internalformat=ba[Ce.channels]):He&&Jt&&Lt(Ce.channels===ca[Ce.format],"number of channels inconsistent with specified format")}}function Yr(Ce){bt.pixelStorei(vn,Ce.flipY),bt.pixelStorei(On,Ce.premultiplyAlpha),bt.pixelStorei(Zr,Ce.colorSpace),bt.pixelStorei(Ur,Ce.unpackAlignment)}function hr(){qt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function pr(Ce,Pr){var Ir=null;if(dc(Pr)?Ir=Pr:Pr&&(Lt.type(Pr,"object","invalid pixel data type"),ir(Ce,Pr),"x"in Pr&&(Ce.xOffset=Pr.x|0),"y"in Pr&&(Ce.yOffset=Pr.y|0),dc(Pr.data)&&(Ir=Pr.data)),Lt(!Ce.compressed||Ir instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Pr.copy){Lt(!Ir,"can not specify copy and data field for the same texture");var Xn=Wr.viewportWidth,Aa=Wr.viewportHeight;Ce.width=Ce.width||Xn-Ce.xOffset,Ce.height=Ce.height||Aa-Ce.yOffset,Ce.needsCopy=!0,Lt(Ce.xOffset>=0&&Ce.xOffset<Xn&&Ce.yOffset>=0&&Ce.yOffset<Aa&&Ce.width>0&&Ce.width<=Xn&&Ce.height>0&&Ce.height<=Aa,"copy texture read out of bounds")}else if(!Ir)Ce.width=Ce.width||1,Ce.height=Ce.height||1,Ce.channels=Ce.channels||4;else if(G(Ir))Ce.channels=Ce.channels||4,Ce.data=Ir,!("type"in Pr)&&Ce.type===Bo&&(Ce.type=Hu(Ir));else if(Is(Ir))Ce.channels=Ce.channels||4,dl(Ce,Ir),Ce.alignment=1,Ce.needsFree=!0;else if(vi(Ir)){var be=Ir.data;!Array.isArray(be)&&Ce.type===Bo&&(Ce.type=Hu(be));var Jt=Ir.shape,He=Ir.stride,mr,wr,Je,Ze,cr,xe;Jt.length===3?(Je=Jt[2],xe=He[2]):(Lt(Jt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Je=1,xe=1),mr=Jt[0],wr=Jt[1],Ze=He[0],cr=He[1],Ce.alignment=1,Ce.width=mr,Ce.height=wr,Ce.channels=Je,Ce.format=Ce.internalformat=ba[Je],Ce.needsFree=!0,sh(Ce,be,Ze,cr,xe,Ir.offset)}else if(ou(Ir)||lc(Ir)||ll(Ir))ou(Ir)||lc(Ir)?Ce.element=Ir:Ce.element=Ir.canvas,Ce.width=Ce.element.width,Ce.height=Ce.element.height,Ce.channels=4;else if(hl(Ir))Ce.element=Ir,Ce.width=Ir.width,Ce.height=Ir.height,Ce.channels=4;else if(hc(Ir))Ce.element=Ir,Ce.width=Ir.naturalWidth,Ce.height=Ir.naturalHeight,Ce.channels=4;else if(oh(Ir))Ce.element=Ir,Ce.width=Ir.videoWidth,Ce.height=Ir.videoHeight,Ce.channels=4;else if(gs(Ir)){var Ve=Ce.width||Ir[0].length,ge=Ce.height||Ir.length,dr=Ce.channels;La(Ir[0][0])?dr=dr||Ir[0][0].length:dr=dr||1;for(var Cr=Ia.shape(Ir),Jr=1,rn=0;rn<Cr.length;++rn)Jr*=Cr[rn];var Hr=vc(Ce,Jr);Ia.flatten(Ir,Cr,"",Hr),vl(Ce,Hr),Ce.alignment=1,Ce.width=Ve,Ce.height=ge,Ce.channels=dr,Ce.format=Ce.internalformat=ba[dr],Ce.needsFree=!0}Ce.type===Lo?Lt(Ge.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Ce.type===en&&Lt(Ge.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function gr(Ce,Pr,Ir){var Xn=Ce.element,Aa=Ce.data,be=Ce.internalformat,Jt=Ce.format,He=Ce.type,mr=Ce.width,wr=Ce.height;Yr(Ce),Xn?bt.texImage2D(Pr,Ir,Jt,Jt,He,Xn):Ce.compressed?bt.compressedTexImage2D(Pr,Ir,be,mr,wr,0,Aa):Ce.needsCopy?(Lr(),bt.copyTexImage2D(Pr,Ir,Jt,Ce.xOffset,Ce.yOffset,mr,wr,0)):bt.texImage2D(Pr,Ir,Jt,mr,wr,0,Jt,He,Aa||null)}function En(Ce,Pr,Ir,Xn,Aa){var be=Ce.element,Jt=Ce.data,He=Ce.internalformat,mr=Ce.format,wr=Ce.type,Je=Ce.width,Ze=Ce.height;Yr(Ce),be?bt.texSubImage2D(Pr,Aa,Ir,Xn,mr,wr,be):Ce.compressed?bt.compressedTexSubImage2D(Pr,Aa,Ir,Xn,He,Je,Ze,Jt):Ce.needsCopy?(Lr(),bt.copyTexSubImage2D(Pr,Aa,Ir,Xn,Ce.xOffset,Ce.yOffset,Je,Ze)):bt.texSubImage2D(Pr,Aa,Ir,Xn,Je,Ze,mr,wr,Jt)}var kn=[];function Tn(){return kn.pop()||new hr}function qn(Ce){Ce.needsFree&&pt.freeType(Ce.data),hr.call(Ce),kn.push(Ce)}function Kn(){qt.call(this),this.genMipmaps=!1,this.mipmapHint=je,this.mipmask=0,this.images=Array(16)}function ia(Ce,Pr,Ir){var Xn=Ce.images[0]=Tn();Ce.mipmask=1,Xn.width=Ce.width=Pr,Xn.height=Ce.height=Ir,Xn.channels=Ce.channels=4}function ga(Ce,Pr){var Ir=null;if(dc(Pr))Ir=Ce.images[0]=Tn(),Oe(Ir,Ce),pr(Ir,Pr),Ce.mipmask=1;else if(ir(Ce,Pr),Array.isArray(Pr.mipmap))for(var Xn=Pr.mipmap,Aa=0;Aa<Xn.length;++Aa)Ir=Ce.images[Aa]=Tn(),Oe(Ir,Ce),Ir.width>>=Aa,Ir.height>>=Aa,pr(Ir,Xn[Aa]),Ce.mipmask|=1<<Aa;else Ir=Ce.images[0]=Tn(),Oe(Ir,Ce),pr(Ir,Pr),Ce.mipmask=1;Oe(Ce,Ce.images[0]),Ce.compressed&&(Ce.internalformat===hn||Ce.internalformat===Qn||Ce.internalformat===fa||Ce.internalformat===Hn)&&Lt(Ce.width%4==0&&Ce.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ua(Ce,Pr){for(var Ir=Ce.images,Xn=0;Xn<Ir.length;++Xn){if(!Ir[Xn])return;gr(Ir[Xn],Pr,Xn)}}var yi=[];function xa(){var Ce=yi.pop()||new Kn;qt.call(Ce),Ce.mipmask=0;for(var Pr=0;Pr<16;++Pr)Ce.images[Pr]=null;return Ce}function zi(Ce){for(var Pr=Ce.images,Ir=0;Ir<Pr.length;++Ir)Pr[Ir]&&qn(Pr[Ir]),Pr[Ir]=null;yi.push(Ce)}function ii(){this.minFilter=ht,this.magFilter=ht,this.wrapS=vs,this.wrapT=vs,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=je}function ka(Ce,Pr){if("min"in Pr){var Ir=Pr.min;Lt.parameter(Ir,xn),Ce.minFilter=xn[Ir],Oa.indexOf(Ce.minFilter)>=0&&!("faces"in Pr)&&(Ce.genMipmaps=!0)}if("mag"in Pr){var Xn=Pr.mag;Lt.parameter(Xn,wn),Ce.magFilter=wn[Xn]}var Aa=Ce.wrapS,be=Ce.wrapT;if("wrap"in Pr){var Jt=Pr.wrap;typeof Jt=="string"?(Lt.parameter(Jt,dn),Aa=be=dn[Jt]):Array.isArray(Jt)&&(Lt.parameter(Jt[0],dn),Lt.parameter(Jt[1],dn),Aa=dn[Jt[0]],be=dn[Jt[1]])}else{if("wrapS"in Pr){var He=Pr.wrapS;Lt.parameter(He,dn),Aa=dn[He]}if("wrapT"in Pr){var mr=Pr.wrapT;Lt.parameter(mr,dn),be=dn[mr]}}if(Ce.wrapS=Aa,Ce.wrapT=be,"anisotropic"in Pr){var wr=Pr.anisotropic;Lt(typeof wr=="number"&&wr>=1&&wr<=Ge.maxAnisotropic,"aniso samples must be between 1 and "),Ce.anisotropic=Pr.anisotropic}if("mipmap"in Pr){var Je=!1;switch(typeof Pr.mipmap){case"string":Lt.parameter(Pr.mipmap,mn,"invalid mipmap hint"),Ce.mipmapHint=mn[Pr.mipmap],Ce.genMipmaps=!0,Je=!0;break;case"boolean":Je=Ce.genMipmaps=Pr.mipmap;break;case"object":Lt(Array.isArray(Pr.mipmap),"invalid mipmap type"),Ce.genMipmaps=!1,Je=!0;break;default:Lt.raise("invalid mipmap type")}Je&&!("min"in Pr)&&(Ce.minFilter=Gt)}}function Ui(Ce,Pr){bt.texParameteri(Pr,P,Ce.minFilter),bt.texParameteri(Pr,h,Ce.magFilter),bt.texParameteri(Pr,nu,Ce.wrapS),bt.texParameteri(Pr,au,Ce.wrapT),ae.ext_texture_filter_anisotropic&&bt.texParameteri(Pr,Vr,Ce.anisotropic),Ce.genMipmaps&&(bt.hint(Se,Ce.mipmapHint),bt.generateMipmap(Pr))}var Ni=0,So={},Uo=Ge.maxTextureUnits,_o=Array(Uo).map(function(){return null});function Ca(Ce){qt.call(this),this.mipmask=0,this.internalformat=yt,this.id=Ni++,this.refCount=1,this.target=Ce,this.texture=bt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ii,zr.profile&&(this.stats={size:0})}function Wo(Ce){bt.activeTexture(Ma),bt.bindTexture(Ce.target,Ce.texture)}function ei(){var Ce=_o[0];Ce?bt.bindTexture(Ce.target,Ce.texture):bt.bindTexture(Nt,null)}function sa(Ce){var Pr=Ce.texture;Lt(Pr,"must not double destroy texture");var Ir=Ce.unit,Xn=Ce.target;Ir>=0&&(bt.activeTexture(Ma+Ir),bt.bindTexture(Xn,null),_o[Ir]=null),bt.deleteTexture(Pr),Ce.texture=null,Ce.params=null,Ce.pixels=null,Ce.refCount=0,delete So[Ce.id],Nr.textureCount--}R(Ca.prototype,{bind:function(){var Ce=this;Ce.bindCount+=1;var Pr=Ce.unit;if(Pr<0){for(var Ir=0;Ir<Uo;++Ir){var Xn=_o[Ir];if(Xn){if(Xn.bindCount>0)continue;Xn.unit=-1}_o[Ir]=Ce,Pr=Ir;break}Pr>=Uo&&Lt.raise("insufficient number of texture units"),zr.profile&&Nr.maxTextureUnits<Pr+1&&(Nr.maxTextureUnits=Pr+1),Ce.unit=Pr,bt.activeTexture(Ma+Pr),bt.bindTexture(Ce.target,Ce.texture)}return Pr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&sa(this)}});function Na(Ce,Pr){var Ir=new Ca(Nt);So[Ir.id]=Ir,Nr.textureCount++;function Xn(Jt,He){var mr=Ir.texInfo;ii.call(mr);var wr=xa();return typeof Jt=="number"?typeof He=="number"?ia(wr,Jt|0,He|0):ia(wr,Jt|0,Jt|0):Jt?(Lt.type(Jt,"object","invalid arguments to regl.texture"),ka(mr,Jt),ga(wr,Jt)):ia(wr,1,1),mr.genMipmaps&&(wr.mipmask=(wr.width<<1)-1),Ir.mipmask=wr.mipmask,Oe(Ir,wr),Lt.texture2D(mr,wr,Ge),Ir.internalformat=wr.internalformat,Xn.width=wr.width,Xn.height=wr.height,Wo(Ir),ua(wr,Nt),Ui(mr,Nt),ei(),zi(wr),zr.profile&&(Ir.stats.size=su(Ir.internalformat,Ir.type,wr.width,wr.height,mr.genMipmaps,!1)),Xn.format=ct[Ir.internalformat],Xn.type=mt[Ir.type],Xn.mag=wt[mr.magFilter],Xn.min=kt[mr.minFilter],Xn.wrapS=Ht[mr.wrapS],Xn.wrapT=Ht[mr.wrapT],Xn}function Aa(Jt,He,mr,wr){Lt(!!Jt,"must specify image data");var Je=He|0,Ze=mr|0,cr=wr|0,xe=Tn();return Oe(xe,Ir),xe.width=0,xe.height=0,pr(xe,Jt),xe.width=xe.width||(Ir.width>>cr)-Je,xe.height=xe.height||(Ir.height>>cr)-Ze,Lt(Ir.type===xe.type&&Ir.format===xe.format&&Ir.internalformat===xe.internalformat,"incompatible format for texture.subimage"),Lt(Je>=0&&Ze>=0&&Je+xe.width<=Ir.width&&Ze+xe.height<=Ir.height,"texture.subimage write out of bounds"),Lt(Ir.mipmask&1<<cr,"missing mipmap data"),Lt(xe.data||xe.element||xe.needsCopy,"missing image data"),Wo(Ir),En(xe,Nt,Je,Ze,cr),ei(),qn(xe),Xn}function be(Jt,He){var mr=Jt|0,wr=He|0||mr;if(mr===Ir.width&&wr===Ir.height)return Xn;Xn.width=Ir.width=mr,Xn.height=Ir.height=wr,Wo(Ir);for(var Je=0;Ir.mipmask>>Je;++Je){var Ze=mr>>Je,cr=wr>>Je;if(!Ze||!cr)break;bt.texImage2D(Nt,Je,Ir.format,Ze,cr,0,Ir.format,Ir.type,null)}return ei(),zr.profile&&(Ir.stats.size=su(Ir.internalformat,Ir.type,mr,wr,!1,!1)),Xn}return Xn(Ce,Pr),Xn.subimage=Aa,Xn.resize=be,Xn._reglType="texture2d",Xn._texture=Ir,zr.profile&&(Xn.stats=Ir.stats),Xn.destroy=function(){Ir.decRef()},Xn}function Xa(Ce,Pr,Ir,Xn,Aa,be){var Jt=new Ca(At);So[Jt.id]=Jt,Nr.cubeCount++;var He=new Array(6);function mr(Ze,cr,xe,Ve,ge,dr){var Cr,Jr=Jt.texInfo;for(ii.call(Jr),Cr=0;Cr<6;++Cr)He[Cr]=xa();if(typeof Ze=="number"||!Ze){var rn=Ze|0||1;for(Cr=0;Cr<6;++Cr)ia(He[Cr],rn,rn)}else if(typeof Ze=="object")if(cr)ga(He[0],Ze),ga(He[1],cr),ga(He[2],xe),ga(He[3],Ve),ga(He[4],ge),ga(He[5],dr);else if(ka(Jr,Ze),ir(Jt,Ze),"faces"in Ze){var Hr=Ze.faces;for(Lt(Array.isArray(Hr)&&Hr.length===6,"cube faces must be a length 6 array"),Cr=0;Cr<6;++Cr)Lt(typeof Hr[Cr]=="object"&&!!Hr[Cr],"invalid input for cube map face"),Oe(He[Cr],Jt),ga(He[Cr],Hr[Cr])}else for(Cr=0;Cr<6;++Cr)ga(He[Cr],Ze);else Lt.raise("invalid arguments to cube map");for(Oe(Jt,He[0]),Ge.npotTextureCube||Lt(ds(Jt.width)&&ds(Jt.height),"your browser does not support non power or two texture dimensions"),Jr.genMipmaps?Jt.mipmask=(He[0].width<<1)-1:Jt.mipmask=He[0].mipmask,Lt.textureCube(Jt,Jr,He,Ge),Jt.internalformat=He[0].internalformat,mr.width=He[0].width,mr.height=He[0].height,Wo(Jt),Cr=0;Cr<6;++Cr)ua(He[Cr],ut+Cr);for(Ui(Jr,At),ei(),zr.profile&&(Jt.stats.size=su(Jt.internalformat,Jt.type,mr.width,mr.height,Jr.genMipmaps,!0)),mr.format=ct[Jt.internalformat],mr.type=mt[Jt.type],mr.mag=wt[Jr.magFilter],mr.min=kt[Jr.minFilter],mr.wrapS=Ht[Jr.wrapS],mr.wrapT=Ht[Jr.wrapT],Cr=0;Cr<6;++Cr)zi(He[Cr]);return mr}function wr(Ze,cr,xe,Ve,ge){Lt(!!cr,"must specify image data"),Lt(typeof Ze=="number"&&Ze===(Ze|0)&&Ze>=0&&Ze<6,"invalid face");var dr=xe|0,Cr=Ve|0,Jr=ge|0,rn=Tn();return Oe(rn,Jt),rn.width=0,rn.height=0,pr(rn,cr),rn.width=rn.width||(Jt.width>>Jr)-dr,rn.height=rn.height||(Jt.height>>Jr)-Cr,Lt(Jt.type===rn.type&&Jt.format===rn.format&&Jt.internalformat===rn.internalformat,"incompatible format for texture.subimage"),Lt(dr>=0&&Cr>=0&&dr+rn.width<=Jt.width&&Cr+rn.height<=Jt.height,"texture.subimage write out of bounds"),Lt(Jt.mipmask&1<<Jr,"missing mipmap data"),Lt(rn.data||rn.element||rn.needsCopy,"missing image data"),Wo(Jt),En(rn,ut+Ze,dr,Cr,Jr),ei(),qn(rn),mr}function Je(Ze){var cr=Ze|0;if(cr!==Jt.width){mr.width=Jt.width=cr,mr.height=Jt.height=cr,Wo(Jt);for(var xe=0;xe<6;++xe)for(var Ve=0;Jt.mipmask>>Ve;++Ve)bt.texImage2D(ut+xe,Ve,Jt.format,cr>>Ve,cr>>Ve,0,Jt.format,Jt.type,null);return ei(),zr.profile&&(Jt.stats.size=su(Jt.internalformat,Jt.type,mr.width,mr.height,!1,!0)),mr}}return mr(Ce,Pr,Ir,Xn,Aa,be),mr.subimage=wr,mr.resize=Je,mr._reglType="textureCube",mr._texture=Jt,zr.profile&&(mr.stats=Jt.stats),mr.destroy=function(){Jt.decRef()},mr}function Mo(){for(var Ce=0;Ce<Uo;++Ce)bt.activeTexture(Ma+Ce),bt.bindTexture(Nt,null),_o[Ce]=null;ti(So).forEach(sa),Nr.cubeCount=0,Nr.textureCount=0}zr.profile&&(Nr.getTotalTextureSize=function(){var Ce=0;return Object.keys(So).forEach(function(Pr){Ce+=So[Pr].stats.size}),Ce});function $s(){for(var Ce=0;Ce<Uo;++Ce){var Pr=_o[Ce];Pr&&(Pr.bindCount=0,Pr.unit=-1,_o[Ce]=null)}ti(So).forEach(function(Ir){Ir.texture=bt.createTexture(),bt.bindTexture(Ir.target,Ir.texture);for(var Xn=0;Xn<32;++Xn)if((Ir.mipmask&1<<Xn)!=0)if(Ir.target===Nt)bt.texImage2D(Nt,Xn,Ir.internalformat,Ir.width>>Xn,Ir.height>>Xn,0,Ir.internalformat,Ir.type,null);else for(var Aa=0;Aa<6;++Aa)bt.texImage2D(ut+Aa,Xn,Ir.internalformat,Ir.width>>Xn,Ir.height>>Xn,0,Ir.internalformat,Ir.type,null);Ui(Ir.texInfo,Ir.target)})}function mf(){for(var Ce=0;Ce<Uo;++Ce){var Pr=_o[Ce];Pr&&(Pr.bindCount=0,Pr.unit=-1,_o[Ce]=null),bt.activeTexture(Ma+Ce),bt.bindTexture(Nt,null),bt.bindTexture(At,null)}}return{create2D:Na,createCube:Xa,clear:Mo,getTexture:function(Ce){return null},restore:$s,refresh:mf}}var Un=36161,Su=32854,Ga=32855,gc=36194,Tf=33189,uu=36168,pc=34041,yc=35907,If=34836,pl=34842,yl=34843,ps=[];ps[Su]=2,ps[Ga]=2,ps[gc]=2,ps[Tf]=2,ps[uu]=1,ps[pc]=4,ps[yc]=4,ps[If]=16,ps[pl]=8,ps[yl]=6;function mc(bt,ae,Ge){return ps[bt]*ae*Ge}var zs=function(bt,ae,Ge,Lr,Wr){var Nr={rgba4:Su,rgb565:gc,"rgb5 a1":Ga,depth:Tf,stencil:uu,"depth stencil":pc};ae.ext_srgb&&(Nr.srgba=yc),ae.ext_color_buffer_half_float&&(Nr.rgba16f=pl,Nr.rgb16f=yl),ae.webgl_color_buffer_float&&(Nr.rgba32f=If);var zr=[];Object.keys(Nr).forEach(function(A){var U=Nr[A];zr[U]=A});var mn=0,dn={};function wn(A){this.id=mn++,this.refCount=1,this.renderbuffer=A,this.format=Su,this.width=0,this.height=0,Wr.profile&&(this.stats={size:0})}wn.prototype.decRef=function(){--this.refCount<=0&&xn(this)};function xn(A){var U=A.renderbuffer;Lt(U,"must not double destroy renderbuffer"),bt.bindRenderbuffer(Un,null),bt.deleteRenderbuffer(U),A.renderbuffer=null,A.refCount=0,delete dn[A.id],Lr.renderbufferCount--}function In(A,U){var q=new wn(bt.createRenderbuffer());dn[q.id]=q,Lr.renderbufferCount++;function st(mt,wt){var kt=0,Ht=0,ie=Su;if(typeof mt=="object"&&mt){var qt=mt;if("shape"in qt){var Oe=qt.shape;Lt(Array.isArray(Oe)&&Oe.length>=2,"invalid renderbuffer shape"),kt=Oe[0]|0,Ht=Oe[1]|0}else"radius"in qt&&(kt=Ht=qt.radius|0),"width"in qt&&(kt=qt.width|0),"height"in qt&&(Ht=qt.height|0);"format"in qt&&(Lt.parameter(qt.format,Nr,"invalid renderbuffer format"),ie=Nr[qt.format])}else typeof mt=="number"?(kt=mt|0,typeof wt=="number"?Ht=wt|0:Ht=kt):mt?Lt.raise("invalid arguments to renderbuffer constructor"):kt=Ht=1;if(Lt(kt>0&&Ht>0&&kt<=Ge.maxRenderbufferSize&&Ht<=Ge.maxRenderbufferSize,"invalid renderbuffer size"),!(kt===q.width&&Ht===q.height&&ie===q.format))return st.width=q.width=kt,st.height=q.height=Ht,q.format=ie,bt.bindRenderbuffer(Un,q.renderbuffer),bt.renderbufferStorage(Un,ie,kt,Ht),Lt(bt.getError()===0,"invalid render buffer format"),Wr.profile&&(q.stats.size=mc(q.format,q.width,q.height)),st.format=zr[q.format],st}function ct(mt,wt){var kt=mt|0,Ht=wt|0||kt;return kt===q.width&&Ht===q.height||(Lt(kt>0&&Ht>0&&kt<=Ge.maxRenderbufferSize&&Ht<=Ge.maxRenderbufferSize,"invalid renderbuffer size"),st.width=q.width=kt,st.height=q.height=Ht,bt.bindRenderbuffer(Un,q.renderbuffer),bt.renderbufferStorage(Un,q.format,kt,Ht),Lt(bt.getError()===0,"invalid render buffer format"),Wr.profile&&(q.stats.size=mc(q.format,q.width,q.height))),st}return st(A,U),st.resize=ct,st._reglType="renderbuffer",st._renderbuffer=q,Wr.profile&&(st.stats=q.stats),st.destroy=function(){q.decRef()},st}Wr.profile&&(Lr.getTotalRenderbufferSize=function(){var A=0;return Object.keys(dn).forEach(function(U){A+=dn[U].stats.size}),A});function v(){ti(dn).forEach(function(A){A.renderbuffer=bt.createRenderbuffer(),bt.bindRenderbuffer(Un,A.renderbuffer),bt.renderbufferStorage(Un,A.format,A.width,A.height)}),bt.bindRenderbuffer(Un,null)}return{create:In,clear:function(){ti(dn).forEach(xn)},restore:v}},xo=36160,Us=36161,Os=3553,Of=34069,bc=36064,ml=36096,bl=36128,xl=33306,Lf=36053,El=36054,Df=36055,wl=36057,xc=36061,Zu=36193,Ec=5121,us=5126,wc=6407,Ku=6408,Sl=6402,uh=[wc,Ku],Sc=[];Sc[Ku]=4,Sc[wc]=3;var $u=[];$u[Ec]=1,$u[us]=4,$u[Zu]=2;var _u=32854,Qu=32855,qu=36194,_l=33189,Nf=36168,Mu=34041,fu=35907,cu=34836,Pf=34842,Ju=34843,_c=[_u,Qu,qu,fu,Pf,Ju,cu],lu={};lu[Lf]="complete",lu[El]="incomplete attachment",lu[wl]="incomplete dimensions",lu[Df]="incomplete, missing attachment",lu[xc]="unsupported";function fh(bt,ae,Ge,Lr,Wr,Nr){var zr={cur:null,next:null,dirty:!1,setFBO:null},mn=["rgba"],dn=["rgba4","rgb565","rgb5 a1"];ae.ext_srgb&&dn.push("srgba"),ae.ext_color_buffer_half_float&&dn.push("rgba16f","rgb16f"),ae.webgl_color_buffer_float&&dn.push("rgba32f");var wn=["uint8"];ae.oes_texture_half_float&&wn.push("half float","float16"),ae.oes_texture_float&&wn.push("float","float32");function xn(hr,pr,gr){this.target=hr,this.texture=pr,this.renderbuffer=gr;var En=0,kn=0;pr?(En=pr.width,kn=pr.height):gr&&(En=gr.width,kn=gr.height),this.width=En,this.height=kn}function In(hr){hr&&(hr.texture&&hr.texture._texture.decRef(),hr.renderbuffer&&hr.renderbuffer._renderbuffer.decRef())}function v(hr,pr,gr){if(!!hr)if(hr.texture){var En=hr.texture._texture,kn=Math.max(1,En.width),Tn=Math.max(1,En.height);Lt(kn===pr&&Tn===gr,"inconsistent width/height for supplied texture"),En.refCount+=1}else{var qn=hr.renderbuffer._renderbuffer;Lt(qn.width===pr&&qn.height===gr,"inconsistent width/height for renderbuffer"),qn.refCount+=1}}function A(hr,pr){pr&&(pr.texture?bt.framebufferTexture2D(xo,hr,pr.target,pr.texture._texture.texture,0):bt.framebufferRenderbuffer(xo,hr,Us,pr.renderbuffer._renderbuffer.renderbuffer))}function U(hr){var pr=Os,gr=null,En=null,kn=hr;typeof hr=="object"&&(kn=hr.data,"target"in hr&&(pr=hr.target|0)),Lt.type(kn,"function","invalid attachment data");var Tn=kn._reglType;return Tn==="texture2d"?(gr=kn,Lt(pr===Os)):Tn==="textureCube"?(gr=kn,Lt(pr>=Of&&pr<Of+6,"invalid cube map target")):Tn==="renderbuffer"?(En=kn,pr=Us):Lt.raise("invalid regl object for attachment"),new xn(pr,gr,En)}function q(hr,pr,gr,En,kn){if(gr){var Tn=Lr.create2D({width:hr,height:pr,format:En,type:kn});return Tn._texture.refCount=0,new xn(Os,Tn,null)}else{var qn=Wr.create({width:hr,height:pr,format:En});return qn._renderbuffer.refCount=0,new xn(Us,null,qn)}}function st(hr){return hr&&(hr.texture||hr.renderbuffer)}function ct(hr,pr,gr){hr&&(hr.texture?hr.texture.resize(pr,gr):hr.renderbuffer&&hr.renderbuffer.resize(pr,gr),hr.width=pr,hr.height=gr)}var mt=0,wt={};function kt(){this.id=mt++,wt[this.id]=this,this.framebuffer=bt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ht(hr){hr.colorAttachments.forEach(In),In(hr.depthAttachment),In(hr.stencilAttachment),In(hr.depthStencilAttachment)}function ie(hr){var pr=hr.framebuffer;Lt(pr,"must not double destroy framebuffer"),bt.deleteFramebuffer(pr),hr.framebuffer=null,Nr.framebufferCount--,delete wt[hr.id]}function qt(hr){var pr;bt.bindFramebuffer(xo,hr.framebuffer);var gr=hr.colorAttachments;for(pr=0;pr<gr.length;++pr)A(bc+pr,gr[pr]);for(pr=gr.length;pr<Ge.maxColorAttachments;++pr)bt.framebufferTexture2D(xo,bc+pr,Os,null,0);bt.framebufferTexture2D(xo,xl,Os,null,0),bt.framebufferTexture2D(xo,ml,Os,null,0),bt.framebufferTexture2D(xo,bl,Os,null,0),A(ml,hr.depthAttachment),A(bl,hr.stencilAttachment),A(xl,hr.depthStencilAttachment);var En=bt.checkFramebufferStatus(xo);!bt.isContextLost()&&En!==Lf&&Lt.raise("framebuffer configuration not supported, status = "+lu[En]),bt.bindFramebuffer(xo,zr.next?zr.next.framebuffer:null),zr.cur=zr.next,bt.getError()}function Oe(hr,pr){var gr=new kt;Nr.framebufferCount++;function En(Tn,qn){var Kn;Lt(zr.next!==gr,"can not update framebuffer which is currently in use");var ia=0,ga=0,ua=!0,yi=!0,xa=null,zi=!0,ii="rgba",ka="uint8",Ui=1,Ni=null,So=null,Uo=null,_o=!1;if(typeof Tn=="number")ia=Tn|0,ga=qn|0||ia;else if(!Tn)ia=ga=1;else{Lt.type(Tn,"object","invalid arguments for framebuffer");var Ca=Tn;if("shape"in Ca){var Wo=Ca.shape;Lt(Array.isArray(Wo)&&Wo.length>=2,"invalid shape for framebuffer"),ia=Wo[0],ga=Wo[1]}else"radius"in Ca&&(ia=ga=Ca.radius),"width"in Ca&&(ia=Ca.width),"height"in Ca&&(ga=Ca.height);("color"in Ca||"colors"in Ca)&&(xa=Ca.color||Ca.colors,Array.isArray(xa)&&Lt(xa.length===1||ae.webgl_draw_buffers,"multiple render targets not supported")),xa||("colorCount"in Ca&&(Ui=Ca.colorCount|0,Lt(Ui>0,"invalid color buffer count")),"colorTexture"in Ca&&(zi=!!Ca.colorTexture,ii="rgba4"),"colorType"in Ca&&(ka=Ca.colorType,zi?(Lt(ae.oes_texture_float||!(ka==="float"||ka==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Lt(ae.oes_texture_half_float||!(ka==="half float"||ka==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ka==="half float"||ka==="float16"?(Lt(ae.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),ii="rgba16f"):(ka==="float"||ka==="float32")&&(Lt(ae.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),ii="rgba32f"),Lt.oneOf(ka,wn,"invalid color type")),"colorFormat"in Ca&&(ii=Ca.colorFormat,mn.indexOf(ii)>=0?zi=!0:dn.indexOf(ii)>=0?zi=!1:zi?Lt.oneOf(Ca.colorFormat,mn,"invalid color format for texture"):Lt.oneOf(Ca.colorFormat,dn,"invalid color format for renderbuffer"))),("depthTexture"in Ca||"depthStencilTexture"in Ca)&&(_o=!!(Ca.depthTexture||Ca.depthStencilTexture),Lt(!_o||ae.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ca&&(typeof Ca.depth=="boolean"?ua=Ca.depth:(Ni=Ca.depth,yi=!1)),"stencil"in Ca&&(typeof Ca.stencil=="boolean"?yi=Ca.stencil:(So=Ca.stencil,ua=!1)),"depthStencil"in Ca&&(typeof Ca.depthStencil=="boolean"?ua=yi=Ca.depthStencil:(Uo=Ca.depthStencil,ua=!1,yi=!1))}var ei=null,sa=null,Na=null,Xa=null;if(Array.isArray(xa))ei=xa.map(U);else if(xa)ei=[U(xa)];else for(ei=new Array(Ui),Kn=0;Kn<Ui;++Kn)ei[Kn]=q(ia,ga,zi,ii,ka);Lt(ae.webgl_draw_buffers||ei.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Lt(ei.length<=Ge.maxColorAttachments,"too many color attachments, not supported"),ia=ia||ei[0].width,ga=ga||ei[0].height,Ni?sa=U(Ni):ua&&!yi&&(sa=q(ia,ga,_o,"depth","uint32")),So?Na=U(So):yi&&!ua&&(Na=q(ia,ga,!1,"stencil","uint8")),Uo?Xa=U(Uo):!Ni&&!So&&yi&&ua&&(Xa=q(ia,ga,_o,"depth stencil","depth stencil")),Lt(!!Ni+!!So+!!Uo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Mo=null;for(Kn=0;Kn<ei.length;++Kn)if(v(ei[Kn],ia,ga),Lt(!ei[Kn]||ei[Kn].texture&&uh.indexOf(ei[Kn].texture._texture.format)>=0||ei[Kn].renderbuffer&&_c.indexOf(ei[Kn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Kn+" is invalid"),ei[Kn]&&ei[Kn].texture){var $s=Sc[ei[Kn].texture._texture.format]*$u[ei[Kn].texture._texture.type];Mo===null?Mo=$s:Lt(Mo===$s,"all color attachments much have the same number of bits per pixel.")}return v(sa,ia,ga),Lt(!sa||sa.texture&&sa.texture._texture.format===Sl||sa.renderbuffer&&sa.renderbuffer._renderbuffer.format===_l,"invalid depth attachment for framebuffer object"),v(Na,ia,ga),Lt(!Na||Na.renderbuffer&&Na.renderbuffer._renderbuffer.format===Nf,"invalid stencil attachment for framebuffer object"),v(Xa,ia,ga),Lt(!Xa||Xa.texture&&Xa.texture._texture.format===Mu||Xa.renderbuffer&&Xa.renderbuffer._renderbuffer.format===Mu,"invalid depth-stencil attachment for framebuffer object"),Ht(gr),gr.width=ia,gr.height=ga,gr.colorAttachments=ei,gr.depthAttachment=sa,gr.stencilAttachment=Na,gr.depthStencilAttachment=Xa,En.color=ei.map(st),En.depth=st(sa),En.stencil=st(Na),En.depthStencil=st(Xa),En.width=gr.width,En.height=gr.height,qt(gr),En}function kn(Tn,qn){Lt(zr.next!==gr,"can not resize a framebuffer which is currently in use");var Kn=Math.max(Tn|0,1),ia=Math.max(qn|0||Kn,1);if(Kn===gr.width&&ia===gr.height)return En;for(var ga=gr.colorAttachments,ua=0;ua<ga.length;++ua)ct(ga[ua],Kn,ia);return ct(gr.depthAttachment,Kn,ia),ct(gr.stencilAttachment,Kn,ia),ct(gr.depthStencilAttachment,Kn,ia),gr.width=En.width=Kn,gr.height=En.height=ia,qt(gr),En}return En(hr,pr),R(En,{resize:kn,_reglType:"framebuffer",_framebuffer:gr,destroy:function(){ie(gr),Ht(gr)},use:function(Tn){zr.setFBO({framebuffer:En},Tn)}})}function ir(hr){var pr=Array(6);function gr(kn){var Tn;Lt(pr.indexOf(zr.next)<0,"can not update framebuffer which is currently in use");var qn={color:null},Kn=0,ia=null,ga="rgba",ua="uint8",yi=1;if(typeof kn=="number")Kn=kn|0;else if(!kn)Kn=1;else{Lt.type(kn,"object","invalid arguments for framebuffer");var xa=kn;if("shape"in xa){var zi=xa.shape;Lt(Array.isArray(zi)&&zi.length>=2,"invalid shape for framebuffer"),Lt(zi[0]===zi[1],"cube framebuffer must be square"),Kn=zi[0]}else"radius"in xa&&(Kn=xa.radius|0),"width"in xa?(Kn=xa.width|0,"height"in xa&&Lt(xa.height===Kn,"must be square")):"height"in xa&&(Kn=xa.height|0);("color"in xa||"colors"in xa)&&(ia=xa.color||xa.colors,Array.isArray(ia)&&Lt(ia.length===1||ae.webgl_draw_buffers,"multiple render targets not supported")),ia||("colorCount"in xa&&(yi=xa.colorCount|0,Lt(yi>0,"invalid color buffer count")),"colorType"in xa&&(Lt.oneOf(xa.colorType,wn,"invalid color type"),ua=xa.colorType),"colorFormat"in xa&&(ga=xa.colorFormat,Lt.oneOf(xa.colorFormat,mn,"invalid color format for texture"))),"depth"in xa&&(qn.depth=xa.depth),"stencil"in xa&&(qn.stencil=xa.stencil),"depthStencil"in xa&&(qn.depthStencil=xa.depthStencil)}var ii;if(ia)if(Array.isArray(ia))for(ii=[],Tn=0;Tn<ia.length;++Tn)ii[Tn]=ia[Tn];else ii=[ia];else{ii=Array(yi);var ka={radius:Kn,format:ga,type:ua};for(Tn=0;Tn<yi;++Tn)ii[Tn]=Lr.createCube(ka)}for(qn.color=Array(ii.length),Tn=0;Tn<ii.length;++Tn){var Ui=ii[Tn];Lt(typeof Ui=="function"&&Ui._reglType==="textureCube","invalid cube map"),Kn=Kn||Ui.width,Lt(Ui.width===Kn&&Ui.height===Kn,"invalid cube map shape"),qn.color[Tn]={target:Of,data:ii[Tn]}}for(Tn=0;Tn<6;++Tn){for(var Ni=0;Ni<ii.length;++Ni)qn.color[Ni].target=Of+Tn;Tn>0&&(qn.depth=pr[0].depth,qn.stencil=pr[0].stencil,qn.depthStencil=pr[0].depthStencil),pr[Tn]?pr[Tn](qn):pr[Tn]=Oe(qn)}return R(gr,{width:Kn,height:Kn,color:ii})}function En(kn){var Tn,qn=kn|0;if(Lt(qn>0&&qn<=Ge.maxCubeMapSize,"invalid radius for cube fbo"),qn===gr.width)return gr;var Kn=gr.color;for(Tn=0;Tn<Kn.length;++Tn)Kn[Tn].resize(qn);for(Tn=0;Tn<6;++Tn)pr[Tn].resize(qn);return gr.width=gr.height=qn,gr}return gr(hr),R(gr,{faces:pr,resize:En,_reglType:"framebufferCube",destroy:function(){pr.forEach(function(kn){kn.destroy()})}})}function Yr(){zr.cur=null,zr.next=null,zr.dirty=!0,ti(wt).forEach(function(hr){hr.framebuffer=bt.createFramebuffer(),qt(hr)})}return R(zr,{getFramebuffer:function(hr){if(typeof hr=="function"&&hr._reglType==="framebuffer"){var pr=hr._framebuffer;if(pr instanceof kt)return pr}return null},create:Oe,createCube:ir,clear:function(){ti(wt).forEach(ie)},restore:Yr})}var Mc=5126,tf=34962;function Cc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Mc,this.offset=0,this.stride=0,this.divisor=0}function Ml(bt,ae,Ge,Lr,Wr){for(var Nr=Ge.maxAttributes,zr=new Array(Nr),mn=0;mn<Nr;++mn)zr[mn]=new Cc;var dn=0,wn={},xn={Record:Cc,scope:{},state:zr,currentVAO:null,targetVAO:null,restore:v()?wt:function(){},createVAO:kt,getVAO:U,destroyBuffer:In,setVAO:v()?q:st,clear:v()?ct:function(){}};function In(Ht){for(var ie=0;ie<zr.length;++ie){var qt=zr[ie];qt.buffer===Ht&&(bt.disableVertexAttribArray(ie),qt.buffer=null)}}function v(){return ae.oes_vertex_array_object}function A(){return ae.angle_instanced_arrays}function U(Ht){return typeof Ht=="function"&&Ht._vao?Ht._vao:null}function q(Ht){if(Ht!==xn.currentVAO){var ie=v();Ht?ie.bindVertexArrayOES(Ht.vao):ie.bindVertexArrayOES(null),xn.currentVAO=Ht}}function st(Ht){if(Ht!==xn.currentVAO){if(Ht)Ht.bindAttrs();else for(var ie=A(),qt=0;qt<zr.length;++qt){var Oe=zr[qt];Oe.buffer?(bt.enableVertexAttribArray(qt),bt.vertexAttribPointer(qt,Oe.size,Oe.type,Oe.normalized,Oe.stride,Oe.offfset),ie&&Oe.divisor&&ie.vertexAttribDivisorANGLE(qt,Oe.divisor)):(bt.disableVertexAttribArray(qt),bt.vertexAttrib4f(qt,Oe.x,Oe.y,Oe.z,Oe.w))}xn.currentVAO=Ht}}function ct(){ti(wn).forEach(function(Ht){Ht.destroy()})}function mt(){this.id=++dn,this.attributes=[];var Ht=v();Ht?this.vao=Ht.createVertexArrayOES():this.vao=null,wn[this.id]=this,this.buffers=[]}mt.prototype.bindAttrs=function(){for(var Ht=A(),ie=this.attributes,qt=0;qt<ie.length;++qt){var Oe=ie[qt];Oe.buffer?(bt.enableVertexAttribArray(qt),bt.bindBuffer(tf,Oe.buffer.buffer),bt.vertexAttribPointer(qt,Oe.size,Oe.type,Oe.normalized,Oe.stride,Oe.offset),Ht&&Oe.divisor&&Ht.vertexAttribDivisorANGLE(qt,Oe.divisor)):(bt.disableVertexAttribArray(qt),bt.vertexAttrib4f(qt,Oe.x,Oe.y,Oe.z,Oe.w))}for(var ir=ie.length;ir<Nr;++ir)bt.disableVertexAttribArray(ir)},mt.prototype.refresh=function(){var Ht=v();Ht&&(Ht.bindVertexArrayOES(this.vao),this.bindAttrs(),xn.currentVAO=this)},mt.prototype.destroy=function(){if(this.vao){var Ht=v();this===xn.currentVAO&&(xn.currentVAO=null,Ht.bindVertexArrayOES(null)),Ht.deleteVertexArrayOES(this.vao),this.vao=null}wn[this.id]&&(delete wn[this.id],Lr.vaoCount-=1)};function wt(){var Ht=v();Ht&&ti(wn).forEach(function(ie){ie.refresh()})}function kt(Ht){var ie=new mt;Lr.vaoCount+=1;function qt(Oe){Lt(Array.isArray(Oe),"arguments to vertex array constructor must be an array"),Lt(Oe.length<Nr,"too many attributes"),Lt(Oe.length>0,"must specify at least one attribute");var ir={},Yr=ie.attributes;Yr.length=Oe.length;for(var hr=0;hr<Oe.length;++hr){var pr=Oe[hr],gr=Yr[hr]=new Cc,En=pr.data||pr;if(Array.isArray(En)||G(En)||vi(En)){var kn;ie.buffers[hr]&&(kn=ie.buffers[hr],G(En)&&kn._buffer.byteLength>=En.byteLength?kn.subdata(En):(kn.destroy(),ie.buffers[hr]=null)),ie.buffers[hr]||(kn=ie.buffers[hr]=Wr.create(pr,tf,!1,!0)),gr.buffer=Wr.getBuffer(kn),gr.size=gr.buffer.dimension|0,gr.normalized=!1,gr.type=gr.buffer.dtype,gr.offset=0,gr.stride=0,gr.divisor=0,gr.state=1,ir[hr]=1}else Wr.getBuffer(pr)?(gr.buffer=Wr.getBuffer(pr),gr.size=gr.buffer.dimension|0,gr.normalized=!1,gr.type=gr.buffer.dtype,gr.offset=0,gr.stride=0,gr.divisor=0,gr.state=1):Wr.getBuffer(pr.buffer)?(gr.buffer=Wr.getBuffer(pr.buffer),gr.size=(+pr.size||gr.buffer.dimension)|0,gr.normalized=!!pr.normalized||!1,"type"in pr?(Lt.parameter(pr.type,Yi,"invalid buffer type"),gr.type=Yi[pr.type]):gr.type=gr.buffer.dtype,gr.offset=(pr.offset||0)|0,gr.stride=(pr.stride||0)|0,gr.divisor=(pr.divisor||0)|0,gr.state=1,Lt(gr.size>=1&&gr.size<=4,"size must be between 1 and 4"),Lt(gr.offset>=0,"invalid offset"),Lt(gr.stride>=0&&gr.stride<=255,"stride must be between 0 and 255"),Lt(gr.divisor>=0,"divisor must be positive"),Lt(!gr.divisor||!!ae.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in pr?(Lt(hr>0,"first attribute must not be a constant"),gr.x=+pr.x||0,gr.y=+pr.y||0,gr.z=+pr.z||0,gr.w=+pr.w||0,gr.state=2):Lt(!1,"invalid attribute spec for location "+hr)}for(var Tn=0;Tn<ie.buffers.length;++Tn)!ir[Tn]&&ie.buffers[Tn]&&(ie.buffers[Tn].destroy(),ie.buffers[Tn]=null);return ie.refresh(),qt}return qt.destroy=function(){for(var Oe=0;Oe<ie.buffers.length;++Oe)ie.buffers[Oe]&&ie.buffers[Oe].destroy();ie.buffers.length=0,ie.destroy()},qt._vao=ie,qt._reglType="vao",qt(Ht)}return xn}var kf=35632,ch=35633,Ac=35718,Rf=35721;function Cl(bt,ae,Ge,Lr){var Wr={},Nr={};function zr(q,st,ct,mt){this.name=q,this.id=st,this.location=ct,this.info=mt}function mn(q,st){for(var ct=0;ct<q.length;++ct)if(q[ct].id===st.id){q[ct].location=st.location;return}q.push(st)}function dn(q,st,ct){var mt=q===kf?Wr:Nr,wt=mt[st];if(!wt){var kt=ae.str(st);wt=bt.createShader(q),bt.shaderSource(wt,kt),bt.compileShader(wt),Lt.shaderError(bt,wt,kt,q,ct),mt[st]=wt}return wt}var wn={},xn=[],In=0;function v(q,st){this.id=In++,this.fragId=q,this.vertId=st,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Lr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function A(q,st,ct){var mt,wt,kt=dn(kf,q.fragId),Ht=dn(ch,q.vertId),ie=q.program=bt.createProgram();if(bt.attachShader(ie,kt),bt.attachShader(ie,Ht),ct)for(mt=0;mt<ct.length;++mt){var qt=ct[mt];bt.bindAttribLocation(ie,qt[0],qt[1])}bt.linkProgram(ie),Lt.linkError(bt,ie,ae.str(q.fragId),ae.str(q.vertId),st);var Oe=bt.getProgramParameter(ie,Ac);Lr.profile&&(q.stats.uniformsCount=Oe);var ir=q.uniforms;for(mt=0;mt<Oe;++mt)if(wt=bt.getActiveUniform(ie,mt),wt)if(wt.size>1)for(var Yr=0;Yr<wt.size;++Yr){var hr=wt.name.replace("[0]","["+Yr+"]");mn(ir,new zr(hr,ae.id(hr),bt.getUniformLocation(ie,hr),wt))}else mn(ir,new zr(wt.name,ae.id(wt.name),bt.getUniformLocation(ie,wt.name),wt));var pr=bt.getProgramParameter(ie,Rf);Lr.profile&&(q.stats.attributesCount=pr);var gr=q.attributes;for(mt=0;mt<pr;++mt)wt=bt.getActiveAttrib(ie,mt),wt&&mn(gr,new zr(wt.name,ae.id(wt.name),bt.getAttribLocation(ie,wt.name),wt))}Lr.profile&&(Ge.getMaxUniformsCount=function(){var q=0;return xn.forEach(function(st){st.stats.uniformsCount>q&&(q=st.stats.uniformsCount)}),q},Ge.getMaxAttributesCount=function(){var q=0;return xn.forEach(function(st){st.stats.attributesCount>q&&(q=st.stats.attributesCount)}),q});function U(){Wr={},Nr={};for(var q=0;q<xn.length;++q)A(xn[q],null,xn[q].attributes.map(function(st){return[st.location,st.name]}))}return{clear:function(){var q=bt.deleteShader.bind(bt);ti(Wr).forEach(q),Wr={},ti(Nr).forEach(q),Nr={},xn.forEach(function(st){bt.deleteProgram(st.program)}),xn.length=0,wn={},Ge.shaderCount=0},program:function(q,st,ct,mt){Lt.command(q>=0,"missing vertex shader",ct),Lt.command(st>=0,"missing fragment shader",ct);var wt=wn[st];wt||(wt=wn[st]={});var kt=wt[q];if(kt&&(kt.refCount++,!mt))return kt;var Ht=new v(st,q);return Ge.shaderCount++,A(Ht,ct,mt),kt||(wt[q]=Ht),xn.push(Ht),R(Ht,{destroy:function(){if(Ht.refCount--,Ht.refCount<=0){bt.deleteProgram(Ht.program);var ie=xn.indexOf(Ht);xn.splice(ie,1),Ge.shaderCount--}wt[Ht.vertId].refCount<=0&&(bt.deleteShader(Nr[Ht.vertId]),delete Nr[Ht.vertId],delete wn[Ht.fragId][Ht.vertId]),Object.keys(wn[Ht.fragId]).length||(bt.deleteShader(Wr[Ht.fragId]),delete Wr[Ht.fragId],delete wn[Ht.fragId])}})},restore:U,shader:dn,frag:-1,vert:-1}}var ef=6408,Ls=5121,Cu=3333,Ds=5126;function rf(bt,ae,Ge,Lr,Wr,Nr,zr){function mn(xn){var In;ae.next===null?(Lt(Wr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),In=Ls):(Lt(ae.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),In=ae.next.colorAttachments[0].texture._texture.type,Nr.oes_texture_float?(Lt(In===Ls||In===Ds,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),In===Ds&&Lt(zr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Lt(In===Ls,"Reading from a framebuffer is only allowed for the type 'uint8'"));var v=0,A=0,U=Lr.framebufferWidth,q=Lr.framebufferHeight,st=null;G(xn)?st=xn:xn&&(Lt.type(xn,"object","invalid arguments to regl.read()"),v=xn.x|0,A=xn.y|0,Lt(v>=0&&v<Lr.framebufferWidth,"invalid x offset for regl.read"),Lt(A>=0&&A<Lr.framebufferHeight,"invalid y offset for regl.read"),U=(xn.width||Lr.framebufferWidth-v)|0,q=(xn.height||Lr.framebufferHeight-A)|0,st=xn.data||null),st&&(In===Ls?Lt(st instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):In===Ds&&Lt(st instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Lt(U>0&&U+v<=Lr.framebufferWidth,"invalid width for read pixels"),Lt(q>0&&q+A<=Lr.framebufferHeight,"invalid height for read pixels"),Ge();var ct=U*q*4;return st||(In===Ls?st=new Uint8Array(ct):In===Ds&&(st=st||new Float32Array(ct))),Lt.isTypedArray(st,"data buffer for regl.read() must be a typedarray"),Lt(st.byteLength>=ct,"data buffer for regl.read() too small"),bt.pixelStorei(Cu,4),bt.readPixels(v,A,U,q,ef,In,st),st}function dn(xn){var In;return ae.setFBO({framebuffer:xn.framebuffer},function(){In=mn(xn)}),In}function wn(xn){return!xn||!("framebuffer"in xn)?mn(xn):dn(xn)}return wn}function Qo(bt){return Array.prototype.slice.call(bt)}function Au(bt){return Qo(bt).join("")}function Al(){var bt=0,ae=[],Ge=[];function Lr(In){for(var v=0;v<Ge.length;++v)if(Ge[v]===In)return ae[v];var A="g"+bt++;return ae.push(A),Ge.push(In),A}function Wr(){var In=[];function v(){In.push.apply(In,Qo(arguments))}var A=[];function U(){var q="v"+bt++;return A.push(q),arguments.length>0&&(In.push(q,"="),In.push.apply(In,Qo(arguments)),In.push(";")),q}return R(v,{def:U,toString:function(){return Au([A.length>0?"var "+A.join(",")+";":"",Au(In)])}})}function Nr(){var In=Wr(),v=Wr(),A=In.toString,U=v.toString;function q(st,ct){v(st,ct,"=",In.def(st,ct),";")}return R(function(){In.apply(In,Qo(arguments))},{def:In.def,entry:In,exit:v,save:q,set:function(st,ct,mt){q(st,ct),In(st,ct,"=",mt,";")},toString:function(){return A()+U()}})}function zr(){var In=Au(arguments),v=Nr(),A=Nr(),U=v.toString,q=A.toString;return R(v,{then:function(){return v.apply(v,Qo(arguments)),this},else:function(){return A.apply(A,Qo(arguments)),this},toString:function(){var st=q();return st&&(st="else{"+st+"}"),Au(["if(",In,"){",U(),"}",st])}})}var mn=Wr(),dn={};function wn(In,v){var A=[];function U(){var wt="a"+A.length;return A.push(wt),wt}v=v||0;for(var q=0;q<v;++q)U();var st=Nr(),ct=st.toString,mt=dn[In]=R(st,{arg:U,toString:function(){return Au(["function(",A.join(),"){",ct(),"}"])}});return mt}function xn(){var In=['"use strict";',mn,"return {"];Object.keys(dn).forEach(function(U){In.push('"',U,'":',dn[U].toString(),",")}),In.push("}");var v=Au(In).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),A=Function.apply(null,ae.concat(v));return A.apply(null,Ge)}return{global:mn,link:Lr,block:Wr,proc:wn,scope:Nr,cond:zr,compile:xn}}var Tu="xyzw".split(""),Tl=5121,Iu=1,Tc=2,Ic=0,Bf=1,Ff=2,Oc=3,Gf=4,Lc=5,Ou=6,Dc="dither",nf="blend.enable",Il="blend.color",Lu="blend.equation",Vo="blend.func",Nc="depth.enable",Ol="depth.func",Pc="depth.range",Ws="depth.mask",Ns="colorMask",Ye="cull.enable",kc="cull.face",hu="frontFace",zf="lineWidth",fs="polygonOffset.enable",Uf="polygonOffset.offset",af="sample.alpha",Wf="sample.enable",Du="sample.coverage",jf="stencil.enable",Rc="stencil.mask",Nu="stencil.func",Eo="stencil.opFront",Pu="stencil.opBack",Ll="scissor.enable",of="scissor.box",ys="viewport",du="profile",js="framebuffer",vu="vert",sf="frag",Xs="elements",Ys="primitive",gu="count",uf="offset",Xf="instances",pu="vao",Bc="Width",ff="Height",Vs=js+Bc,cs=js+ff,Fc=ys+Bc,Dl=ys+ff,yu="drawingBuffer",Gc=yu+Bc,zc=yu+ff,Nl=[Vo,Lu,Nu,Eo,Pu,Du,ys,of,Uf],Hs=34962,Pl=34963,kl=35632,Rl=35633,Yf=3553,Bl=34067,lh=2884,Uc=3042,Wc=3024,Fl=2960,Gl=2929,zl=3089,jc=32823,Ps=32926,Xc=32928,cf=5126,lf=35664,Vf=35665,Hf=35666,Zf=5124,ku=35667,Kf=35668,hf=35669,Yc=35670,$f=35671,Qf=35672,qf=35673,df=35674,vf=35675,ks=35676,gf=35678,_s=35680,Ul=4,mu=1028,bu=1029,Wl=2304,pf=2305,Ru=32775,Vc=32776,Hc=519,Zs=7680,Zc=0,jl=1,Kc=32774,hh=513,dh=36160,vh=36064,Go={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},$c=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Bu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ks={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Xl={frag:kl,vert:Rl},Qc={cw:Wl,ccw:pf};function Jf(bt){return Array.isArray(bt)||G(bt)||vi(bt)}function qc(bt){return bt.sort(function(ae,Ge){return ae===ys?-1:Ge===ys?1:ae<Ge?-1:1})}function qo(bt,ae,Ge,Lr){this.thisDep=bt,this.contextDep=ae,this.propDep=Ge,this.append=Lr}function Rs(bt){return bt&&!(bt.thisDep||bt.contextDep||bt.propDep)}function wo(bt){return new qo(!1,!1,!1,bt)}function zo(bt,ae){var Ge=bt.type;if(Ge===Ic){var Lr=bt.data.length;return new qo(!0,Lr>=1,Lr>=2,ae)}else if(Ge===Gf){var Wr=bt.data;return new qo(Wr.thisDep,Wr.contextDep,Wr.propDep,ae)}else{if(Ge===Lc)return new qo(!1,!1,!1,ae);if(Ge===Ou){for(var Nr=!1,zr=!1,mn=!1,dn=0;dn<bt.data.length;++dn){var wn=bt.data[dn];if(wn.type===Bf)mn=!0;else if(wn.type===Ff)zr=!0;else if(wn.type===Oc)Nr=!0;else if(wn.type===Ic){Nr=!0;var xn=wn.data;xn>=1&&(zr=!0),xn>=2&&(mn=!0)}else wn.type===Gf&&(Nr=Nr||wn.data.thisDep,zr=zr||wn.data.contextDep,mn=mn||wn.data.propDep)}return new qo(Nr,zr,mn,ae)}else return new qo(Ge===Oc,Ge===Ff,Ge===Bf,ae)}}var tc=new qo(!1,!1,!1,function(){});function gh(bt,ae,Ge,Lr,Wr,Nr,zr,mn,dn,wn,xn,In,v,A,U){var q=wn.Record,st={add:32774,subtract:32778,"reverse subtract":32779};Ge.ext_blend_minmax&&(st.min=Ru,st.max=Vc);var ct=Ge.angle_instanced_arrays,mt=Ge.webgl_draw_buffers,wt={dirty:!0,profile:U.profile},kt={},Ht=[],ie={},qt={};function Oe(be){return be.replace(".","_")}function ir(be,Jt,He){var mr=Oe(be);Ht.push(be),kt[mr]=wt[mr]=!!He,ie[mr]=Jt}function Yr(be,Jt,He){var mr=Oe(be);Ht.push(be),Array.isArray(He)?(wt[mr]=He.slice(),kt[mr]=He.slice()):wt[mr]=kt[mr]=He,qt[mr]=Jt}ir(Dc,Wc),ir(nf,Uc),Yr(Il,"blendColor",[0,0,0,0]),Yr(Lu,"blendEquationSeparate",[Kc,Kc]),Yr(Vo,"blendFuncSeparate",[jl,Zc,jl,Zc]),ir(Nc,Gl,!0),Yr(Ol,"depthFunc",hh),Yr(Pc,"depthRange",[0,1]),Yr(Ws,"depthMask",!0),Yr(Ns,Ns,[!0,!0,!0,!0]),ir(Ye,lh),Yr(kc,"cullFace",bu),Yr(hu,hu,pf),Yr(zf,zf,1),ir(fs,jc),Yr(Uf,"polygonOffset",[0,0]),ir(af,Ps),ir(Wf,Xc),Yr(Du,"sampleCoverage",[1,!1]),ir(jf,Fl),Yr(Rc,"stencilMask",-1),Yr(Nu,"stencilFunc",[Hc,0,-1]),Yr(Eo,"stencilOpSeparate",[mu,Zs,Zs,Zs]),Yr(Pu,"stencilOpSeparate",[bu,Zs,Zs,Zs]),ir(Ll,zl),Yr(of,"scissor",[0,0,bt.drawingBufferWidth,bt.drawingBufferHeight]),Yr(ys,ys,[0,0,bt.drawingBufferWidth,bt.drawingBufferHeight]);var hr={gl:bt,context:v,strings:ae,next:kt,current:wt,draw:In,elements:Nr,buffer:Wr,shader:xn,attributes:wn.state,vao:wn,uniforms:dn,framebuffer:mn,extensions:Ge,timer:A,isBufferArgs:Jf},pr={primTypes:Bi,compareFuncs:Bu,blendFuncs:Go,blendEquations:st,stencilOps:Ks,glTypes:Yi,orientationType:Qc};Lt.optional(function(){hr.isArrayLike=La}),mt&&(pr.backBuffer=[bu],pr.drawBuffer=Fr(Lr.maxDrawbuffers,function(be){return be===0?[0]:Fr(be,function(Jt){return vh+Jt})}));var gr=0;function En(){var be=Al(),Jt=be.link,He=be.global;be.id=gr++,be.batchId="0";var mr=Jt(hr),wr=be.shared={props:"a0"};Object.keys(hr).forEach(function(Ve){wr[Ve]=He.def(mr,".",Ve)}),Lt.optional(function(){be.CHECK=Jt(Lt),be.commandStr=Lt.guessCommand(),be.command=Jt(be.commandStr),be.assert=function(Ve,ge,dr){Ve("if(!(",ge,"))",this.CHECK,".commandRaise(",Jt(dr),",",this.command,");")},pr.invalidBlendCombinations=$c});var Je=be.next={},Ze=be.current={};Object.keys(qt).forEach(function(Ve){Array.isArray(wt[Ve])&&(Je[Ve]=He.def(wr.next,".",Ve),Ze[Ve]=He.def(wr.current,".",Ve))});var cr=be.constants={};Object.keys(pr).forEach(function(Ve){cr[Ve]=He.def(JSON.stringify(pr[Ve]))}),be.invoke=function(Ve,ge){switch(ge.type){case Ic:var dr=["this",wr.context,wr.props,be.batchId];return Ve.def(Jt(ge.data),".call(",dr.slice(0,Math.max(ge.data.length+1,4)),")");case Bf:return Ve.def(wr.props,ge.data);case Ff:return Ve.def(wr.context,ge.data);case Oc:return Ve.def("this",ge.data);case Gf:return ge.data.append(be,Ve),ge.data.ref;case Lc:return ge.data.toString();case Ou:return ge.data.map(function(Cr){return be.invoke(Ve,Cr)})}},be.attribCache={};var xe={};return be.scopeAttrib=function(Ve){var ge=ae.id(Ve);if(ge in xe)return xe[ge];var dr=wn.scope[ge];dr||(dr=wn.scope[ge]=new q);var Cr=xe[ge]=Jt(dr);return Cr},be}function kn(be){var Jt=be.static,He=be.dynamic,mr;if(du in Jt){var wr=!!Jt[du];mr=wo(function(Ze,cr){return wr}),mr.enable=wr}else if(du in He){var Je=He[du];mr=zo(Je,function(Ze,cr){return Ze.invoke(cr,Je)})}return mr}function Tn(be,Jt){var He=be.static,mr=be.dynamic;if(js in He){var wr=He[js];return wr?(wr=mn.getFramebuffer(wr),Lt.command(wr,"invalid framebuffer object"),wo(function(Ze,cr){var xe=Ze.link(wr),Ve=Ze.shared;cr.set(Ve.framebuffer,".next",xe);var ge=Ve.context;return cr.set(ge,"."+Vs,xe+".width"),cr.set(ge,"."+cs,xe+".height"),xe})):wo(function(Ze,cr){var xe=Ze.shared;cr.set(xe.framebuffer,".next","null");var Ve=xe.context;return cr.set(Ve,"."+Vs,Ve+"."+Gc),cr.set(Ve,"."+cs,Ve+"."+zc),"null"})}else if(js in mr){var Je=mr[js];return zo(Je,function(Ze,cr){var xe=Ze.invoke(cr,Je),Ve=Ze.shared,ge=Ve.framebuffer,dr=cr.def(ge,".getFramebuffer(",xe,")");Lt.optional(function(){Ze.assert(cr,"!"+xe+"||"+dr,"invalid framebuffer object")}),cr.set(ge,".next",dr);var Cr=Ve.context;return cr.set(Cr,"."+Vs,dr+"?"+dr+".width:"+Cr+"."+Gc),cr.set(Cr,"."+cs,dr+"?"+dr+".height:"+Cr+"."+zc),dr})}else return null}function qn(be,Jt,He){var mr=be.static,wr=be.dynamic;function Je(xe){if(xe in mr){var Ve=mr[xe];Lt.commandType(Ve,"object","invalid "+xe,He.commandStr);var ge=!0,dr=Ve.x|0,Cr=Ve.y|0,Jr,rn;return"width"in Ve?(Jr=Ve.width|0,Lt.command(Jr>=0,"invalid "+xe,He.commandStr)):ge=!1,"height"in Ve?(rn=Ve.height|0,Lt.command(rn>=0,"invalid "+xe,He.commandStr)):ge=!1,new qo(!ge&&Jt&&Jt.thisDep,!ge&&Jt&&Jt.contextDep,!ge&&Jt&&Jt.propDep,function(ta,Ta){var $n=ta.shared.context,ra=Jr;"width"in Ve||(ra=Ta.def($n,".",Vs,"-",dr));var ya=rn;return"height"in Ve||(ya=Ta.def($n,".",cs,"-",Cr)),[dr,Cr,ra,ya]})}else if(xe in wr){var Hr=wr[xe],_n=zo(Hr,function(ta,Ta){var $n=ta.invoke(Ta,Hr);Lt.optional(function(){ta.assert(Ta,$n+"&&typeof "+$n+'==="object"',"invalid "+xe)});var ra=ta.shared.context,ya=Ta.def($n,".x|0"),Ka=Ta.def($n,".y|0"),io=Ta.def('"width" in ',$n,"?",$n,".width|0:","(",ra,".",Vs,"-",ya,")"),rs=Ta.def('"height" in ',$n,"?",$n,".height|0:","(",ra,".",cs,"-",Ka,")");return Lt.optional(function(){ta.assert(Ta,io+">=0&&"+rs+">=0","invalid "+xe)}),[ya,Ka,io,rs]});return Jt&&(_n.thisDep=_n.thisDep||Jt.thisDep,_n.contextDep=_n.contextDep||Jt.contextDep,_n.propDep=_n.propDep||Jt.propDep),_n}else return Jt?new qo(Jt.thisDep,Jt.contextDep,Jt.propDep,function(ta,Ta){var $n=ta.shared.context;return[0,0,Ta.def($n,".",Vs),Ta.def($n,".",cs)]}):null}var Ze=Je(ys);if(Ze){var cr=Ze;Ze=new qo(Ze.thisDep,Ze.contextDep,Ze.propDep,function(xe,Ve){var ge=cr.append(xe,Ve),dr=xe.shared.context;return Ve.set(dr,"."+Fc,ge[2]),Ve.set(dr,"."+Dl,ge[3]),ge})}return{viewport:Ze,scissor_box:Je(of)}}function Kn(be,Jt){var He=be.static,mr=typeof He[sf]=="string"&&typeof He[vu]=="string";if(mr){if(Object.keys(Jt.dynamic).length>0)return null;var wr=Jt.static,Je=Object.keys(wr);if(Je.length>0&&typeof wr[Je[0]]=="number"){for(var Ze=[],cr=0;cr<Je.length;++cr)Lt(typeof wr[Je[cr]]=="number","must specify all vertex attribute locations when using vaos"),Ze.push([wr[Je[cr]]|0,Je[cr]]);return Ze}}return null}function ia(be,Jt,He){var mr=be.static,wr=be.dynamic;function Je(ge){if(ge in mr){var dr=ae.id(mr[ge]);Lt.optional(function(){xn.shader(Xl[ge],dr,Lt.guessCommand())});var Cr=wo(function(){return dr});return Cr.id=dr,Cr}else if(ge in wr){var Jr=wr[ge];return zo(Jr,function(rn,Hr){var _n=rn.invoke(Hr,Jr),ta=Hr.def(rn.shared.strings,".id(",_n,")");return Lt.optional(function(){Hr(rn.shared.shader,".shader(",Xl[ge],",",ta,",",rn.command,");")}),ta})}return null}var Ze=Je(sf),cr=Je(vu),xe=null,Ve;return Rs(Ze)&&Rs(cr)?(xe=xn.program(cr.id,Ze.id,null,He),Ve=wo(function(ge,dr){return ge.link(xe)})):Ve=new qo(Ze&&Ze.thisDep||cr&&cr.thisDep,Ze&&Ze.contextDep||cr&&cr.contextDep,Ze&&Ze.propDep||cr&&cr.propDep,function(ge,dr){var Cr=ge.shared.shader,Jr;Ze?Jr=Ze.append(ge,dr):Jr=dr.def(Cr,".",sf);var rn;cr?rn=cr.append(ge,dr):rn=dr.def(Cr,".",vu);var Hr=Cr+".program("+rn+","+Jr;return Lt.optional(function(){Hr+=","+ge.command}),dr.def(Hr+")")}),{frag:Ze,vert:cr,progVar:Ve,program:xe}}function ga(be,Jt){var He=be.static,mr=be.dynamic;function wr(){if(Xs in He){var ge=He[Xs];Jf(ge)?ge=Nr.getElements(Nr.create(ge,!0)):ge&&(ge=Nr.getElements(ge),Lt.command(ge,"invalid elements",Jt.commandStr));var dr=wo(function(Jr,rn){if(ge){var Hr=Jr.link(ge);return Jr.ELEMENTS=Hr,Hr}return Jr.ELEMENTS=null,null});return dr.value=ge,dr}else if(Xs in mr){var Cr=mr[Xs];return zo(Cr,function(Jr,rn){var Hr=Jr.shared,_n=Hr.isBufferArgs,ta=Hr.elements,Ta=Jr.invoke(rn,Cr),$n=rn.def("null"),ra=rn.def(_n,"(",Ta,")"),ya=Jr.cond(ra).then($n,"=",ta,".createStream(",Ta,");").else($n,"=",ta,".getElements(",Ta,");");return Lt.optional(function(){Jr.assert(ya.else,"!"+Ta+"||"+$n,"invalid elements")}),rn.entry(ya),rn.exit(Jr.cond(ra).then(ta,".destroyStream(",$n,");")),Jr.ELEMENTS=$n,$n})}return null}var Je=wr();function Ze(){if(Ys in He){var ge=He[Ys];return Lt.commandParameter(ge,Bi,"invalid primitve",Jt.commandStr),wo(function(Cr,Jr){return Bi[ge]})}else if(Ys in mr){var dr=mr[Ys];return zo(dr,function(Cr,Jr){var rn=Cr.constants.primTypes,Hr=Cr.invoke(Jr,dr);return Lt.optional(function(){Cr.assert(Jr,Hr+" in "+rn,"invalid primitive, must be one of "+Object.keys(Bi))}),Jr.def(rn,"[",Hr,"]")})}else if(Je)return Rs(Je)?Je.value?wo(function(Cr,Jr){return Jr.def(Cr.ELEMENTS,".primType")}):wo(function(){return Ul}):new qo(Je.thisDep,Je.contextDep,Je.propDep,function(Cr,Jr){var rn=Cr.ELEMENTS;return Jr.def(rn,"?",rn,".primType:",Ul)});return null}function cr(ge,dr){if(ge in He){var Cr=He[ge]|0;return Lt.command(!dr||Cr>=0,"invalid "+ge,Jt.commandStr),wo(function(rn,Hr){return dr&&(rn.OFFSET=Cr),Cr})}else if(ge in mr){var Jr=mr[ge];return zo(Jr,function(rn,Hr){var _n=rn.invoke(Hr,Jr);return dr&&(rn.OFFSET=_n,Lt.optional(function(){rn.assert(Hr,_n+">=0","invalid "+ge)})),_n})}else if(dr&&Je)return wo(function(rn,Hr){return rn.OFFSET="0",0});return null}var xe=cr(uf,!0);function Ve(){if(gu in He){var ge=He[gu]|0;return Lt.command(typeof ge=="number"&&ge>=0,"invalid vertex count",Jt.commandStr),wo(function(){return ge})}else if(gu in mr){var dr=mr[gu];return zo(dr,function(rn,Hr){var _n=rn.invoke(Hr,dr);return Lt.optional(function(){rn.assert(Hr,"typeof "+_n+'==="number"&&'+_n+">=0&&"+_n+"===("+_n+"|0)","invalid vertex count")}),_n})}else if(Je)if(Rs(Je)){if(Je)return xe?new qo(xe.thisDep,xe.contextDep,xe.propDep,function(rn,Hr){var _n=Hr.def(rn.ELEMENTS,".vertCount-",rn.OFFSET);return Lt.optional(function(){rn.assert(Hr,_n+">=0","invalid vertex offset/element buffer too small")}),_n}):wo(function(rn,Hr){return Hr.def(rn.ELEMENTS,".vertCount")});var Cr=wo(function(){return-1});return Lt.optional(function(){Cr.MISSING=!0}),Cr}else{var Jr=new qo(Je.thisDep||xe.thisDep,Je.contextDep||xe.contextDep,Je.propDep||xe.propDep,function(rn,Hr){var _n=rn.ELEMENTS;return rn.OFFSET?Hr.def(_n,"?",_n,".vertCount-",rn.OFFSET,":-1"):Hr.def(_n,"?",_n,".vertCount:-1")});return Lt.optional(function(){Jr.DYNAMIC=!0}),Jr}return null}return{elements:Je,primitive:Ze(),count:Ve(),instances:cr(Xf,!1),offset:xe}}function ua(be,Jt){var He=be.static,mr=be.dynamic,wr={};return Ht.forEach(function(Je){var Ze=Oe(Je);function cr(xe,Ve){if(Je in He){var ge=xe(He[Je]);wr[Ze]=wo(function(){return ge})}else if(Je in mr){var dr=mr[Je];wr[Ze]=zo(dr,function(Cr,Jr){return Ve(Cr,Jr,Cr.invoke(Jr,dr))})}}switch(Je){case Ye:case nf:case Dc:case jf:case Nc:case Ll:case fs:case af:case Wf:case Ws:return cr(function(xe){return Lt.commandType(xe,"boolean",Je,Jt.commandStr),xe},function(xe,Ve,ge){return Lt.optional(function(){xe.assert(Ve,"typeof "+ge+'==="boolean"',"invalid flag "+Je,xe.commandStr)}),ge});case Ol:return cr(function(xe){return Lt.commandParameter(xe,Bu,"invalid "+Je,Jt.commandStr),Bu[xe]},function(xe,Ve,ge){var dr=xe.constants.compareFuncs;return Lt.optional(function(){xe.assert(Ve,ge+" in "+dr,"invalid "+Je+", must be one of "+Object.keys(Bu))}),Ve.def(dr,"[",ge,"]")});case Pc:return cr(function(xe){return Lt.command(La(xe)&&xe.length===2&&typeof xe[0]=="number"&&typeof xe[1]=="number"&&xe[0]<=xe[1],"depth range is 2d array",Jt.commandStr),xe},function(xe,Ve,ge){Lt.optional(function(){xe.assert(Ve,xe.shared.isArrayLike+"("+ge+")&&"+ge+".length===2&&typeof "+ge+'[0]==="number"&&typeof '+ge+'[1]==="number"&&'+ge+"[0]<="+ge+"[1]","depth range must be a 2d array")});var dr=Ve.def("+",ge,"[0]"),Cr=Ve.def("+",ge,"[1]");return[dr,Cr]});case Vo:return cr(function(xe){Lt.commandType(xe,"object","blend.func",Jt.commandStr);var Ve="srcRGB"in xe?xe.srcRGB:xe.src,ge="srcAlpha"in xe?xe.srcAlpha:xe.src,dr="dstRGB"in xe?xe.dstRGB:xe.dst,Cr="dstAlpha"in xe?xe.dstAlpha:xe.dst;return Lt.commandParameter(Ve,Go,Ze+".srcRGB",Jt.commandStr),Lt.commandParameter(ge,Go,Ze+".srcAlpha",Jt.commandStr),Lt.commandParameter(dr,Go,Ze+".dstRGB",Jt.commandStr),Lt.commandParameter(Cr,Go,Ze+".dstAlpha",Jt.commandStr),Lt.command($c.indexOf(Ve+", "+dr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Ve+", "+dr+")",Jt.commandStr),[Go[Ve],Go[dr],Go[ge],Go[Cr]]},function(xe,Ve,ge){var dr=xe.constants.blendFuncs;Lt.optional(function(){xe.assert(Ve,ge+"&&typeof "+ge+'==="object"',"invalid blend func, must be an object")});function Cr($n,ra){var ya=Ve.def('"',$n,ra,'" in ',ge,"?",ge,".",$n,ra,":",ge,".",$n);return Lt.optional(function(){xe.assert(Ve,ya+" in "+dr,"invalid "+Je+"."+$n+ra+", must be one of "+Object.keys(Go))}),ya}var Jr=Cr("src","RGB"),rn=Cr("dst","RGB");Lt.optional(function(){var $n=xe.constants.invalidBlendCombinations;xe.assert(Ve,$n+".indexOf("+Jr+'+", "+'+rn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Hr=Ve.def(dr,"[",Jr,"]"),_n=Ve.def(dr,"[",Cr("src","Alpha"),"]"),ta=Ve.def(dr,"[",rn,"]"),Ta=Ve.def(dr,"[",Cr("dst","Alpha"),"]");return[Hr,ta,_n,Ta]});case Lu:return cr(function(xe){if(typeof xe=="string")return Lt.commandParameter(xe,st,"invalid "+Je,Jt.commandStr),[st[xe],st[xe]];if(typeof xe=="object")return Lt.commandParameter(xe.rgb,st,Je+".rgb",Jt.commandStr),Lt.commandParameter(xe.alpha,st,Je+".alpha",Jt.commandStr),[st[xe.rgb],st[xe.alpha]];Lt.commandRaise("invalid blend.equation",Jt.commandStr)},function(xe,Ve,ge){var dr=xe.constants.blendEquations,Cr=Ve.def(),Jr=Ve.def(),rn=xe.cond("typeof ",ge,'==="string"');return Lt.optional(function(){function Hr(_n,ta,Ta){xe.assert(_n,Ta+" in "+dr,"invalid "+ta+", must be one of "+Object.keys(st))}Hr(rn.then,Je,ge),xe.assert(rn.else,ge+"&&typeof "+ge+'==="object"',"invalid "+Je),Hr(rn.else,Je+".rgb",ge+".rgb"),Hr(rn.else,Je+".alpha",ge+".alpha")}),rn.then(Cr,"=",Jr,"=",dr,"[",ge,"];"),rn.else(Cr,"=",dr,"[",ge,".rgb];",Jr,"=",dr,"[",ge,".alpha];"),Ve(rn),[Cr,Jr]});case Il:return cr(function(xe){return Lt.command(La(xe)&&xe.length===4,"blend.color must be a 4d array",Jt.commandStr),Fr(4,function(Ve){return+xe[Ve]})},function(xe,Ve,ge){return Lt.optional(function(){xe.assert(Ve,xe.shared.isArrayLike+"("+ge+")&&"+ge+".length===4","blend.color must be a 4d array")}),Fr(4,function(dr){return Ve.def("+",ge,"[",dr,"]")})});case Rc:return cr(function(xe){return Lt.commandType(xe,"number",Ze,Jt.commandStr),xe|0},function(xe,Ve,ge){return Lt.optional(function(){xe.assert(Ve,"typeof "+ge+'==="number"',"invalid stencil.mask")}),Ve.def(ge,"|0")});case Nu:return cr(function(xe){Lt.commandType(xe,"object",Ze,Jt.commandStr);var Ve=xe.cmp||"keep",ge=xe.ref||0,dr="mask"in xe?xe.mask:-1;return Lt.commandParameter(Ve,Bu,Je+".cmp",Jt.commandStr),Lt.commandType(ge,"number",Je+".ref",Jt.commandStr),Lt.commandType(dr,"number",Je+".mask",Jt.commandStr),[Bu[Ve],ge,dr]},function(xe,Ve,ge){var dr=xe.constants.compareFuncs;Lt.optional(function(){function Hr(){xe.assert(Ve,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Hr(ge+"&&typeof ",ge,'==="object"'),Hr('!("cmp" in ',ge,")||(",ge,".cmp in ",dr,")")});var Cr=Ve.def('"cmp" in ',ge,"?",dr,"[",ge,".cmp]",":",Zs),Jr=Ve.def(ge,".ref|0"),rn=Ve.def('"mask" in ',ge,"?",ge,".mask|0:-1");return[Cr,Jr,rn]});case Eo:case Pu:return cr(function(xe){Lt.commandType(xe,"object",Ze,Jt.commandStr);var Ve=xe.fail||"keep",ge=xe.zfail||"keep",dr=xe.zpass||"keep";return Lt.commandParameter(Ve,Ks,Je+".fail",Jt.commandStr),Lt.commandParameter(ge,Ks,Je+".zfail",Jt.commandStr),Lt.commandParameter(dr,Ks,Je+".zpass",Jt.commandStr),[Je===Pu?bu:mu,Ks[Ve],Ks[ge],Ks[dr]]},function(xe,Ve,ge){var dr=xe.constants.stencilOps;Lt.optional(function(){xe.assert(Ve,ge+"&&typeof "+ge+'==="object"',"invalid "+Je)});function Cr(Jr){return Lt.optional(function(){xe.assert(Ve,'!("'+Jr+'" in '+ge+")||("+ge+"."+Jr+" in "+dr+")","invalid "+Je+"."+Jr+", must be one of "+Object.keys(Ks))}),Ve.def('"',Jr,'" in ',ge,"?",dr,"[",ge,".",Jr,"]:",Zs)}return[Je===Pu?bu:mu,Cr("fail"),Cr("zfail"),Cr("zpass")]});case Uf:return cr(function(xe){Lt.commandType(xe,"object",Ze,Jt.commandStr);var Ve=xe.factor|0,ge=xe.units|0;return Lt.commandType(Ve,"number",Ze+".factor",Jt.commandStr),Lt.commandType(ge,"number",Ze+".units",Jt.commandStr),[Ve,ge]},function(xe,Ve,ge){Lt.optional(function(){xe.assert(Ve,ge+"&&typeof "+ge+'==="object"',"invalid "+Je)});var dr=Ve.def(ge,".factor|0"),Cr=Ve.def(ge,".units|0");return[dr,Cr]});case kc:return cr(function(xe){var Ve=0;return xe==="front"?Ve=mu:xe==="back"&&(Ve=bu),Lt.command(!!Ve,Ze,Jt.commandStr),Ve},function(xe,Ve,ge){return Lt.optional(function(){xe.assert(Ve,ge+'==="front"||'+ge+'==="back"',"invalid cull.face")}),Ve.def(ge,'==="front"?',mu,":",bu)});case zf:return cr(function(xe){return Lt.command(typeof xe=="number"&&xe>=Lr.lineWidthDims[0]&&xe<=Lr.lineWidthDims[1],"invalid line width, must be a positive number between "+Lr.lineWidthDims[0]+" and "+Lr.lineWidthDims[1],Jt.commandStr),xe},function(xe,Ve,ge){return Lt.optional(function(){xe.assert(Ve,"typeof "+ge+'==="number"&&'+ge+">="+Lr.lineWidthDims[0]+"&&"+ge+"<="+Lr.lineWidthDims[1],"invalid line width")}),ge});case hu:return cr(function(xe){return Lt.commandParameter(xe,Qc,Ze,Jt.commandStr),Qc[xe]},function(xe,Ve,ge){return Lt.optional(function(){xe.assert(Ve,ge+'==="cw"||'+ge+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Ve.def(ge+'==="cw"?'+Wl+":"+pf)});case Ns:return cr(function(xe){return Lt.command(La(xe)&&xe.length===4,"color.mask must be length 4 array",Jt.commandStr),xe.map(function(Ve){return!!Ve})},function(xe,Ve,ge){return Lt.optional(function(){xe.assert(Ve,xe.shared.isArrayLike+"("+ge+")&&"+ge+".length===4","invalid color.mask")}),Fr(4,function(dr){return"!!"+ge+"["+dr+"]"})});case Du:return cr(function(xe){Lt.command(typeof xe=="object"&&xe,Ze,Jt.commandStr);var Ve="value"in xe?xe.value:1,ge=!!xe.invert;return Lt.command(typeof Ve=="number"&&Ve>=0&&Ve<=1,"sample.coverage.value must be a number between 0 and 1",Jt.commandStr),[Ve,ge]},function(xe,Ve,ge){Lt.optional(function(){xe.assert(Ve,ge+"&&typeof "+ge+'==="object"',"invalid sample.coverage")});var dr=Ve.def('"value" in ',ge,"?+",ge,".value:1"),Cr=Ve.def("!!",ge,".invert");return[dr,Cr]})}}),wr}function yi(be,Jt){var He=be.static,mr=be.dynamic,wr={};return Object.keys(He).forEach(function(Je){var Ze=He[Je],cr;if(typeof Ze=="number"||typeof Ze=="boolean")cr=wo(function(){return Ze});else if(typeof Ze=="function"){var xe=Ze._reglType;xe==="texture2d"||xe==="textureCube"?cr=wo(function(Ve){return Ve.link(Ze)}):xe==="framebuffer"||xe==="framebufferCube"?(Lt.command(Ze.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Je+'"',Jt.commandStr),cr=wo(function(Ve){return Ve.link(Ze.color[0])})):Lt.commandRaise('invalid data for uniform "'+Je+'"',Jt.commandStr)}else La(Ze)?cr=wo(function(Ve){var ge=Ve.global.def("[",Fr(Ze.length,function(dr){return Lt.command(typeof Ze[dr]=="number"||typeof Ze[dr]=="boolean","invalid uniform "+Je,Ve.commandStr),Ze[dr]}),"]");return ge}):Lt.commandRaise('invalid or missing data for uniform "'+Je+'"',Jt.commandStr);cr.value=Ze,wr[Je]=cr}),Object.keys(mr).forEach(function(Je){var Ze=mr[Je];wr[Je]=zo(Ze,function(cr,xe){return cr.invoke(xe,Ze)})}),wr}function xa(be,Jt){var He=be.static,mr=be.dynamic,wr={};return Object.keys(He).forEach(function(Je){var Ze=He[Je],cr=ae.id(Je),xe=new q;if(Jf(Ze))xe.state=Iu,xe.buffer=Wr.getBuffer(Wr.create(Ze,Hs,!1,!0)),xe.type=0;else{var Ve=Wr.getBuffer(Ze);if(Ve)xe.state=Iu,xe.buffer=Ve,xe.type=0;else if(Lt.command(typeof Ze=="object"&&Ze,"invalid data for attribute "+Je,Jt.commandStr),"constant"in Ze){var ge=Ze.constant;xe.buffer="null",xe.state=Tc,typeof ge=="number"?xe.x=ge:(Lt.command(La(ge)&&ge.length>0&&ge.length<=4,"invalid constant for attribute "+Je,Jt.commandStr),Tu.forEach(function(ta,Ta){Ta<ge.length&&(xe[ta]=ge[Ta])}))}else{Jf(Ze.buffer)?Ve=Wr.getBuffer(Wr.create(Ze.buffer,Hs,!1,!0)):Ve=Wr.getBuffer(Ze.buffer),Lt.command(!!Ve,'missing buffer for attribute "'+Je+'"',Jt.commandStr);var dr=Ze.offset|0;Lt.command(dr>=0,'invalid offset for attribute "'+Je+'"',Jt.commandStr);var Cr=Ze.stride|0;Lt.command(Cr>=0&&Cr<256,'invalid stride for attribute "'+Je+'", must be integer betweeen [0, 255]',Jt.commandStr);var Jr=Ze.size|0;Lt.command(!("size"in Ze)||Jr>0&&Jr<=4,'invalid size for attribute "'+Je+'", must be 1,2,3,4',Jt.commandStr);var rn=!!Ze.normalized,Hr=0;"type"in Ze&&(Lt.commandParameter(Ze.type,Yi,"invalid type for attribute "+Je,Jt.commandStr),Hr=Yi[Ze.type]);var _n=Ze.divisor|0;"divisor"in Ze&&(Lt.command(_n===0||ct,'cannot specify divisor for attribute "'+Je+'", instancing not supported',Jt.commandStr),Lt.command(_n>=0,'invalid divisor for attribute "'+Je+'"',Jt.commandStr)),Lt.optional(function(){var ta=Jt.commandStr,Ta=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Ze).forEach(function($n){Lt.command(Ta.indexOf($n)>=0,'unknown parameter "'+$n+'" for attribute pointer "'+Je+'" (valid parameters are '+Ta+")",ta)})}),xe.buffer=Ve,xe.state=Iu,xe.size=Jr,xe.normalized=rn,xe.type=Hr||Ve.dtype,xe.offset=dr,xe.stride=Cr,xe.divisor=_n}}wr[Je]=wo(function(ta,Ta){var $n=ta.attribCache;if(cr in $n)return $n[cr];var ra={isStream:!1};return Object.keys(xe).forEach(function(ya){ra[ya]=xe[ya]}),xe.buffer&&(ra.buffer=ta.link(xe.buffer),ra.type=ra.type||ra.buffer+".dtype"),$n[cr]=ra,ra})}),Object.keys(mr).forEach(function(Je){var Ze=mr[Je];function cr(xe,Ve){var ge=xe.invoke(Ve,Ze),dr=xe.shared,Cr=xe.constants,Jr=dr.isBufferArgs,rn=dr.buffer;Lt.optional(function(){xe.assert(Ve,ge+"&&(typeof "+ge+'==="object"||typeof '+ge+'==="function")&&('+Jr+"("+ge+")||"+rn+".getBuffer("+ge+")||"+rn+".getBuffer("+ge+".buffer)||"+Jr+"("+ge+'.buffer)||("constant" in '+ge+"&&(typeof "+ge+'.constant==="number"||'+dr.isArrayLike+"("+ge+".constant))))",'invalid dynamic attribute "'+Je+'"')});var Hr={isStream:Ve.def(!1)},_n=new q;_n.state=Iu,Object.keys(_n).forEach(function(ra){Hr[ra]=Ve.def(""+_n[ra])});var ta=Hr.buffer,Ta=Hr.type;Ve("if(",Jr,"(",ge,")){",Hr.isStream,"=true;",ta,"=",rn,".createStream(",Hs,",",ge,");",Ta,"=",ta,".dtype;","}else{",ta,"=",rn,".getBuffer(",ge,");","if(",ta,"){",Ta,"=",ta,".dtype;",'}else if("constant" in ',ge,"){",Hr.state,"=",Tc,";","if(typeof "+ge+'.constant === "number"){',Hr[Tu[0]],"=",ge,".constant;",Tu.slice(1).map(function(ra){return Hr[ra]}).join("="),"=0;","}else{",Tu.map(function(ra,ya){return Hr[ra]+"="+ge+".constant.length>"+ya+"?"+ge+".constant["+ya+"]:0;"}).join(""),"}}else{","if(",Jr,"(",ge,".buffer)){",ta,"=",rn,".createStream(",Hs,",",ge,".buffer);","}else{",ta,"=",rn,".getBuffer(",ge,".buffer);","}",Ta,'="type" in ',ge,"?",Cr.glTypes,"[",ge,".type]:",ta,".dtype;",Hr.normalized,"=!!",ge,".normalized;");function $n(ra){Ve(Hr[ra],"=",ge,".",ra,"|0;")}return $n("size"),$n("offset"),$n("stride"),$n("divisor"),Ve("}}"),Ve.exit("if(",Hr.isStream,"){",rn,".destroyStream(",ta,");","}"),Hr}wr[Je]=zo(Ze,cr)}),wr}function zi(be,Jt){var He=be.static,mr=be.dynamic;if(pu in He){var wr=He[pu];return wr!==null&&wn.getVAO(wr)===null&&(wr=wn.createVAO(wr)),wo(function(Ze){return Ze.link(wn.getVAO(wr))})}else if(pu in mr){var Je=mr[pu];return zo(Je,function(Ze,cr){var xe=Ze.invoke(cr,Je);return cr.def(Ze.shared.vao+".getVAO("+xe+")")})}return null}function ii(be){var Jt=be.static,He=be.dynamic,mr={};return Object.keys(Jt).forEach(function(wr){var Je=Jt[wr];mr[wr]=wo(function(Ze,cr){return typeof Je=="number"||typeof Je=="boolean"?""+Je:Ze.link(Je)})}),Object.keys(He).forEach(function(wr){var Je=He[wr];mr[wr]=zo(Je,function(Ze,cr){return Ze.invoke(cr,Je)})}),mr}function ka(be,Jt,He,mr,wr){var Je=be.static,Ze=be.dynamic;Lt.optional(function(){var $n=[js,vu,sf,Xs,Ys,uf,gu,Xf,du,pu].concat(Ht);function ra(ya){Object.keys(ya).forEach(function(Ka){Lt.command($n.indexOf(Ka)>=0,'unknown parameter "'+Ka+'"',wr.commandStr)})}ra(Je),ra(Ze)});var cr=Kn(be,Jt),xe=Tn(be,wr),Ve=qn(be,xe,wr),ge=ga(be,wr),dr=ua(be,wr),Cr=ia(be,wr,cr);function Jr($n){var ra=Ve[$n];ra&&(dr[$n]=ra)}Jr(ys),Jr(Oe(of));var rn=Object.keys(dr).length>0,Hr={framebuffer:xe,draw:ge,shader:Cr,state:dr,dirty:rn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Hr.profile=kn(be,wr),Hr.uniforms=yi(He,wr),Hr.drawVAO=Hr.scopeVAO=zi(be,wr),!Hr.drawVAO&&Cr.program&&!cr&&Ge.angle_instanced_arrays){var _n=!0,ta=Cr.program.attributes.map(function($n){var ra=Jt.static[$n];return _n=_n&&!!ra,ra});if(_n&&ta.length>0){var Ta=wn.getVAO(wn.createVAO(ta));Hr.drawVAO=new qo(null,null,null,function($n,ra){return $n.link(Ta)}),Hr.useVAO=!0}}return cr?Hr.useVAO=!0:Hr.attributes=xa(Jt,wr),Hr.context=ii(mr,wr),Hr}function Ui(be,Jt,He){var mr=be.shared,wr=mr.context,Je=be.scope();Object.keys(He).forEach(function(Ze){Jt.save(wr,"."+Ze);var cr=He[Ze],xe=cr.append(be,Jt);Array.isArray(xe)?Je(wr,".",Ze,"=[",xe.join(),"];"):Je(wr,".",Ze,"=",xe,";")}),Jt(Je)}function Ni(be,Jt,He,mr){var wr=be.shared,Je=wr.gl,Ze=wr.framebuffer,cr;mt&&(cr=Jt.def(wr.extensions,".webgl_draw_buffers"));var xe=be.constants,Ve=xe.drawBuffer,ge=xe.backBuffer,dr;He?dr=He.append(be,Jt):dr=Jt.def(Ze,".next"),mr||Jt("if(",dr,"!==",Ze,".cur){"),Jt("if(",dr,"){",Je,".bindFramebuffer(",dh,",",dr,".framebuffer);"),mt&&Jt(cr,".drawBuffersWEBGL(",Ve,"[",dr,".colorAttachments.length]);"),Jt("}else{",Je,".bindFramebuffer(",dh,",null);"),mt&&Jt(cr,".drawBuffersWEBGL(",ge,");"),Jt("}",Ze,".cur=",dr,";"),mr||Jt("}")}function So(be,Jt,He){var mr=be.shared,wr=mr.gl,Je=be.current,Ze=be.next,cr=mr.current,xe=mr.next,Ve=be.cond(cr,".dirty");Ht.forEach(function(ge){var dr=Oe(ge);if(!(dr in He.state)){var Cr,Jr;if(dr in Ze){Cr=Ze[dr],Jr=Je[dr];var rn=Fr(wt[dr].length,function(_n){return Ve.def(Cr,"[",_n,"]")});Ve(be.cond(rn.map(function(_n,ta){return _n+"!=="+Jr+"["+ta+"]"}).join("||")).then(wr,".",qt[dr],"(",rn,");",rn.map(function(_n,ta){return Jr+"["+ta+"]="+_n}).join(";"),";"))}else{Cr=Ve.def(xe,".",dr);var Hr=be.cond(Cr,"!==",cr,".",dr);Ve(Hr),dr in ie?Hr(be.cond(Cr).then(wr,".enable(",ie[dr],");").else(wr,".disable(",ie[dr],");"),cr,".",dr,"=",Cr,";"):Hr(wr,".",qt[dr],"(",Cr,");",cr,".",dr,"=",Cr,";")}}}),Object.keys(He.state).length===0&&Ve(cr,".dirty=false;"),Jt(Ve)}function Uo(be,Jt,He,mr){var wr=be.shared,Je=be.current,Ze=wr.current,cr=wr.gl;qc(Object.keys(He)).forEach(function(xe){var Ve=He[xe];if(!(mr&&!mr(Ve))){var ge=Ve.append(be,Jt);if(ie[xe]){var dr=ie[xe];Rs(Ve)?ge?Jt(cr,".enable(",dr,");"):Jt(cr,".disable(",dr,");"):Jt(be.cond(ge).then(cr,".enable(",dr,");").else(cr,".disable(",dr,");")),Jt(Ze,".",xe,"=",ge,";")}else if(La(ge)){var Cr=Je[xe];Jt(cr,".",qt[xe],"(",ge,");",ge.map(function(Jr,rn){return Cr+"["+rn+"]="+Jr}).join(";"),";")}else Jt(cr,".",qt[xe],"(",ge,");",Ze,".",xe,"=",ge,";")}})}function _o(be,Jt){ct&&(be.instancing=Jt.def(be.shared.extensions,".angle_instanced_arrays"))}function Ca(be,Jt,He,mr,wr){var Je=be.shared,Ze=be.stats,cr=Je.current,xe=Je.timer,Ve=He.profile;function ge(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var dr,Cr;function Jr($n){dr=Jt.def(),$n(dr,"=",ge(),";"),typeof wr=="string"?$n(Ze,".count+=",wr,";"):$n(Ze,".count++;"),A&&(mr?(Cr=Jt.def(),$n(Cr,"=",xe,".getNumPendingQueries();")):$n(xe,".beginQuery(",Ze,");"))}function rn($n){$n(Ze,".cpuTime+=",ge(),"-",dr,";"),A&&(mr?$n(xe,".pushScopeStats(",Cr,",",xe,".getNumPendingQueries(),",Ze,");"):$n(xe,".endQuery();"))}function Hr($n){var ra=Jt.def(cr,".profile");Jt(cr,".profile=",$n,";"),Jt.exit(cr,".profile=",ra,";")}var _n;if(Ve){if(Rs(Ve)){Ve.enable?(Jr(Jt),rn(Jt.exit),Hr("true")):Hr("false");return}_n=Ve.append(be,Jt),Hr(_n)}else _n=Jt.def(cr,".profile");var ta=be.block();Jr(ta),Jt("if(",_n,"){",ta,"}");var Ta=be.block();rn(Ta),Jt.exit("if(",_n,"){",Ta,"}")}function Wo(be,Jt,He,mr,wr){var Je=be.shared;function Ze(xe){switch(xe){case lf:case ku:case $f:return 2;case Vf:case Kf:case Qf:return 3;case Hf:case hf:case qf:return 4;default:return 1}}function cr(xe,Ve,ge){var dr=Je.gl,Cr=Jt.def(xe,".location"),Jr=Jt.def(Je.attributes,"[",Cr,"]"),rn=ge.state,Hr=ge.buffer,_n=[ge.x,ge.y,ge.z,ge.w],ta=["buffer","normalized","offset","stride"];function Ta(){Jt("if(!",Jr,".buffer){",dr,".enableVertexAttribArray(",Cr,");}");var ra=ge.type,ya;if(ge.size?ya=Jt.def(ge.size,"||",Ve):ya=Ve,Jt("if(",Jr,".type!==",ra,"||",Jr,".size!==",ya,"||",ta.map(function(io){return Jr+"."+io+"!=="+ge[io]}).join("||"),"){",dr,".bindBuffer(",Hs,",",Hr,".buffer);",dr,".vertexAttribPointer(",[Cr,ya,ra,ge.normalized,ge.stride,ge.offset],");",Jr,".type=",ra,";",Jr,".size=",ya,";",ta.map(function(io){return Jr+"."+io+"="+ge[io]+";"}).join(""),"}"),ct){var Ka=ge.divisor;Jt("if(",Jr,".divisor!==",Ka,"){",be.instancing,".vertexAttribDivisorANGLE(",[Cr,Ka],");",Jr,".divisor=",Ka,";}")}}function $n(){Jt("if(",Jr,".buffer){",dr,".disableVertexAttribArray(",Cr,");",Jr,".buffer=null;","}if(",Tu.map(function(ra,ya){return Jr+"."+ra+"!=="+_n[ya]}).join("||"),"){",dr,".vertexAttrib4f(",Cr,",",_n,");",Tu.map(function(ra,ya){return Jr+"."+ra+"="+_n[ya]+";"}).join(""),"}")}rn===Iu?Ta():rn===Tc?$n():(Jt("if(",rn,"===",Iu,"){"),Ta(),Jt("}else{"),$n(),Jt("}"))}mr.forEach(function(xe){var Ve=xe.name,ge=He.attributes[Ve],dr;if(ge){if(!wr(ge))return;dr=ge.append(be,Jt)}else{if(!wr(tc))return;var Cr=be.scopeAttrib(Ve);Lt.optional(function(){be.assert(Jt,Cr+".state","missing attribute "+Ve)}),dr={},Object.keys(new q).forEach(function(Jr){dr[Jr]=Jt.def(Cr,".",Jr)})}cr(be.link(xe),Ze(xe.info.type),dr)})}function ei(be,Jt,He,mr,wr){for(var Je=be.shared,Ze=Je.gl,cr,xe=0;xe<mr.length;++xe){var Ve=mr[xe],ge=Ve.name,dr=Ve.info.type,Cr=He.uniforms[ge],Jr=be.link(Ve),rn=Jr+".location",Hr;if(Cr){if(!wr(Cr))continue;if(Rs(Cr)){var _n=Cr.value;if(Lt.command(_n!==null&&typeof _n!="undefined",'missing uniform "'+ge+'"',be.commandStr),dr===gf||dr===_s){Lt.command(typeof _n=="function"&&(dr===gf&&(_n._reglType==="texture2d"||_n._reglType==="framebuffer")||dr===_s&&(_n._reglType==="textureCube"||_n._reglType==="framebufferCube")),"invalid texture for uniform "+ge,be.commandStr);var ta=be.link(_n._texture||_n.color[0]._texture);Jt(Ze,".uniform1i(",rn,",",ta+".bind());"),Jt.exit(ta,".unbind();")}else if(dr===df||dr===vf||dr===ks){Lt.optional(function(){Lt.command(La(_n),"invalid matrix for uniform "+ge,be.commandStr),Lt.command(dr===df&&_n.length===4||dr===vf&&_n.length===9||dr===ks&&_n.length===16,"invalid length for matrix uniform "+ge,be.commandStr)});var Ta=be.global.def("new Float32Array(["+Array.prototype.slice.call(_n)+"])"),$n=2;dr===vf?$n=3:dr===ks&&($n=4),Jt(Ze,".uniformMatrix",$n,"fv(",rn,",false,",Ta,");")}else{switch(dr){case cf:Lt.commandType(_n,"number","uniform "+ge,be.commandStr),cr="1f";break;case lf:Lt.command(La(_n)&&_n.length===2,"uniform "+ge,be.commandStr),cr="2f";break;case Vf:Lt.command(La(_n)&&_n.length===3,"uniform "+ge,be.commandStr),cr="3f";break;case Hf:Lt.command(La(_n)&&_n.length===4,"uniform "+ge,be.commandStr),cr="4f";break;case Yc:Lt.commandType(_n,"boolean","uniform "+ge,be.commandStr),cr="1i";break;case Zf:Lt.commandType(_n,"number","uniform "+ge,be.commandStr),cr="1i";break;case $f:Lt.command(La(_n)&&_n.length===2,"uniform "+ge,be.commandStr),cr="2i";break;case ku:Lt.command(La(_n)&&_n.length===2,"uniform "+ge,be.commandStr),cr="2i";break;case Qf:Lt.command(La(_n)&&_n.length===3,"uniform "+ge,be.commandStr),cr="3i";break;case Kf:Lt.command(La(_n)&&_n.length===3,"uniform "+ge,be.commandStr),cr="3i";break;case qf:Lt.command(La(_n)&&_n.length===4,"uniform "+ge,be.commandStr),cr="4i";break;case hf:Lt.command(La(_n)&&_n.length===4,"uniform "+ge,be.commandStr),cr="4i";break}Jt(Ze,".uniform",cr,"(",rn,",",La(_n)?Array.prototype.slice.call(_n):_n,");")}continue}else Hr=Cr.append(be,Jt)}else{if(!wr(tc))continue;Hr=Jt.def(Je.uniforms,"[",ae.id(ge),"]")}dr===gf?(Lt(!Array.isArray(Hr),"must specify a scalar prop for textures"),Jt("if(",Hr,"&&",Hr,'._reglType==="framebuffer"){',Hr,"=",Hr,".color[0];","}")):dr===_s&&(Lt(!Array.isArray(Hr),"must specify a scalar prop for cube maps"),Jt("if(",Hr,"&&",Hr,'._reglType==="framebufferCube"){',Hr,"=",Hr,".color[0];","}")),Lt.optional(function(){function rs(ls,Jl){be.assert(Jt,ls,'bad data or missing for uniform "'+ge+'".  '+Jl)}function mh(ls){Lt(!Array.isArray(Hr),"must not specify an array type for uniform"),rs("typeof "+Hr+'==="'+ls+'"',"invalid type, expected "+ls)}function Ms(ls,Jl){Array.isArray(Hr)?Lt(Hr.length===ls,"must have length "+ls):rs(Je.isArrayLike+"("+Hr+")&&"+Hr+".length==="+ls,"invalid vector, should have length "+ls,be.commandStr)}function Sd(ls){Lt(!Array.isArray(Hr),"must not specify a value type"),rs("typeof "+Hr+'==="function"&&'+Hr+'._reglType==="texture'+(ls===Yf?"2d":"Cube")+'"',"invalid texture type",be.commandStr)}switch(dr){case Zf:mh("number");break;case ku:Ms(2,"number");break;case Kf:Ms(3,"number");break;case hf:Ms(4,"number");break;case cf:mh("number");break;case lf:Ms(2,"number");break;case Vf:Ms(3,"number");break;case Hf:Ms(4,"number");break;case Yc:mh("boolean");break;case $f:Ms(2,"boolean");break;case Qf:Ms(3,"boolean");break;case qf:Ms(4,"boolean");break;case df:Ms(4,"number");break;case vf:Ms(9,"number");break;case ks:Ms(16,"number");break;case gf:Sd(Yf);break;case _s:Sd(Bl);break}});var ra=1;switch(dr){case gf:case _s:var ya=Jt.def(Hr,"._texture");Jt(Ze,".uniform1i(",rn,",",ya,".bind());"),Jt.exit(ya,".unbind();");continue;case Zf:case Yc:cr="1i";break;case ku:case $f:cr="2i",ra=2;break;case Kf:case Qf:cr="3i",ra=3;break;case hf:case qf:cr="4i",ra=4;break;case cf:cr="1f";break;case lf:cr="2f",ra=2;break;case Vf:cr="3f",ra=3;break;case Hf:cr="4f",ra=4;break;case df:cr="Matrix2fv";break;case vf:cr="Matrix3fv";break;case ks:cr="Matrix4fv";break}if(Jt(Ze,".uniform",cr,"(",rn,","),cr.charAt(0)==="M"){var Ka=Math.pow(dr-df+2,2),io=be.global.def("new Float32Array(",Ka,")");Array.isArray(Hr)?Jt("false,(",Fr(Ka,function(rs){return io+"["+rs+"]="+Hr[rs]}),",",io,")"):Jt("false,(Array.isArray(",Hr,")||",Hr," instanceof Float32Array)?",Hr,":(",Fr(Ka,function(rs){return io+"["+rs+"]="+Hr+"["+rs+"]"}),",",io,")")}else ra>1?Jt(Fr(ra,function(rs){return Array.isArray(Hr)?Hr[rs]:Hr+"["+rs+"]"})):(Lt(!Array.isArray(Hr),"uniform value must not be an array"),Jt(Hr));Jt(");")}}function sa(be,Jt,He,mr){var wr=be.shared,Je=wr.gl,Ze=wr.draw,cr=mr.draw;function xe(){var ya=cr.elements,Ka,io=Jt;return ya?((ya.contextDep&&mr.contextDynamic||ya.propDep)&&(io=He),Ka=ya.append(be,io)):Ka=io.def(Ze,".",Xs),Ka&&io("if("+Ka+")"+Je+".bindBuffer("+Pl+","+Ka+".buffer.buffer);"),Ka}function Ve(){var ya=cr.count,Ka,io=Jt;return ya?((ya.contextDep&&mr.contextDynamic||ya.propDep)&&(io=He),Ka=ya.append(be,io),Lt.optional(function(){ya.MISSING&&be.assert(Jt,"false","missing vertex count"),ya.DYNAMIC&&be.assert(io,Ka+">=0","missing vertex count")})):(Ka=io.def(Ze,".",gu),Lt.optional(function(){be.assert(io,Ka+">=0","missing vertex count")})),Ka}var ge=xe();function dr(ya){var Ka=cr[ya];return Ka?Ka.contextDep&&mr.contextDynamic||Ka.propDep?Ka.append(be,He):Ka.append(be,Jt):Jt.def(Ze,".",ya)}var Cr=dr(Ys),Jr=dr(uf),rn=Ve();if(typeof rn=="number"){if(rn===0)return}else He("if(",rn,"){"),He.exit("}");var Hr,_n;ct&&(Hr=dr(Xf),_n=be.instancing);var ta=ge+".type",Ta=cr.elements&&Rs(cr.elements);function $n(){function ya(){He(_n,".drawElementsInstancedANGLE(",[Cr,rn,ta,Jr+"<<(("+ta+"-"+Tl+")>>1)",Hr],");")}function Ka(){He(_n,".drawArraysInstancedANGLE(",[Cr,Jr,rn,Hr],");")}ge?Ta?ya():(He("if(",ge,"){"),ya(),He("}else{"),Ka(),He("}")):Ka()}function ra(){function ya(){He(Je+".drawElements("+[Cr,rn,ta,Jr+"<<(("+ta+"-"+Tl+")>>1)"]+");")}function Ka(){He(Je+".drawArrays("+[Cr,Jr,rn]+");")}ge?Ta?ya():(He("if(",ge,"){"),ya(),He("}else{"),Ka(),He("}")):Ka()}ct&&(typeof Hr!="number"||Hr>=0)?typeof Hr=="string"?(He("if(",Hr,">0){"),$n(),He("}else if(",Hr,"<0){"),ra(),He("}")):$n():ra()}function Na(be,Jt,He,mr,wr){var Je=En(),Ze=Je.proc("body",wr);return Lt.optional(function(){Je.commandStr=Jt.commandStr,Je.command=Je.link(Jt.commandStr)}),ct&&(Je.instancing=Ze.def(Je.shared.extensions,".angle_instanced_arrays")),be(Je,Ze,He,mr),Je.compile().body}function Xa(be,Jt,He,mr){_o(be,Jt),He.useVAO?He.drawVAO?Jt(be.shared.vao,".setVAO(",He.drawVAO.append(be,Jt),");"):Jt(be.shared.vao,".setVAO(",be.shared.vao,".targetVAO);"):(Jt(be.shared.vao,".setVAO(null);"),Wo(be,Jt,He,mr.attributes,function(){return!0})),ei(be,Jt,He,mr.uniforms,function(){return!0}),sa(be,Jt,Jt,He)}function Mo(be,Jt){var He=be.proc("draw",1);_o(be,He),Ui(be,He,Jt.context),Ni(be,He,Jt.framebuffer),So(be,He,Jt),Uo(be,He,Jt.state),Ca(be,He,Jt,!1,!0);var mr=Jt.shader.progVar.append(be,He);if(He(be.shared.gl,".useProgram(",mr,".program);"),Jt.shader.program)Xa(be,He,Jt,Jt.shader.program);else{He(be.shared.vao,".setVAO(null);");var wr=be.global.def("{}"),Je=He.def(mr,".id"),Ze=He.def(wr,"[",Je,"]");He(be.cond(Ze).then(Ze,".call(this,a0);").else(Ze,"=",wr,"[",Je,"]=",be.link(function(cr){return Na(Xa,be,Jt,cr,1)}),"(",mr,");",Ze,".call(this,a0);"))}Object.keys(Jt.state).length>0&&He(be.shared.current,".dirty=true;")}function $s(be,Jt,He,mr){be.batchId="a1",_o(be,Jt);function wr(){return!0}Wo(be,Jt,He,mr.attributes,wr),ei(be,Jt,He,mr.uniforms,wr),sa(be,Jt,Jt,He)}function mf(be,Jt,He,mr){_o(be,Jt);var wr=He.contextDep,Je=Jt.def(),Ze="a0",cr="a1",xe=Jt.def();be.shared.props=xe,be.batchId=Je;var Ve=be.scope(),ge=be.scope();Jt(Ve.entry,"for(",Je,"=0;",Je,"<",cr,";++",Je,"){",xe,"=",Ze,"[",Je,"];",ge,"}",Ve.exit);function dr(ta){return ta.contextDep&&wr||ta.propDep}function Cr(ta){return!dr(ta)}if(He.needsContext&&Ui(be,ge,He.context),He.needsFramebuffer&&Ni(be,ge,He.framebuffer),Uo(be,ge,He.state,dr),He.profile&&dr(He.profile)&&Ca(be,ge,He,!1,!0),mr)He.useVAO?He.drawVAO?dr(He.drawVAO)?ge(be.shared.vao,".setVAO(",He.drawVAO.append(be,ge),");"):Ve(be.shared.vao,".setVAO(",He.drawVAO.append(be,Ve),");"):Ve(be.shared.vao,".setVAO(",be.shared.vao,".targetVAO);"):(Ve(be.shared.vao,".setVAO(null);"),Wo(be,Ve,He,mr.attributes,Cr),Wo(be,ge,He,mr.attributes,dr)),ei(be,Ve,He,mr.uniforms,Cr),ei(be,ge,He,mr.uniforms,dr),sa(be,Ve,ge,He);else{var Jr=be.global.def("{}"),rn=He.shader.progVar.append(be,ge),Hr=ge.def(rn,".id"),_n=ge.def(Jr,"[",Hr,"]");ge(be.shared.gl,".useProgram(",rn,".program);","if(!",_n,"){",_n,"=",Jr,"[",Hr,"]=",be.link(function(ta){return Na($s,be,He,ta,2)}),"(",rn,");}",_n,".call(this,a0[",Je,"],",Je,");")}}function Ce(be,Jt){var He=be.proc("batch",2);be.batchId="0",_o(be,He);var mr=!1,wr=!0;Object.keys(Jt.context).forEach(function(Jr){mr=mr||Jt.context[Jr].propDep}),mr||(Ui(be,He,Jt.context),wr=!1);var Je=Jt.framebuffer,Ze=!1;Je?(Je.propDep?mr=Ze=!0:Je.contextDep&&mr&&(Ze=!0),Ze||Ni(be,He,Je)):Ni(be,He,null),Jt.state.viewport&&Jt.state.viewport.propDep&&(mr=!0);function cr(Jr){return Jr.contextDep&&mr||Jr.propDep}So(be,He,Jt),Uo(be,He,Jt.state,function(Jr){return!cr(Jr)}),(!Jt.profile||!cr(Jt.profile))&&Ca(be,He,Jt,!1,"a1"),Jt.contextDep=mr,Jt.needsContext=wr,Jt.needsFramebuffer=Ze;var xe=Jt.shader.progVar;if(xe.contextDep&&mr||xe.propDep)mf(be,He,Jt,null);else{var Ve=xe.append(be,He);if(He(be.shared.gl,".useProgram(",Ve,".program);"),Jt.shader.program)mf(be,He,Jt,Jt.shader.program);else{He(be.shared.vao,".setVAO(null);");var ge=be.global.def("{}"),dr=He.def(Ve,".id"),Cr=He.def(ge,"[",dr,"]");He(be.cond(Cr).then(Cr,".call(this,a0,a1);").else(Cr,"=",ge,"[",dr,"]=",be.link(function(Jr){return Na(mf,be,Jt,Jr,2)}),"(",Ve,");",Cr,".call(this,a0,a1);"))}}Object.keys(Jt.state).length>0&&He(be.shared.current,".dirty=true;")}function Pr(be,Jt){var He=be.proc("scope",3);be.batchId="a2";var mr=be.shared,wr=mr.current;Ui(be,He,Jt.context),Jt.framebuffer&&Jt.framebuffer.append(be,He),qc(Object.keys(Jt.state)).forEach(function(Ze){var cr=Jt.state[Ze],xe=cr.append(be,He);La(xe)?xe.forEach(function(Ve,ge){He.set(be.next[Ze],"["+ge+"]",Ve)}):He.set(mr.next,"."+Ze,xe)}),Ca(be,He,Jt,!0,!0),[Xs,uf,gu,Xf,Ys].forEach(function(Ze){var cr=Jt.draw[Ze];!cr||He.set(mr.draw,"."+Ze,""+cr.append(be,He))}),Object.keys(Jt.uniforms).forEach(function(Ze){var cr=Jt.uniforms[Ze].append(be,He);Array.isArray(cr)&&(cr="["+cr.join()+"]"),He.set(mr.uniforms,"["+ae.id(Ze)+"]",cr)}),Object.keys(Jt.attributes).forEach(function(Ze){var cr=Jt.attributes[Ze].append(be,He),xe=be.scopeAttrib(Ze);Object.keys(new q).forEach(function(Ve){He.set(xe,"."+Ve,cr[Ve])})}),Jt.scopeVAO&&He.set(mr.vao,".targetVAO",Jt.scopeVAO.append(be,He));function Je(Ze){var cr=Jt.shader[Ze];cr&&He.set(mr.shader,"."+Ze,cr.append(be,He))}Je(vu),Je(sf),Object.keys(Jt.state).length>0&&(He(wr,".dirty=true;"),He.exit(wr,".dirty=true;")),He("a1(",be.shared.context,",a0,",be.batchId,");")}function Ir(be){if(!(typeof be!="object"||La(be))){for(var Jt=Object.keys(be),He=0;He<Jt.length;++He)if(on.isDynamic(be[Jt[He]]))return!0;return!1}}function Xn(be,Jt,He){var mr=Jt.static[He];if(!mr||!Ir(mr))return;var wr=be.global,Je=Object.keys(mr),Ze=!1,cr=!1,xe=!1,Ve=be.global.def("{}");Je.forEach(function(dr){var Cr=mr[dr];if(on.isDynamic(Cr)){typeof Cr=="function"&&(Cr=mr[dr]=on.unbox(Cr));var Jr=zo(Cr,null);Ze=Ze||Jr.thisDep,xe=xe||Jr.propDep,cr=cr||Jr.contextDep}else{switch(wr(Ve,".",dr,"="),typeof Cr){case"number":wr(Cr);break;case"string":wr('"',Cr,'"');break;case"object":Array.isArray(Cr)&&wr("[",Cr.join(),"]");break;default:wr(be.link(Cr));break}wr(";")}});function ge(dr,Cr){Je.forEach(function(Jr){var rn=mr[Jr];if(!!on.isDynamic(rn)){var Hr=dr.invoke(Cr,rn);Cr(Ve,".",Jr,"=",Hr,";")}})}Jt.dynamic[He]=new on.DynamicVariable(Gf,{thisDep:Ze,contextDep:cr,propDep:xe,ref:Ve,append:ge}),delete Jt.static[He]}function Aa(be,Jt,He,mr,wr){var Je=En();Je.stats=Je.link(wr),Object.keys(Jt.static).forEach(function(cr){Xn(Je,Jt,cr)}),Nl.forEach(function(cr){Xn(Je,be,cr)});var Ze=ka(be,Jt,He,mr,Je);return Mo(Je,Ze),Pr(Je,Ze),Ce(Je,Ze),R(Je.compile(),{destroy:function(){Ze.shader.program.destroy()}})}return{next:kt,current:wt,procs:function(){var be=En(),Jt=be.proc("poll"),He=be.proc("refresh"),mr=be.block();Jt(mr),He(mr);var wr=be.shared,Je=wr.gl,Ze=wr.next,cr=wr.current;mr(cr,".dirty=false;"),Ni(be,Jt),Ni(be,He,null,!0);var xe;ct&&(xe=be.link(ct)),Ge.oes_vertex_array_object&&He(be.link(Ge.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ve=0;Ve<Lr.maxAttributes;++Ve){var ge=He.def(wr.attributes,"[",Ve,"]"),dr=be.cond(ge,".buffer");dr.then(Je,".enableVertexAttribArray(",Ve,");",Je,".bindBuffer(",Hs,",",ge,".buffer.buffer);",Je,".vertexAttribPointer(",Ve,",",ge,".size,",ge,".type,",ge,".normalized,",ge,".stride,",ge,".offset);").else(Je,".disableVertexAttribArray(",Ve,");",Je,".vertexAttrib4f(",Ve,",",ge,".x,",ge,".y,",ge,".z,",ge,".w);",ge,".buffer=null;"),He(dr),ct&&He(xe,".vertexAttribDivisorANGLE(",Ve,",",ge,".divisor);")}return He(be.shared.vao,".currentVAO=null;",be.shared.vao,".setVAO(",be.shared.vao,".targetVAO);"),Object.keys(ie).forEach(function(Cr){var Jr=ie[Cr],rn=mr.def(Ze,".",Cr),Hr=be.block();Hr("if(",rn,"){",Je,".enable(",Jr,")}else{",Je,".disable(",Jr,")}",cr,".",Cr,"=",rn,";"),He(Hr),Jt("if(",rn,"!==",cr,".",Cr,"){",Hr,"}")}),Object.keys(qt).forEach(function(Cr){var Jr=qt[Cr],rn=wt[Cr],Hr,_n,ta=be.block();if(ta(Je,".",Jr,"("),La(rn)){var Ta=rn.length;Hr=be.global.def(Ze,".",Cr),_n=be.global.def(cr,".",Cr),ta(Fr(Ta,function($n){return Hr+"["+$n+"]"}),");",Fr(Ta,function($n){return _n+"["+$n+"]="+Hr+"["+$n+"];"}).join("")),Jt("if(",Fr(Ta,function($n){return Hr+"["+$n+"]!=="+_n+"["+$n+"]"}).join("||"),"){",ta,"}")}else Hr=mr.def(Ze,".",Cr),_n=mr.def(cr,".",Cr),ta(Hr,");",cr,".",Cr,"=",Hr,";"),Jt("if(",Hr,"!==",_n,"){",ta,"}");He(ta)}),be.compile()}(),compile:Aa}}function Yl(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Vl=34918,Hl=34919,Zl=35007,ph=function(bt,ae){if(!ae.ext_disjoint_timer_query)return null;var Ge=[];function Lr(){return Ge.pop()||ae.ext_disjoint_timer_query.createQueryEXT()}function Wr(ct){Ge.push(ct)}var Nr=[];function zr(ct){var mt=Lr();ae.ext_disjoint_timer_query.beginQueryEXT(Zl,mt),Nr.push(mt),A(Nr.length-1,Nr.length,ct)}function mn(){ae.ext_disjoint_timer_query.endQueryEXT(Zl)}function dn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var wn=[];function xn(){return wn.pop()||new dn}function In(ct){wn.push(ct)}var v=[];function A(ct,mt,wt){var kt=xn();kt.startQueryIndex=ct,kt.endQueryIndex=mt,kt.sum=0,kt.stats=wt,v.push(kt)}var U=[],q=[];function st(){var ct,mt,wt=Nr.length;if(wt!==0){q.length=Math.max(q.length,wt+1),U.length=Math.max(U.length,wt+1),U[0]=0,q[0]=0;var kt=0;for(ct=0,mt=0;mt<Nr.length;++mt){var Ht=Nr[mt];ae.ext_disjoint_timer_query.getQueryObjectEXT(Ht,Hl)?(kt+=ae.ext_disjoint_timer_query.getQueryObjectEXT(Ht,Vl),Wr(Ht)):Nr[ct++]=Ht,U[mt+1]=kt,q[mt+1]=ct}for(Nr.length=ct,ct=0,mt=0;mt<v.length;++mt){var ie=v[mt],qt=ie.startQueryIndex,Oe=ie.endQueryIndex;ie.sum+=U[Oe]-U[qt];var ir=q[qt],Yr=q[Oe];Yr===ir?(ie.stats.gpuTime+=ie.sum/1e6,In(ie)):(ie.startQueryIndex=ir,ie.endQueryIndex=Yr,v[ct++]=ie)}v.length=ct}}return{beginQuery:zr,endQuery:mn,pushScopeStats:A,update:st,getNumPendingQueries:function(){return Nr.length},clear:function(){Ge.push.apply(Ge,Nr);for(var ct=0;ct<Ge.length;ct++)ae.ext_disjoint_timer_query.deleteQueryEXT(Ge[ct]);Nr.length=0,Ge.length=0},restore:function(){Nr.length=0,Ge.length=0}}},Kl=16384,yh=256,$l=1024,Ql=34962,ec="webglcontextlost",yf="webglcontextrestored",ms=1,ql=2,Jc=3;function tl(bt,ae){for(var Ge=0;Ge<bt.length;++Ge)if(bt[Ge]===ae)return Ge;return-1}function Do(bt){var ae=vr(bt);if(!ae)return null;var Ge=ae.gl,Lr=Ge.getContextAttributes(),Wr=Ge.isContextLost(),Nr=Br(Ge,ae);if(!Nr)return null;var zr=Qe(),mn=Yl(),dn=Nr.extensions,wn=ph(Ge,dn),xn=lr(),In=Ge.drawingBufferWidth,v=Ge.drawingBufferHeight,A={tick:0,time:0,viewportWidth:In,viewportHeight:v,framebufferWidth:In,framebufferHeight:v,drawingBufferWidth:In,drawingBufferHeight:v,pixelRatio:ae.pixelRatio},U={},q={elements:null,primitive:4,count:-1,offset:0,instances:-1},st=wa(Ge,dn),ct=ci(Ge,mn,ae,wt),mt=Ml(Ge,dn,st,mn,ct);function wt(sa){return mt.destroyBuffer(sa)}var kt=Zi(Ge,dn,ct,mn),Ht=Cl(Ge,zr,mn,ae),ie=gl(Ge,dn,st,function(){ir.procs.poll()},A,mn,ae),qt=zs(Ge,dn,st,mn,ae),Oe=fh(Ge,dn,st,ie,qt,mn),ir=gh(Ge,zr,dn,st,ct,kt,ie,Oe,U,mt,Ht,q,A,wn,ae),Yr=rf(Ge,Oe,ir.procs.poll,A,Lr,dn,st),hr=ir.next,pr=Ge.canvas,gr=[],En=[],kn=[],Tn=[ae.onDestroy],qn=null;function Kn(){if(gr.length===0){wn&&wn.update(),qn=null;return}qn=sr.next(Kn),Uo();for(var sa=gr.length-1;sa>=0;--sa){var Na=gr[sa];Na&&Na(A,null,0)}Ge.flush(),wn&&wn.update()}function ia(){!qn&&gr.length>0&&(qn=sr.next(Kn))}function ga(){qn&&(sr.cancel(Kn),qn=null)}function ua(sa){sa.preventDefault(),Wr=!0,ga(),En.forEach(function(Na){Na()})}function yi(sa){Ge.getError(),Wr=!1,Nr.restore(),Ht.restore(),ct.restore(),ie.restore(),qt.restore(),Oe.restore(),mt.restore(),wn&&wn.restore(),ir.procs.refresh(),ia(),kn.forEach(function(Na){Na()})}pr&&(pr.addEventListener(ec,ua,!1),pr.addEventListener(yf,yi,!1));function xa(){gr.length=0,ga(),pr&&(pr.removeEventListener(ec,ua),pr.removeEventListener(yf,yi)),Ht.clear(),Oe.clear(),qt.clear(),ie.clear(),kt.clear(),ct.clear(),mt.clear(),wn&&wn.clear(),Tn.forEach(function(sa){sa()})}function zi(sa){Lt(!!sa,"invalid args to regl({...})"),Lt.type(sa,"object","invalid args to regl({...})");function Na(wr){var Je=R({},wr);delete Je.uniforms,delete Je.attributes,delete Je.context,delete Je.vao,"stencil"in Je&&Je.stencil.op&&(Je.stencil.opBack=Je.stencil.opFront=Je.stencil.op,delete Je.stencil.op);function Ze(cr){if(cr in Je){var xe=Je[cr];delete Je[cr],Object.keys(xe).forEach(function(Ve){Je[cr+"."+Ve]=xe[Ve]})}}return Ze("blend"),Ze("depth"),Ze("cull"),Ze("stencil"),Ze("polygonOffset"),Ze("scissor"),Ze("sample"),"vao"in wr&&(Je.vao=wr.vao),Je}function Xa(wr,Je){var Ze={},cr={};return Object.keys(wr).forEach(function(xe){var Ve=wr[xe];if(on.isDynamic(Ve)){cr[xe]=on.unbox(Ve,xe);return}else if(Je&&Array.isArray(Ve)){for(var ge=0;ge<Ve.length;++ge)if(on.isDynamic(Ve[ge])){cr[xe]=on.unbox(Ve,xe);return}}Ze[xe]=Ve}),{dynamic:cr,static:Ze}}var Mo=Xa(sa.context||{},!0),$s=Xa(sa.uniforms||{},!0),mf=Xa(sa.attributes||{},!1),Ce=Xa(Na(sa),!1),Pr={gpuTime:0,cpuTime:0,count:0},Ir=ir.compile(Ce,mf,$s,Mo,Pr),Xn=Ir.draw,Aa=Ir.batch,be=Ir.scope,Jt=[];function He(wr){for(;Jt.length<wr;)Jt.push(null);return Jt}function mr(wr,Je){var Ze;if(Wr&&Lt.raise("context lost"),typeof wr=="function")return be.call(this,null,wr,0);if(typeof Je=="function")if(typeof wr=="number")for(Ze=0;Ze<wr;++Ze)be.call(this,null,Je,Ze);else if(Array.isArray(wr))for(Ze=0;Ze<wr.length;++Ze)be.call(this,wr[Ze],Je,Ze);else return be.call(this,wr,Je,0);else if(typeof wr=="number"){if(wr>0)return Aa.call(this,He(wr|0),wr|0)}else if(Array.isArray(wr)){if(wr.length)return Aa.call(this,wr,wr.length)}else return Xn.call(this,wr)}return R(mr,{stats:Pr,destroy:function(){Ir.destroy()}})}var ii=Oe.setFBO=zi({framebuffer:on.define.call(null,ms,"framebuffer")});function ka(sa,Na){var Xa=0;ir.procs.poll();var Mo=Na.color;Mo&&(Ge.clearColor(+Mo[0]||0,+Mo[1]||0,+Mo[2]||0,+Mo[3]||0),Xa|=Kl),"depth"in Na&&(Ge.clearDepth(+Na.depth),Xa|=yh),"stencil"in Na&&(Ge.clearStencil(Na.stencil|0),Xa|=$l),Lt(!!Xa,"called regl.clear with no buffer specified"),Ge.clear(Xa)}function Ui(sa){if(Lt(typeof sa=="object"&&sa,"regl.clear() takes an object as input"),"framebuffer"in sa)if(sa.framebuffer&&sa.framebuffer_reglType==="framebufferCube")for(var Na=0;Na<6;++Na)ii(R({framebuffer:sa.framebuffer.faces[Na]},sa),ka);else ii(sa,ka);else ka(null,sa)}function Ni(sa){Lt.type(sa,"function","regl.frame() callback must be a function"),gr.push(sa);function Na(){var Xa=tl(gr,sa);Lt(Xa>=0,"cannot cancel a frame twice");function Mo(){var $s=tl(gr,Mo);gr[$s]=gr[gr.length-1],gr.length-=1,gr.length<=0&&ga()}gr[Xa]=Mo}return ia(),{cancel:Na}}function So(){var sa=hr.viewport,Na=hr.scissor_box;sa[0]=sa[1]=Na[0]=Na[1]=0,A.viewportWidth=A.framebufferWidth=A.drawingBufferWidth=sa[2]=Na[2]=Ge.drawingBufferWidth,A.viewportHeight=A.framebufferHeight=A.drawingBufferHeight=sa[3]=Na[3]=Ge.drawingBufferHeight}function Uo(){A.tick+=1,A.time=Ca(),So(),ir.procs.poll()}function _o(){ie.refresh(),So(),ir.procs.refresh(),wn&&wn.update()}function Ca(){return(lr()-xn)/1e3}_o();function Wo(sa,Na){Lt.type(Na,"function","listener callback must be a function");var Xa;switch(sa){case"frame":return Ni(Na);case"lost":Xa=En;break;case"restore":Xa=kn;break;case"destroy":Xa=Tn;break;default:Lt.raise("invalid event, must be one of frame,lost,restore,destroy")}return Xa.push(Na),{cancel:function(){for(var Mo=0;Mo<Xa.length;++Mo)if(Xa[Mo]===Na){Xa[Mo]=Xa[Xa.length-1],Xa.pop();return}}}}var ei=R(zi,{clear:Ui,prop:on.define.bind(null,ms),context:on.define.bind(null,ql),this:on.define.bind(null,Jc),draw:zi({}),buffer:function(sa){return ct.create(sa,Ql,!1,!1)},elements:function(sa){return kt.create(sa,!1)},texture:ie.create2D,cube:ie.createCube,renderbuffer:qt.create,framebuffer:Oe.create,framebufferCube:Oe.createCube,vao:mt.createVAO,attributes:Lr,frame:Ni,on:Wo,limits:st,hasExtension:function(sa){return st.extensions.indexOf(sa.toLowerCase())>=0},read:Yr,destroy:xa,_gl:Ge,_refresh:_o,poll:function(){Uo(),wn&&wn.update()},now:Ca,stats:mn});return ae.onDone(null,ei),ei}return Do})},86851:function(Mr,G,R){"use strict";var L=R(89594),z=Array.prototype.concat,F=Array.prototype.slice,I=Mr.exports=function(D){for(var b=[],E=0,p=D.length;E<p;E++){var y=D[E];L(y)?b=z.call(b,F.call(y)):b.push(y)}return b};I.wrap=function(k){return function(){return k(I(arguments))}}},89594:function(Mr){Mr.exports=function(R){return!R||typeof R=="string"?!1:R instanceof Array||Array.isArray(R)||R.length>=0&&(R.splice instanceof Function||Object.getOwnPropertyDescriptor(R,R.length-1)&&R.constructor.name!=="String")}},66485:function(Mr,G,R){/*! 
 * Voca string library 1.4.0
 * https://vocajs.com
 *
 * Copyright Dmitri Pavlutin and other contributors
 * Released under the MIT license
 */(function(L,z){Mr.exports=z()})(this,function(){"use strict";function L(Pt){return Pt==null}function z(Pt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return L(Pt)?Tt:Boolean(Pt)}function F(Pt){return typeof Pt=="string"}function I(Pt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return L(Pt)?Tt:F(Pt)?Pt:String(Pt)}function k(Pt,Tt){var H=I(Pt),gt=z(Tt);return H===""?"":(gt&&(H=H.toLowerCase()),H.substr(0,1).toUpperCase()+H.substr(1))}function D(Pt){var Tt=I(Pt,"");return Tt.toLowerCase()}var b="\\d",E="\\s\\uFEFF\\xA0",p="\\uD800-\\uDBFF",y="\\uDC00-\\uDFFF",g="\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F",T="\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF",x=new RegExp("(["+T+"]|["+p+"]["+y+"]|["+p+"](?!["+y+"])|(?:[^"+p+"]|^)["+y+"])(["+g+"]+)","g"),S=new RegExp("(["+p+"])(["+y+"])","g"),N=new RegExp("((?:["+T+"]|["+p+"]["+y+"]|["+p+"](?!["+y+"])|(?:[^"+p+"]|^)["+y+"])(?:["+g+"]+))|(["+p+"]["+y+"])|([\\n\\r\\u2028\\u2029])|(.)","g"),m=new RegExp("["+E+"]"),d=new RegExp("^["+E+"]+"),V=new RegExp("["+E+"]+$"),Q=new RegExp("^"+b+"+$"),j=/[-[\]{}()*+!<=:?./\\^$|#,]/g,X=/[^A-Za-z0-9]/g,K=/[<>&"'`]/g,J=/(%{1,2})(?:(\d+)\$)?(\+)?([ 0]|'.{1})?(-)?(\d+)?(?:\.(\d+))?([bcdiouxXeEfgGs])?/g,rt=/\.?0+$/g,tt=/[gimuy]*$/,nt=/<([A-Za-z0-9]+)>/g,lt="\\u2000-\\u206F",xt="\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7b-\\xBF\\xD7\\xF7",jt="\\u2700-\\u27BF",Dt="a-z\\xB5\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F",Zt="\\x41-\\x5a\\xc0-\\xd6\\xd8-\\xde\\u0100\\u0102\\u0104\\u0106\\u0108\\u010a\\u010c\\u010e\\u0110\\u0112\\u0114\\u0116\\u0118\\u011a\\u011c\\u011e\\u0120\\u0122\\u0124\\u0126\\u0128\\u012a\\u012c\\u012e\\u0130\\u0132\\u0134\\u0136\\u0139\\u013b\\u013d\\u013f\\u0141\\u0143\\u0145\\u0147\\u014a\\u014c\\u014e\\u0150\\u0152\\u0154\\u0156\\u0158\\u015a\\u015c\\u015e\\u0160\\u0162\\u0164\\u0166\\u0168\\u016a\\u016c\\u016e\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017b\\u017d\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018b\\u018e-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019c\\u019d\\u019f\\u01a0\\u01a2\\u01a4\\u01a6\\u01a7\\u01a9\\u01ac\\u01ae\\u01af\\u01b1-\\u01b3\\u01b5\\u01b7\\u01b8\\u01bc\\u01c4\\u01c5\\u01c7\\u01c8\\u01ca\\u01cb\\u01cd\\u01cf\\u01d1\\u01d3\\u01d5\\u01d7\\u01d9\\u01db\\u01de\\u01e0\\u01e2\\u01e4\\u01e6\\u01e8\\u01ea\\u01ec\\u01ee\\u01f1\\u01f2\\u01f4\\u01f6-\\u01f8\\u01fa\\u01fc\\u01fe\\u0200\\u0202\\u0204\\u0206\\u0208\\u020a\\u020c\\u020e\\u0210\\u0212\\u0214\\u0216\\u0218\\u021a\\u021c\\u021e\\u0220\\u0222\\u0224\\u0226\\u0228\\u022a\\u022c\\u022e\\u0230\\u0232\\u023a\\u023b\\u023d\\u023e\\u0241\\u0243-\\u0246\\u0248\\u024a\\u024c\\u024e",Vt=new RegExp("(?:["+Zt+"]["+g+"]*)?(?:["+Dt+"]["+g+"]*)+|(?:["+Zt+"]["+g+"]*)+(?!["+Dt+"])|["+b+"]+|["+jt+"]|[^"+xt+lt+E+"]+","g"),ue=/[A-Z\xC0-\xD6\xD8-\xDE]?[a-z\xDF-\xF6\xF8-\xFF]+|[A-Z\xC0-\xD6\xD8-\xDE]+(?![a-z\xDF-\xF6\xF8-\xFF])|\d+/g,dt=new RegExp("^(?:["+Dt+Zt+"]["+g+"]*)+$"),Ot=new RegExp("^((?:["+Dt+Zt+"]["+g+"]*)|["+b+"])+$"),ee=/^[\x01-\xFF]*$/;function Re(Pt,Tt){return Pt==null?Tt:Pt}function me(Pt){return L(Pt)?null:F(Pt)?Pt:String(Pt)}function Ae(Pt,Tt,H){var gt=I(Pt),Rt=void 0;if(L(Tt))Rt=ee.test(gt)?ue:Vt;else if(Tt instanceof RegExp)Rt=Tt;else{var te=me(Re(H,""));Rt=new RegExp(me(Tt),te)}return Re(gt.match(Rt),[])}function Be(Pt,Tt){return Tt===0?D(Pt):k(Pt,!0)}function Ke(Pt){var Tt=I(Pt);return Tt===""?"":Ae(Tt).map(Be).join("")}function $t(Pt){var Tt=I(Pt);return Tt===""?"":Tt.substr(0,1).toLowerCase()+Tt.substr(1)}function ce(Pt){var Tt=I(Pt);return Tt===""?"":Ae(Tt).map(D).join("-")}function we(Pt){var Tt=I(Pt);return Tt===""?"":Ae(Tt).map(D).join("_")}function Pe(Pt){var Tt=I(Pt);return Tt.toUpperCase()}function ye(Pt){var Tt=I(Pt);return Tt.split("").reduce(Bt,"")}function Bt(Pt,Tt){var H=Tt.toLowerCase(),gt=Tt.toUpperCase();return Pt+(Tt===H?gt:H)}function re(Pt,Tt){var H=I(Pt),gt=Array.isArray(Tt)?Tt:[],Rt=ee.test(H)?ue:Vt;return H.replace(Rt,function(te,De){var rr=De>0&&gt.indexOf(H[De-1])>=0;return rr?te.toLowerCase():k(te,!0)})}function Ee(Pt,Tt,H){return Pt<=Tt?Tt:Pt>=H?H:Pt}var It=9007199254740991;function Et(Pt){return Pt===Infinity?It:Pt===-Infinity?-It:~~Pt}function Wt(Pt,Tt,H){var gt=I(Pt),Rt=L(Tt)?gt.length:Ee(Et(Tt),0,It),te=I(H,"...");return Rt>=gt.length?gt:gt.substr(0,Tt-te.length)+te}function fe(Pt,Tt){var H=I(Pt);return H.charAt(Tt)}var Fe=55296,$e=56319,Lt=56320,Ne=57343;function Xe(Pt){return Pt>=Fe&&Pt<=$e}function Dr(Pt){return Pt>=Lt&&Pt<=Ne}function ur(Pt,Tt){return(Pt-Fe)*1024+Tt-Lt+65536}function Or(Pt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return L(Pt)?Tt:typeof Pt=="number"?Pt:Number(Pt)}function ln(Pt,Tt){return Pt!==Pt?Tt:Pt}function fn(Pt,Tt){var H=I(Pt),gt=H.length,Rt=Or(Tt);if(Rt=ln(Rt,0),!(Rt<0||Rt>=gt)){var te=H.charCodeAt(Rt),De=void 0;return Xe(te)&&gt>Rt+1&&(De=H.charCodeAt(Rt+1),Dr(De))?ur(te,De):te}}function Xr(Pt,Tt){var H=I(Pt),gt=L(Tt)?1:Ee(Et(Tt),0,It);return H.length<=gt?H:H.substr(0,gt)}function Cn(Pt,Tt){var H=I(Pt),gt=Or(Tt),Rt=void 0,te=0;for(gt=ln(gt,0);(Rt=N.exec(H))!==null;){if(te===gt)return N.lastIndex=0,Rt[0];te++}return""}function Qr(Pt,Tt){var H=I(Pt),gt=L(Tt)?1:Ee(Et(Tt),0,It);return H.length<=gt?H:H.substr(H.length-gt,gt)}function Gr(Pt,Tt,H){var gt=I(Pt),Rt=L(Tt)?gt.length:Ee(Et(Tt),0,It),te=I(H,"...");if(Rt>=gt.length)return gt;var De=ee.test(gt)?ue:Vt,rr=0;return gt.replace(De,function(Er,yn){var en=yn+Er.length;en<=Rt-te.length&&(rr=en)}),gt.substr(0,rr)+te}function on(Pt,Tt,H){return I(Pt).slice(Tt,H)}function sr(Pt,Tt,H){return I(Pt).substr(Tt,H)}function lr(Pt,Tt,H){return I(Pt).substring(Tt,H)}function Qe(Pt){return I(Pt).length}function $r(Pt){return I(Pt).replace(x,"*").replace(S,"*").length}function an(Pt,Tt){var H=I(Pt),gt=I(Tt),Rt=gt.length,te=0,De=0;if(H===""||gt==="")return te;do De=H.indexOf(gt,De),De!==-1&&(te++,De+=Rt);while(De!==-1);return te}var bn=Array.prototype.reduce;function nr(Pt,Tt,H){var gt=I(Pt);if(gt===""||typeof Tt!="function")return 0;var Rt=Tt.bind(H);return bn.call(gt,function(te,De,rr){return Rt(De,rr,gt)?te+1:te},0)}function Tr(Pt,Tt,H){return Ae(Pt,Tt,H).length}function ar(){this.index=0}ar.prototype.increment=function(){this.index++},ar.prototype.incrementOnEmptyPosition=function(Pt){L(Pt)&&this.increment()},ar.prototype.getIndexByPosition=function(Pt){return L(Pt)?this.index:Pt-1};var vr="i",Br="b",Fr="c",kr="d",Z="o",Te="u",ne="x",it="X",ot="e",B="E",_="f",C="g",Y="G",pt="s",_t="'",Mt="+",zt="-",Le="%%",Me=2,qe=8,br=16;function xr(Pt,Tt){for(var H=I(Pt),gt=L(Tt)?1:Ee(Et(Tt),0,It),Rt="";gt;)gt&1&&(Rt+=H),gt>1&&(H+=H),gt>>=1;return Rt}function sn(Pt,Tt){var H=Et(Tt/Pt.length),gt=Tt%Pt.length;return xr(Pt,H+gt).substr(0,Tt)}function Rn(Pt,Tt,H){var gt=I(Pt),Rt=L(Tt)?0:Ee(Et(Tt),0,It),te=I(H," ");return Rt<=gt.length?gt:sn(te,Rt-gt.length)+gt}function tr(Pt,Tt,H){var gt=I(Pt),Rt=L(Tt)?0:Ee(Et(Tt),0,It),te=I(H," ");return Rt<=gt.length?gt:gt+sn(te,Rt-gt.length)}function Sr(Pt,Tt){var H=Tt.width;if(L(H)||Pt.length>=H)return Pt;var gt=Tt.alignmentSpecifier===zt?tr:Rn;return gt(Pt,H,Tt.getPaddingCharacter())}function jr(Pt,Tt,H){return H.signSpecifier===Mt&&Pt>=0&&(Tt=Mt+Tt),Tt}function Nn(Pt,Tt){var H=parseFloat(Pt),gt=void 0;isNaN(H)&&(H=0);var Rt=Or(Tt.precision,6);switch(Tt.typeSpecifier){case _:gt=H.toFixed(Rt);break;case ot:gt=H.toExponential(Rt);break;case B:gt=H.toExponential(Rt).toUpperCase();break;case C:case Y:gt=gn(H,Rt,Tt);break}return gt=jr(H,gt,Tt),I(gt)}function gn(Pt,Tt,H){if(Pt===0)return"0";var gt=Tt===0?1:Tt,Rt=Pt.toPrecision(gt).replace(rt,"");return H.typeSpecifier===Y&&(Rt=Rt.toUpperCase()),Rt}function ea(Pt,Tt){var H=parseInt(Pt);switch(isNaN(H)&&(H=0),H=H>>>0,Tt.typeSpecifier){case Fr:H=String.fromCharCode(H);break;case Br:H=H.toString(Me);break;case Z:H=H.toString(qe);break;case ne:H=H.toString(br);break;case it:H=H.toString(br).toUpperCase();break}return I(H)}function ha(Pt,Tt){var H=parseInt(Pt);return isNaN(H)&&(H=0),jr(H,me(H),Tt)}function Zn(Pt,Tt){var H=Pt,gt=Tt.precision;return!L(gt)&&H.length>gt&&(H=Wt(H,gt,"")),H}function na(Pt,Tt){var H=void 0;switch(Tt.typeSpecifier){case pt:H=Zn;break;case kr:case vr:H=ha;break;case Fr:case Br:case Z:case ne:case it:case Te:H=ea;break;case _:case ot:case B:case C:case Y:H=Nn;break}var gt=H(Pt,Tt);return Sr(gt,Tt)}function da(Pt){this.percent=Pt.percent,this.signSpecifier=Pt.signSpecifier,this.paddingSpecifier=Pt.paddingSpecifier,this.alignmentSpecifier=Pt.alignmentSpecifier,this.width=Pt.width,this.precision=Pt.precision,this.typeSpecifier=Pt.typeSpecifier}da.prototype.isPercentLiteral=function(){return Le===this.percent},da.prototype.getPaddingCharacter=function(){var Pt=Re(this.paddingSpecifier," ");return Pt.length===2&&Pt[0]===_t&&(Pt=Pt[1]),Pt};function Vn(Pt,Tt,H){if(L(H.typeSpecifier))throw new Error("sprintf(): Unknown type specifier");if(Pt>Tt-1)throw new Error("sprintf(): Too few arguments");if(Pt<0)throw new Error("sprintf(): Argument number must be greater than zero")}function se(Pt,Tt,H,gt,Rt,te,De,rr,Er,yn,en){var hn=new da({percent:gt,signSpecifier:te,paddingSpecifier:De,alignmentSpecifier:rr,width:Or(Er,null),precision:Or(yn,null),typeSpecifier:en});if(hn.isPercentLiteral())return H.slice(1);var Qn=Pt.getIndexByPosition(Rt);return Pt.incrementOnEmptyPosition(Rt),Vn(Qn,Tt.length,hn),na(Tt[Qn],hn)}function Ut(Pt){var Tt=I(Pt);if(Tt==="")return Tt;for(var H=arguments.length,gt=Array(H>1?H-1:0),Rt=1;Rt<H;Rt++)gt[Rt-1]=arguments[Rt];var te=se.bind(void 0,new ar,gt);return Tt.replace(J,te)}function le(Pt){if(Array.isArray(Pt)){for(var Tt=0,H=Array(Pt.length);Tt<Pt.length;Tt++)H[Tt]=Pt[Tt];return H}else return Array.from(Pt)}function ze(Pt,Tt){return Ut.apply(void 0,[Pt].concat(le(Re(Tt,[]))))}var Ie={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function We(Pt){return Ie[Pt]}function _r(Pt){return I(Pt).replace(K,We)}function nn(Pt){return I(Pt).replace(j,"\\$&")}var pn={"<":/(&lt;)|(&#x0*3c;)|(&#0*60;)/gi,">":/(&gt;)|(&#x0*3e;)|(&#0*62;)/gi,"&":/(&amp;)|(&#x0*26;)|(&#0*38;)/gi,'"':/(&quot;)|(&#x0*22;)|(&#0*34;)/gi,"'":/(&#x0*27;)|(&#0*39;)/gi,"`":/(&#x0*60;)|(&#0*96;)/gi},Gn=Object.keys(pn);function jn(Pt,Tt){return Pt.replace(pn[Tt],Tt)}function oa(Pt){var Tt=I(Pt);return Gn.reduce(jn,Tt)}function va(Pt,Tt,H){var gt=I(Pt);return gt.indexOf(Tt,H)}function _a(Pt,Tt,H){var gt=I(Pt);return gt.lastIndexOf(Tt,H)}function fi(Pt,Tt,H){var gt=I(Pt),Rt=L(H)?0:Ee(Et(H),0,gt.length),te=gt.substr(Rt).search(Tt);return te!==-1&&!isNaN(Rt)&&(te+=Rt),te}function Ba(Pt,Tt,H){var gt=I(Pt),Rt=I(Tt),te=Or(H);return te<0||te>gt.length||Rt===""?gt:gt.slice(0,te)+Rt+gt.slice(te)}var Wa={"3":"\u039E\u03BE","8":"\u0398\u03B8",A:"A\xC0\xC1\xC2\xC3\xC4\xC5\u0100\u0102\u0104\u01CD\u01DE\u01E0\u01FA\u0200\u0202\u0226\u023A\u1E00\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u24B6\u2C6F\uFF21\u0386\u0391\u0410",B:"B\u0181\u0182\u0243\u1E02\u1E04\u1E06\u24B7\uFF22\u0392\u0411",C:"C\xC7\u0106\u0108\u010A\u010C\u0187\u023B\u1E08\u24B8\uA73E\uFF23\u0426",D:"D\u010E\u0110\u0189\u018A\u018B\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u24B9\uA779\uFF24\xD0\u0394\u0414",E:"E\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u018E\u0190\u0204\u0206\u0228\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u24BA\uFF25\u0388\u0395\u0415\u042D",F:"F\u0191\u1E1E\u24BB\uA77B\uFF26\u03A6\u0424",G:"G\u011C\u011E\u0120\u0122\u0193\u01E4\u01E6\u01F4\u1E20\u24BC\uA77D\uA77E\uA7A0\uFF27\u0393\u0413\u0490",H:"H\u0124\u0126\u021E\u1E22\u1E24\u1E26\u1E28\u1E2A\u24BD\u2C67\u2C75\uA78D\uFF28\u0389\u0397\u0425",I:"I\xCC\xCD\xCE\xCF\u0128\u012A\u012C\u012E\u0130\u0197\u01CF\u0208\u020A\u1E2C\u1E2E\u1EC8\u1ECA\u24BE\uFF29\u038A\u0399\u03AA\u0406\u0418",J:"J\u0134\u0248\u24BF\uFF2A\u0419",K:"K\u0136\u0198\u01E8\u1E30\u1E32\u1E34\u24C0\u2C69\uA740\uA742\uA744\uA7A2\uFF2B\u039A\u041A",L:"L\u0139\u013B\u013D\u013F\u0141\u023D\u1E36\u1E38\u1E3A\u1E3C\u24C1\u2C60\u2C62\uA746\uA748\uA780\uFF2C\u039B\u041B",M:"M\u019C\u1E3E\u1E40\u1E42\u24C2\u2C6E\uFF2D\u039C\u041C",N:"N\xD1\u0143\u0145\u0147\u019D\u01F8\u0220\u1E44\u1E46\u1E48\u1E4A\u24C3\uA790\uA7A4\uFF2E\u039D\u041D",O:"O\xD2\xD3\xD4\xD5\xD6\xD8\u014C\u014E\u0150\u0186\u019F\u01A0\u01D1\u01EA\u01EC\u01FE\u020C\u020E\u022A\u022C\u022E\u0230\u1E4C\u1E4E\u1E50\u1E52\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u24C4\uA74A\uA74C\uFF2F\u038C\u039F\u041E",P:"P\u01A4\u1E54\u1E56\u24C5\u2C63\uA750\uA752\uA754\uFF30\u03A0\u041F",Q:"Q\u024A\u24C6\uA756\uA758\uFF31",R:"R\u0154\u0156\u0158\u0210\u0212\u024C\u1E58\u1E5A\u1E5C\u1E5E\u24C7\u2C64\uA75A\uA782\uA7A6\uFF32\u03A1\u0420",S:"S\u015A\u015C\u015E\u0160\u0218\u1E60\u1E62\u1E64\u1E66\u1E68\u1E9E\u24C8\u2C7E\uA784\uA7A8\uFF33\u03A3\u0421",T:"T\u0162\u0164\u0166\u01AC\u01AE\u021A\u023E\u1E6A\u1E6C\u1E6E\u1E70\u24C9\uA786\uFF34\u03A4\u0422",U:"U\xD9\xDA\xDB\xDC\u0168\u016A\u016C\u016E\u0170\u0172\u01AF\u01D3\u01D5\u01D7\u01D9\u01DB\u0214\u0216\u0244\u1E72\u1E74\u1E76\u1E78\u1E7A\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u24CA\uFF35\u0423\u042A",V:"V\u01B2\u0245\u1E7C\u1E7E\u24CB\uA75E\uFF36\u0412",W:"W\u0174\u1E80\u1E82\u1E84\u1E86\u1E88\u24CC\u2C72\uFF37\u038F\u03A9",X:"X\u1E8A\u1E8C\u24CD\uFF38\u03A7",Y:"Y\xDD\u0176\u0178\u01B3\u0232\u024E\u1E8E\u1EF2\u1EF4\u1EF6\u1EF8\u1EFE\u24CE\uFF39\u038E\u03A5\u03AB\u042B",Z:"Z\u0179\u017B\u017D\u01B5\u0224\u1E90\u1E92\u1E94\u24CF\u2C6B\u2C7F\uA762\uFF3A\u0396\u0417",a:"a\xE0\xE1\xE2\xE3\xE4\xE5\u0101\u0103\u0105\u01CE\u01DF\u01E1\u01FB\u0201\u0203\u0227\u0250\u1E01\u1E9A\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u24D0\u2C65\uFF41\u03AC\u03B1\u0430",b:"b\u0180\u0183\u0253\u1E03\u1E05\u1E07\u24D1\uFF42\u03B2\u0431",c:"c\xE7\u0107\u0109\u010B\u010D\u0188\u023C\u1E09\u2184\u24D2\uA73F\uFF43\u0446",d:"d\u010F\u0111\u018C\u0256\u0257\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u24D3\uA77A\uFF44\xF0\u03B4\u0434",e:"e\xE8\xE9\xEA\xEB\u0113\u0115\u0117\u0119\u011B\u01DD\u0205\u0207\u0229\u0247\u025B\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u24D4\uFF45\u03AD\u03B5\u0435\u044D",f:"f\u0192\u1E1F\u24D5\uA77C\uFF46\u03C6\u0444",g:"g\u011D\u011F\u0121\u0123\u01E5\u01E7\u01F5\u0260\u1D79\u1E21\u24D6\uA77F\uA7A1\uFF47\u03B3\u0433\u0491",h:"h\u0125\u0127\u021F\u0265\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E96\u24D7\u2C68\u2C76\uFF48\u03AE\u03B7\u0445",i:"i\xEC\xED\xEE\xEF\u0129\u012B\u012D\u012F\u0131\u01D0\u0209\u020B\u0268\u1E2D\u1E2F\u1EC9\u1ECB\u24D8\uFF49\u0390\u03AF\u03B9\u03CA\u0438\u0456",j:"j\u0135\u01F0\u0249\u24D9\uFF4A\u0439",k:"k\u0137\u0199\u01E9\u1E31\u1E33\u1E35\u24DA\u2C6A\uA741\uA743\uA745\uA7A3\uFF4B\u03BA\u043A",l:"l\u013A\u013C\u013E\u0140\u0142\u017F\u019A\u026B\u1E37\u1E39\u1E3B\u1E3D\u24DB\u2C61\uA747\uA749\uA781\uFF4C\u03BB\u043B",m:"m\u026F\u0271\u1E3F\u1E41\u1E43\u24DC\uFF4D\u03BC\u043C",n:"n\xF1\u0144\u0146\u0148\u0149\u019E\u01F9\u0272\u1E45\u1E47\u1E49\u1E4B\u24DD\uA791\uA7A5\uFF4E\u03BD\u043D",o:"o\xF2\xF3\xF4\xF5\xF6\xF8\u014D\u014F\u0151\u01A1\u01D2\u01EB\u01ED\u01FF\u020D\u020F\u022B\u022D\u022F\u0231\u0254\u0275\u1E4D\u1E4F\u1E51\u1E53\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u24DE\uA74B\uA74D\uFF4F\u03BF\u03CC\u043E",p:"p\u01A5\u1D7D\u1E55\u1E57\u24DF\uA751\uA753\uA755\uFF50\u03C0\u043F",q:"q\u024B\u24E0\uA757\uA759\uFF51",r:"r\u0155\u0157\u0159\u0211\u0213\u024D\u027D\u1E59\u1E5B\u1E5D\u1E5F\u24E1\uA75B\uA783\uA7A7\uFF52\u03C1\u0440",s:"s\xDF\u015B\u015D\u015F\u0161\u0219\u023F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E9B\u24E2\uA785\uA7A9\uFF53\u03C2\u03C3\u0441",t:"t\u0163\u0165\u0167\u01AD\u021B\u0288\u1E6B\u1E6D\u1E6F\u1E71\u1E97\u24E3\u2C66\uA787\uFF54\u03C4\u0442",u:"u\xF9\xFA\xFB\xFC\u0169\u016B\u016D\u016F\u0171\u0173\u01B0\u01D4\u01D6\u01D8\u01DA\u01DC\u0215\u0217\u0289\u1E73\u1E75\u1E77\u1E79\u1E7B\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u24E4\uFF55\u0443\u044A",v:"v\u028B\u028C\u1E7D\u1E7F\u24E5\uA75F\uFF56\u0432",w:"w\u0175\u1E81\u1E83\u1E85\u1E87\u1E89\u1E98\u24E6\u2C73\uFF57\u03C9\u03CE",x:"x\u1E8B\u1E8D\u24E7\uFF58\u03C7",y:"y\xFD\xFF\u0177\u01B4\u0233\u024F\u1E8F\u1E99\u1EF3\u1EF5\u1EF7\u1EF9\u1EFF\u24E8\uFF59\u03B0\u03C5\u03CB\u03CD\u044B",z:"z\u017A\u017C\u017E\u01B6\u0225\u0240\u1E91\u1E93\u1E95\u24E9\u2C6C\uA763\uFF5A\u03B6\u0437",OE:"\x8C\u0152",oe:"\x9C\u0153",AE:"\xC6\u01E2\u01FC",ae:"\xE6\u01E3\u01FD",hv:"\u0195",OI:"\u01A2",oi:"\u01A3",DZ:"\u01C4\u01F1",Dz:"\u01C5\u01F2",dz:"\u01C6\u01F3",LJ:"\u01C7",Lj:"\u01C8",lj:"\u01C9",NJ:"\u01CA",Nj:"\u01CB",nj:"\u01CC",OU:"\u0222",ou:"\u0223",TZ:"\uA728",tz:"\uA729",AA:"\uA732",aa:"\uA733",AO:"\uA734",ao:"\uA735",AU:"\uA736",au:"\uA737",AV:"\uA738\uA73A",av:"\uA739\uA73B",AY:"\uA73C",ay:"\uA73D",OO:"\uA74E",oo:"\uA74F",VY:"\uA760",vy:"\uA761",TH:"\xDE",th:"\xFE",PS:"\u03A8",ps:"\u03C8",Yo:"\u0401",Ye:"\u0404",Yi:"\u0407",Zh:"\u0416",Ch:"\u0427",Sh:"\u0428\u0429","":"\u042C\u044C",Yu:"\u042E",Ya:"\u042F",zh:"\u0436",ch:"\u0447",sh:"\u0448\u0449",yu:"\u044E",ya:"\u044F",yo:"\u0451",ye:"\u0454",yi:"\u0457"},wa=null;function vi(){return wa!==null||(wa={},Object.keys(Wa).forEach(function(Pt){for(var Tt=Wa[Pt],H=0;H<Tt.length;H++){var gt=Tt[H];wa[gt]=Pt}})),wa}function ti(Pt){var Tt=vi()[Pt];return Tt||Pt}function Ia(Pt,Tt){return Tt}function qi(Pt){var Tt=I(Pt);return Tt===""?"":Tt.replace(X,ti).replace(x,Ia)}function gi(Pt,Tt,H){var gt=I(Pt),Rt=L(Tt)?0:Ee(Et(Tt),0,It),te=I(H," ");if(Rt<=gt.length)return gt;var De=Rt-gt.length,rr=Et(De/2),Er=De%2;return sn(te,rr)+gt+sn(te,rr+Er)}function ji(Pt,Tt,H){var gt=I(Pt);return gt.replace(Tt,H)}function Ti(Pt){return Pt.toString().match(tt)[0]}function ri(Pt,Tt,H){var gt=I(Pt),Rt=me(Tt);return Rt===null?!1:Rt===""?!0:(H=L(H)?0:Ee(Et(H),0,gt.length),gt.indexOf(Rt,H)!==-1)}function No(Pt,Tt){var H=Ti(Pt);return ri(H,Tt)?Pt:new RegExp(Pt.source,H+Tt)}function Po(Pt,Tt,H){var gt=I(Pt),Rt=Tt;return Tt instanceof RegExp?Tt.global||(Rt=No(Tt,"g")):Rt=new RegExp(nn(Tt),"g"),gt.replace(Rt,H)}function Ii(Pt){var Tt=I(Pt);return Tt.split("").reverse().join("")}function ho(Pt){var Tt=I(Pt);Tt=Tt.replace(x,function(Rt,te,De){return ho(De)+te}).replace(S,"$2$1");for(var H="",gt=Tt.length;gt--;)H+=Tt.charAt(gt);return H}function Ji(Pt){var Tt=I(Pt);if(Tt==="")return"";var H=qi(Tt).replace(X,"-");return ce(H)}function Xi(Pt,Tt,H,gt){var Rt=I(Pt),te=I(gt),De=Or(Tt);De<0?(De=Rt.length+De,De<0&&(De=0)):De>Rt.length&&(De=Rt.length);var rr=Or(H,Rt.length-De);return rr<0&&(rr=0),Rt.slice(0,De)+te+Rt.slice(De+rr)}var Ri=function(){function Pt(Tt,H){var gt=[],Rt=!0,te=!1,De=void 0;try{for(var rr=Tt[Symbol.iterator](),Er;!(Rt=(Er=rr.next()).done)&&(gt.push(Er.value),!(H&&gt.length===H));Rt=!0);}catch(yn){te=!0,De=yn}finally{try{!Rt&&rr.return&&rr.return()}finally{if(te)throw De}}return gt}return function(Tt,H){if(Array.isArray(Tt))return Tt;if(Symbol.iterator in Object(Tt))return Pt(Tt,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function Oi(Pt,Tt,H){var gt=I(Pt),Rt=void 0,te=void 0;if(F(Tt)&&F(H))Rt=Tt.split(""),te=H.split("");else{var De=Io(Re(Tt,{})),rr=Ri(De,2);Rt=rr[0],te=rr[1]}var Er=Rt.length;if(Er===0)return gt;for(var yn="",en=te.length,hn=0;hn<gt.length;hn++){for(var Qn=!1,fa=void 0,Hn=0;Hn<Er&&Hn<en;Hn++){var Jn=Rt[Hn];if(gt.substr(hn,Jn.length)===Jn){Qn=!0,fa=te[Hn],hn=hn+Jn.length-1;break}}yn+=Qn?fa:gt[hn]}return yn}function Io(Pt){var Tt=Object.keys(Pt),H=Tt.sort(to).map(function(gt){return Pt[gt]});return[Tt,H]}function to(Pt,Tt){return Pt.length===Tt.length?0:Pt.length<Tt.length?1:-1}var Yi=Array.prototype.reduce;function un(Pt,Tt){var H=I(Pt);if(Tt===""||H==="")return H;var gt=me(Tt);if(L(gt))return H.replace(d,"");var Rt=!0;return Yi.call(H,function(te,De){return Rt&&ri(gt,De)?te:(Rt=!1,te+De)},"")}var vo=Array.prototype.reduceRight;function Fo(Pt,Tt){var H=I(Pt);if(Tt===""||H==="")return H;var gt=me(Tt);if(L(gt))return H.replace(V,"");var Rt=!0;return vo.call(H,function(te,De){return Rt&&ri(gt,De)?te:(Rt=!1,De+te)},"")}function Qa(Pt,Tt){var H=I(Pt);if(Tt===""||H==="")return H;var gt=me(Tt);return L(gt)?H.trim():Fo(un(H,gt),gt)}var ko="width",go="newLine",Li="indent",eo="cut";function de(Pt){var Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=I(Pt),gt=Ar(Tt),Rt=gt.width,te=gt.newLine,De=gt.indent,rr=gt.cut;if(H===""||Rt<=0)return De;for(var Er=H.length,yn=H.substring.bind(H),en=0,hn="";Er-en>Rt;){if(H[en]===" "){en++;continue}var Qn=H.lastIndexOf(" ",Rt+en);Qn>=en?(hn+=De+yn(en,Qn)+te,en=Qn+1):rr?(hn+=De+yn(en,Rt+en)+te,en+=Rt):(Qn=H.indexOf(" ",Rt+en),Qn>=0?(hn+=De+yn(en,Qn)+te,en=Qn+1):(hn+=De+yn(en),en=Er))}return en<Er&&(hn+=De+yn(en)),hn}function Ar(Pt){return{width:Or(Pt[ko],75),newLine:I(Pt[go],`
`),indent:I(Pt[Li],""),cut:z(Pt[eo],!1)}}function qr(Pt,Tt,H){if(L(Tt))return!1;var gt=I(Pt),Rt=I(Tt);if(Rt==="")return!0;H=L(H)?gt.length:Ee(Et(H),0,gt.length),H-=Rt.length;var te=gt.indexOf(Rt,H);return te!==-1&&te===H}function Bn(Pt){var Tt=I(Pt);return dt.test(Tt)}function Sa(Pt){var Tt=I(Pt);return Ot.test(Tt)}function ci(Pt){var Tt=I(Pt);return Tt.trim().length===0}function _i(Pt){var Tt=I(Pt);return Q.test(Tt)}function li(Pt){var Tt=I(Pt);return Tt.length===0}function Ai(Pt){var Tt=I(Pt);return Bn(Tt)&&Tt.toLowerCase()===Tt}function Ea(Pt){var Tt=typeof Pt=="object"&&!L(Pt)?Number(Pt):Pt;return(typeof Tt=="number"||typeof Tt=="string")&&!isNaN(Tt-parseFloat(Tt))}function ro(Pt){var Tt=I(Pt);return Bn(Tt)&&Tt.toUpperCase()===Tt}function Yo(Pt,Tt,H){var gt=I(Pt),Rt=I(H),te=void 0;if(!(Tt instanceof RegExp)){if(te=me(Tt),te===null)return!1;Tt=new RegExp(te,Rt)}return Tt.test(gt)}function Bi(Pt,Tt,H){var gt=I(Pt),Rt=me(Tt);return Rt===null?!1:Rt===""?!0:(H=L(H)?0:Ee(Et(H),0,gt.length),gt.substr(H,Rt.length)===Rt)}function no(Pt){var Tt=I(Pt);return Tt.split("")}function Oo(Pt){for(var Tt=I(Pt),H=Tt.length,gt=[],Rt=0,te=void 0;Rt<H;)te=fn(Tt,Rt),gt.push(te),Rt+=te>65535?2:1;return gt}function Vi(Pt){var Tt=I(Pt);return Re(Tt.match(N),[])}function po(Pt,Tt,H){var gt=I(Pt);return gt.split(Tt,H)}var Ei="\uFEFF";function yo(Pt){var Tt=I(Pt);return Tt===""?"":Tt[0]===Ei?Tt.substring(1):Tt}function Hi(Pt,Tt,H){var gt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,Rt=0;gt&&(Rt=-Tt.length+1);var te=Pt.substr(H+Rt,Tt.length);return te.toLowerCase()===Tt}function ma(Pt){for(var Tt=[],H=void 0;(H=nt.exec(Pt))!==null;)Tt.push(H[1]);return Tt}var qa=0,Mi=1,pi=2;function so(Pt){for(var Tt=qa,H="",gt=0;Tt!==pi;){var Rt=Pt[gt++].toLowerCase();switch(Rt){case"<":break;case">":Tt=pi;break;default:m.test(Rt)?Tt===Mi&&(Tt=pi):(Tt===qa&&(Tt=Mi),Rt!=="/"&&(H+=Rt));break}}return H}var Zi=0,Fi=1,mo=2,uo=3;function bo(Pt,Tt,H){if(Pt=I(Pt),Pt==="")return"";if(!Array.isArray(Tt)){var gt=I(Tt);Tt=gt===""?[]:ma(gt)}for(var Rt=I(H),te=Pt.length,De=Tt.length>0,rr=Hi.bind(null,Pt),Er=Zi,yn=0,en="",hn="",Qn=null,fa=0;fa<te;fa++){var Hn=Pt[fa],Jn=!1;switch(Hn){case"<":if(Qn)break;if(rr("< ",fa,!1)){Jn=!0;break}if(Er===Zi){Jn=!0,Er=Fi;break}if(Er===Fi){yn++;break}Jn=!0;break;case"!":if(Er===Fi&&rr("<!",fa)){Er=mo;break}Jn=!0;break;case"-":if(Er===mo&&rr("!--",fa)){Er=uo;break}Jn=!0;break;case'"':case"'":Er===Fi&&(Qn===Hn?Qn=null:Qn||(Qn=Hn)),Jn=!0;break;case"E":case"e":if(Er===mo&&rr("doctype",fa)){Er=Fi;break}Jn=!0;break;case">":if(yn>0){yn--;break}if(Qn)break;if(Er===Fi){if(Qn=null,Er=Zi,De){hn+=">";var ja=so(hn);Tt.indexOf(ja.toLowerCase())!==-1?en+=hn:en+=Rt,hn=""}else en+=Rt;break}if(Er===mo||Er===uo&&rr("-->",fa)){Qn=null,Er=Zi,hn="";break}Jn=!0;break;default:Jn=!0}if(Jn)switch(Er){case Zi:en+=Hn;break;case Fi:De&&(hn+=Hn);break}}return en}var La=null;function ds(){return La!==null||(typeof R.g=="object"&&R.g.Object===Object?La=R.g:typeof self=="object"&&self.Object===Object?La=self:La=new Function("return this")()),La}var os=ds(),Nt=os.v;function At(){return this===os.v&&(os.v=Nt),this}var ut="1.4.0",yt={camelCase:Ke,capitalize:k,decapitalize:$t,kebabCase:ce,lowerCase:D,snakeCase:we,swapCase:ye,titleCase:re,upperCase:Pe,count:Qe,countGraphemes:$r,countSubstrings:an,countWhere:nr,countWords:Tr,escapeHtml:_r,escapeRegExp:nn,unescapeHtml:oa,sprintf:Ut,vprintf:ze,indexOf:va,lastIndexOf:_a,search:fi,charAt:fe,codePointAt:fn,first:Xr,graphemeAt:Cn,last:Qr,prune:Gr,slice:on,substr:sr,substring:lr,truncate:Wt,insert:Ba,latinise:qi,pad:gi,padLeft:Rn,padRight:tr,repeat:xr,replace:ji,replaceAll:Po,reverse:Ii,reverseGrapheme:ho,slugify:Ji,splice:Xi,tr:Oi,trim:Qa,trimLeft:un,trimRight:Fo,wordWrap:de,endsWith:qr,includes:ri,isAlpha:Bn,isAlphaDigit:Sa,isBlank:ci,isDigit:_i,isEmpty:li,isLowerCase:Ai,isNumeric:Ea,isString:F,isUpperCase:ro,matches:Yo,startsWith:Bi,chars:no,codePoints:Oo,graphemes:Vi,split:po,words:Ae,stripBom:yo,stripTags:bo,noConflict:At,version:ut};function Ct(Pt,Tt){this._wrappedValue=Pt,this._explicitChain=Tt}Ct.prototype.value=function(){return this._wrappedValue},Ct.prototype.valueOf=function(){return this.value()},Ct.prototype.toJSON=function(){return this.value()},Ct.prototype.toString=function(){return String(this.value())},Ct.prototype.chain=function(){return new Ct(this._wrappedValue,!0)},Ct.prototype.thru=function(Pt){return typeof Pt=="function"?new Ct(Pt(this._wrappedValue),this._explicitChain):this},Ct.prototype._explicitChain=!0;function ve(Pt){return function(){for(var Tt=arguments.length,H=Array(Tt),gt=0;gt<Tt;gt++)H[gt]=arguments[gt];var Rt=Pt.apply(void 0,[this._wrappedValue].concat(H));return this._explicitChain||typeof Rt=="string"?new Ct(Rt,this._explicitChain):Rt}}Object.keys(yt).forEach(function(Pt){Ct.prototype[Pt]=ve(yt[Pt])});function ke(Pt){return new Ct(Pt,!0)}var er=Object.assign||function(Pt){for(var Tt=1;Tt<arguments.length;Tt++){var H=arguments[Tt];for(var gt in H)Object.prototype.hasOwnProperty.call(H,gt)&&(Pt[gt]=H[gt])}return Pt};function yr(Pt){return new Ct(Pt,!1)}return er(yr,yt,{chain:ke}),yr})}}]);
